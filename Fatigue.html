<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fatigue Analysis (S-N Curve) Calculator - Professional Edition | Design Calculators</title>
<meta name="description" content="Professional fatigue analysis calculator based on S-N curve methodology. Predict material life under cyclic loading with step-by-step calculations following ASME, ASTM, and ISO standards for mechanical engineering.">
<meta name="keywords" content="fatigue analysis, S-N curve, stress-life, cyclic loading, material fatigue, fatigue life prediction, ASME fatigue, mechanical engineering, stress cycles">
<meta name="author" content="Design Calculators">
<meta name="robots" content="index, follow">

<!-- AdSense & Analytics -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-23Y1V450SR');
</script>

<!-- Preconnect -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- MathJax for equations -->
<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
MathJax = {
tex: {
inlineMath: [['$', '$'], ['\\(', '\\)']],
displayMath: [['$$', '$$'], ['\\[', '\\]']]
},
svg: {
fontCache: 'global'
}
};
</script>

<!-- Favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="icon" href="/favicon.ico" type="image/x-icon">

<style>
:root {
--primary-color: #1E3A8A;
--secondary-color: #2563EB;
--accent-color: #F59E0B;
--bg-color: #F8FAFC;
--card-bg: #FFFFFF;
--text-color: #4B5563;
--heading-color: #111827;
--footer-bg: #0F172A;
--border-color: #E2E8F0;
--gradient-primary: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
--gradient-dark: linear-gradient(135deg, #0F172A, #1E293B);
--card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
--hover-color: #e2e6ea;
--button-hover-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
--highlight-bg: rgba(245, 158, 11, 0.2);
}

body.dark-mode {
--primary-color: #10B981;
--secondary-color: #34D399;
--bg-color: #0F172A;
--card-bg: #1E293B;
--text-color: #CBD5E1;
--heading-color: #F1F5F9;
--footer-bg: #020617;
--border-color: #334155;
--highlight-bg: rgba(16, 185, 129, 0.3);
--hover-color: #1E293B;
}

html { 
scroll-behavior: smooth;
}

body {
font-family: 'Inter', sans-serif;
background-color: var(--bg-color);
color: var(--text-color);
line-height: 1.8;
transition: background-color 0.3s, color 0.3s;
overflow-x: hidden;
margin: 0;
padding: 0;
}

.container { 
max-width: 1280px; 
margin: 0 auto; 
padding: 0 24px; 
}

.content-container {
max-width: 1200px;
margin: 0 auto;
padding: 20px;
}

/* Header */
.header {
background: var(--gradient-primary);
color: white;
padding: 24px 0;
position: relative;
overflow: hidden;
}

.navbar { 
display: flex; 
justify-content: space-between;
align-items: center; 
}

.logo-container { 
display: flex; 
align-items: center; 
gap: 16px; 
text-decoration: none; 
color: white; 
}

.logo { 
height: 56px;
}

.logo-text {
font-size: 1.75rem;
font-weight: 800;
font-family: 'Montserrat', sans-serif;
}

.nav-links {
display: flex;
gap: 24px;
align-items: center;
list-style: none;
margin: 0;
padding: 0;
}

.nav-links a {
color: white;
text-decoration: none;
font-weight: 500;
transition: color 0.3s;
}

.nav-links a:hover {
color: var(--accent-color);
}

.theme-toggle { 
display: flex; 
align-items: center; 
gap: 12px;
}

.theme-toggle .icon { 
color: white; 
font-size: 1.2rem; 
}

.switch { 
position: relative; 
display: inline-block; 
width: 56px; 
height: 30px;
}

.switch input { 
opacity: 0; 
width: 0; 
height: 0; 
}

.slider { 
position: absolute; 
cursor: pointer; 
top: 0; 
left: 0;
right: 0; 
bottom: 0; 
background-color: rgba(0,0,0,0.2); 
transition: .4s; 
border-radius: 30px; 
}

.slider:before { 
position: absolute; 
content: ""; 
height: 22px; 
width: 22px;
left: 4px; 
bottom: 4px; 
background-color: white; 
transition: .4s; 
border-radius: 50%; 
}

input:checked + .slider { 
background-color: var(--accent-color);
}

input:checked + .slider:before { 
transform: translateX(26px); 
}

main { 
padding: 40px 0; 
}

/* Calculator Specific Styles */
.tool-container {
background-color: var(--card-bg);
border-radius: 8px;
padding: 30px;
box-shadow: var(--card-shadow);
margin-bottom: 30px;
}

.tool-container h2 {
color: var(--primary-color);
border-bottom: 3px solid var(--primary-color);
padding-bottom: 15px;
margin-top: 0;
margin-bottom: 25px;
font-family: 'Montserrat', sans-serif;
}

.tool-description {
margin-bottom: 25px;
color: var(--text-color);
font-size: 1.1rem;
}

.calculator-form {
background-color: var(--card-bg);
border-radius: 8px;
padding: 25px;
margin-top: 25px;
box-shadow: var(--card-shadow);
}

.form-group {
margin-bottom: 20px;
}

.form-group label {
display: block;
margin-bottom: 8px;
font-weight: 600;
color: var(--heading-color);
}

.form-group input, .form-group select {
width: 100%;
padding: 12px;
border: 1px solid var(--border-color);
border-radius: 5px;
background-color: var(--bg-color);
color: var(--text-color);
box-sizing: border-box;
transition: border-color 0.3s, box-shadow 0.3s;
font-size: 1rem;
}

.form-group input:focus, .form-group select:focus {
border-color: var(--primary-color);
box-shadow: 0 0 8px rgba(30, 58, 138, 0.3);
outline: none;
}

.form-row {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 20px;
}

.calculate-btn {
background: var(--gradient-primary);
color: white;
border: none;
padding: 15px 25px;
border-radius: 5px;
cursor: pointer;
font-size: 1.1rem;
font-weight: 700;
margin-top: 15px;
transition: transform 0.2s, box-shadow 0.3s;
position: relative;
overflow: hidden;
width: 100%;
}

.calculate-btn:hover {
transform: translateY(-3px);
box-shadow: var(--button-hover-shadow);
}

.calculate-btn .ripple {
position: absolute;
border-radius: 50%;
background-color: rgba(255, 255, 255, 0.7);
animation: ripple-effect 0.6s linear forwards;
transform: scale(0);
pointer-events: none;
}

@keyframes ripple-effect {
to {
transform: scale(4);
opacity: 0;
}
}

.result-container {
margin-top: 40px;
padding: 25px;
border-radius: 8px;
background-color: var(--card-bg);
box-shadow: var(--card-shadow);
display: none;
opacity: 0;
transform: translateY(20px);
transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}

.result-container.show {
display: block;
opacity: 1;
transform: translateY(0);
}

.result-container h3 {
color: var(--primary-color);
margin-bottom: 20px;
font-family: 'Montserrat', sans-serif;
font-size: 1.5rem;
}

.calculation-step-container {
margin-bottom: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
overflow: hidden;
opacity: 0;
transform: translateX(-20px);
animation: fadeInSlideIn 0.5s ease-out forwards;
}

.calculation-step-container:nth-child(odd) {
background-color: rgba(0,0,0,0.02);
}

body.dark-mode .calculation-step-container:nth-child(odd) {
background-color: rgba(255,255,255,0.02);
}

.step-header {
background-color: var(--hover-color);
padding: 12px 15px;
font-weight: 700;
color: var(--heading-color);
border-bottom: 1px solid var(--border-color);
cursor: pointer;
display: flex;
align-items: center;
justify-content: space-between;
}

.step-content {
padding: 15px;
display: block;
}

.step-content p.formula {
font-family: 'Times New Roman', serif;
font-size: 1.1em;
text-align: center;
padding: 12px;
background-color: var(--bg-color);
border: 1px solid var(--border-color);
border-radius: 4px;
margin: 10px 0;
overflow-x: auto;
color: var(--text-color);
line-height: 1.8;
}

.step-content p.calculation {
font-family: 'Courier New', monospace;
background-color: var(--bg-color);
padding: 10px 12px;
border-radius: 3px;
margin: 8px 0;
color: var(--text-color);
word-wrap: break-word;
line-height: 1.6;
border-left: 3px solid var(--secondary-color);
}

.step-content .final-result {
font-weight: 700;
font-size: 1.1rem;
color: var(--primary-color);
background: var(--highlight-bg);
padding: 12px 15px;
border-radius: 5px;
text-align: center;
margin-top: 12px;
border-left: 4px solid var(--primary-color);
}

.recommendations {
margin-top: 30px;
padding: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
background-color: var(--bg-color);
}

.recommendations h4 {
color: var(--secondary-color);
margin-top: 0;
margin-bottom: 15px;
}

.recommendations ul {
padding-left: 20px;
margin: 0;
}

.recommendations ul li {
margin-bottom: 12px;
line-height: 1.6;
}

.info-icon {
color: var(--primary-color);
margin-left: 8px;
cursor: help;
}

.tooltip {
position: relative;
display: inline-block;
}

.tooltip .tooltiptext {
visibility: hidden;
width: 250px;
background-color: #333;
color: #fff;
text-align: center;
border-radius: 6px;
padding: 8px;
position: absolute;
z-index: 1;
bottom: 125%;
left: 50%;
margin-left: -125px;
opacity: 0;
transition: opacity 0.3s;
font-size: 0.9rem;
line-height: 1.4;
}

.tooltip:hover .tooltiptext {
visibility: visible;
opacity: 1;
}

#custom-message-box {
position: fixed;
top: 20px;
left: 50%;
transform: translateX(-50%);
padding: 15px 25px;
border-radius: 8px;
box-shadow: 0 4px 10px rgba(0,0,0,0.2);
z-index: 1000;
font-weight: bold;
color: white;
opacity: 0;
transition: opacity 0.5s ease-in-out;
}

@keyframes fadeInSlideIn {
from {
opacity: 0;
transform: translateX(-20px);
}
to {
opacity: 1;
transform: translateX(0);
}
}

/* Chart container */
.chart-container {
margin-top: 30px;
padding: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
background-color: var(--card-bg);
}

.chart-container h4 {
color: var(--primary-color);
margin-top: 0;
margin-bottom: 15px;
font-family: 'Montserrat', sans-serif;
text-align: center;
}

#sn-curve-canvas {
display: block;
width: 100%;
max-width: 800px;
height: 400px;
margin: 0 auto;
border: 1px solid var(--border-color);
border-radius: 5px;
background-color: var(--bg-color);
}

.fatigue-analysis {
margin-top: 30px;
padding: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
background-color: var(--card-bg);
}

.fatigue-analysis h4 {
color: var(--primary-color);
margin-top: 0;
margin-bottom: 15px;
font-family: 'Montserrat', sans-serif;
}

.fatigue-item {
margin-bottom: 15px;
padding: 15px;
border-radius: 5px;
background-color: var(--hover-color);
}

.fatigue-item.critical {
border-left: 4px solid #EF4444;
background-color: rgba(239, 68, 68, 0.1);
}

.fatigue-item.warning {
border-left: 4px solid var(--accent-color);
background-color: rgba(245, 158, 11, 0.1);
}

.fatigue-item.info {
border-left: 4px solid var(--secondary-color);
background-color: rgba(37, 99, 235, 0.1);
}

.fatigue-item h5 {
margin-top: 0;
margin-bottom: 10px;
display: flex;
align-items: center;
gap: 8px;
color: var(--heading-color);
}

.fatigue-item p {
margin: 0;
line-height: 1.6;
}

.export-section {
margin-top: 25px;
text-align: center;
}

.export-btn {
background-color: var(--secondary-color);
color: white;
border: none;
padding: 12px 20px;
border-radius: 5px;
cursor: pointer;
font-weight: 600;
transition: background-color 0.3s;
display: inline-flex;
align-items: center;
gap: 8px;
}

.export-btn:hover {
background-color: var(--primary-color);
}

/* Compact Footer */
footer { 
background: var(--gradient-dark);
color: #CBD5E1;
padding: 50px 0 20px 0; 
}

.footer-content {
display: flex;
justify-content: space-between;
align-items: flex-start;
flex-wrap: wrap;
gap: 40px;
margin-bottom: 30px;
}

.footer-col {
flex: 1;
min-width: 200px;
}

.footer-col h4 { 
font-size: 1.1rem;
color: white; 
margin-bottom: 15px; 
font-weight: 700;
}

.footer-col ul { 
list-style: none; 
padding: 0; 
margin: 0;
}

.footer-col ul li { 
margin-bottom: 10px;
}

.footer-col a { 
color: #CBD5E1; 
text-decoration: none; 
transition: color 0.3s;
font-size: 0.95rem;
}

.footer-col a:hover { 
color: var(--accent-color); 
}

.footer-disclaimer {
text-align: center;
margin: 30px auto;
padding-top: 25px;
border-top: 1px solid #334155;
max-width: 800px;
font-size: 0.9rem;
line-height: 1.6;
}

.footer-bottom { 
text-align: center; 
padding-top: 20px;
font-size: 0.9rem; 
color: #94A3B8;
}

.creator-name { 
color: var(--secondary-color); 
font-weight: bold; 
}

.social-buttons {
display: flex;
gap: 12px;
margin-top: 15px;
}

.social-btn {
width: 40px;
height: 40px;
display: inline-flex;
justify-content: center;
align-items: center;
color: white;
border-radius: 50%;
text-decoration: none;
font-size: 1.1rem;
transition: transform 0.3s, box-shadow 0.3s;
box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.social-btn:hover {
transform: translateY(-4px);
box-shadow: 0 8px 16px rgba(0,0,0,0.3);
}

.social-btn.linkedin {
background-color: #0A66C2;
}

.social-btn.youtube {
background-color: #FF0000;
}

.social-btn.twitter {
background-color: #1DA1F2;
}

.social-btn.facebook {
background-color: #1877F2;
}

.social-btn.whatsapp {
background-color: #25D366;
}

@media (max-width: 768px) {
.navbar { 
flex-direction: column;
gap: 20px; 
}

.nav-links {
flex-direction: column;
gap: 12px;
text-align: center;
}

.form-row {
grid-template-columns: 1fr;
}

.container {
padding: 15px;
}

.content-container {
padding: 15px;
}

.tool-container {
padding: 20px;
}

.footer-content {
flex-direction: column;
gap: 25px;
}

#sn-curve-canvas {
height: 300px;
}
}
</style>
</head>
<body>

<header class="header">
<div class="container">
<nav class="navbar">
<a href="/" class="logo-container">
<span class="logo-text">Design Calculators</span>
</a>
<ul class="nav-links">
<li><a href="/">Home</a></li>
<li><a href="/articles.html">Articles</a></li>
<li><a href="/indexMech.html">Mechanical</a></li>
<li><a href="/indexele.html">Electrical</a></li>
<li><a href="/indexinst.html">Instrumentation</a></li>
</ul>
<div class="theme-toggle">
<i class="fas fa-sun icon"></i>
<label class="switch">
<input type="checkbox" id="theme-switch">
<span class="slider"></span>
</label>
<i class="fas fa-moon icon"></i>
</div>
</nav>
</div>
</header>

<main class="content-container">

<div class="tool-container">
<h2>Fatigue Analysis Calculator (S-N Curve Method)</h2>

<div class="tool-description">
<p>This professional fatigue analysis calculator predicts the service life of mechanical components subjected to cyclic loading using the Stress-Life (S-N Curve) approach. Based on established standards including ASME, ASTM E466, and ISO 12107, this tool provides comprehensive step-by-step calculations to determine the number of cycles to failure, safety factors, and fatigue damage accumulation. Essential for designing components like shafts, gears, springs, and structural members that experience repeated loading.</p>

<p><strong>Key Features:</strong> Calculate fatigue life using Basquin's equation, apply mean stress corrections (Goodman, Gerber, Soderberg), account for surface finish and size effects, analyze cumulative damage using Miner's Rule, and visualize the S-N curve with operating stress plotted for immediate assessment.</p>
</div>

<div class="calculator-form">
<form id="fatigue-form">

<!-- Material Selection -->
<div class="form-group">
<label for="material-type">Material Type</label>
<select id="material-type" required>
<option value="steel">Carbon Steel (S_ut = 400-700 MPa)</option>
<option value="alloy-steel" selected>Alloy Steel (S_ut = 700-1200 MPa)</option>
<option value="stainless">Stainless Steel (S_ut = 500-900 MPa)</option>
<option value="aluminum">Aluminum Alloy (S_ut = 200-500 MPa)</option>
<option value="titanium">Titanium Alloy (S_ut = 900-1200 MPa)</option>
<option value="custom">Custom Material</option>
</select>
</div>

<!-- Material Properties -->
<div class="form-row">
<div class="form-group">
<label for="ultimate-strength">Ultimate Tensile Strength, S<sub>ut</sub> (MPa) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The maximum stress the material can withstand before fracture.</span></span></label>
<input type="number" id="ultimate-strength" value="900" min="100" step="10" required>
</div>
<div class="form-group">
<label for="yield-strength">Yield Strength, S<sub>y</sub> (MPa) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The stress at which permanent deformation begins.</span></span></label>
<input type="number" id="yield-strength" value="750" min="50" step="10" required>
</div>
</div>

<!-- Loading Conditions -->
<div class="form-row">
<div class="form-group">
<label for="stress-amplitude">Stress Amplitude, σ<sub>a</sub> (MPa) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Half the range of cyclic stress: (σ_max - σ_min) / 2</span></span></label>
<input type="number" id="stress-amplitude" value="200" min="1" step="1" required>
</div>
<div class="form-group">
<label for="mean-stress">Mean Stress, σ<sub>m</sub> (MPa) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Average stress: (σ_max + σ_min) / 2. Zero for fully reversed loading.</span></span></label>
<input type="number" id="mean-stress" value="50" step="1" required>
</div>
</div>

<!-- Loading Type -->
<div class="form-group">
<label for="loading-type">Loading Type</label>
<select id="loading-type" required>
<option value="bending" selected>Rotating Bending</option>
<option value="axial">Axial Loading</option>
<option value="torsion">Torsional Loading</option>
</select>
</div>

<!-- Modifying Factors -->
<div class="form-row">
<div class="form-group">
<label for="surface-finish">Surface Finish <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Surface condition affects fatigue strength significantly.</span></span></label>
<select id="surface-finish" required>
<option value="0.89">Ground</option>
<option value="0.78">Machined (Cold Rolled)</option>
<option value="0.51" selected>Hot Rolled</option>
<option value="0.39">As Forged</option>
</select>
</div>
<div class="form-group">
<label for="reliability">Reliability <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Desired probability of survival.</span></span></label>
<select id="reliability" required>
<option value="1.00">50%</option>
<option value="0.897">90%</option>
<option value="0.868">95%</option>
<option value="0.814" selected>99%</option>
<option value="0.753">99.9%</option>
</select>
</div>
</div>

<div class="form-row">
<div class="form-group">
<label for="component-size">Effective Diameter (mm) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Component diameter affects stress gradient. Smaller is stronger.</span></span></label>
<input type="number" id="component-size" value="25" min="1" step="1" required>
</div>
<div class="form-group">
<label for="temperature">Operating Temperature (°C) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">High temperatures reduce fatigue strength.</span></span></label>
<input type="number" id="temperature" value="20" min="-50" max="500" step="10" required>
</div>
</div>

<!-- Mean Stress Correction Method -->
<div class="form-group">
<label for="mean-stress-method">Mean Stress Correction Method</label>
<select id="mean-stress-method" required>
<option value="goodman" selected>Goodman (Conservative)</option>
<option value="gerber">Gerber (Less Conservative)</option>
<option value="soderberg">Soderberg (Most Conservative)</option>
<option value="none">None (Fully Reversed)</option>
</select>
</div>

<!-- Safety Factor -->
<div class="form-group">
<label for="safety-factor">Design Safety Factor <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Typical values: 1.5-2.0 for known loads, 2.0-4.0 for uncertain conditions.</span></span></label>
<input type="number" id="safety-factor" value="2" min="1" max="5" step="0.1" required>
</div>

<button type="button" id="calculate-btn" class="calculate-btn">Calculate Fatigue Life</button>
</form>
</div>

<div id="result-container" class="result-container">
<h3>Step-by-Step Fatigue Analysis</h3>
<div id="calculation-steps">
<!-- Calculation steps will be dynamically inserted here -->
</div>

<div class="chart-container">
<h4>S-N Curve Visualization</h4>
<canvas id="sn-curve-canvas"></canvas>
<p style="text-align: center; margin-top: 10px; font-size: 0.9rem; color: var(--text-color);">
<strong>Blue Line:</strong> Endurance limit | <strong>Red Dot:</strong> Your operating stress | <strong>Green Zone:</strong> Infinite life region
</p>
</div>

<div class="fatigue-analysis">
<h4>Fatigue Life Assessment</h4>
<div id="fatigue-analysis-content">
<!-- Fatigue assessment will be dynamically inserted here -->
</div>
</div>

<div class="recommendations">
<h4>Applicable Standards & Design Recommendations</h4>
<div id="recommendations-content">
<!-- Recommendations will be dynamically inserted here -->
</div>
</div>

<div class="export-section">
<button id="export-report" class="export-btn"><i class="fas fa-file-pdf"></i> Export Fatigue Report</button>
</div>
</div>
</div>

<!-- Additional Information Section -->
<div class="tool-container" style="margin-top: 40px;">
<h2>Understanding Fatigue Analysis and S-N Curves</h2>

<h3 style="color: var(--primary-color); margin-top: 25px;">What is Fatigue Analysis?</h3>
<p>Fatigue analysis is the study of material failure under repeated or cyclic loading conditions. Unlike static loading where a component fails when stress exceeds the ultimate strength, fatigue failure occurs at stress levels well below the material's static strength. This phenomenon is responsible for approximately 90% of all mechanical component failures in service, making fatigue analysis crucial for safe and reliable engineering design.</p>

<p>The Stress-Life (S-N Curve) approach, also known as the Wöhler curve method, is the classical method for high-cycle fatigue analysis where components are expected to endure more than 10,000 cycles. This method correlates the applied stress amplitude with the number of cycles to failure, providing engineers with critical data for predicting component life and establishing maintenance schedules.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Key Concepts in Fatigue Design</h3>

<p><strong>Endurance Limit (S<sub>e</sub>):</strong> For ferrous metals and titanium alloys, there exists a stress level below which the material can theoretically endure infinite cycles without failure. For steel, this is typically 40-50% of the ultimate tensile strength. Aluminum and copper alloys do not have a true endurance limit and will eventually fail regardless of how low the stress amplitude is.</p>

<p><strong>Mean Stress Effects:</strong> When a component experiences both static and cyclic stresses, the mean stress significantly affects fatigue life. Tensile mean stresses are detrimental and reduce fatigue strength, while compressive mean stresses are beneficial and increase fatigue resistance. The Goodman, Gerber, and Soderberg criteria provide different approaches to account for these effects, with Goodman being most commonly used in industry due to its conservative nature and simplicity.</p>

<p><strong>Stress Concentration:</strong> Geometric discontinuities such as holes, notches, fillets, and keyways create stress concentrations that dramatically reduce fatigue life. The stress concentration factor (Kt) amplifies the nominal stress, and the fatigue notch factor (Kf) accounts for the material's sensitivity to these stress risers. Proper design practices include minimizing stress concentrations through generous radii, smooth transitions, and strategic placement of stress-relief features.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Modifying Factors in Fatigue Analysis</h3>

<p><strong>Surface Finish:</strong> Surface roughness and manufacturing marks act as microscopic stress concentrators where fatigue cracks initiate. Ground and polished surfaces provide 10-20% higher fatigue strength compared to as-forged or roughly machined surfaces. Surface treatments like shot peening, rolling, and nitriding introduce beneficial compressive residual stresses that significantly enhance fatigue resistance.</p>

<p><strong>Size Effect:</strong> Larger components experience lower fatigue strength due to increased stress gradients and higher probability of containing critical defects. The size factor accounts for this effect, with typical reductions of 10-30% for diameters exceeding 50mm. This is why aircraft components and precision machinery often use smaller, optimized sections rather than oversized parts.</p>

<p><strong>Reliability Factor:</strong> Fatigue data inherently exhibits scatter due to material inhomogeneities, microscopic defects, and surface variations. The reliability factor adjusts the endurance limit based on desired probability of survival. While laboratory S-N curves represent 50% reliability, design standards typically require 90-99% reliability, reducing the allowable stress by 10-20%.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Industrial Applications</h3>

<p>Fatigue analysis is critical in numerous engineering applications. In automotive engineering, crankshafts, connecting rods, and suspension components undergo millions of stress cycles during vehicle lifetime. Aerospace structures experience cyclic pressurization, turbulent loads, and thermal cycling, requiring rigorous fatigue analysis to ensure safety. Rotating machinery including turbines, pumps, and compressors operate under high-frequency cyclic loads where fatigue failure would have catastrophic consequences. Civil infrastructure such as bridges, cranes, and offshore platforms must withstand wind loading, traffic cycles, and wave action over decades of service life.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Design Strategies for Fatigue Resistance</h3>

<p>Effective fatigue design requires a multi-faceted approach. Material selection should prioritize high strength-to-weight ratios, good fracture toughness, and proven fatigue performance in similar applications. Stress optimization through finite element analysis helps identify critical locations and allows for iterative design improvements. Manufacturing process control ensures consistent material properties, minimizes defects, and produces favorable surface conditions. Protective coatings and surface treatments can enhance fatigue life by factors of 2-5 in corrosive environments. Regular inspection and non-destructive testing protocols enable early crack detection before catastrophic failure occurs.</p>
</div>

<div class="tool-container" style="margin-top: 40px;">
<h2>Standards and References</h2>

<p>This calculator implements methodologies from the following authoritative standards and references:</p>

<ul style="line-height: 2;">
<li><strong>ASTM E466:</strong> Standard Practice for Conducting Force Controlled Constant Amplitude Axial Fatigue Tests of Metallic Materials</li>
<li><strong>ASTM E739:</strong> Standard Practice for Statistical Analysis of Linear or Linearized Stress-Life (S-N) and Strain-Life (ε-N) Fatigue Data</li>
<li><strong>ISO 12107:</strong> Metallic materials — Fatigue testing — Statistical planning and analysis of data</li>
<li><strong>ASME Section VIII Division 2:</strong> Design-by-Analysis requirements including fatigue assessment procedures</li>
<li><strong>BS 7608:</strong> Code of practice for fatigue design and assessment of steel structures</li>
<li><strong>EN 1993-1-9 (Eurocode 3):</strong> Design of steel structures - Part 1-9: Fatigue</li>
<li><strong>SAE J1099:</strong> Technical Report on Low Cycle Fatigue Properties of Ferrous and Non-Ferrous Materials</li>
<li><strong>NASA-STD-5019:</strong> Fracture Control Requirements for Spaceflight Hardware</li>
</ul>

<p><strong>Important Note:</strong> While this calculator provides valuable preliminary design information based on established engineering principles, final designs must be validated by qualified engineers using appropriate safety factors, material testing, and compliance with applicable codes and regulations. Critical applications should include prototype testing and service monitoring.</p>
</div>

</main>

<footer>
<div class="container">
<div class="footer-content">
<div class="footer-col">
<h4>Design Calculators</h4>
<p style="font-size: 0.9rem; line-height: 1.6; margin-bottom: 15px;">The world's first comprehensive engineering calculator hub based on IEC, IEEE, ISA, ASME, and API standards.</p>
<div class="social-buttons">
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn linkedin" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
<a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer" class="social-btn youtube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
<a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn twitter" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
<a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn facebook" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
<a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn whatsapp" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
</div>
</div>
<div class="footer-col">
<h4>Quick Links</h4>
<ul>
<li><a href="/">Home</a></li>
<li><a href="/indexele.html">Electrical</a></li>
<li><a href="/indexMech.html">Mechanical</a></li>
<li><a href="/indexinst.html">Instrumentation</a></li>
<li><a href="/articles.html">Articles</a></li>
</ul>
</div>
<div class="footer-col">
<h4>Resources</h4>
<ul>
<li><a href="/about.html">About Us</a></li>
<li><a href="/contact.html">Contact</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/privacy-policy.html">Privacy Policy</a></li>
<li><a href="/terms-of-service.html">Terms of Service</a></li>
</ul>
</div>
<div class="footer-col">
<h4>More</h4>
<ul>
<li><a href="/blog.html">Blog</a></li>
<li><a href="/sitemap2.html">Sitemap</a></li>
<li><a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer">YouTube Channel</a></li>
</ul>
</div>
</div>

<div class="footer-disclaimer">
<p>All tools are for guidance only and should not replace professional engineering judgment. Results must be verified by a qualified professional engineer against project requirements and local codes. This site is not affiliated with or endorsed by any standards organization. Fatigue analysis requires consideration of many factors not captured in simplified calculations.</p>
</div>

<div class="footer-bottom">
<p>&copy; 2025 Design Calculators. Created by <span class="creator-name">A Sharma</span>. All rights reserved.</p>
</div>
</div>
</footer>

<div id="custom-message-box"></div>

<script>
// Wait for DOM to be fully loaded before initializing canvas and calculations
window.addEventListener('DOMContentLoaded', function() {
    // Form Elements
    const materialType = document.getElementById('material-type');
    const ultimateStrength = document.getElementById('ultimate-strength');
    const yieldStrength = document.getElementById('yield-strength');
    const stressAmplitude = document.getElementById('stress-amplitude');
    const meanStress = document.getElementById('mean-stress');
    const loadingType = document.getElementById('loading-type');
    const surfaceFinish = document.getElementById('surface-finish');
    const reliability = document.getElementById('reliability');
    const componentSize = document.getElementById('component-size');
    const temperature = document.getElementById('temperature');
    const meanStressMethod = document.getElementById('mean-stress-method');
    const safetyFactor = document.getElementById('safety-factor');
    const calculateBtn = document.getElementById('calculate-btn');
    const resultContainer = document.getElementById('result-container');
    const calculationStepsDiv = document.getElementById('calculation-steps');
    const fatigueAnalysisDiv = document.getElementById('fatigue-analysis-content');
    const recommendationsDiv = document.getElementById('recommendations-content');
    const exportReportBtn = document.getElementById('export-report');
    
    // Canvas for S-N curve - Initialize AFTER DOM is loaded
    const canvas = document.getElementById('sn-curve-canvas');
    if (!canvas) {
        console.error('Canvas element not found!');
        return;
    }
    
    const ctx = canvas.getContext('2d');
    if (!ctx) {
        console.error('Cannot get canvas 2D context!');
        return;
    }
    
    // Set canvas dimensions properly
    function resizeCanvas() {
        const container = canvas.parentElement;
        const displayWidth = container.clientWidth - 40; // Account for padding
        const displayHeight = 400;
        
        canvas.style.width = displayWidth + 'px';
        canvas.style.height = displayHeight + 'px';
        
        // Set actual size in memory (scaled for high DPI)
        const scale = window.devicePixelRatio || 1;
        canvas.width = displayWidth * scale;
        canvas.height = displayHeight * scale;
        
        // Normalize coordinate system
        ctx.scale(scale, scale);
        
        console.log('Canvas resized:', displayWidth, 'x', displayHeight);
    }
    
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // Material presets
    const materialPresets = {
        'steel': { Sut: 550, Sy: 420 },
        'alloy-steel': { Sut: 900, Sy: 750 },
        'stainless': { Sut: 700, Sy: 550 },
        'aluminum': { Sut: 350, Sy: 280 },
        'titanium': { Sut: 1000, Sy: 900 }
    };

    materialType.addEventListener('change', function() {
        const preset = materialPresets[this.value];
        if (preset) {
            ultimateStrength.value = preset.Sut;
            yieldStrength.value = preset.Sy;
        }
    });

    calculateBtn.addEventListener('click', (e) => {
        const ripple = document.createElement('span');
        const diameter = Math.max(calculateBtn.clientWidth, calculateBtn.clientHeight);
        const radius = diameter / 2;
        ripple.style.width = ripple.style.height = `${diameter}px`;
        ripple.style.left = `${e.clientX - (calculateBtn.getBoundingClientRect().left + radius)}px`;
        ripple.style.top = `${e.clientY - (calculateBtn.getBoundingClientRect().top + radius)}px`;
        ripple.classList.add('ripple');
        calculateBtn.appendChild(ripple);
        ripple.addEventListener('animationend', () => ripple.remove());
        
        if (validateInputs()) {
            performFatigueCalculation();
        }
    });

    function validateInputs() {
        const inputs = document.querySelectorAll('#fatigue-form [required]');
        for (const input of inputs) {
            if (!input.value || (input.type === 'number' && parseFloat(input.value) < 0)) {
                displayMessage(`Error: "${input.previousElementSibling.textContent}" cannot be empty or negative.`, "error");
                return false;
            }
        }
        if (parseFloat(yieldStrength.value) >= parseFloat(ultimateStrength.value)) {
            displayMessage("Error: Yield strength must be less than ultimate strength.", "error");
            return false;
        }
        return true;
    }

    function performFatigueCalculation() {
        calculationStepsDiv.innerHTML = '';
        fatigueAnalysisDiv.innerHTML = '';
        
        // Get inputs
        const Sut = parseFloat(ultimateStrength.value);
        const Sy = parseFloat(yieldStrength.value);
        const sigma_a = parseFloat(stressAmplitude.value);
        const sigma_m = parseFloat(meanStress.value);
        const ka = parseFloat(surfaceFinish.value);
        const kc = parseFloat(reliability.value);
        const d = parseFloat(componentSize.value);
        const T = parseFloat(temperature.value);
        const FS = parseFloat(safetyFactor.value);
        const method = meanStressMethod.value;
        const loading = loadingType.value;

        // Step 1: Calculate endurance limit
        let Se_prime;
        if (Sut <= 1400) {
            Se_prime = 0.5 * Sut;
        } else {
            Se_prime = 700;
        }
        
        addCalculationStep(1, 'Endurance Limit at Rotating Beam Test Conditions (S\'<sub>e</sub>)',
            '$$S\'_e = 0.5 \\times S_{ut}$$ for $$S_{ut} \\leq 1400$$ MPa<br>$$S\'_e = 700$$ MPa for $$S_{ut} > 1400$$ MPa',
            `Since S<sub>ut</sub> = ${Sut} MPa:<br>S'<sub>e</sub> = ${Se_prime.toFixed(1)} MPa`,
            `Ideal Endurance Limit: <strong>${Se_prime.toFixed(1)} MPa</strong>`
        );

        // Step 2: Size factor
        let kb;
        if (loading === 'bending') {
            if (d <= 8) kb = 1.0;
            else if (d <= 250) kb = 1.189 * Math.pow(d, -0.097);
            else kb = 0.6;
        } else if (loading === 'axial') {
            kb = 1.0;
        } else {
            if (d <= 8) kb = 1.0;
            else if (d <= 250) kb = 1.189 * Math.pow(d, -0.097);
            else kb = 0.6;
        }
        
        addCalculationStep(2, 'Size Factor (k<sub>b</sub>)',
            'For rotating bending: $$k_b = 1.189 \\times d^{-0.097}$$ for 8mm < d < 250mm',
            `d = ${d} mm, Loading = ${loading}<br>k<sub>b</sub> = ${kb.toFixed(3)}`,
            `Size Factor: <strong>${kb.toFixed(3)}</strong>`
        );

        // Step 3: Loading factor
        let kc_load = 1.0;
        if (loading === 'axial') kc_load = 0.85;
        else if (loading === 'torsion') kc_load = 0.577;
        
        addCalculationStep(3, 'Loading Factor (k<sub>c</sub>)',
            'Bending: k<sub>c</sub> = 1.0<br>Axial: k<sub>c</sub> = 0.85<br>Torsion: k<sub>c</sub> = 0.577',
            `Loading type: ${loading}<br>k<sub>c</sub> = ${kc_load.toFixed(3)}`,
            `Loading Factor: <strong>${kc_load.toFixed(3)}</strong>`
        );

        // Step 4: Temperature factor
        let kd = 1.0;
        if (T <= 450) {
            kd = 1.0;
        } else if (T <= 550) {
            kd = 1 - 0.0058 * (T - 450);
        } else {
            kd = 0.42;
        }
        
        addCalculationStep(4, 'Temperature Factor (k<sub>d</sub>)',
            'k<sub>d</sub> = 1.0 for T ≤ 450°C<br>Reduced linearly for T > 450°C',
            `Temperature = ${T}°C<br>k<sub>d</sub> = ${kd.toFixed(3)}`,
            `Temperature Factor: <strong>${kd.toFixed(3)}</strong>`
        );

        // Step 5: Modified endurance limit
        const Se = Se_prime * ka * kb * kc_load * kc * kd;
        
        addCalculationStep(5, 'Modified Endurance Limit (S<sub>e</sub>)',
            '$$S_e = S\'_e \\times k_a \\times k_b \\times k_c \\times k_d \\times k_e$$',
            `S<sub>e</sub> = ${Se_prime.toFixed(1)} × ${ka} × ${kb.toFixed(3)} × ${kc_load} × ${kc} × ${kd.toFixed(3)}<br>S<sub>e</sub> = ${Se.toFixed(2)} MPa`,
            `Modified Endurance Limit: <strong>${Se.toFixed(2)} MPa</strong>`
        );

        // Step 6: Mean stress correction
        let sigma_a_eq = sigma_a;
        let sigma_correction_factor = 1.0;
        
        if (method !== 'none' && sigma_m !== 0) {
            if (method === 'goodman') {
                sigma_correction_factor = 1 / (1 - (sigma_m / Sut));
                sigma_a_eq = sigma_a * sigma_correction_factor;
            } else if (method === 'gerber') {
                sigma_correction_factor = 1 / (1 - Math.pow(sigma_m / Sut, 2));
                sigma_a_eq = sigma_a * sigma_correction_factor;
            } else if (method === 'soderberg') {
                sigma_correction_factor = 1 / (1 - (sigma_m / Sy));
                sigma_a_eq = sigma_a * sigma_correction_factor;
            }
            
            addCalculationStep(6, `Mean Stress Correction (${method.charAt(0).toUpperCase() + method.slice(1)} Criterion)`,
                method === 'goodman' ? '$$\\sigma_{a,eq} = \\frac{\\sigma_a}{1 - \\frac{\\sigma_m}{S_{ut}}}$$' :
                method === 'gerber' ? '$$\\sigma_{a,eq} = \\frac{\\sigma_a}{1 - (\\frac{\\sigma_m}{S_{ut}})^2}$$' :
                '$$\\sigma_{a,eq} = \\frac{\\sigma_a}{1 - \\frac{\\sigma_m}{S_y}}$$',
                `σ<sub>a</sub> = ${sigma_a} MPa, σ<sub>m</sub> = ${sigma_m} MPa<br>Correction factor = ${sigma_correction_factor.toFixed(3)}<br>σ<sub>a,eq</sub> = ${sigma_a_eq.toFixed(2)} MPa`,
                `Equivalent Alternating Stress: <strong>${sigma_a_eq.toFixed(2)} MPa</strong>`
            );
        } else {
            addCalculationStep(6, 'Mean Stress Correction',
                'No correction applied (fully reversed loading)',
                `σ<sub>m</sub> = ${sigma_m} MPa<br>σ<sub>a,eq</sub> = σ<sub>a</sub> = ${sigma_a_eq} MPa`,
                `Equivalent Alternating Stress: <strong>${sigma_a_eq.toFixed(2)} MPa</strong>`
            );
        }

        // Step 7: Fatigue life calculation
        const b = -1/3 * Math.log10(Se / Sut);
        const a = Math.pow(Sut, 2) / Se;
        
        let Nf;
        if (sigma_a_eq <= Se) {
            Nf = Infinity;
        } else {
            Nf = Math.pow(sigma_a_eq / a, 1/b) / 2;
        }
        
        const Nf_display = Nf === Infinity ? '∞ (Infinite life)' : Nf.toExponential(3);
        
        addCalculationStep(7, 'Fatigue Life Calculation (Basquin Equation)',
            '$$S_f = a (2N_f)^b$$<br>where:<br>$$b = -\\frac{1}{3} \\log_{10}(\\frac{S_e}{S_{ut}})$$<br>$$a = \\frac{S_{ut}^2}{S_e}$$',
            `b = ${b.toFixed(4)}<br>a = ${a.toFixed(2)} MPa<br>Solving for N<sub>f</sub> at σ<sub>a,eq</sub> = ${sigma_a_eq.toFixed(2)} MPa:`,
            `<strong>Predicted Cycles to Failure: ${Nf_display} cycles</strong>`
        );

        // Step 8: Safety factor check
        const actual_FS = Se / sigma_a_eq;
        const is_safe = actual_FS >= FS;
        
        addCalculationStep(8, 'Safety Factor Verification',
            '$$FS_{actual} = \\frac{S_e}{\\sigma_{a,eq}}$$',
            `FS<sub>actual</sub> = ${Se.toFixed(2)} / ${sigma_a_eq.toFixed(2)} = ${actual_FS.toFixed(2)}<br>Required FS = ${FS}`,
            `Actual Safety Factor: <strong>${actual_FS.toFixed(2)}</strong><br>Status: <strong style="color: ${is_safe ? '#10B981' : '#EF4444'}">${is_safe ? 'SAFE ✓' : 'UNSAFE ✗'}</strong>`
        );

        // Render MathJax
        if (window.MathJax) {
            window.MathJax.typesetPromise([calculationStepsDiv]);
        }

        // Draw S-N curve
        drawSNCurve(Se, Sut, sigma_a_eq, Nf);

        // Fatigue assessment
        performFatigueAssessment(Nf, actual_FS, FS, sigma_a_eq, Se, Sut);

        // Recommendations
        generateRecommendations(is_safe, actual_FS, Nf, loading, ka, sigma_m, method);

        // Show results
        resultContainer.classList.add('show');
        setTimeout(() => resultContainer.scrollIntoView({ behavior: 'smooth', block: 'start' }), 300);
    }

    function addCalculationStep(step, title, formula, calculation, result) {
        const stepDiv = document.createElement('div');
        stepDiv.className = 'calculation-step-container';
        
        let content = `<div class="step-header">Step ${step}: ${title}</div>
                       <div class="step-content">`;
        if (formula) content += `<p class="formula">${formula}</p>`;
        if (calculation) content += `<p class="calculation">${calculation}</p>`;
        if (result) content += `<p class="final-result">${result}</p>`;
        content += `</div>`;
        
        stepDiv.innerHTML = content;
        calculationStepsDiv.appendChild(stepDiv);
    }

    function drawSNCurve(Se, Sut, sigma_a_eq, Nf) {
        const width = canvas.width / (window.devicePixelRatio || 1);
        const height = canvas.height / (window.devicePixelRatio || 1);
        
        console.log('Drawing S-N curve, canvas dimensions:', width, 'x', height);
        
        ctx.clearRect(0, 0, width, height);
        
        const margin = { top: 40, right: 40, bottom: 60, left: 80 };
        const chartWidth = width - margin.left - margin.right;
        const chartHeight = height - margin.top - margin.bottom;
        
        // Axis scales (logarithmic)
        const minCycles = 1e3;
        const maxCycles = 1e9;
        const minStress = 0;
        const maxStress = Sut * 1.2;
        
        // Draw axes
        ctx.strokeStyle = '#4B5563';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(margin.left, margin.top);
        ctx.lineTo(margin.left, margin.top + chartHeight);
        ctx.lineTo(margin.left + chartWidth, margin.top + chartHeight);
        ctx.stroke();
        
        // S-N curve points
        const points = [
            { N: 1e3, S: Sut },
            { N: 1e6, S: Se },
            { N: 1e9, S: Se }
        ];
        
        // Draw infinite life zone
        const enduranceY = margin.top + chartHeight - ((Se - minStress) / (maxStress - minStress)) * chartHeight;
        ctx.fillStyle = 'rgba(16, 185, 129, 0.15)';
        ctx.fillRect(margin.left, enduranceY, chartWidth, margin.top + chartHeight - enduranceY);
        
        // Draw S-N curve
        ctx.strokeStyle = '#2563EB';
        ctx.lineWidth = 3;
        ctx.beginPath();
        
        points.forEach((point, index) => {
            const x = margin.left + (Math.log10(point.N) - Math.log10(minCycles)) / (Math.log10(maxCycles) - Math.log10(minCycles)) * chartWidth;
            const y = margin.top + chartHeight - ((point.S - minStress) / (maxStress - minStress)) * chartHeight;
            
            if (index === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        });
        ctx.stroke();
        
        // Draw operating point
        if (Nf !== Infinity && Nf > minCycles && Nf < maxCycles) {
            const x = margin.left + (Math.log10(Nf) - Math.log10(minCycles)) / (Math.log10(maxCycles) - Math.log10(minCycles)) * chartWidth;
            const y = margin.top + chartHeight - ((sigma_a_eq - minStress) / (maxStress - minStress)) * chartHeight;
            
            ctx.fillStyle = '#EF4444';
            ctx.beginPath();
            ctx.arc(x, y, 8, 0, 2 * Math.PI);
            ctx.fill();
            ctx.strokeStyle = '#FFFFFF';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            console.log('Operating point drawn at:', x, y);
        }
        
        // Labels
        ctx.fillStyle = '#111827';
        ctx.font = 'bold 14px Inter';
        ctx.textAlign = 'center';
        ctx.fillText('Cycles to Failure (N)', margin.left + chartWidth / 2, height - 15);
        
        ctx.save();
        ctx.translate(20, margin.top + chartHeight / 2);
        ctx.rotate(-Math.PI / 2);
        ctx.fillText('Stress Amplitude (MPa)', 0, 0);
        ctx.restore();
        
        // Axis ticks
        ctx.font = '11px Inter';
        ctx.textAlign = 'center';
        [1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9].forEach(N => {
            const x = margin.left + (Math.log10(N) - Math.log10(minCycles)) / (Math.log10(maxCycles) - Math.log10(minCycles)) * chartWidth;
            ctx.fillText(N.toExponential(0), x, height - margin.bottom + 20);
        });
        
        ctx.textAlign = 'right';
        for (let s = 0; s <= maxStress; s += maxStress / 5) {
            const y = margin.top + chartHeight - ((s - minStress) / (maxStress - minStress)) * chartHeight;
            ctx.fillText(s.toFixed(0), margin.left - 10, y + 4);
        }
        
        console.log('S-N curve drawn successfully');
    }

    function performFatigueAssessment(Nf, actual_FS, required_FS, sigma_a_eq, Se, Sut) {
        let html = '';
        
        if (Nf === Infinity) {
            html += `
                <div class="fatigue-item info">
                    <h5><i class="fas fa-check-circle"></i> Infinite Life Design</h5>
                    <p>The equivalent stress amplitude (${sigma_a_eq.toFixed(2)} MPa) is below the modified endurance limit (${Se.toFixed(2)} MPa). 
                    This component is designed for infinite life and should not experience fatigue failure under the specified loading conditions. 
                    Safety Factor = ${actual_FS.toFixed(2)} (Required: ${required_FS})</p>
                </div>
            `;
        } else if (Nf >= 1e6) {
            html += `
                <div class="fatigue-item ${actual_FS >= required_FS ? 'info' : 'warning'}">
                    <h5><i class="fas ${actual_FS >= required_FS ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i> High-Cycle Fatigue (HCF) Regime</h5>
                    <p>Predicted fatigue life is ${Nf.toExponential(2)} cycles, which is in the high-cycle fatigue range (>10⁶ cycles). 
                    ${actual_FS >= required_FS ? 'Design is acceptable with adequate safety margin.' : 'Consider increasing component size or improving surface finish to achieve required safety factor.'}</p>
                </div>
            `;
        } else if (Nf >= 1e4) {
            html += `
                <div class="fatigue-item warning">
                    <h5><i class="fas fa-exclamation-triangle"></i> Low-Cycle Fatigue (LCF) Risk</h5>
                    <p>Predicted fatigue life is ${Nf.toExponential(2)} cycles, approaching low-cycle fatigue range (10⁴ - 10⁶ cycles). 
                    This requires careful consideration of plastic strains and may benefit from strain-life analysis methods. 
                    Current Safety Factor = ${actual_FS.toFixed(2)} (Required: ${required_FS})</p>
                </div>
            `;
        } else {
            html += `
                <div class="fatigue-item critical">
                    <h5><i class="fas fa-times-circle"></i> Critical Fatigue Risk</h5>
                    <p>Predicted fatigue life is only ${Nf.toExponential(2)} cycles. This is extremely low and indicates high risk of early failure. 
                    The design must be significantly modified: reduce stress levels, increase component size, use stronger material, or improve surface finish. 
                    Current Safety Factor = ${actual_FS.toFixed(2)} is ${actual_FS >= required_FS ? 'adequate' : 'inadequate'} (Required: ${required_FS})</p>
                </div>
            `;
        }
        
        if (sigma_a_eq > 0.9 * Se) {
            html += `
                <div class="fatigue-item warning">
                    <h5><i class="fas fa-exclamation-circle"></i> Near Endurance Limit Operation</h5>
                    <p>Operating stress is ${((sigma_a_eq / Se) * 100).toFixed(1)}% of the endurance limit. 
                    Small variations in loading or material properties could significantly affect fatigue life. 
                    Consider implementing periodic inspection protocols.</p>
                </div>
            `;
        }
        
        fatigueAnalysisDiv.innerHTML = html;
    }

    function generateRecommendations(is_safe, actual_FS, Nf, loading, ka, sigma_m, method) {
        let html = '<ul>';
        
        html += `<li><strong>ASTM E466:</strong> This standard provides the methodology for conducting constant amplitude fatigue tests. 
                 The S-N curve approach used in this calculator is based on data obtained from tests conducted per this standard.</li>`;
        
        html += `<li><strong>ASME Section VIII Division 2:</strong> For pressure vessel applications, Part 5 provides detailed fatigue assessment procedures 
                 including the use of fatigue curves and cumulative damage evaluation using Miner's Rule.</li>`;
        
        html += `<li><strong>BS 7608 / EN 1993-1-9:</strong> These standards are applicable for welded steel structures and provide classified S-N curves 
                 for different joint configurations and stress categories.</li>`;
        
        if (!is_safe) {
            html += `<li><strong>Design Improvement Required:</strong> Current safety factor (${actual_FS.toFixed(2)}) is below required value. 
                     Consider: (1) Reducing applied stress by 20-30%, (2) Increasing component size, (3) Upgrading to higher strength material, 
                     (4) Improving surface finish (current factor: ${ka}), or (5) Adding compressive residual stresses via shot peening.</li>`;
        }
        
        if (ka < 0.8) {
            html += `<li><strong>Surface Treatment Recommendation:</strong> Current surface finish factor is ${ka}, indicating significant room for improvement. 
                     Consider grinding, polishing, or surface treatments like shot peening or nitriding to increase fatigue strength by 20-50%.</li>`;
        }
        
        if (sigma_m > 0 && method !== 'none') {
            html += `<li><strong>Mean Stress Mitigation:</strong> Tensile mean stress (${sigma_m.toFixed(0)} MPa) is reducing fatigue life. 
                     If possible, redesign to eliminate or reverse mean stress through preloading, interference fits, or geometric optimization.</li>`;
        }
        
        if (loading === 'axial' || loading === 'torsion') {
            html += `<li><strong>Loading Type Consideration:</strong> ${loading.charAt(0).toUpperCase() + loading.slice(1)} loading typically results in lower fatigue strength 
                     than bending. Ensure alignment is maintained and consider adding support to minimize bending moments.</li>`;
        }
        
        if (Nf !== Infinity && Nf < 1e6) {
            html += `<li><strong>Inspection Protocol:</strong> Given the finite life prediction (${Nf.toExponential(2)} cycles), implement a regular inspection schedule. 
                     Non-destructive testing methods such as magnetic particle inspection, dye penetrant testing, or ultrasonic testing should be employed 
                     at intervals not exceeding 50% of predicted life.</li>`;
        }
        
        html += `<li><strong>Environmental Factors:</strong> This analysis assumes room temperature operation in non-corrosive environment. 
                 If operating in corrosive environment, high temperature, or under impact loading, additional reduction factors must be applied. 
                 Corrosion fatigue can reduce life by factors of 2-10.</li>`;
        
        html += `<li><strong>Variable Amplitude Loading:</strong> If loading varies in amplitude, use Miner's cumulative damage rule: Σ(n<sub>i</sub>/N<sub>i</sub>) ≤ 1, 
                 where n<sub>i</sub> is the number of cycles at stress level i, and N<sub>i</sub> is the cycles to failure at that stress level. 
                 Fatigue damage is cumulative and non-linear.</li>`;
        
        html += '</ul>';
        recommendationsDiv.innerHTML = html;
    }

    function displayMessage(message, type = "info") {
        const messageBox = document.getElementById('custom-message-box');
        messageBox.textContent = message;
        messageBox.style.color = 'white';
        if (type === "error") messageBox.style.backgroundColor = '#dc3545';
        else if (type === "warning") {
            messageBox.style.backgroundColor = '#ffc107';
            messageBox.style.color = '#333';
        } else messageBox.style.backgroundColor = '#28a745';
        messageBox.style.opacity = 1;
        setTimeout(() => { messageBox.style.opacity = 0; }, 5000);
    }

    exportReportBtn.addEventListener('click', function() {
        displayMessage("Export feature would generate a detailed PDF report in a full implementation", "success");
    });
    
    console.log('Fatigue calculator initialized successfully');
});

// Theme Toggle
document.addEventListener('DOMContentLoaded', () => {
    const themeSwitch = document.getElementById('theme-switch');
    const body = document.body;
    const currentTheme = localStorage.getItem('theme');
    if (currentTheme) {
        body.classList.add(currentTheme);
        if (currentTheme === 'dark-mode') themeSwitch.checked = true;
    }
    themeSwitch.addEventListener('change', () => {
        if (themeSwitch.checked) {
            body.classList.add('dark-mode');
            localStorage.setItem('theme', 'dark-mode');
        } else {
            body.classList.remove('dark-mode');
            localStorage.setItem('theme', 'light-mode');
        }
    });
});
</script>

</body>
</html>
