<!DOCTYPE html>
<html lang="en">
<head>
    <!-- AdSense & Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>
    
    <!-- SEO Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radar Level Beam Angle & Reflection Calculator - Industrial Grade Analysis</title>
    <link rel="canonical" href="https://designcalculators.co.in/ultrasoniclevel.html" />
    <meta name="description" content="Professional Radar Level Transmitter Calculator. Calculate beam width/footprint, assess reflection loss based on dielectric constant, and check for wall/obstruction interference.">
    <meta name="keywords" content="radar level calculator, beam angle, dielectric constant, reflection loss, false echo, 80 ghz radar, instrumentation, tank level measurement, FMCW">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.3/jspdf.plugin.autotable.min.js"></script>

    <!-- MathJax for Formulas -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)'], ['$', '$']],
                displayMath: [['\\[', '\\]'], ['$$', '$$']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <style>
        /* --- CORE THEME --- */
        :root {
            --primary: #4F46E5; /* Radar Indigo */
            --secondary: #4338CA;
            --accent: #F59E0B;
            --success: #10B981;
            --danger: #EF4444;
            --warning: #F59E0B;
            --bg: #F8FAFC;
            --card: #FFFFFF;
            --text: #334155;
            --heading: #0F172A;
            --footer-bg: #0F172A;
            --border: #E2E8F0;
            --grad: linear-gradient(135deg, var(--primary), var(--secondary));
            --grad-dark: linear-gradient(135deg, #0F172A, #1E293B);
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode {
            --primary: #818CF8;
            --secondary: #A5B4FC;
            --bg: #0F172A;
            --card: #1E293B;
            --text: #CBD5E1;
            --heading: #F1F5F9;
            --footer-bg: #020617;
            --border: #334155;
            --accent: #F59E0B;
        }

        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.7;
            margin: 0;
            padding: 0;
        }

        .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; }

        /* Header & Nav */
        header {
            background: var(--grad);
            color: white;
            padding: 24px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-container {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: white;
        }
        .logo-text {
            font-size: 1.75rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
        }
        .logo-subtitle {
            font-size: 0.8rem;
            margin: 4px 0 0 0;
            color: #E0E7FF;
            opacity: 0.9;
        }
        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        .nav-links a:hover { color: var(--accent); }
        
        /* Theme Toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }
        .switch {
            position: relative;
            width: 56px;
            height: 30px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.2);
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px; width: 22px;
            left: 4px; bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--accent); }
        input:checked + .slider:before { transform: translateX(26px); }

        /* Main Content & Cards */
        main { padding: 40px 0; }
        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }
        .card h2 {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            margin-top: 0;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        h3 {
            color: var(--heading);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            margin-top: 25px;
            margin-bottom: 20px;
        }

        /* Forms */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-group { margin-bottom: 0; }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--heading);
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            background-color: var(--bg);
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
        body.dark-mode .form-group input:focus { 
            box-shadow: 0 0 0 3px rgba(129, 140, 248, 0.1);
        }

        /* Buttons */
        .btn {
            background: var(--grad);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
            transition: all 0.3s;
            width: 100%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(79, 70, 229, 0.4);
        }
        .btn-outline {
            background: transparent;
            border: 2px solid var(--secondary);
            color: var(--secondary);
            font-size: 0.9rem;
            padding: 8px 16px;
        }
        .btn-outline:hover {
            background: var(--secondary);
            color: white;
        }
        .button-wrapper {
            display: flex;
            justify-content: center;
            width: 100%;
            padding-top: 15px;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        /* Quick Load Buttons */
        .preset-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .preset-btn {
            padding: 8px 12px;
            font-size: 0.85rem;
            border: 1px solid var(--border);
            background: var(--card);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .preset-btn:hover {
            background: var(--bg);
            border-color: var(--secondary);
            color: var(--secondary);
        }

        /* Results Layout */
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }
        @media (max-width: 1024px) {
            .results-grid { grid-template-columns: 1fr; }
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-radius: 8px;
            overflow: hidden;
        }
        .results-table th, .results-table td {
            padding: 14px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        .results-table th {
            background: var(--grad);
            color: white;
            font-weight: 700;
        }
        .results-table tr:nth-child(even) { background-color: var(--bg); }
        .results-table td:first-child {
            font-weight: 600;
            color: var(--heading);
        }
        .highlight { color: var(--success); font-weight: 700; }
        .danger-text { color: var(--danger); font-weight: 700; }

        /* Canvas Container */
        .chart-container {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            position: relative;
            height: 400px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        canvas {
            max-width: 100%;
            max-height: 100%;
        }

        /* Educational Section Styling */
        .insight-card {
            background: linear-gradient(135deg, var(--card), rgba(79, 70, 229, 0.03));
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid var(--secondary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        .insight-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .insight-card h4 {
            color: var(--secondary);
            font-size: 1.3rem;
            margin: 0 0 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Montserrat', sans-serif;
        }
        .insight-card p, .insight-card ul {
            margin: 10px 0;
            line-height: 1.8;
            color: var(--text);
        }
        .insight-card ul { padding-left: 20px; }
        .insight-card li { margin-bottom: 8px; }

        /* Formulas & Steps */
        .formula {
            background: var(--bg);
            border-left: 3px solid var(--accent);
            padding: 15px;
            margin: 12px 0;
            font-size: 1.1rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            color: var(--heading);
        }
        .calculation-step {
            font-family: 'Courier New', monospace;
            background-color: rgba(0,0,0,0.03);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            border-left: 4px solid var(--success);
            font-size: 0.95rem;
            line-height: 1.6;
        }
        body.dark-mode .calculation-step { background-color: rgba(255,255,255,0.05); }

        /* Vector Input Group Styling */
        .vector-input-group {
            background: var(--bg);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
            position: relative;
        }
        .vector-input-header {
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Print Styling */
        @media print {
            header, footer, .education-section, .theme-toggle, .button-wrapper, .preset-container { display: none !important; }
            .card { border: none; shadow: none; padding: 0; }
            .container { width: 100%; max-width: 100%; padding: 0; }
            .results-grid { grid-template-columns: 1fr 1fr; }
            .chart-container { height: 300px; page-break-inside: avoid; }
        }

        /* Message Box */
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 28px;
            border-radius: 8px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.25);
            z-index: 10000;
            font-weight: 600;
            color: white;
            opacity: 0;
            transition: all 0.4s;
            display: none;
        }
        .message-box.show { display: block; opacity: 1; top: 30px; }
        .hidden { display: none; }

        /* Tooltip */
        .info-icon { color: var(--secondary); margin-left: 5px; cursor: help; }
        .tooltip { position: relative; display: inline-block; }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: 400;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }

        /* Footer */
        footer {
            background: var(--grad-dark);
            color: #CBD5E1;
            padding: 50px 0 20px 0;
            margin-top: 60px;
        }
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 30px;
        }
        .footer-col { flex: 1; min-width: 200px; }
        .footer-col h4 { color: white; margin-bottom: 15px; font-weight: 700; }
        .footer-col ul { list-style: none; padding: 0; margin: 0; }
        .footer-col a { color: #CBD5E1; text-decoration: none; transition: color 0.3s; }
        .footer-col a:hover { color: var(--accent); }
        .social-buttons { display: flex; gap: 12px; margin-top: 15px; }
        .social-btn {
            width: 40px; height: 40px;
            display: flex; justify-content: center; align-items: center;
            color: white; border-radius: 50%;
            font-size: 1.1rem; transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .social-btn:hover { transform: translateY(-4px); }
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.youtube { background-color: #FF0000; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .footer-disclaimer {
            text-align: center; padding-top: 25px;
            border-top: 1px solid #334155;
            max-width: 800px; margin: 0 auto;
            font-size: 0.9rem;
        }
        .footer-bottom {
            text-align: center; padding-top: 20px;
            font-size: 0.9rem; color: #94A3B8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 0 15px; }
            .navbar { flex-direction: column; gap: 20px; }
            .nav-links { flex-direction: column; gap: 12px; text-align: center; }
            .form-row { grid-template-columns: 1fr; }
            .card { padding: 20px; }
            .footer-content { flex-direction: column; gap: 25px; }
        }
    </style>
    <link rel="stylesheet" href="styles.css">
    <meta property="og:title" content="Radar Level Beam Angle & Reflection Calculator - Industrial Grade Analysis">
    <meta property="og:description" content="Professional Radar Level Transmitter Calculator. Calculate beam width/footprint, assess reflection loss based on dielectric constant, and check for wall/obstruction interference.">
</head>
<body>
    <div id="message-box" class="message-box"></div>
    <header class="header">
        <div class="header-bg-animation"></div>
        <div class="container">
            <nav class="navbar">
                <a href="/" class="logo-container">
                    <img src="logo.png" alt="Design Calculators Logo" class="logo">
                    <span class="logo-text">Design Calculators</span>
                </a>

                <div class="nav-menu">
                    <button class="mobile-menu-toggle" aria-label="Toggle menu">
                        <i class="fas fa-bars"></i>
                    </button>

                    <ul class="nav-links">
                        <li><a href="/index.html">Home</a></li>
                        
    <li class="dropdown">
        <a href="/indexele.html" class="dropdown-toggle">Electrical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/arcflash.html">Arc Flash Calculator</a><a href="/breaker-sizing.html">Breaker Sizing</a><a href="/cable-thermal-rating.html">Cable Ampacity</a><a href="/comm-cable-loss.html">Comm Cable Loss</a><a href="/earth-conductor-size.html">Earth Conductor Size</a><a href="/generatorsizing.html">Generator Sizing</a><a href="/harmonicsanalyser.html">Harmonics Analyser</a><a href="/insulationresistance.html">Insulation Resistance</a><a href="/logicgate.html">Logic Gates Simulator</a><a href="/motor-starting.html">Motor Starting Current</a><a href="/pcbtrace.html">PCB Trace Width</a><a href="/protection-device.html">Protection Device</a><a href="/resistor.html">Resistor Color Code</a><a href="/solarcable.html">Solar Cable Sizing</a><a href="/systemxrcalculator.html">System X/R Ratio</a><a href="/transmissionline.html">Transmission Line</a><a href="/vfd-selection.html">VFD Selection Tool</a></div><div><a href="/batterylife.html">Battery Life Estimator</a><a href="/busbarampacity.html">Busbar Ampacity</a><a href="/cablepulling.html">Cable Pulling Tension</a><a href="/conduit-fill.html">Conduit Fill Calculator</a><a href="/earthingfaultsimulator.html">Earthing Fault Simulator</a><a href="/grounding.html">Grounding System Design</a><a href="/hvac-sizing.html">HVAC Sizing Calculator</a><a href="/lcresonancecalculator.html">LC Resonance Calculator</a><a href="/maintenance-guide.html">Maintenance Guide</a><a href="/nemaipconvertor.html">NEMA to IP Converter</a><a href="/power-factor.html">Power Factor Correction</a><a href="/relay-coordination.html">Relay Coordination</a><a href="/short-circuit.html">Short Circuit Current</a><a href="/solarpvarray.html">Solar PV Array</a><a href="/transformer-calculator.html">Transformer Calculator</a><a href="/unit-converter.html">Unit Converter</a><a href="/voltage-drop.html">Voltage Drop Calculator</a></div><div><a href="/battery-sizing.html">Battery Sizing (AH)</a><a href="/busbarshortcircuit.html">Busbar Short Circuit</a><a href="/cable-sizing.html">Cable Sizing Calculator</a><a href="/ctsaturation.html">CT Saturation</a><a href="/equipment-relay.html">Equipment Relay Setting</a><a href="/harmonic-distortion.html">Harmonic Distortion</a><a href="/industriallighting.html">Industrial Lighting</a><a href="/lighting-calulator.html">Lighting Calculator</a><a href="/motor-efficiency.html">Motor Efficiency</a><a href="/neutral-earth-fault-current.html">Neutral Earth Fault</a><a href="/powertriangletool.html">Power Triangle</a><a href="/electricalresidentialload.html">Residential Load Calc</a><a href="/skindepth.html">Skin Depth Calculator</a><a href="/symmetricalcomponents.html">Symmetrical Components</a><a href="/transformerinrush.html">Transformer Inrush</a><a href="/ups-sizing.html">UPS Sizing</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexele.html" class="view-all-link">View All Electrical Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexinst.html" class="dropdown-toggle">Instrumentation <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/adc-resolution.html">ADC Resolution</a><a href="/capillarylengthtemperatureerror.html">Capillary Error</a><a href="/cv-kv-valve.html">Cv/Kv Valve Sizing</a><a href="/dp-level.html">DP Level Measurement</a><a href="/hydrostatic-level.html">Hydrostatic Level</a><a href="/instrument-range.html">Instrument Range</a><a href="/loop-impedance.html">Loop Impedance</a><a href="/orifice-plate.html">Orifice Plate Beta</a><a href="/pid-tuning.html">PID Tuning</a><a href="/profibus.html">Profibus Calculator</a><a href="/tempsensorresponse.html">Response Time (Tau)</a><a href="/rtd-lead-comp.html">RTD Lead Wire Comp.</a><a href="/sealfluidzeroshift.html">Seal Fluid Shift</a><a href="/snr-calculator.html">SNR Calculator</a><a href="/thermocoupleextensioncable.html">TC Extension Cable</a><a href="/thermowellwakefreq.html">Thermowell Frequency</a><a href="/pressuretransmitteroverrange.html">Tx Overrange</a><a href="/valvecavitationcalculator.html">Valve Cavitation</a><a href="/vibrationtransmitter.html">Vibration Tx</a><a href="/zoneclassificationhelper.html">Zone Classification</a></div><div><a href="/baud-rate.html">Baud Rate Calculator</a><a href="/gascompressibility.html">Compressibility (Z)</a><a href="/dbcalculator.html">dB Gain/Loss Calc</a><a href="/flowprofiledistortioncalculator.html">Flow Distortion</a><a href="/impulselinefreezing.html">Impulse Freezing</a><a href="/intrinsic-safety.html">Intrinsic Safety Loop</a><a href="/measurement.html">Measurement Uncertainty</a><a href="/ph-temp-comp.html">pH Temp Compensation</a><a href="/plcscantime.html">PLC Scan Time</a><a href="/pressurereliefvalve.html">PRV Sizing (API 520)</a><a href="/reynoldsnumbercal.html">Reynolds Number</a><a href="/rtdselfheating.html">RTD Self-Heating</a><a href="/signal-scaling.html">Signal Scaling</a><a href="/staticheadcal.html">Static Head</a><a href="/temperaturesensorlag.html">Temp Sensor Lag</a><a href="/thermowell-wake.html">Thermowell Wake</a><a href="/ultrasoniclevel.html">Ultrasonic Level</a><a href="/valve-cv.html">Valve Cv Viewer</a><a href="/wetlegdensitycompensation.html">Wet Leg Compensation</a></div><div><a href="/capacitance-level.html">Capacitance Level</a><a href="/controlvalvenoise.html">Control Valve Noise</a><a href="/dp-flow-conversion.html">DP Flow Conversion</a><a href="/hartdevices.html">HART Devices</a><a href="/impulse-pressure-drop.html">Impulse Pressure Drop</a><a href="/junctionbox.html">Junction Box Sizing</a><a href="/orifice-flow.html">Orifice Flow Calculator</a><a href="/pid-symbol-library.html">PID Symbol Library</a><a href="/power-supply-load.html">Power Supply Load</a><a href="/prvsizing.html">Relief Orifice Area</a><a href="/rtdexcitationcurrentselection.html">RTD Excitation</a><a href="/rtd-tc-conversion.html">RTD/TC Conversion</a><a href="/sil.html">SIL Calculator</a><a href="/steamflow.html">Steam Flow</a><a href="/thermocouplecjccalculator.html">Thermocouple CJC</a><a href="/turndown.html">Turndown Ratio</a><a href="/controlvalveauthority.html">Valve Authority</a><a href="/controlvalveleakage.html">Valve Leakage Class</a><a href="/wirelesshart.html">WirelessHART Range</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexinst.html" class="view-all-link">View All Instrumentation Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexmech.html" class="dropdown-toggle">Mechanical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/aircompressorfad.html">Air Compressor FAD</a><a href="/asme-vessel.html">ASME Vessel Design</a><a href="/belt-pulley.html">Belt & Pulley</a><a href="/bolt-torque.html">Bolt Torque</a><a href="/controlvalveactuator.html">Control Valve Actuator</a><a href="/frictionfactortool.html">Darcy Friction Factor</a><a href="/fatigue.html">Fatigue Analysis</a><a href="/fuel-combustion.html">Fuel Combustion</a><a href="/gas.html">Gas Properties</a><a href="/heat-exchanger.html">Heat Exchanger</a><a href="/hydroliccylinder.html">Hydraulic Cylinder</a><a href="/material-compatibility.html">Material Compatibility</a><a href="/nozzle-reinforcement.html">Nozzle Reinforcement</a><a href="/openchannelflow.html">Open Channel Flow</a><a href="/pipescheduletool.html">Pipe Schedule & Stress</a><a href="/pump-head.html">Pump Head</a><a href="/shaft-power-torque.html">Shaft Power & Torque</a><a href="/steam-table.html">Steam Table</a><a href="/vibrationanalysis.html">Vibration Analysis</a></div><div><a href="/air-flow-duct.html">Air Flow Duct Sizing</a><a href="/beam-deflection.html">Beam Deflection</a><a href="/bernoulli-equation.html">Bernoulli Equation</a><a href="/chiller-capacity.html">Chiller Capacity</a><a href="/cooling-tower-sizing.html">Cooling Tower Sizing</a><a href="/darcy-weisbach.html">Darcy-Weisbach</a><a href="/finned-tube-heat-transfer.html">Finned Tube Heat</a><a href="/furnace-heat-duty.html">Furnace Heat Duty</a><a href="/gear-design.html">Gear Design</a><a href="/heat-loss-pipes.html">Heat Loss Pipes</a><a href="/jacketed-vessel-heat-transfer.html">Jacketed Vessel</a><a href="/metalweight.html">Metal Weight Calculator</a><a href="/nptbspthreadcalculator.html">NPT/BSP Threads</a><a href="/overall-heat-transfer.html">Overall Heat Transfer</a><a href="/pipe-stress-flexibility.html">Pipe Stress</a><a href="/pump-power.html">Pump Power</a><a href="/specific-heat-enthalpy.html">Specific Heat</a><a href="/storage-tank-volume.html">Storage Tank Volume</a><a href="/weldingstress.html">Welding Stress</a></div><div><a href="/allowable-stress-safety-factor.html">Allowable Stress</a><a href="/bearinglife.html">Bearing Life Calculator</a><a href="/boiler-efficiency.html">Boiler Efficiency</a><a href="/compressor-power.html">Compressor Power</a><a href="/corrosion-rate.html">Corrosion Rate</a><a href="/fan-laws.html">Fan Laws</a><a href="/foundation.html">Foundation Design</a><a href="/gas-laws.html">Gas Laws</a><a href="/hardness.html">Hardness Converter</a><a href="/conduction-convection-radiation.html">Heat Transfer Modes</a><a href="/machining.html">Machining Calculator</a><a href="/momentofinertia.html">Moment of Inertia</a><a href="/oring.html">O-Ring Sizing</a><a href="/pipe-flow.html">Pipe Flow Calculator</a><a href="/psychrometric.html">Psychrometric Calc</a><a href="/reynolds-number.html">Reynolds Number</a><a href="/spring.html">Spring Design</a><a href="/thermal-expansion.html">Thermal Expansion</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexmech.html" class="view-all-link">View All Mechanical Tools â†’</a>
            </div>
        </div>
    </li>
                        <li><a href="/index.html#articles">Articles</a></li>
                        <li><a href="/sitemap2.html">Site Map</a></li>
                    </ul>

                    <div class="theme-toggle">
                        <i class="fas fa-sun icon"></i>
                        <label class="switch">
                            <input type="checkbox" id="theme-switch">
                            <span class="slider"></span>
                        </label>
                        <i class="fas fa-moon icon"></i>
                    </div>
                </div>
            </nav>
    </header>

    <main class="container">
        <div class="card">
            <h2><i class="fas fa-satellite-dish"></i> Radar Level Beam & Reflection Analyzer</h2>
            
            <div class="tool-description">
                <p>Calculate the <strong>Beam Footprint (Diameter)</strong> and expected <strong>Reflection Quality</strong> for Radar Level Transmitters (FMCW / Pulse). Use this industrial tool to validate mounting positions, check for <strong>obstruction interference</strong> (tank walls, agitators), and determine if the medium's dielectric constant ($\epsilon_r$) allows for reliable measurement.</p>
            </div>

            <div class="calculator-form">
                <form id="radar-form">
                    <!-- Controls Row -->
                    <div class="form-row" style="align-items: end;">
                        <div class="form-group">
                            <label>Quick Load Scenarios:</label>
                            <div class="preset-container" style="margin-bottom: 0;">
                                <button type="button" class="preset-btn" onclick="loadPreset('26ghz')"><i class="fas fa-water"></i> 26 GHz (Standard)</button>
                                <button type="button" class="preset-btn" onclick="loadPreset('80ghz')"><i class="fas fa-crosshairs"></i> 80 GHz (Narrow Beam)</button>
                                <button type="button" class="preset-btn" onclick="loadPreset('oil')"><i class="fas fa-tint"></i> Low Dielectric (Oil)</button>
                            </div>
                        </div>
                    </div>

                    <!-- Sensor Specs -->
                    <h4 style="color: var(--primary); margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 5px;">1. Radar Specifications</h4>
                    <div class="form-row">
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-wave-square"></i> Frequency / Type</div>
                            <div class="form-group">
                                <label for="radar-freq">Freq [GHz] <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Standard: 26 GHz (C-Band/K-Band). High: 80 GHz (W-Band). 6 GHz is legacy.</span></span></label>
                                <select id="radar-freq" onchange="updateBeamAngle()">
                                    <option value="6">6 GHz (Legacy/Foam)</option>
                                    <option value="26" selected>26 GHz (Standard)</option>
                                    <option value="80">80 GHz (High Precision)</option>
                                </select>
                            </div>
                        </div>
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-bullseye"></i> Antenna</div>
                            <div class="form-group">
                                <label for="antenna-size">Size <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Horn or Lens diameter. Larger antenna = Narrower beam.</span></span></label>
                                <select id="antenna-size" onchange="updateBeamAngle()">
                                    <option value="40">40mm (1.5")</option>
                                    <option value="50">50mm (2")</option>
                                    <option value="80" selected>80mm (3")</option>
                                    <option value="100">100mm (4")</option>
                                </select>
                            </div>
                        </div>
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-compress-arrows-alt"></i> Beam Angle</div>
                            <div class="form-group">
                                <label for="beam-angle">Angle (α) [deg] <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Calculated -3dB beam angle based on Freq & Size. You can override this.</span></span></label>
                                <input type="number" id="beam-angle" value="10" step="1">
                            </div>
                        </div>
                    </div>

                    <!-- Process & Geometry -->
                    <h4 style="color: var(--primary); margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 5px; margin-top: 20px;">2. Process & Installation</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="media-type">Medium (Dielectric $\epsilon_r$)</label>
                            <select id="media-type" onchange="updateDielectric()">
                                <option value="80">Water ($\epsilon_r \approx 80$)</option>
                                <option value="25">Alcohol / Acetone ($\epsilon_r \approx 25$)</option>
                                <option value="3">Oil / Diesel / HC ($\epsilon_r \approx 2-3$)</option>
                                <option value="1.5">Liquid Propane / LPG ($\epsilon_r \approx 1.4-1.9$)</option>
                                <option value="custom">Custom</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="dielectric">Dielectric Constant ($\epsilon_r$) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Lower values (< 2.0) cause weak reflections and may require stilling wells.</span></span></label>
                            <input type="number" id="dielectric" value="80" step="0.1">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="tank-height">Measurement Distance ($H$) [m] <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Distance from sensor face to the liquid surface (or tank bottom).</span></span></label>
                            <input type="number" id="tank-height" value="10" step="0.5">
                        </div>
                        <div class="form-group">
                            <label for="obstruction-dist">Dist. to Wall/Obstruction ($d_{obs}$) [m] <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Horizontal distance from the sensor centerline to the nearest tank wall, ladder, or agitator.</span></span></label>
                            <input type="number" id="obstruction-dist" value="1.5" step="0.1">
                        </div>
                    </div>

                    <div class="button-wrapper">
                        <button type="button" id="calculate-btn" class="btn"><i class="fas fa-calculator"></i> Calculate & Visualize</button>
                        <button type="button" id="pdf-btn" class="btn btn-outline"><i class="fas fa-file-pdf"></i> Download PDF</button>
                    </div>
                </form>
            </div>

            <!-- Results Section -->
            <div id="result-container" class="card hidden" style="margin-top: 40px;">
                <h3><i class="fas fa-poll"></i> Analysis Results</h3>
                
                <div class="results-grid">
                    <!-- Left Col: Table -->
                    <div>
                        <h4 style="margin-top: 0; color: var(--primary); margin-bottom: 15px;">Calculated Metrics</h4>
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Value</th>
                                    <th>Unit</th>
                                </tr>
                            </thead>
                            <tbody id="result-table-body">
                                <!-- Dynamic rows -->
                            </tbody>
                        </table>
                        
                        <div style="margin-top: 20px; background: var(--bg); padding: 15px; border-radius: 6px; border: 1px solid var(--border);">
                            <strong><i class="fas fa-info-circle"></i> Installation Status:</strong>
                            <div id="interpretation-text" style="margin-top: 5px; font-size: 0.95rem;"></div>
                        </div>
                    </div>

                    <!-- Right Col: Visual -->
                    <div>
                        <h4 style="margin-top: 0; color: var(--primary); margin-bottom: 15px;">Beam Geometry Visualization</h4>
                        <div class="chart-container">
                            <canvas id="beamCanvas" width="400" height="350"></canvas>
                        </div>
                        <div style="text-align: center; margin-top: 10px; font-size: 0.85rem; color: var(--text);">
                            <span style="color: #64748B;">█ Wall/Obstruction</span> &nbsp;
                            <span style="color: #4F46E5;">▼ Radar Beam</span> &nbsp;
                            <span style="color: #EF4444;">● Interference Zone</span>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: 30px; border-top: 1px solid var(--border); padding-top: 20px;">Step-by-Step Engineering Verification</h4>
                <div id="calculation-details">
                    <!-- Dynamic math steps -->
                </div>

                <div class="standard-reference" style="margin-top: 20px; font-style: italic; color: var(--text);">
                     Calculations based on standard Radar equation optics and reflection coefficient theory ($R = (\frac{\sqrt{\epsilon_r}-1}{\sqrt{\epsilon_r}+1})^2$).
                </div>
            </div>
        </div>

        <!-- EDUCATIONAL CONTENT SECTION (EXPANDED TO ~1500 WORDS EQUIVALENT) -->
        <div class="education-section card">
            <h2><i class="fas fa-lightbulb"></i> Engineering Insights: The Definitive Radar Level Guide</h2>
            
            <!-- SECTION 1: RADAR PHYSICS & DIELECTRIC CONSTANT -->
            <div class="insight-card">
                <h4><i class="fas fa-atom"></i> 1. The Physics of Reflection: Dielectric Constant ($\epsilon_r$)</h4>
                <p>Radar level measurement technology (whether FMCW or Pulse) relies entirely on the principle of electromagnetic reflection. When the radar microwave pulse hits the surface of a medium, a portion of the energy is reflected back to the antenna, and the rest penetrates into the medium. The ratio of reflected energy depends fundamentally on the change in <strong>impedance</strong> between the vapor space (usually $\epsilon_r \approx 1$) and the liquid product.</p>
                
                <p>This relationship is governed by the <strong>Reflection Coefficient ($\Gamma$)</strong>, which is derived from the Dielectric Constant ($\epsilon_r$) of the medium:</p>
                <div class="formula">$$ \Gamma = \frac{\sqrt{\epsilon_r} - \sqrt{\epsilon_{air}}}{\sqrt{\epsilon_r} + \sqrt{\epsilon_{air}}} \approx \frac{\sqrt{\epsilon_r} - 1}{\sqrt{\epsilon_r} + 1} $$</div>
                
                <ul>
                    <li><strong>Conductive / Polar Liquids (Water, Acids, Bases):</strong> These have high dielectric constants ($\epsilon_r > 20$). Water has an $\epsilon_r \approx 80$. Substituting this into the formula gives a very high reflection coefficient. Almost all the radar energy bounces back. This makes water-based applications the easiest for radar, offering strong, distinct echo peaks even at long ranges (30m+).</li>
                    
                    <li><strong>Hydrocarbons / Non-Polar Liquids (Oil, Diesel, LPG, Solvents):</strong> These present the greatest challenge. Typical hydrocarbons have $\epsilon_r$ values between 1.4 and 3.0. 
                        <ul>
                            <li><strong>Example ($\epsilon_r = 2.0$):</strong> $\Gamma = (\sqrt{2}-1)/(\sqrt{2}+1) \approx 0.17$. The <strong>Power Reflection</strong> is $\Gamma^2 \approx 0.03$, meaning only <strong>3%</strong> of the signal is reflected, while <strong>97%</strong> penetrates the liquid.</li>
                        </ul>
                    </li>
                </ul>
                <p><strong>Engineering Implication:</strong> For low dielectric fluids ($\epsilon_r < 2.0$), the surface return is extremely weak. If the tank has a flat metallic bottom, the radar may see through the liquid and track the bottom echo instead, reporting a "Tank Empty" status when full. <strong>Solution:</strong> Use a **Stilling Well (Standpipe)** or **Bypass Chamber**. The metal tube concentrates the radar energy, preventing beam spread and significantly boosting the signal return.</p>
            </div>

            <!-- SECTION 2: FREQUENCY SELECTION -->
            <div class="insight-card">
                <h4><i class="fas fa-broadcast-tower"></i> 2. Frequency Selection: 6 GHz vs 26 GHz vs 80 GHz</h4>
                <p>Choosing the right radar frequency is a trade-off between beam focus, condensation immunity, and foam penetration.</p>
                
                <h5>A. 6 GHz (C-Band) - The Legacy Workhorse</h5>
                <ul>
                    <li><strong>Pros:</strong> Long wavelength (~50mm). Excellent at penetrating heavy foam, condensation, and turbulent surfaces. Ideally suited for dirty process tanks with agitators where coating on the antenna is likely.</li>
                    <li><strong>Cons:</strong> Very wide beam angle (20°-30°). Requires large antennas (6-8") to get a decent signal. Prone to false echoes in narrow tanks.</li>
                </ul>

                <h5>B. 26 GHz (K-Band) - The Standard</h5>
                <ul>
                    <li><strong>Pros:</strong> Good balance. Wavelength (~11mm) allows for smaller antennas (3-4") with decent beam angles (~10°). Standard for water treatment and general chemical storage.</li>
                    <li><strong>Cons:</strong> Can struggle with very thick, dense foam.</li>
                </ul>

                <h5>C. 80 GHz (W-Band) - The Precision Expert</h5>
                <ul>
                    <li><strong>Pros:</strong> Tiny wavelength (~3mm). Allows for extremely focused beams (3°-4°) using small 3" lenses. This "Laser-like" focus avoids internal tank obstructions like heating coils, ladders, and agitators. Excellent for tall, narrow silos (up to 100m).</li>
                    <li><strong>Cons:</strong> The short wavelength is easily scattered by condensation droplets on the lens. Modern 80 GHz radars require optimized lens shapes (convex) and algorithms to ignore near-zone condensation noise.</li>
                </ul>
            </div>

            <!-- SECTION 3: BEAM GEOMETRY -->
            <div class="insight-card">
                <h4><i class="fas fa-ruler-combined"></i> 3. Beam Geometry & Installation Rules</h4>
                <p>The "Beam Angle" quoted in datasheets is usually the <strong>-3dB point</strong> (half-power beam width). However, microwave energy exists outside this cone. To avoid false echoes, engineers must calculate the <strong>Beam Footprint</strong>.</p>
                
                <p><strong>The Footprint Formula:</strong> The diameter ($W$) of the beam at a specific distance ($H$) is calculated as:</p>
                <div class="formula">$$ W = 2 \cdot H \cdot \tan\left(\frac{\alpha}{2}\right) $$</div>
                
                <p><strong>Installation Guideline:</strong></p>
                <ol>
                    <li><strong>Distance from Wall:</strong> Mount the sensor at least <strong>1/6th of the tank diameter</strong> from the wall, but never less than 200mm. Ideally, the calculated beam radius ($W/2$) at the bottom of the tank should not touch the tank wall.</li>
                    <li><strong>Nozzle Height:</strong> Unlike Ultrasonic sensors, Radar sensors can "see" out of nozzles better, but the nozzle must not be too tall or narrow. If the nozzle creates a "tunnel" that encroaches on the beam expansion, it will create "nozzle ringing" noise. <strong>Rule of Thumb:</strong> The nozzle diameter should be greater than the antenna diameter, and the nozzle height should create no more than a few degrees of obstruction.</li>
                    <li><strong>Polarization:</strong> Radar waves are polarized. If measuring near a tank wall or obstruction, rotate the housing. This changes the polarization axis. Often, rotating the device by 90° can reduce the false echo amplitude from a nearby ladder or pipe by 10-20 dB.</li>
                </ol>
            </div>

            <!-- SECTION 4: SOLIDS & DIFFICULT APPLICATIONS -->
            <div class="insight-card">
                <h4><i class="fas fa-cubes"></i> 4. Measuring Solids (Powders, Granules)</h4>
                <p>Solids measurement presents unique challenges compared to liquids:</p>
                <ul>
                    <li><strong>Angle of Repose:</strong> Solids do not form a flat surface; they form a cone during filling and an inverted cone during emptying. The radar signal hits this sloped surface and scatters away from the antenna rather than reflecting directly back. <strong>Solution:</strong> Use an aiming gimbal to point the radar at the surface, or use 80 GHz radar which catches the diffuse scatter better.</li>
                    <li><strong>Dust:</strong> While radar penetrates dust better than ultrasonic, extremely dense dust clouds (like in cement silos) can attenuate high-frequency signals. 26 GHz is often preferred over 80 GHz for extreme dust density.</li>
                    <li><strong>Pull-Forces:</strong> In tall silos, the forces on the antenna/cable from shifting solids can be massive. Non-contact radar is preferred over Guided Wave Radar (GWR) to avoid cable breakage.</li>
                </ul>
            </div>
        </div>
    </main>    <!-- FOOTER -->
        <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <a href="/" class="footer-logo">
                        <img src="logo.png" alt="Design Calculators Logo" loading="lazy" decoding="async">
                        <span class="footer-logo-text">Design Calculators</span>
                    </a>
                    <p class="footer-description">A comprehensive engineering calculator hub based on IEC, IEEE, and
                        global standards.</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn linkedin"
                            aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer"
                            class="social-btn youtube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in&text=Check%20out%20this%20amazing%20engineering%20calculator%20hub!"
                            target="_blank" rel="noopener noreferrer" class="social-btn twitter" aria-label="Twitter"><i
                                class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn facebook"
                            aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn whatsapp"
                            aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="footer-col">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href='/indexele.html'>Electrical Tools</a></li>
                            <li><a href='/indexmech.html'>Mechanical Tools</a></li>
                            <li><a href='/indexinst.html'>Instrumentation Tools</a></li>
                            <li><a href='/about.html'>About Us</a></li>
                            <li><a href='/faq.html'>FAQ</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Learn More</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/@designcalculators" target="_blank"
                                    rel="noopener noreferrer">YouTube Channel</a></li>
                            <li><a href='/contact.html'>Contact Us</a></li>
                            <li><a href='/privacy-policy.html'>Privacy Policy</a></li>
                            <li><a href='/terms-of-service.html'>Terms of Service</a></li>
                            <li><a href='/sitemap2.html'>Sitemap</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Our Network</h4>
                        <ul>
                            <li style="margin-bottom: 12px;">
                                <a href="https://reliabilitytools.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">Reliability Tools</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Reliability
                                    & maintenance engineering calculators.</span>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="https://electrosafe.homes/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">ElectroSafe</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Dedicated
                                    to home electrical safety & protection.</span>
                            </li>
                            <li>
                                <a href="https://knowyourname.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">KnowYourName</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Scientific
                                    name analysis: Phonetics, Ergonomics & Acoustics.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>All calculations are for preliminary engineering design guidance. Final designs must comply with all applicable local and international standards (including but not limited to ASHRAE 90.1, ARI 550/590). Always verify calculations and consult with a licensed professional engineer before implementation or construction.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">Anil Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global State
        let lastResult = null;

        // Beam Angle Lookup Table (Approximate common industry values)
        // Key: Freq_Size (e.g. 26_80) -> Angle in Degrees
        const beamTable = {
            '6_40': 35, '6_50': 28, '6_80': 20, '6_100': 15,
            '26_40': 20, '26_50': 15, '26_80': 10, '26_100': 8,
            '80_40': 7, '80_50': 5, '80_80': 3, '80_100': 3 // 80GHz typically very narrow
        };

        function updateBeamAngle() {
            const f = document.getElementById('radar-freq').value;
            const sz = document.getElementById('antenna-size').value;
            const key = `${f}_${sz}`;
            const angle = beamTable[key] || 10; // Default fallback
            document.getElementById('beam-angle').value = angle;
        }

        function updateDielectric() {
            const val = document.getElementById('media-type').value;
            if (val !== 'custom') {
                document.getElementById('dielectric').value = val;
            }
        }

        function loadPreset(type) {
            if (type === '26ghz') {
                document.getElementById('radar-freq').value = '26';
                document.getElementById('antenna-size').value = '80';
                document.getElementById('media-type').value = '80'; // Water
                updateDielectric();
                updateBeamAngle();
                document.getElementById('tank-height').value = '10';
                document.getElementById('obstruction-dist').value = '1.5';
            } else if (type === '80ghz') {
                document.getElementById('radar-freq').value = '80';
                document.getElementById('antenna-size').value = '80';
                document.getElementById('media-type').value = '80';
                updateDielectric();
                updateBeamAngle();
                document.getElementById('tank-height').value = '15';
                document.getElementById('obstruction-dist').value = '0.5'; // Narrow beam allows close objects
            } else if (type === 'oil') {
                document.getElementById('media-type').value = '3';
                updateDielectric();
            }
            displayMessage(`${type.toUpperCase()} scenario loaded.`, "success");
        }

        function displayMessage(message, type = "info") {
            let messageBox = document.getElementById('message-box');
            messageBox.textContent = message;
            if (type === "error") messageBox.style.backgroundColor = 'var(--danger)';
            else if (type === "success") messageBox.style.backgroundColor = 'var(--success)';
            else messageBox.style.backgroundColor = 'var(--primary)';
            messageBox.classList.add('show');
            setTimeout(() => messageBox.classList.remove('show'), 4000);
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Theme handling
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch && localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                themeSwitch.checked = true;
            }
            if(themeSwitch) {
                themeSwitch.addEventListener('change', function() {
                    document.body.classList.toggle('dark-mode');
                    localStorage.setItem('theme', this.checked ? 'dark' : 'light');
                });
            }

            // Init beam angle
            updateBeamAngle();

            document.getElementById('calculate-btn').addEventListener('click', performCalculation);
            document.getElementById('pdf-btn').addEventListener('click', generatePDF);
        });

        function performCalculation() {
            // 1. Get Inputs
            const getVal = (id) => parseFloat(document.getElementById(id).value);
            
            const f_GHz = getVal('radar-freq');
            const angle_deg = getVal('beam-angle');
            const er = getVal('dielectric');
            const height_m = getVal('tank-height');
            const obs_dist_m = getVal('obstruction-dist');

            if ([f_GHz, angle_deg, er, height_m, obs_dist_m].some(isNaN) || height_m <= 0 || er <= 0) {
                displayMessage("Please enter valid positive numbers.", "error");
                return;
            }

            // 2. Beam Calculation
            // Radius at bottom
            const angle_rad = (angle_deg * Math.PI) / 180;
            const radius_m = height_m * Math.tan(angle_rad / 2);
            const diameter_m = 2 * radius_m;

            // 3. Reflection Calculation
            // Reflection Coeff Gamma
            const sqrt_er = Math.sqrt(er);
            const gamma = Math.abs((sqrt_er - 1) / (sqrt_er + 1));
            const power_reflection_R = gamma * gamma;
            
            // Reflection Loss in dB (Power)
            // dB = -10 log10(R)
            const loss_dB = -10 * Math.log10(power_reflection_R);

            // 4. Interference Check
            // Check if Obstruction Distance < Beam Radius at that depth?
            // Assume worst case: check obstruction at bottom or assume vertical obstruction entire length
            // Safe if obs_dist > radius_m
            let interference = false;
            let statusText = "";
            let statusColor = "";

            if (obs_dist_m < radius_m) {
                interference = true;
                statusText = `<span class="danger-text">CRITICAL: Obstruction Inside Beam!</span><br>The beam radius (${radius_m.toFixed(2)}m) exceeds the obstruction distance (${obs_dist_m}m). False echoes likely.`;
            } else {
                statusText = `<span class="highlight">Clear Path.</span><br>The beam footprint (${diameter_m.toFixed(2)}m dia) fits within the obstruction clearance.`;
            }

            // Dielectric Warning
            if (er < 2.0) {
                statusText += `<br><span style="color:var(--warning); font-weight:700;">⚠ Low Dielectric Warning:</span> Signal reflection is very weak (-${loss_dB.toFixed(1)} dB). Consider a Stilling Well or GWR.`;
            }

            // Save state
            lastResult = {
                radius_m, diameter_m, loss_dB, power_reflection_R, interference, 
                f_GHz, angle_deg, er, height_m, obs_dist_m
            };

            // 5. Render Step-by-Step
            let html = `<h4>Step 1: Trigonometric Beam Analysis</h4>`;
            html += `<div class="calculation-step">`;
            html += `<strong>Beam Cone Calculation:</strong><br>`;
            html += `The radar beam spreads at a total angle $\\alpha = ${angle_deg}^\\circ$. We calculate the beam radius at the max distance $H = ${height_m} \\text{ m}$.<br>`;
            html += `<p class="formula">$$ R_{beam} = H \\cdot \\tan\\left(\\frac{\\alpha}{2}\\right) $$</p>`;
            html += `<p class="formula">$$ R_{beam} = ${height_m} \\cdot \\tan\\left(\\frac{${angle_deg}}{2}^\\circ\\right) = ${height_m} \\cdot \\tan(${(angle_deg/2).toFixed(1)}^\\circ) $$</p>`;
            html += `<p class="formula">$$ \\mathbf{R_{beam} = ${radius_m.toFixed(3)} \\text{ m}} $$</p>`;
            html += `<strong>Interference Check:</strong><br>`;
            html += `Distance to Obstruction $d_{obs} = ${obs_dist_m} \\text{ m}$.<br>`;
            html += interference ? `<span class="danger-text">FAIL: $d_{obs} < R_{beam}$ (${obs_dist_m} < ${radius_m.toFixed(2)}). Beam hits the obstruction.</span>` 
                                 : `<span class="highlight">PASS: $d_{obs} > R_{beam}$ (${obs_dist_m} > ${radius_m.toFixed(2)}). Beam is clear.</span>`;
            html += `</div>`;

            html += `<h4>Step 2: Signal Reflection Physics</h4>`;
            html += `<div class="calculation-step">`;
            html += `<strong>Impedance Mismatch:</strong><br>`;
            html += `Calculating Reflection Coefficient ($\\Gamma$) based on Dielectric Constant $\\epsilon_r = ${er}$.<br>`;
            html += `<p class="formula">$$ \\sqrt{\\epsilon_r} = \\sqrt{${er}} = ${sqrt_er.toFixed(4)} $$</p>`;
            html += `<p class="formula">$$ \\Gamma = \\frac{\\sqrt{\\epsilon_r}-1}{\\sqrt{\\epsilon_r}+1} = \\frac{${sqrt_er.toFixed(4)}-1}{${sqrt_er.toFixed(4)}+1} = ${gamma.toFixed(4)} $$</p>`;
            html += `<strong>Power Reflection & Loss:</strong><br>`;
            html += `Percentage of energy reflected ($R_{power}$) vs Return Loss in Decibels.<br>`;
            html += `<p class="formula">$$ R_{power} = \\Gamma^2 = (${gamma.toFixed(4)})^2 = ${(power_reflection_R).toFixed(4)} \\Rightarrow \\mathbf{${(power_reflection_R*100).toFixed(1)}\\%} $$</p>`;
            html += `<p class="formula">$$ \\text{Return Loss} = -10 \\cdot \\log_{10}(R_{power}) = -10 \\cdot \\log_{10}(${power_reflection_R.toFixed(4)}) = \\mathbf{${loss_dB.toFixed(1)} \\text{ dB}} $$</p>`;
            html += `</div>`;

            document.getElementById('calculation-details').innerHTML = html;

            // 6. Render Table
            const tbody = document.getElementById('result-table-body');
            tbody.innerHTML = '';
            const addRow = (name, val, unit, color="") => {
                tbody.innerHTML += `<tr style="${color ? 'color:'+color : ''}"><td><strong>${name}</strong></td><td>${val}</td><td>${unit}</td></tr>`;
            };
            addRow("Beam Radius (at bottom)", radius_m.toFixed(2), "m");
            addRow("Beam Diameter (Footprint)", diameter_m.toFixed(2), "m");
            addRow("Signal Reflected", (power_reflection_R*100).toFixed(1), "%");
            addRow("Reflection Loss", loss_dB.toFixed(1), "dB", er < 2 ? "var(--warning)" : "");

            document.getElementById('interpretation-text').innerHTML = statusText;

            // 7. Render Visual
            drawVisual(height_m, radius_m, obs_dist_m, interference);

            // 8. Show Results & MathJax
            document.getElementById('result-container').classList.remove('hidden');
            if(window.MathJax) window.MathJax.typesetPromise([document.getElementById('calculation-details')]);
            document.getElementById('result-container').scrollIntoView({ behavior: 'smooth' });
        }

        function drawVisual(h, r_beam, dist_obs, interference) {
            const canvas = document.getElementById('beamCanvas');
            const ctx = canvas.getContext('2d');
            const cw = canvas.width;
            const ch = canvas.height;

            // Clear
            ctx.clearRect(0, 0, cw, ch);

            // Scaling
            // We want to fit H vertically (leave 20px margins)
            // We want to fit max(r_beam, dist_obs)*2.5 horizontally
            const maxW = Math.max(r_beam, dist_obs) * 2.5;
            const scaleY = (ch - 40) / h;
            const scaleX = cw / maxW;
            // Use isotropic scaling if needed, or allow stretching to fill view for clarity? 
            // Better to stretch X and Y independently to fill the canvas for visibility, 
            // but keep relative positions correct.
            
            const cx = cw / 3; // Shift radar left to show obstruction on right clearly
            const cy = 20;

            // Draw Tank Floor
            ctx.strokeStyle = '#94A3B8';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, cy + h * scaleY);
            ctx.lineTo(cw, cy + h * scaleY);
            ctx.stroke();

            // Draw Radar
            ctx.fillStyle = '#334155';
            ctx.fillRect(cx - 20, cy - 10, 40, 10);

            // Draw Beam Cone
            ctx.fillStyle = interference ? 'rgba(239, 68, 68, 0.2)' : 'rgba(79, 70, 229, 0.2)';
            ctx.beginPath();
            ctx.moveTo(cx, cy);
            // Right edge at bottom
            const x_beam_right = cx + r_beam * scaleX;
            const x_beam_left = cx - r_beam * scaleX;
            const y_bottom = cy + h * scaleY;
            
            ctx.lineTo(x_beam_right, y_bottom);
            ctx.lineTo(x_beam_left, y_bottom);
            ctx.closePath();
            ctx.fill();
            
            // Draw Centerline
            ctx.setLineDash([5, 5]);
            ctx.strokeStyle = '#CBD5E1';
            ctx.beginPath();
            ctx.moveTo(cx, cy);
            ctx.lineTo(cx, y_bottom);
            ctx.stroke();
            ctx.setLineDash([]);

            // Draw Obstruction Line
            const x_obs = cx + dist_obs * scaleX;
            ctx.strokeStyle = '#64748B';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(x_obs, cy);
            ctx.lineTo(x_obs, y_bottom);
            ctx.stroke();

            // Label Obstruction
            ctx.fillStyle = '#64748B';
            ctx.font = '12px Inter';
            ctx.fillText("Obstruction", x_obs + 5, cy + 20);

            // Draw Interference Point
            if(interference) {
                // Where does beam hit obstruction line?
                // Slope m = h / r_beam.
                // y = m * x
                // y_hit = (h / r_beam) * dist_obs
                const h_hit = (h / r_beam) * dist_obs;
                const y_hit_px = cy + h_hit * scaleY;
                const x_hit_px = x_obs;

                ctx.fillStyle = '#EF4444';
                ctx.beginPath();
                ctx.arc(x_hit_px, y_hit_px, 6, 0, 2*Math.PI);
                ctx.fill();
            }
        }

        function generatePDF() {
            if (!lastResult) {
                displayMessage("Please calculate first.", "error");
                return;
            }

            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4');
            let y = 15;

            // Title
            pdf.setFont('helvetica', 'bold');
            pdf.setFontSize(16);
            pdf.setTextColor(79, 70, 229); // Primary color
            pdf.text('Radar Level Calculation Report', 105, y, { align: 'center' });
            y += 8;

            pdf.setFont('helvetica', 'normal');
            pdf.setFontSize(9);
            pdf.setTextColor(100);
            pdf.text(`Generated by Design Calculators | ${new Date().toLocaleString()}`, 105, y, { align: 'center' });
            y += 15;

            // Inputs
            pdf.setFontSize(12);
            pdf.setTextColor(0);
            pdf.text('1. Sensor & Process Data', 14, y);
            y += 5;

            const inputData = [
                ['Frequency', `${lastResult.f_GHz} GHz`],
                ['Beam Angle', `${lastResult.angle_deg}°`],
                ['Dielectric Constant', `${lastResult.er}`],
                ['Tank Height', `${lastResult.height_m} m`],
                ['Obstruction Dist.', `${lastResult.obs_dist_m} m`]
            ];

            pdf.autoTable({
                startY: y,
                head: [['Parameter', 'Value']],
                body: inputData,
                margin: { left: 14, right: 14 },
                theme: 'grid',
                headStyles: { fillColor: [79, 70, 229] }
            });
            y = pdf.lastAutoTable.finalY + 15;

            // Results
            pdf.text('2. Analysis Results', 14, y);
            y += 5;

            const resultData = [
                ['Beam Radius @ Bottom', `${lastResult.radius_m.toFixed(2)} m`],
                ['Signal Reflected', `${(lastResult.power_reflection_R*100).toFixed(1)} %`],
                ['Reflection Loss', `${lastResult.loss_dB.toFixed(1)} dB`],
                ['Interference Check', lastResult.interference ? 'INTERFERENCE DETECTED' : 'Clear']
            ];

            pdf.autoTable({
                startY: y,
                head: [['Metric', 'Result']],
                body: resultData,
                margin: { left: 14, right: 14 },
                theme: 'grid',
                headStyles: { fillColor: lastResult.interference ? [220, 38, 38] : [16, 185, 129] },
                didParseCell: function(data) {
                    if (data.row.index === 3) {
                        data.cell.styles.fontStyle = 'bold';
                        data.cell.styles.textColor = lastResult.interference ? [220, 38, 38] : [16, 185, 129];
                    }
                }
            });

            // Footer
            y = pdf.lastAutoTable.finalY + 20;
            pdf.setFontSize(8);
            pdf.setTextColor(150);
            pdf.text('Based on geometric beam projection and dielectric reflection theory.', 105, y, { align: 'center' });

            pdf.save('Radar_Level_Report.pdf');
            displayMessage("PDF Report Downloaded", "success");
        }
    </script>
</body>
</html>
