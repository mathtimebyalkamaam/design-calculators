<!DOCTYPE html>
<html lang="en">
<head>
    <!-- AdSense & Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>
    
    <!-- SEO Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industrial Furnace Efficiency Analyzer - API 560 / ASME PTC 4</title>
    <meta name="description" content="Commercial-grade Industrial Furnace Performance Analyzer. Calculates Direct (Input-Output) and Indirect (Heat Loss) efficiency per API 560/ASME PTC 4. Features detailed stoichiometry, heat balance analysis, and comprehensive technical guide.">
    <meta name="keywords" content="furnace efficiency calculator, fired heater analyzer, API 560, ASME PTC 4, stack loss, heat duty, direct method, indirect method, combustion stoichiometry, engineering tool, excess air calculation, flue gas analysis, refinery heater">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://designcalculators.co.in/furnace-heat-duty.html" />

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.3/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)'], ['$', '$']],
                displayMath: [['\\[', '\\]'], ['$$', '$$']]
            },
            svg: { fontCache: 'global' }
        };
    </script>

    <style>
        /* --- CORE THEME (Blue Industrial) --- */
        :root {
            --primary: #1E3A8A; /* Dark Blue */
            --secondary: #2563EB; /* Bright Blue */
            --accent: #F59E0B; /* Amber */
            --success: #10B981;
            --danger: #DC2626;
            --warning: #F59E0B;
            --bg: #F8FAFC;
            --card: #FFFFFF;
            --text: #4B5563;
            --heading: #111827;
            --footer-bg: #0F172A;
            --border: #E2E8F0;
            --grad: linear-gradient(135deg, var(--primary), var(--secondary));
            --grad-dark: linear-gradient(135deg, #0F172A, #1E293B);
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode {
            --primary: #10B981;
            --secondary: #34D399;
            --bg: #0F172A;
            --card: #1E293B;
            --text: #CBD5E1;
            --heading: #F1F5F9;
            --footer-bg: #020617;
            --border: #334155;
            --accent: #F59E0B;
        }

        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.7;
            margin: 0; padding: 0;
        }

        .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; }

        /* Header & Nav */
        header {
            background: var(--grad);
            color: white;
            padding: 24px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-container {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: white;
        }
        .logo-text {
            font-size: 1.75rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
        }
        .logo-subtitle {
            font-size: 0.8rem;
            margin: 4px 0 0 0;
            color: #E0E7FF;
            opacity: 0.9;
        }
        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        .nav-links a:hover { color: var(--accent); }
        
        /* Theme Toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }
        .switch {
            position: relative;
            width: 56px;
            height: 30px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.2);
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px; width: 22px;
            left: 4px; bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--accent); }
        input:checked + .slider:before { transform: translateX(26px); }

        /* Main Content */
        main { padding: 40px 0; }
        .card {
            background: var(--card); border-radius: 12px; padding: 30px;
            box-shadow: var(--shadow); margin-bottom: 30px; border: 1px solid var(--border);
            animation: fadeIn 0.6s ease-out;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .card h2 {
            color: var(--primary); border-bottom: 3px solid var(--primary);
            padding-bottom: 15px; margin-top: 0; font-family: 'Montserrat', sans-serif; font-size: 1.8rem;
        }
        h3, h4 { font-family: 'Montserrat', sans-serif; color: var(--heading); }
        
        .tool-description {
            margin-bottom: 25px;
            color: var(--text);
            background-color: var(--bg);
            border-left: 4px solid var(--primary);
            padding: 15px;
            border-radius: 4px;
        }

        /* Forms */
        .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--heading); }
        .form-group input, .form-group select {
            width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 6px;
            background-color: var(--bg); color: var(--text); font-size: 1rem; transition: all 0.3s ease;
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary); outline: none; box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }

        /* Vector Grouping */
        .vector-input-group {
            background: var(--bg); padding: 15px; border-radius: 8px;
            border: 1px solid var(--border); position: relative;
        }
        .vector-input-header {
            font-weight: 700; margin-bottom: 10px; color: var(--primary);
            display: flex; align-items: center; gap: 8px; border-bottom: 1px solid var(--border); padding-bottom: 5px;
        }
        .input-group-append { display: flex; align-items: center; }
        .input-group-append input { border-top-right-radius: 0; border-bottom-right-radius: 0; border-right: 0; }
        .unit-label {
            background: var(--border); padding: 12px 15px; border: 2px solid var(--border);
            border-radius: 0 6px 6px 0; font-weight: 600; color: var(--text); font-size: 0.9rem; min-width: 70px; text-align: center;
        }

        /* Buttons */
        .button-wrapper { display: flex; gap: 15px; flex-wrap: wrap; margin-top: 20px; }
        .btn {
            flex: 1; padding: 16px 30px; border-radius: 8px; cursor: pointer;
            font-size: 1.1rem; font-weight: 700; display: inline-flex; align-items: center; justify-content: center; gap: 10px;
            transition: all 0.3s; min-width: 200px;
        }
        .btn-primary { background: var(--grad); color: white; border: none; box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3); }
        .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(30, 58, 138, 0.4); }
        .btn-outline { background: transparent; border: 2px solid var(--secondary); color: var(--secondary); }
        .btn-outline:hover { background: var(--secondary); color: white; }

        /* Presets */
        .preset-container { display: flex; gap: 10px; flex-wrap: wrap; }
        .preset-btn {
            padding: 8px 12px; font-size: 0.85rem; border: 1px solid var(--border);
            background: var(--card); border-radius: 20px; cursor: pointer; transition: all 0.2s; color: var(--text);
            display: flex; align-items: center; gap: 5px;
        }
        .preset-btn:hover { background: var(--bg); border-color: var(--secondary); color: var(--secondary); }

        /* Results */
        .results-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; align-items: start; }
        @media (max-width: 1024px) { .results-grid { grid-template-columns: 1fr; } }
        
        .results-table { width: 100%; border-collapse: collapse; margin-top: 0; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-radius: 8px; overflow: hidden; }
        .results-table th, .results-table td { padding: 14px; text-align: left; border-bottom: 1px solid var(--border); }
        .results-table th { background: var(--grad); color: white; font-weight: 700; }
        .results-table tr:nth-child(even) { background-color: var(--bg); }
        .highlight-row td { font-weight: bold; color: var(--primary); background-color: rgba(37, 99, 235, 0.05); }
        .discrepancy-row td { font-weight: bold; color: var(--warning); background-color: rgba(245, 158, 11, 0.1); }

        /* Chart */
        .chart-container {
            background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 15px;
            position: relative; height: 350px; width: 100%; display: flex; justify-content: center; align-items: center;
        }

        /* Calculations */
        .calculation-step {
            font-family: 'Courier New', monospace; background-color: rgba(37, 99, 235, 0.05);
            padding: 15px; border-radius: 6px; margin-bottom: 15px; border-left: 4px solid var(--secondary);
            font-size: 0.95rem; line-height: 1.6; word-wrap: break-word;
        }
        body.dark-mode .calculation-step { background-color: rgba(37, 99, 235, 0.1); }

        /* Article Styling */
        .article-content {
            font-size: 1.05rem; line-height: 1.8; color: var(--text);
        }
        .article-content h3 {
            color: var(--primary); font-size: 1.6rem; border-bottom: 2px solid var(--border);
            padding-bottom: 10px; margin-top: 40px; margin-bottom: 20px;
        }
        .article-content h4 {
            color: var(--secondary); font-size: 1.3rem; margin-top: 30px; margin-bottom: 15px;
        }
        .article-content p { margin-bottom: 15px; }
        .article-content ul, .article-content ol { margin-left: 20px; margin-bottom: 20px; }
        .article-content li { margin-bottom: 10px; }
        .info-box {
            background-color: var(--bg); border-left: 5px solid var(--accent); padding: 20px;
            margin: 20px 0; border-radius: 0 8px 8px 0;
        }

        /* Message Box */
        .message-box {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            padding: 16px 28px; border-radius: 8px; box-shadow: 0 6px 16px rgba(0,0,0,0.25);
            z-index: 10000; font-weight: 600; color: white; opacity: 0; transition: all 0.4s; display: none;
        }
        .message-box.show { display: block; opacity: 1; top: 30px; }
        .hidden { display: none; }

        /* Footer */
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.2);
            margin-top: 40px;
        }
        footer .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 30px;
            text-align: left;
        }
        .footer-col { flex: 1; min-width: 200px; }
        .footer-col h4 { color: var(--primary); margin-bottom: 12px; font-size: 1.3em; }
        .footer-col p { font-size: 0.95em; color: #bdc3c7; }
        .footer-col ul { list-style: none; padding: 0; margin: 0; }
        .footer-col a { color: #bdc3c7; text-decoration: none; transition: 0.3s; }
        .footer-col a:hover { color: var(--accent); }
        
        .social-buttons {
            margin-top: 20px;
            display: flex;
            gap: 15px;
        }
        .social-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.4em;
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .social-btn:hover { transform: translateY(-5px) scale(1.1); box-shadow: 0 8px 15px rgba(0,0,0,0.3); }
        
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.reddit { background-color: #FF4500; }
        .social-btn.email { background-color: #7f8c8d; }

        .footer-disclaimer { margin-top: 20px; padding-top: 20px; border-top: 1px solid #334155; text-align: center; }
        .footer-disclaimer p { font-size: 0.95em; color: #bdc3c7; }
        .footer-bottom { margin-top: 20px; text-align: center; }

        @media (max-width: 768px) {
            .navbar { flex-direction: column; gap: 20px; }
            .form-row { grid-template-columns: 1fr; }
            .footer-content { flex-direction: column; text-align: center; }
            .social-buttons { justify-content: center; }
        }
    </style>
    <link rel="stylesheet" href="styles.css">
    <meta property="og:title" content="Industrial Furnace Efficiency Analyzer - API 560 / ASME PTC 4">
    <meta property="og:description" content="Commercial-grade Industrial Furnace Performance Analyzer. Calculates Direct (Input-Output) and Indirect (Heat Loss) efficiency per API 560/ASME PTC 4. Features detailed stoichiometry, heat balance analysis, and comprehensive technical guide.">
</head>
<body>
    <div id="message-box" class="message-box"></div>
    
    <!-- HEADER -->
    <header class="header">
        <div class="header-bg-animation"></div>
        <div class="container">
            <nav class="navbar">
                <a href="/" class="logo-container">
                    <img src="logo.png" alt="Design Calculators Logo" class="logo">
                    <span class="logo-text">Design Calculators</span>
                </a>

                <div class="nav-menu">
                    <button class="mobile-menu-toggle" aria-label="Toggle menu">
                        <i class="fas fa-bars"></i>
                    </button>

                    <ul class="nav-links">
                        <li><a href="/index.html">Home</a></li>
                        
    <li class="dropdown">
        <a href="/indexele.html" class="dropdown-toggle">Electrical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/arcflash.html">Arc Flash Calculator</a><a href="/breaker-sizing.html">Breaker Sizing</a><a href="/cable-thermal-rating.html">Cable Ampacity</a><a href="/comm-cable-loss.html">Comm Cable Loss</a><a href="/earth-conductor-size.html">Earth Conductor Size</a><a href="/generatorsizing.html">Generator Sizing</a><a href="/harmonicsanalyser.html">Harmonics Analyser</a><a href="/insulationresistance.html">Insulation Resistance</a><a href="/logicgate.html">Logic Gates Simulator</a><a href="/motor-starting.html">Motor Starting Current</a><a href="/pcbtrace.html">PCB Trace Width</a><a href="/protection-device.html">Protection Device</a><a href="/resistor.html">Resistor Color Code</a><a href="/solarcable.html">Solar Cable Sizing</a><a href="/systemxrcalculator.html">System X/R Ratio</a><a href="/transmissionline.html">Transmission Line</a><a href="/vfd-selection.html">VFD Selection Tool</a></div><div><a href="/batterylife.html">Battery Life Estimator</a><a href="/busbarampacity.html">Busbar Ampacity</a><a href="/cablepulling.html">Cable Pulling Tension</a><a href="/conduit-fill.html">Conduit Fill Calculator</a><a href="/earthingfaultsimulator.html">Earthing Fault Simulator</a><a href="/grounding.html">Grounding System Design</a><a href="/hvac-sizing.html">HVAC Sizing Calculator</a><a href="/lcresonancecalculator.html">LC Resonance Calculator</a><a href="/maintenance-guide.html">Maintenance Guide</a><a href="/nemaipconvertor.html">NEMA to IP Converter</a><a href="/power-factor.html">Power Factor Correction</a><a href="/relay-coordination.html">Relay Coordination</a><a href="/short-circuit.html">Short Circuit Current</a><a href="/solarpvarray.html">Solar PV Array</a><a href="/transformer-calculator.html">Transformer Calculator</a><a href="/unit-converter.html">Unit Converter</a><a href="/voltage-drop.html">Voltage Drop Calculator</a></div><div><a href="/battery-sizing.html">Battery Sizing (AH)</a><a href="/busbarshortcircuit.html">Busbar Short Circuit</a><a href="/cable-sizing.html">Cable Sizing Calculator</a><a href="/ctsaturation.html">CT Saturation</a><a href="/equipment-relay.html">Equipment Relay Setting</a><a href="/harmonic-distortion.html">Harmonic Distortion</a><a href="/industriallighting.html">Industrial Lighting</a><a href="/lighting-calulator.html">Lighting Calculator</a><a href="/motor-efficiency.html">Motor Efficiency</a><a href="/neutral-earth-fault-current.html">Neutral Earth Fault</a><a href="/powertriangletool.html">Power Triangle</a><a href="/electricalresidentialload.html">Residential Load Calc</a><a href="/skindepth.html">Skin Depth Calculator</a><a href="/symmetricalcomponents.html">Symmetrical Components</a><a href="/transformerinrush.html">Transformer Inrush</a><a href="/ups-sizing.html">UPS Sizing</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexele.html" class="view-all-link">View All Electrical Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexinst.html" class="dropdown-toggle">Instrumentation <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/adc-resolution.html">ADC Resolution</a><a href="/capillarylengthtemperatureerror.html">Capillary Error</a><a href="/cv-kv-valve.html">Cv/Kv Valve Sizing</a><a href="/dp-level.html">DP Level Measurement</a><a href="/hydrostatic-level.html">Hydrostatic Level</a><a href="/instrument-range.html">Instrument Range</a><a href="/loop-impedance.html">Loop Impedance</a><a href="/orifice-plate.html">Orifice Plate Beta</a><a href="/pid-tuning.html">PID Tuning</a><a href="/profibus.html">Profibus Calculator</a><a href="/tempsensorresponse.html">Response Time (Tau)</a><a href="/rtd-lead-comp.html">RTD Lead Wire Comp.</a><a href="/sealfluidzeroshift.html">Seal Fluid Shift</a><a href="/snr-calculator.html">SNR Calculator</a><a href="/thermocoupleextensioncable.html">TC Extension Cable</a><a href="/thermowellwakefreq.html">Thermowell Frequency</a><a href="/pressuretransmitteroverrange.html">Tx Overrange</a><a href="/valvecavitationcalculator.html">Valve Cavitation</a><a href="/vibrationtransmitter.html">Vibration Tx</a><a href="/zoneclassificationhelper.html">Zone Classification</a></div><div><a href="/baud-rate.html">Baud Rate Calculator</a><a href="/gascompressibility.html">Compressibility (Z)</a><a href="/dbcalculator.html">dB Gain/Loss Calc</a><a href="/flowprofiledistortioncalculator.html">Flow Distortion</a><a href="/impulselinefreezing.html">Impulse Freezing</a><a href="/intrinsic-safety.html">Intrinsic Safety Loop</a><a href="/measurement.html">Measurement Uncertainty</a><a href="/ph-temp-comp.html">pH Temp Compensation</a><a href="/plcscantime.html">PLC Scan Time</a><a href="/pressurereliefvalve.html">PRV Sizing (API 520)</a><a href="/reynoldsnumbercal.html">Reynolds Number</a><a href="/rtdselfheating.html">RTD Self-Heating</a><a href="/signal-scaling.html">Signal Scaling</a><a href="/staticheadcal.html">Static Head</a><a href="/temperaturesensorlag.html">Temp Sensor Lag</a><a href="/thermowell-wake.html">Thermowell Wake</a><a href="/ultrasoniclevel.html">Ultrasonic Level</a><a href="/valve-cv.html">Valve Cv Viewer</a><a href="/wetlegdensitycompensation.html">Wet Leg Compensation</a></div><div><a href="/capacitance-level.html">Capacitance Level</a><a href="/controlvalvenoise.html">Control Valve Noise</a><a href="/dp-flow-conversion.html">DP Flow Conversion</a><a href="/hartdevices.html">HART Devices</a><a href="/impulse-pressure-drop.html">Impulse Pressure Drop</a><a href="/junctionbox.html">Junction Box Sizing</a><a href="/orifice-flow.html">Orifice Flow Calculator</a><a href="/pid-symbol-library.html">PID Symbol Library</a><a href="/power-supply-load.html">Power Supply Load</a><a href="/prvsizing.html">Relief Orifice Area</a><a href="/rtdexcitationcurrentselection.html">RTD Excitation</a><a href="/rtd-tc-conversion.html">RTD/TC Conversion</a><a href="/sil.html">SIL Calculator</a><a href="/steamflow.html">Steam Flow</a><a href="/thermocouplecjccalculator.html">Thermocouple CJC</a><a href="/turndown.html">Turndown Ratio</a><a href="/controlvalveauthority.html">Valve Authority</a><a href="/controlvalveleakage.html">Valve Leakage Class</a><a href="/wirelesshart.html">WirelessHART Range</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexinst.html" class="view-all-link">View All Instrumentation Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexmech.html" class="dropdown-toggle">Mechanical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/aircompressorfad.html">Air Compressor FAD</a><a href="/asme-vessel.html">ASME Vessel Design</a><a href="/belt-pulley.html">Belt & Pulley</a><a href="/bolt-torque.html">Bolt Torque</a><a href="/controlvalveactuator.html">Control Valve Actuator</a><a href="/frictionfactortool.html">Darcy Friction Factor</a><a href="/fatigue.html">Fatigue Analysis</a><a href="/fuel-combustion.html">Fuel Combustion</a><a href="/gas.html">Gas Properties</a><a href="/heat-exchanger.html">Heat Exchanger</a><a href="/hydroliccylinder.html">Hydraulic Cylinder</a><a href="/material-compatibility.html">Material Compatibility</a><a href="/nozzle-reinforcement.html">Nozzle Reinforcement</a><a href="/openchannelflow.html">Open Channel Flow</a><a href="/pipescheduletool.html">Pipe Schedule & Stress</a><a href="/pump-head.html">Pump Head</a><a href="/shaft-power-torque.html">Shaft Power & Torque</a><a href="/steam-table.html">Steam Table</a><a href="/vibrationanalysis.html">Vibration Analysis</a></div><div><a href="/air-flow-duct.html">Air Flow Duct Sizing</a><a href="/beam-deflection.html">Beam Deflection</a><a href="/bernoulli-equation.html">Bernoulli Equation</a><a href="/chiller-capacity.html">Chiller Capacity</a><a href="/cooling-tower-sizing.html">Cooling Tower Sizing</a><a href="/darcy-weisbach.html">Darcy-Weisbach</a><a href="/finned-tube-heat-transfer.html">Finned Tube Heat</a><a href="/furnace-heat-duty.html">Furnace Heat Duty</a><a href="/gear-design.html">Gear Design</a><a href="/heat-loss-pipes.html">Heat Loss Pipes</a><a href="/jacketed-vessel-heat-transfer.html">Jacketed Vessel</a><a href="/metalweight.html">Metal Weight Calculator</a><a href="/nptbspthreadcalculator.html">NPT/BSP Threads</a><a href="/overall-heat-transfer.html">Overall Heat Transfer</a><a href="/pipe-stress-flexibility.html">Pipe Stress</a><a href="/pump-power.html">Pump Power</a><a href="/specific-heat-enthalpy.html">Specific Heat</a><a href="/storage-tank-volume.html">Storage Tank Volume</a><a href="/weldingstress.html">Welding Stress</a></div><div><a href="/allowable-stress-safety-factor.html">Allowable Stress</a><a href="/bearinglife.html">Bearing Life Calculator</a><a href="/boiler-efficiency.html">Boiler Efficiency</a><a href="/compressor-power.html">Compressor Power</a><a href="/corrosion-rate.html">Corrosion Rate</a><a href="/fan-laws.html">Fan Laws</a><a href="/foundation.html">Foundation Design</a><a href="/gas-laws.html">Gas Laws</a><a href="/hardness.html">Hardness Converter</a><a href="/conduction-convection-radiation.html">Heat Transfer Modes</a><a href="/machining.html">Machining Calculator</a><a href="/momentofinertia.html">Moment of Inertia</a><a href="/oring.html">O-Ring Sizing</a><a href="/pipe-flow.html">Pipe Flow Calculator</a><a href="/psychrometric.html">Psychrometric Calc</a><a href="/reynolds-number.html">Reynolds Number</a><a href="/spring.html">Spring Design</a><a href="/thermal-expansion.html">Thermal Expansion</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexmech.html" class="view-all-link">View All Mechanical Tools â†’</a>
            </div>
        </div>
    </li>
                        <li><a href="/index.html#articles">Articles</a></li>
                        <li><a href="/sitemap2.html">Site Map</a></li>
                    </ul>

                    <div class="theme-toggle">
                        <i class="fas fa-sun icon"></i>
                        <label class="switch">
                            <input type="checkbox" id="theme-switch">
                            <span class="slider"></span>
                        </label>
                        <i class="fas fa-moon icon"></i>
                    </div>
                </div>
            </nav>
    </header>

    <main class="container">
        <!-- Tool Card -->
        <div class="card">
            <h2><i class="fas fa-fire"></i> Industrial Furnace Efficiency Analyzer</h2>
            
            <div class="tool-description">
                <p>This commercial-grade calculator determines furnace <strong>Heat Duty</strong> and <strong>Thermal Efficiency</strong> using two independent, industry-standard methods (API 560 / ASME PTC 4). Use it to validate instrumentation and identify unmeasured heat losses.</p>
                <ul>
                    <li><strong>Direct Method (Input-Output):</strong> Calculates heat absorbed by the process fluid relative to fuel energy input.</li>
                    <li><strong>Indirect Method (Heat Loss):</strong> Calculates efficiency by subtracting Stack, Radiation, and Moisture losses from 100%. (The "Gold Standard" for accuracy).</li>
                </ul>
            </div>

            <div class="calculator-form">
                <form id="furnace-form">
                    <!-- Controls -->
                    <div class="form-row" style="align-items: end;">
                        <div class="form-group">
                            <label>Quick Load Scenarios:</label>
                            <div class="preset-container">
                                <button type="button" class="preset-btn" onclick="loadPreset('gas')"><i class="fas fa-burn"></i> Natural Gas Heater</button>
                                <button type="button" class="preset-btn" onclick="loadPreset('oil')"><i class="fas fa-oil-can"></i> Fuel Oil Heater</button>
                                <button type="button" class="preset-btn" onclick="loadPreset('inefficient')"><i class="fas fa-exclamation-triangle"></i> High Excess Air</button>
                            </div>
                        </div>
                    </div>

                    <!-- 1. General Config -->
                    <h4 style="color: var(--primary); border-bottom: 1px solid var(--border); padding-bottom: 5px;">1. System Configuration & Fuel</h4>
                    <div class="form-row">
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-cog"></i> Setup</div>
                            <div class="form-group">
                                <label for="unit-system">Unit System</label>
                                <select id="unit-system" onchange="updateUnits()">
                                    <option value="metric">Metric (kg/hr, kJ/kg, °C)</option>
                                    <option value="imperial">Imperial (lb/hr, BTU/lb, °F)</option>
                                </select>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="fuel-input-rate">Fuel Feed Rate</label>
                                <div class="input-group-append">
                                    <input type="number" id="fuel-input-rate" value="500" required>
                                    <div class="unit-label lbl-mass">kg/hr</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="fuel-hhv">Fuel HHV (LHV can be used)</label>
                                <div class="input-group-append">
                                    <input type="number" id="fuel-hhv" value="45000" required>
                                    <div class="unit-label lbl-energy">kJ/kg</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-flask"></i> Fuel Composition (Mass %)</div>
                            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                                <div class="form-group" style="margin-bottom:0;"><label>C %</label><input type="number" class="fuel-comp" id="fuel-c" value="75.0"></div>
                                <div class="form-group" style="margin-bottom:0;"><label>H %</label><input type="number" class="fuel-comp" id="fuel-h" value="25.0"></div>
                                <div class="form-group" style="margin-bottom:0;"><label>S %</label><input type="number" class="fuel-comp" id="fuel-s" value="0.0"></div>
                                <div class="form-group" style="margin-bottom:0;"><label>O %</label><input type="number" class="fuel-comp" id="fuel-o" value="0.0"></div>
                                <div class="form-group" style="margin-bottom:0;"><label>N %</label><input type="number" class="fuel-comp" id="fuel-n" value="0.0"></div>
                                <div class="form-group" style="margin-bottom:0;"><label>H2O %</label><input type="number" class="fuel-comp" id="fuel-water" value="0.0"></div>
                            </div>
                            <div id="fuel-comp-total" style="text-align: right; font-size: 0.85em; font-weight: bold; color: var(--success); margin-top:5px;">Total: 100.0%</div>
                        </div>
                    </div>

                    <!-- 2. Process Fluid -->
                    <h4 style="color: var(--primary); border-bottom: 1px solid var(--border); padding-bottom: 5px; margin-top:20px;">2. Direct Method Inputs (Process Fluid)</h4>
                    <div class="form-row">
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-water"></i> Process Data</div>
                            <div class="form-group">
                                <label for="fluid-mass-flow">Fluid Flow Rate</label>
                                <div class="input-group-append">
                                    <input type="number" id="fluid-mass-flow" value="10000" required>
                                    <div class="unit-label lbl-mass">kg/hr</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label>Calculation Basis:</label>
                                <select id="fluid-calc-mode" onchange="toggleFluidInputs()">
                                    <option value="enthalpy">Enthalpy (Best for Phase Change)</option>
                                    <option value="temp">Temperature & Cp</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="vector-input-group" id="group-enthalpy">
                            <div class="vector-input-header"><i class="fas fa-thermometer-half"></i> Enthalpy Data</div>
                            <div class="form-group">
                                <label for="enthalpy-in">Inlet Enthalpy ($h_{in}$)</label>
                                <div class="input-group-append">
                                    <input type="number" id="enthalpy-in" value="200">
                                    <div class="unit-label lbl-energy">kJ/kg</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="enthalpy-out">Outlet Enthalpy ($h_{out}$)</label>
                                <div class="input-group-append">
                                    <input type="number" id="enthalpy-out" value="2200">
                                    <div class="unit-label lbl-energy">kJ/kg</div>
                                </div>
                            </div>
                        </div>

                        <div class="vector-input-group hidden" id="group-temp" style="display:none;">
                            <div class="vector-input-header"><i class="fas fa-thermometer-half"></i> Temp Data</div>
                            <div class="form-group">
                                <label for="temp-in">Inlet Temp ($T_{in}$)</label>
                                <div class="input-group-append">
                                    <input type="number" id="temp-in" value="30">
                                    <div class="unit-label lbl-temp">°C</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="temp-out">Outlet Temp ($T_{out}$)</label>
                                <div class="input-group-append">
                                    <input type="number" id="temp-out" value="350">
                                    <div class="unit-label lbl-temp">°C</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="fluid-cp">Specific Heat ($C_p$)</label>
                                <div class="input-group-append">
                                    <input type="number" id="fluid-cp" value="2.5">
                                    <div class="unit-label lbl-cp">kJ/kg°C</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Indirect Method -->
                    <h4 style="color: var(--primary); border-bottom: 1px solid var(--border); padding-bottom: 5px; margin-top:20px;">3. Indirect Method Inputs (Flue Gas)</h4>
                    <div class="form-row">
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-smog"></i> Stack Analysis</div>
                            <div class="form-group">
                                <label for="flue-o2">Excess O2 (Dry Basis)</label>
                                <div class="input-group-append">
                                    <input type="number" id="flue-o2" value="3.0" step="0.1">
                                    <div class="unit-label">%</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="stack-temp">Stack Temperature</label>
                                <div class="input-group-append">
                                    <input type="number" id="stack-temp" value="160">
                                    <div class="unit-label lbl-temp">°C</div>
                                </div>
                            </div>
                        </div>
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-sun"></i> Ambient & Losses</div>
                            <div class="form-group">
                                <label for="amb-temp">Ambient Air Temp</label>
                                <div class="input-group-append">
                                    <input type="number" id="amb-temp" value="25">
                                    <div class="unit-label lbl-temp">°C</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="rad-loss">Assumed Radiation Loss</label>
                                <div class="input-group-append">
                                    <input type="number" id="rad-loss" value="2.0">
                                    <div class="unit-label">%</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="button-wrapper">
                        <button type="button" id="calculate-btn" class="btn btn-primary"><i class="fas fa-calculator"></i> Run Analysis</button>
                        <button type="button" id="pdf-btn" class="btn btn-outline"><i class="fas fa-file-pdf"></i> PDF Report</button>
                    </div>
                </form>
            </div>

            <!-- Results Section -->
            <div id="result-container" class="card hidden" style="margin-top: 40px;">
                <h3><i class="fas fa-poll"></i> Performance Analysis Report</h3>
                
                <div class="results-grid">
                    <div>
                        <h4 style="margin-top: 0; color: var(--primary); margin-bottom: 15px;">Efficiency Metrics</h4>
                        <table class="results-table">
                            <tbody id="result-table-body"></tbody>
                        </table>
                        <div style="margin-top: 20px; background: var(--bg); padding: 15px; border-radius: 6px; border: 1px solid var(--border);">
                            <strong><i class="fas fa-clipboard-check"></i> Diagnostic:</strong>
                            <div id="interpretation-text" style="margin-top: 5px; font-size: 0.95rem;"></div>
                        </div>
                    </div>
                    <div>
                        <h4 style="margin-top: 0; color: var(--primary); margin-bottom: 15px;">Heat Balance Diagram</h4>
                        <div class="chart-container">
                            <canvas id="furnaceChart"></canvas>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: 30px; border-top: 1px solid var(--border); padding-top: 20px;">Detailed Engineering Calculations</h4>
                <div id="calculation-details"></div>
            </div>
        </div>

        <!-- EXTENSIVE KNOWLEDGE BASE (SEO RICH) -->
        <div class="card">
            <h2><i class="fas fa-book"></i> Industrial Furnace Technical Reference Guide</h2>
            <div class="article-content">
                <p>Welcome to the comprehensive guide on industrial fired heater performance. Fired heaters (furnaces) are critical process units in refineries, petrochemical plants, and chemical industries. They account for a significant portion of a plant's energy consumption, making their efficiency a top priority for operational excellence and environmental compliance. This guide breaks down the principles of operation, efficiency measurement methods (API 560 / ASME PTC 4), and optimization strategies.</p>

                <h3>1. Fundamentals of Industrial Fired Heaters</h3>
                <p>A fired heater is an exchanger that transfers heat liberated by the combustion of fuel directly to a process fluid flowing within tubular coils. The primary function is to raise the fluid to a required outlet temperature for downstream processing (distillation, cracking, reforming, or reaction).</p>
                
                <div class="info-box">
                    <strong>Key Components:</strong>
                    <ul>
                        <li><strong>Radiant Section:</strong> The "firebox" where fuel is burned. Tubes here absorb heat primarily via radiation from the flame and hot refractory. This section handles 60-70% of the heat duty.</li>
                        <li><strong>Convection Section:</strong> Located above the radiant section to recover heat from the hot flue gases before they exit to the stack. Heat transfer here is convective.</li>
                        <li><strong>Shield Section:</strong> The "shock" tubes located between the radiant and convection sections, protecting the convection tubes from direct radiation.</li>
                        <li><strong>Stack & Damper:</strong> Controls the draft (negative pressure) inside the furnace to ensure safe airflow.</li>
                    </ul>
                </div>

                <h3>2. The Physics of Combustion</h3>
                <p>Combustion is a rapid exothermic reaction between fuel and oxygen. In industrial settings, we use <strong>Excess Air</strong> to ensure complete combustion because mixing is never perfect. </p>
                <h4>Stoichiometry</h4>
                <p>Theoretical air is the minimum air required to burn the fuel completely. 
                <br><em>Reaction:</em> $C + O_2 \rightarrow CO_2$ + Heat
                <br><em>Reaction:</em> $2H_2 + O_2 \rightarrow 2H_2O$ + Heat
                <br>Any air provided above this minimum is "Excess Air." While necessary for safety, too much excess air is the leading cause of efficiency loss because it simply absorbs heat and carries it out the stack.</p>

                <h3>3. Analyzing Efficiency: Two Methodologies</h3>
                <p>Industry standards like <strong>API 560</strong> and <strong>ASME PTC 4</strong> recognize two distinct methods for calculating thermal efficiency. Engineers typically use both to cross-verify data integrity.</p>

                <h4>A. The Direct Method (Input-Output)</h4>
                <p>This method calculates efficiency as the ratio of heat absorbed by the fluid to the heat released by the fuel.</p>
                <div class="formula">$$ \eta_{direct} = \frac{M_{fluid} \times (h_{out} - h_{in})}{M_{fuel} \times HHV} \times 100 $$</div>
                <ul>
                    <li><strong>Pros:</strong> Direct measurement of process duty.</li>
                    <li><strong>Cons:</strong> Highly sensitive to flow meter errors. Measuring crude oil or two-phase flow accurately is notoriously difficult. A 2% error in flow meter calibration results in a 2% error in calculated efficiency.</li>
                </ul>

                <h4>B. The Indirect Method (Heat Loss)</h4>
                <p>This method assumes that all heat from the fuel that is <em>not</em> lost is absorbed by the fluid. It is generally considered more accurate because losses are a small fraction of the total heat, so errors in measuring losses have a minimal impact on the final efficiency figure.</p>
                <div class="formula">$$ \eta_{indirect} = 100\% - (L_{stack} + L_{moisture} + L_{casing} + L_{other}) $$</div>
                <ul>
                    <li><strong>Pros:</strong> Less sensitive to instrument error. Relies on Flue Gas Analysis ($O_2$, Temp) which is robust.</li>
                    <li><strong>Cons:</strong> Requires accurate fuel composition data.</li>
                </ul>

                <h3>4. Deep Dive into Heat Losses</h3>
                <p>Understanding where the heat goes is the first step to optimization.</p>

                <h4>L1: Dry Gas Loss (Sensible Heat)</h4>
                <p>This is the heat carried away by the dry components of the flue gas ($CO_2$, $N_2$, and excess $O_2$). It is the largest controllable loss.</p>
                <ul>
                    <li><strong>Drivers:</strong> High Stack Temperature and High Excess Air.</li>
                    <li><strong>Mitigation:</strong> Tune burners to reduce excess $O_2$ to 2-3%. Clean convection tubes (sootblowing) to lower stack temperature. Install Air Preheaters (APH).</li>
                </ul>

                <h4>L2: Moisture Loss (Latent Heat)</h4>
                <p>When hydrogen in the fuel burns, it forms water vapor ($H_2O$). This water leaves the stack as steam, carrying away its Latent Heat of Vaporization ($\approx 2442 kJ/kg$).</p>
                <ul>
                    <li><strong>Drivers:</strong> Hydrogen content of the fuel. Methane (Natural Gas) has a high H/C ratio, leading to higher moisture loss compared to Fuel Oil.</li>
                    <li><strong>Mitigation:</strong> Generally unavoidable unless condensing economizers are used (rare in process heaters due to corrosion risk).</li>
                </ul>

                <h4>L3: Casing (Radiation) Loss</h4>
                <p>Heat lost through the furnace walls to the atmosphere.</p>
                <ul>
                    <li><strong>Drivers:</strong> Wind speed, ambient temperature, and refractory condition.</li>
                    <li><strong>Mitigation:</strong> Repair damaged refractory or insulation. Infrared thermography scans can identify hot spots.</li>
                </ul>

                <h3>5. Troubleshooting & Optimization Strategies</h3>
                <p>If the <strong>Discrepancy</strong> between Direct and Indirect efficiency is > 3%, investigate the following:</p>
                <ol>
                    <li><strong>Instrumentation:</strong> Verify the process fluid flow meter and fuel flow meter. Check density compensation parameters.</li>
                    <li><strong>Air Leakage:</strong> "Tramp air" leaking into the convection section or ductwork dilutes the flue gas, lowering the temperature and giving false efficiency readings. Inspect expansion joints and header boxes.</li>
                    <li><strong>Incomplete Combustion:</strong> High CO levels in the flue gas indicate unburned fuel, which is a massive efficiency penalty and safety hazard.</li>
                </ol>
            </div>
        </div>
    </main>

    <!-- FOOTER EXACT REPLICA -->
        <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <a href="/" class="footer-logo">
                        <img src="logo.png" alt="Design Calculators Logo" loading="lazy" decoding="async">
                        <span class="footer-logo-text">Design Calculators</span>
                    </a>
                    <p class="footer-description">A comprehensive engineering calculator hub based on IEC, IEEE, and
                        global standards.</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn linkedin"
                            aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer"
                            class="social-btn youtube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in&text=Check%20out%20this%20amazing%20engineering%20calculator%20hub!"
                            target="_blank" rel="noopener noreferrer" class="social-btn twitter" aria-label="Twitter"><i
                                class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn facebook"
                            aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn whatsapp"
                            aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="footer-col">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href='/indexele.html'>Electrical Tools</a></li>
                            <li><a href='/indexmech.html'>Mechanical Tools</a></li>
                            <li><a href='/indexinst.html'>Instrumentation Tools</a></li>
                            <li><a href='/about.html'>About Us</a></li>
                            <li><a href='/faq.html'>FAQ</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Learn More</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/@designcalculators" target="_blank"
                                    rel="noopener noreferrer">YouTube Channel</a></li>
                            <li><a href='/contact.html'>Contact Us</a></li>
                            <li><a href='/privacy-policy.html'>Privacy Policy</a></li>
                            <li><a href='/terms-of-service.html'>Terms of Service</a></li>
                            <li><a href='/sitemap2.html'>Sitemap</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Our Network</h4>
                        <ul>
                            <li style="margin-bottom: 12px;">
                                <a href="https://reliabilitytools.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">Reliability Tools</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Reliability
                                    & maintenance engineering calculators.</span>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="https://electrosafe.homes/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">ElectroSafe</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Dedicated
                                    to home electrical safety & protection.</span>
                            </li>
                            <li>
                                <a href="https://knowyourname.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">KnowYourName</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Scientific
                                    name analysis: Phonetics, Ergonomics & Acoustics.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>All calculations are for preliminary engineering design guidance. Final designs must comply with all applicable local and international standards (including but not limited to ASHRAE 90.1, ARI 550/590). Always verify calculations and consult with a licensed professional engineer before implementation or construction.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">Anil Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global State
        let lastResult = null;
        let furnaceChart = null;

        const UNITS = {
            metric: { mass: 'kg/hr', energy: 'kJ/kg', power: 'MW', temp: '°C', cp: 'kJ/kg·°C', total: 'kJ/hr' },
            imperial: { mass: 'lb/hr', energy: 'BTU/lb', power: 'MMBTU/hr', temp: '°F', cp: 'BTU/lb·°F', total: 'BTU/hr' }
        };

        function updateUnits() {
            const sys = document.getElementById('unit-system').value;
            const u = UNITS[sys];
            document.querySelectorAll('.lbl-mass').forEach(e => e.textContent = u.mass);
            document.querySelectorAll('.lbl-energy').forEach(e => e.textContent = u.energy);
            document.querySelectorAll('.lbl-temp').forEach(e => e.textContent = u.temp);
            document.querySelectorAll('.lbl-cp').forEach(e => e.textContent = u.cp);
            
            // Adjust defaults
            if(sys === 'metric') {
                document.getElementById('fuel-input-rate').value = 500;
                document.getElementById('fuel-hhv').value = 45000;
                document.getElementById('fluid-mass-flow').value = 10000;
                document.getElementById('enthalpy-in').value = 200;
                document.getElementById('enthalpy-out').value = 2200;
                document.getElementById('stack-temp').value = 160;
                document.getElementById('amb-temp').value = 25;
            } else {
                document.getElementById('fuel-input-rate').value = 1100;
                document.getElementById('fuel-hhv').value = 19500;
                document.getElementById('fluid-mass-flow').value = 22000;
                document.getElementById('enthalpy-in').value = 85;
                document.getElementById('enthalpy-out').value = 950;
                document.getElementById('stack-temp').value = 320;
                document.getElementById('amb-temp').value = 77;
            }
        }

        function toggleFluidInputs() {
            const mode = document.getElementById('fluid-calc-mode').value;
            document.getElementById('group-enthalpy').style.display = mode === 'enthalpy' ? 'block' : 'none';
            document.getElementById('group-temp').style.display = mode === 'temp' ? 'block' : 'none';
        }

        function loadPreset(type) {
            document.getElementById('unit-system').value = 'metric';
            updateUnits();
            const setVal = (id, val) => document.getElementById(id).value = val;

            if (type === 'gas') {
                // Natural Gas: High H/C ratio, no Sulfur
                setVal('fuel-c', 75); setVal('fuel-h', 25); setVal('fuel-s', 0);
                setVal('fuel-o', 0); setVal('fuel-n', 0); setVal('fuel-water', 0);
                setVal('fuel-hhv', 50000); setVal('flue-o2', 2.0); setVal('stack-temp', 140);
            } else if (type === 'oil') {
                // Fuel Oil: Lower H, some Sulfur
                setVal('fuel-c', 86); setVal('fuel-h', 12); setVal('fuel-s', 1.5);
                setVal('fuel-o', 0); setVal('fuel-n', 0.5); setVal('fuel-water', 0);
                setVal('fuel-hhv', 42000); setVal('flue-o2', 3.5); setVal('stack-temp', 180);
            } else if (type === 'inefficient') {
                setVal('flue-o2', 8.0); // Way too much air
                setVal('stack-temp', 250); // Dirty tubes
            }
            displayMessage("Preset loaded!", "success");
        }

        function displayMessage(msg, type) {
            const box = document.getElementById('message-box');
            box.textContent = msg;
            box.className = `show ${type==='error'?'error':'info'}`;
            setTimeout(() => box.className = '', 3000);
        }

        document.getElementById('calculate-btn').addEventListener('click', () => {
            const sys = document.getElementById('unit-system').value;
            const isMetric = sys === 'metric';
            
            // Inputs
            const m_fuel = parseFloat(document.getElementById('fuel-input-rate').value);
            const hhv = parseFloat(document.getElementById('fuel-hhv').value);
            const m_fluid = parseFloat(document.getElementById('fluid-mass-flow').value);
            
            // Fuel Comp
            const C = parseFloat(document.getElementById('fuel-c').value)/100;
            const H = parseFloat(document.getElementById('fuel-h').value)/100;
            const S = parseFloat(document.getElementById('fuel-s').value)/100;
            const O = parseFloat(document.getElementById('fuel-o').value)/100;
            const N_fuel = parseFloat(document.getElementById('fuel-n').value)/100;
            const H2O_fuel = parseFloat(document.getElementById('fuel-water').value)/100;

            const sumComp = (C+H+S+O+N_fuel+H2O_fuel)*100;
            document.getElementById('fuel-comp-total').innerText = `Total: ${sumComp.toFixed(1)}%`;
            if(Math.abs(sumComp - 100) > 0.5) { displayMessage("Fuel composition must sum to 100%", "error"); return; }

            // 1. Direct Method
            const Q_in = m_fuel * hhv;
            let Q_absorbed = 0;
            let directCalcStep = "";
            
            if (document.getElementById('fluid-calc-mode').value === 'enthalpy') {
                const h_in = parseFloat(document.getElementById('enthalpy-in').value);
                const h_out = parseFloat(document.getElementById('enthalpy-out').value);
                Q_absorbed = m_fluid * (h_out - h_in);
                directCalcStep = `$$ Q_{abs} = M_{fluid} (h_{out} - h_{in}) = ${m_fluid} (${h_out} - ${h_in}) = \\mathbf{${(Q_absorbed/1000).toFixed(0)} k${UNITS[sys].total}} $$`;
            } else {
                const t_in = parseFloat(document.getElementById('temp-in').value);
                const t_out = parseFloat(document.getElementById('temp-out').value);
                const cp = parseFloat(document.getElementById('fluid-cp').value);
                Q_absorbed = m_fluid * cp * (t_out - t_in);
                directCalcStep = `$$ Q_{abs} = M_{fluid} C_p (T_{out} - T_{in}) = ${m_fluid} \\cdot ${cp} \\cdot (${t_out} - ${t_in}) = \\mathbf{${(Q_absorbed/1000).toFixed(0)} k${UNITS[sys].total}} $$`;
            }
            const eff_direct = (Q_absorbed / Q_in) * 100;

            // 2. Indirect Method (Detailed Stoichiometry)
            const O2_meas = parseFloat(document.getElementById('flue-o2').value);
            const T_stack = parseFloat(document.getElementById('stack-temp').value);
            const T_amb = parseFloat(document.getElementById('amb-temp').value);
            const Rad_loss_pct = parseFloat(document.getElementById('rad-loss').value);

            // Step 2.1: Theoretical Oxygen (Mass Basis)
            // C + O2 -> CO2 (12 + 32 = 44) ratio 2.667
            // H2 + 0.5O2 -> H2O (2 + 16 = 18) ratio 8
            // S + O2 -> SO2 (32 + 32 = 64) ratio 1
            const O2_req_C = C * 2.667;
            const O2_req_H = H * 8;
            const O2_req_S = S * 1.0;
            const O2_theo_mass = O2_req_C + O2_req_H + O2_req_S - O; 
            const Air_theo_mass = O2_theo_mass / 0.232;

            // Step 2.2: Actual Air & Flue Gas
            const EA_ratio = 21 / (21 - O2_meas);
            const Air_actual = Air_theo_mass * EA_ratio;
            const M_H2O = (9 * H) + H2O_fuel;
            const M_dry_gas = (Air_actual + 1) - M_H2O;

            // Step 2.3: Losses
            const dT = T_stack - T_amb;
            const Cp_dry = isMetric ? 1.005 : 0.24; 
            const Q_loss_dry = M_dry_gas * Cp_dry * dT * m_fuel;

            // Latent Heat + Sensible Heat of Water
            // Enthalpy of vapor at T_stack approx = (Latent + Cp_vapor * dT_stack)
            // Simplified API approach:
            // Metric: h_loss = 2442 + 1.88 * (T_stack - 25)
            // Imp: h_loss = 1050 + 0.45 * (T_stack - 77)
            let h_water_loss = 0;
            if (isMetric) h_water_loss = 2442 + 1.88 * (T_stack - 25);
            else h_water_loss = 1050 + 0.45 * (T_stack - 77);
            
            const Q_loss_moisture = M_H2O * h_water_loss * m_fuel;
            const Q_loss_rad = Q_in * (Rad_loss_pct / 100);

            const Q_losses = Q_loss_dry + Q_loss_moisture + Q_loss_rad;
            const Q_indirect = Q_in - Q_losses;
            const eff_indirect = (Q_indirect / Q_in) * 100;

            const discrepancy = Math.abs(eff_direct - eff_indirect);

            lastResult = { eff_direct, eff_indirect, Q_in, Q_absorbed, Q_loss_dry, Q_loss_moisture, Q_loss_rad, discrepancy, isMetric };

            // 3. Render Detail Steps
            const unitE = UNITS[sys].total;
            
            let html = `<h4>Phase 1: Direct Method</h4>`;
            html += `<div class="calculation-step">`;
            html += `Heat Input ($Q_{in}$) = Fuel Rate $\\times$ HHV = ${m_fuel} $\\times$ ${hhv} = <strong>${(Q_in/1000).toFixed(0)} k${unitE}</strong><br>`;
            html += directCalcStep + `<br>`;
            html += `$$ \\eta_{direct} = \\frac{Q_{abs}}{Q_{in}} \\times 100 = \\frac{${(Q_absorbed/1000).toFixed(0)}}{${(Q_in/1000).toFixed(0)}} \\times 100 = \\mathbf{${eff_direct.toFixed(2)}\\%} $$`;
            html += `</div>`;

            html += `<h4>Phase 2: Indirect Method (Stoichiometry)</h4>`;
            html += `<div class="calculation-step">`;
            html += `<strong>Step A: Theoretical Oxygen Requirement</strong><br>`;
            html += `$$ O_{2,req} = 2.667(C) + 8(H) + (S) - O_{fuel} $$<br>`;
            html += `$$ O_{2,req} = 2.667(${C.toFixed(2)}) + 8(${H.toFixed(2)}) + (${S.toFixed(2)}) - ${O.toFixed(2)} = ${O2_theo_mass.toFixed(3)} \\text{ kg/kg} $$<br>`;
            html += `$$ \\text{Air}_{theo} = O_{2,req} / 0.232 = ${Air_theo_mass.toFixed(2)} \\text{ kg/kg} $$<br>`;
            
            html += `<br><strong>Step B: Excess Air Correction</strong><br>`;
            html += `Correction Factor = $21 / (21 - O_{2,meas}) = 21 / (21 - ${O2_meas}) = ${EA_ratio.toFixed(3)}$<br>`;
            html += `Actual Air = ${Air_theo_mass.toFixed(2)} $\\times$ ${EA_ratio.toFixed(3)} = <strong>${Air_actual.toFixed(2)} kg/kg fuel</strong><br>`;
            html += `</div>`;

            html += `<h4>Phase 3: Loss Analysis</h4>`;
            html += `<div class="calculation-step">`;
            html += `<strong>L1: Dry Gas Loss</strong> (Mass: ${M_dry_gas.toFixed(2)} kg/kg)<br>`;
            html += `$$ Q_{dry} = M_{dry} \\times C_p \\times (T_{stk} - T_{amb}) \\times \\text{Fuel Rate} $$<br>`;
            html += `$$ Q_{dry} = ${M_dry_gas.toFixed(2)} \\times ${Cp_dry} \\times (${T_stack} - ${T_amb}) \\times ${m_fuel} = \\mathbf{${(Q_loss_dry/1000).toFixed(0)} \\text{ k}${unitE}} $$<br>`;
            
            html += `<br><strong>L2: Moisture Loss</strong> (Mass: ${M_H2O.toFixed(2)} kg/kg)<br>`;
            html += `$$ Q_{H2O} = M_{H2O} \\times h_{vap} \\times \\text{Fuel Rate} $$<br>`;
            html += `$$ Q_{H2O} = ${M_H2O.toFixed(2)} \\times ${h_water_loss.toFixed(0)} \\times ${m_fuel} = \\mathbf{${(Q_loss_moisture/1000).toFixed(0)} \\text{ k}${unitE}} $$<br>`;
            
            html += `<br><strong>L3: Casing Loss</strong> (Input: ${Rad_loss_pct}%)<br>`;
            html += `$$ Q_{rad} = Q_{in} \\times ${Rad_loss_pct/100} = \\mathbf{${(Q_loss_rad/1000).toFixed(0)} \\text{ k}${unitE}} $$<br>`;
            
            html += `<br><strong>Final Indirect Efficiency</strong><br>`;
            html += `$$ \\eta_{indirect} = 100 - \\frac{\\sum Q_{loss}}{Q_{in}} \\times 100 = 100 - ${((Q_losses/Q_in)*100).toFixed(2)} = \\mathbf{${eff_indirect.toFixed(2)}\\%} $$`;
            html += `</div>`;
            
            document.getElementById('calculation-details').innerHTML = html;

            // Table
            const tbody = document.getElementById('result-table-body');
            tbody.innerHTML = `
                <tr><td>Heat Input (Fuel)</td><td>${(Q_in/1000).toFixed(0)} k${unitE}</td></tr>
                <tr class="highlight-row"><td>Direct Efficiency</td><td>${eff_direct.toFixed(2)} %</td></tr>
                <tr class="highlight-row"><td>Indirect Efficiency</td><td>${eff_indirect.toFixed(2)} %</td></tr>
                <tr class="discrepancy-row"><td>Discrepancy</td><td>${discrepancy.toFixed(2)} %</td></tr>
            `;

            // Diagnostic
            const diag = document.getElementById('interpretation-text');
            if (discrepancy < 3) diag.innerHTML = `<span style="color:var(--success)">Good Match.</span> Data is reliable.`;
            else diag.innerHTML = `<span style="color:var(--danger)">High Discrepancy (>3%).</span> Check Flow Meters or Air Leakage.`;

            // Chart
            updateChart(Q_absorbed, Q_loss_dry, Q_loss_moisture, Q_loss_rad, Q_in - Q_absorbed - Q_losses); // Residual

            document.getElementById('result-container').classList.remove('hidden');
            if(window.MathJax) window.MathJax.typesetPromise();
        });

        function updateChart(proc, dry, wet, rad, resid) {
            const ctx = document.getElementById('furnaceChart').getContext('2d');
            if(furnaceChart) furnaceChart.destroy();
            
            furnaceChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Process Duty (Net)', 'Stack Loss (Dry)', 'Moisture Loss', 'Casing Loss'],
                    datasets: [{
                        data: [lastResult.Q_in - lastResult.Q_loss_dry - lastResult.Q_loss_moisture - lastResult.Q_loss_rad, lastResult.Q_loss_dry, lastResult.Q_loss_moisture, lastResult.Q_loss_rad],
                        backgroundColor: ['#10B981', '#EF4444', '#3B82F6', '#F59E0B']
                    }]
                },
                options: { responsive: true, plugins: { legend: {position:'bottom'} } }
            });
        }

        document.getElementById('pdf-btn').addEventListener('click', () => {
            if(!lastResult) return;
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFontSize(16); doc.text("Furnace Efficiency Report", 14, 20);
            doc.setFontSize(12); doc.text(`Direct Eff: ${lastResult.eff_direct.toFixed(2)}%`, 14, 30);
            doc.text(`Indirect Eff: ${lastResult.eff_indirect.toFixed(2)}%`, 14, 40);
            doc.save('Furnace_Report.pdf');
        });

        // Theme Init
        if(localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
            document.getElementById('theme-switch').checked = true;
        }
        document.getElementById('theme-switch').addEventListener('change', function() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('theme', this.checked ? 'dark' : 'light');
        });
        
        updateUnits();
    </script>
</body>
</html>

