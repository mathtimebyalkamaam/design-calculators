<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Industrial Conduit Fill Calculator - Design Calculators - Electrical</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Professional NEC conduit fill calculator for multiple wire groups. Select conduit type (EMT, RMC, PVC) and size, add conductors (THHN, XHHW), and calculate fill percentage.">
    <meta name="keywords" content="conduit fill calculator, nec calculator, electrical calculator, conduit fill, multiple wire groups, emt fill, pvc fill, nec chapter 9, thhn, xhhw">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://designcalculators.co.in/conduit-fill.html" />

    <!-- AdSense & Analytics (from perfect.txt) -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>

    <!-- Fonts & Icons (from perfect.txt) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- MathJax for Formulas -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            },
            svg: {
                fontCache: 'global'
            },
            options: {
                processHtmlClass: 'math-content', // Process elements with this class
                ignoreHtmlClass: 'no-mathjax'      // Ignore elements with this class
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        /* CSS Variables from perfect.txt */
        :root {
            --primary: #1E3A8A;
            --secondary: #2563EB;
            --accent: #F59E0B;
            --success: #10B981;
            --danger: #DC2626;
            --warning: #F59E0B;
            --bg: #F8FAFC;
            --card: #FFFFFF;
            --text: #4B5563;
            --heading: #111827;
            --footer-bg: #0F172A;
            --border: #E2E8F0;
            --grad: linear-gradient(135deg, var(--primary), var(--secondary));
            --grad-dark: linear-gradient(135deg, #0F172A, #1E293B);
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode {
            --primary: #10B981;
            --secondary: #34D399;
            --bg: #0F172A;
            --card: #1E293B;
            --text: #CBD5E1;
            --heading: #F1F5F9;
            --footer-bg: #020617;
            --border: #334155;
        }

        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        
        /* General Body Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.7;
            margin: 0;
            padding: 0;
            min-height: 100vh; /* Ensure full height */
            display: flex;
            flex-direction: column;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 1280px; /* Wider container for pro tool */
            margin: 0 auto;
            padding: 0 24px;
            width: 100%;
        }

        /* Header & Nav (from perfect.txt) */
        header {
            background: var(--grad);
            color: white;
            padding: 24px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            animation: fadeInDown 1s ease-out;
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-container {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: white;
        }
        .logo-text {
            font-size: 1.75rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
        }
        .logo-subtitle {
            font-size: 0.8rem;
            margin: 4px 0 0 0;
            color: #E0E7FF;
            opacity: 0.9;
        }
        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        .nav-links a:hover { color: var(--accent); }
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .theme-toggle i {
            font-size: 1.1rem;
        }
        .switch {
            position: relative;
            width: 56px;
            height: 30px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.2);
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--accent);
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Main Content & Cards */
        main {
            flex: 1; /* Allow main content to grow */
            padding: 40px 0;
            animation: fadeInUp 1s ease-out 0.3s forwards;
            opacity: 0;
        }
        
        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 1px solid var(--border);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        h2 {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            margin-top: 0;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        body.dark-mode h2 {
            color: var(--primary); /* Keep green in dark mode */
            border-bottom-color: var(--primary);
        }

        h3 {
            color: var(--heading);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            margin-top: 25px;
            margin-bottom: 20px;
        }
        
        .tool-description {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 25px;
        }

        /* Form Styling */
        .calculator-form {
            padding: 0; /* Form is inside the card, no extra padding */
        }
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--heading);
        }
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            background-color: var(--bg);
            color: var(--text);
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }
        body.dark-mode .form-group input:focus,
        body.dark-mode .form-group select:focus {
             box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        
        /* New Wire Group Styling */
        #wire-groups-container {
            margin-top: 20px;
            border-top: 2px dashed var(--border);
            padding-top: 25px;
        }
        .wire-group {
            background-color: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            display: grid;
            grid-template-columns: 1fr 1fr 2fr 1.5fr auto;
            gap: 15px;
            align-items: flex-end;
            animation: fadeIn 0.5s ease-out;
        }
        .wire-group .form-group {
            margin-bottom: 0;
        }
        .remove-group-btn {
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 6px;
            width: 45px;
            height: 45px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: background-color 0.3s, transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .remove-group-btn:hover {
            background: #b91c1c; /* Darker red */
            transform: scale(1.05);
        }

        /* Buttons */
        .btn {
            background: var(--grad);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(30, 58, 138, 0.4);
        }
        .btn.secondary {
            background: var(--secondary);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
        .btn.accent {
            background: var(--accent);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }
        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        /* Nipple Checkbox */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: var(--bg);
            padding: 12px;
            border-radius: 6px;
            margin-top: 10px;
        }
        .checkbox-group input {
            width: 1.3em;
            height: 1.3em;
            accent-color: var(--primary);
        }
        .checkbox-group label {
            font-weight: 600;
            color: var(--heading);
            margin-bottom: 0;
        }
        
        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            margin-left: 5px;
            color: var(--primary);
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 300px;
            background-color: #333;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            margin-left: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
            font-weight: 400;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Results Container */
        .result-container {
            margin-top: 30px;
            display: none; /* Hidden by default */
            animation: fadeIn 0.8s ease-out;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 30px;
        }
        
        .results-summary {
            background-color: var(--card);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .results-summary h3 {
            margin-top: 0;
        }

        .result-final {
            text-align: center;
            margin: 25px 0;
        }
        .result-final .percentage {
            font-size: 4.5rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
            line-height: 1.1;
            margin: 0;
        }
        .result-final .status {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 10px 0 0 0;
        }
        .result-final .percentage.pass { color: var(--success); }
        .result-final .status.pass { color: var(--success); }
        .result-final .percentage.fail { color: var(--danger); }
        .result-final .status.fail { color: var(--danger); }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
            font-size: 1.05rem;
        }
        .result-item:last-child {
            border-bottom: none;
        }
        .result-item span:first-child {
            font-weight: 600;
            color: var(--heading);
        }
        .result-item span:last-child {
            font-weight: 500;
        }

        .detailed-breakdown {
            background-color: var(--card);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }
        .detailed-breakdown h3 {
            margin-top: 0;
        }
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .result-table th, .result-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        .result-table th {
            background-color: var(--bg);
            font-weight: 700;
            color: var(--heading);
        }
        .result-table tr:last-child td {
            border-bottom: none;
        }
        .result-table .total-row td {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--heading);
            border-top: 2px solid var(--primary);
        }

        /* Educational Section */
        .education-section {
            margin-top: 40px;
        }
        .insight-card {
            background: linear-gradient(135deg, var(--card), rgba(37,99,235,0.03));
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid var(--secondary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        .insight-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .insight-card h4 {
            color: var(--secondary);
            font-size: 1.3rem;
            margin: 0 0 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .insight-card h4 i {
            font-size: 1.5rem;
        }
        .insight-card p, .insight-card li {
            margin: 10px 0;
            line-height: 1.8;
            font-size: 1.05rem;
        }
        .insight-card ul {
            padding-left: 25px;
        }
        .formula {
            background: var(--bg);
            border-left: 3px solid var(--accent);
            padding: 15px;
            margin: 12px 0;
            font-size: 1rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        .warning-box {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05));
            border-left: 5px solid var(--warning);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .warning-box h4 {
            color: var(--warning);
            margin-top: 0;
        }

        /* Footer (from perfect.txt) */
        footer {
            background: var(--grad-dark);
            color: #CBD5E1;
            padding: 50px 0 20px 0;
            margin-top: 60px;
            animation: fadeInUp 1s ease-out 0.5s forwards;
            opacity: 0;
        }
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 30px;
        }
        .footer-col {
            flex: 1;
            min-width: 200px;
        }
        .footer-col h4 {
            color: white;
            margin-bottom: 15px;
            font-weight: 700;
        }
        .footer-col ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .footer-col li {
            margin-bottom: 10px;
        }
        .footer-col a {
            color: #CBD5E1;
            text-decoration: none;
            transition: color 0.3s;
        }
        .footer-col a:hover {
            color: var(--accent);
        }
        .social-buttons {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }
        .social-btn {
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            border-radius: 50%;
            font-size: 1.1rem;
            transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .social-btn:hover {
            transform: translateY(-4px);
        }
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.youtube { background-color: #FF0000; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .footer-disclaimer {
            text-align: center;
            padding-top: 25px;
            border-top: 1px solid #334155;
            max-width: 800px;
            margin: 0 auto;
            font-size: 0.9rem;
        }
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            font-size: 0.9rem;
            color: #94A3B8;
        }

        /* Custom Message Box */
        #custom-message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 28px;
            border-radius: 8px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.25);
            z-index: 10000;
            font-weight: 600;
            color: white;
            opacity: 0;
            transition: all 0.4s;
            display: none;
            min-width: 300px;
            text-align: center;
        }
        #custom-message-box.show {
            display: block;
            opacity: 1;
            top: 80px; /* Lowered to be below header */
        }
        #custom-message-box.error { background-color: var(--danger); }
        #custom-message-box.warning { background-color: var(--warning); color: #333; }
        #custom-message-box.info { background-color: var(--success); }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Responsive adjustments */
        @media (max-width: 992px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
            .wire-group {
                grid-template-columns: 1fr 1fr;
            }
            .wire-group .form-group-full {
                grid-column: 1 / -1;
            }
            .wire-group .remove-group-btn {
                grid-column: 1 / -1;
                width: 100%;
                margin-top: 10px;
            }
        }
        
        @media (max-width: 768px) {
            .container { padding: 0 15px; }
            .navbar { flex-direction: column; gap: 20px; }
            .nav-links { 
                flex-direction: column; 
                gap: 12px; 
                text-align: center;
                width: 100%;
                margin-top: 15px;
            }
            .theme-toggle {
                margin-top: 10px;
            }
            .card { padding: 20px; }
            .footer-content { flex-direction: column; gap: 25px; }
            .btn-group { flex-direction: column; }
            
            .wire-group {
                grid-template-columns: 1fr;
            }
            .wire-group .remove-group-btn {
                margin-top: 0;
            }
            h2 { font-size: 1.6rem; }
            h3 { font-size: 1.3rem; }
        }
    </style>
</head>
<body>

    <!-- Message Box -->
    <div id="custom-message-box"></div>

    <!-- Header from perfect.txt -->
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="/" class="logo-container">
                    <span class="logo-text">Design Calculators</span>
                    <p class="logo-subtitle">Inspired by standards such as IEC, IEEE, ISA, ASME, and API.</p>
                </a>
                <ul class="nav-links">
                    <li><a href='/'>Home</a></li>
                    <li><a href="/articles.html">Articles</a></li>
                    <li><a href="/indexmech.html">Mechanical</a></li>
                    <li><a href="/indexele.html">Electrical</a></li>
                    <li><a href="/indexinst.html">Instrumentation</a></li>
                </ul>
                <div class="theme-toggle">
                    <i class="fas fa-sun"></i>
                    <label class="switch">
                        <input type="checkbox" id="theme-switch">
                        <span class="slider"></span>
                    </label>
                    <i class="fas fa-moon"></i>
                </div>
            </nav>
        </div>
    </header>

    <main class="container">
        <!-- Main Calculator Card -->
        <div class="card">
            <h2><i class="fas fa-ruler-combined"></i> Advanced Industrial Conduit Fill Calculator</h2>
            
            <div class="tool-description">
                <p>This professional-grade tool calculates conduit fill percentage according to the **National Electrical Code (NEC)**. It allows for the selection of standard conduit types and sizes and supports adding **multiple groups of different-sized conductors** in a single raceway. This is essential for accurately sizing complex feeder circuits, motor feeds, and branch circuits while ensuring code compliance and safety.</p>
            </div>
                    
            <div class="calculator-form">
                <form id="conduit-fill-form">
                    <!-- Step 1: Conduit Selection -->
                    <h3><i class="fas fa-traffic-light" style="color: var(--accent);"></i> 1. Conduit Specification</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="conduit-type">Conduit Type</label>
                            <select id="conduit-type" required>
                                <!-- Options populated by JS -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="conduit-size">Trade Size (inches)</label>
                            <select id="conduit-size" required>
                                <!-- Options populated by JS -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="standard-select">Standard</label>
                            <select id="standard-select" disabled>
                                <option value="nec" selected>NEC (North America)</option>
                                <option value="iec">IEC (International) - Coming Soon</option>
                            </select>
                        </div>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="is-nipple-checkbox">
                        <label for="is-nipple-checkbox">Conduit is a Nipple (< 24 in / 600 mm)
                            <span class="tooltip"><i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Check this box if the raceway is a "nipple" (length does not exceed 24 inches). Per NEC Chapter 9, Note 4, this allows a much higher 60% fill percentage.</span>
                            </span>
                        </label>
                    </div>

                    <!-- Step 2: Wire Groups -->
                    <h3><i class="fas fa-bolt" style="color: var(--accent);"></i> 2. Conductor Groups</h3>
                    <div id="wire-groups-container">
                        <!-- Wire groups will be dynamically inserted here -->
                    </div>
                    <div class="btn-group" style="margin-top: 15px; justify-content: flex-start;">
                        <button type="button" id="add-wire-group-btn" class="btn secondary" style="padding: 12px 25px; font-size: 1rem;">
                            <i class="fas fa-plus-circle"></i> Add Wire Group
                        </button>
                    </div>
                    
                    <!-- Step 3: Calculate -->
                    <div class="btn-group" style="margin-top: 30px; border-top: 2px solid var(--border); padding-top: 30px;">
                        <button type="button" id="calculate-conduit-fill-btn" class="btn" style="flex-grow: 2;">
                            <i class="fas fa-calculator"></i> Calculate Conduit Fill
                        </button>
                        <button type="button" id="reset-btn" class="btn accent" style="flex-grow: 1;">
                            <i class="fas fa-sync-alt"></i> Reset
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Results Section -->
        <div id="result-container" class="result-container">
            <div classs="results-grid">
                <!-- Left Column: Summary -->
                <div class="results-summary">
                    <h3><i class="fas fa-clipboard-check"></i> Calculation Summary</h3>

                    <div class="result-final">
                        <div class="percentage" id="final-fill-percentage">0.00%</div>
                        <div class="status" id="compliance-status">---</div>
                    </div>

                    <div class="result-item">
                        <span>Conduit Type:</span>
                        <span id="result-conduit-type">---</span>
                    </div>
                    <div class="result-item">
                        <span>Conduit Size:</span>
                        <span id="result-conduit-size">---</span>
                    </div>
                    <div class="result-item">
                        <span>Total Internal Area:</span>
                        <span id="result-conduit-area">0.00 mm²</span>
                    </div>
                    <div class="result-item">
                        <span>Allowable Fill Rule:</span>
                        <span id="result-fill-rule">---</span>
                    </div>
                    <div class="result-item">
                        <span><strong>Allowable Fill Area:</strong></span>
                        <span id="result-allowed-area"><strong>0.00 mm²</strong></span>
                    </div>
                    <div class="result-item">
                        <span><strong>Total Conductor Area:</strong></span>
                        <span id="result-total-conductor-area"><strong>0.00 mm²</strong></span>
                    </div>
                    <div class="result-item">
                        <span>Remaining Area:</span>
                        <span id="result-remaining-area">0.00 mm²</span>
                    </div>
                </div>

                <!-- Right Column: Breakdown -->
                <div class="detailed-breakdown" style="margin-top: 30px;">
                    <h3><i class="fas fa-list-ol"></i> Detailed Conductor Breakdown</h3>
                    <table class="result-table">
                        <thead>
                            <tr>
                                <th># Conductors</th>
                                <th>Size & Insulation</th>
                                <th>Area (Each)</th>
                                <th>Subtotal Area</th>
                            </tr>
                        </thead>
                        <tbody id="result-table-body">
                            <!-- Detailed rows will be inserted here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- New Educational Section -->
        <div class="card education-section">
            <h2><i class="fas fa-lightbulb"></i> Professional Insights: Beyond the Fill Percentage</h2>

            <div class="insight-card math-content">
                <h4><i class="fas fa-fire-extinguisher"></i> Beyond the Percentage: The Physics of Conduit Fill</h4>
                <p>A 40% fill limit isn't an arbitrary number; it's a proxy for complex thermal physics. The primary goal of NEC conduit fill rules is to ensure conductors can safely dissipate heat, preventing insulation damage, short circuits, and fires. When cables are bundled in a raceway, their ability to shed heat plummets.</p>
                <ul>
                    <li><strong>Heat Dissipation (The "Chimney Effect"):</strong> A single cable in free air (Reference Method F) can dissipate heat in 360 degrees. Inside a conduit, cables rely on a small volume of trapped air to transfer heat via convection to the conduit wall, which then radiates it. The cables in the center of a bundle become insulated by the cables surrounding them, running significantly hotter than the outer cables. The 40% rule (for 3+ conductors) ensures a minimum volume of "breathing room" (air) for this convection to occur.</li>
                    <li><strong>Pulling Tension & Jamming:</strong> Physics also governs installation. When pulling cables around a bend, friction (and thus tension) increases exponentially. Overfilled conduits can cause insulation to be stripped off during the pull. Worse, a "jam" can occur, where the conductors wedge themselves, making the pull impossible. This is common with 3 large cables, where the **Jam Ratio (Conduit ID / Cable OD)** is critical. A ratio near 2.8-3.0 can cause a jam. The NEC fill rules are designed to prevent this.</li>
                    <li><strong>Skin & Proximity Effects:</strong> In AC circuits (especially >200A), current doesn't flow uniformly. The **Skin Effect** forces current to the outer "skin" of a conductor, increasing its effective resistance ($R_{AC}$). The **Proximity Effect** occurs when parallel conductors' magnetic fields interact, forcing current to one side of each conductor, further increasing $R_{AC}$ and heat. Bundling cables tightly in a conduit *dramatically* worsens these effects, generating even more heat than a simple DC resistance calculation ($I^2R$) would suggest.</li>
                </ul>
            </div>

            <div class="warning-box math-content">
                <h4><i class="fas fa-exclamation-triangle"></i> The REAL Consequence: Conductor Ampacity Derating (NEC 310.15(C)(1))</h4>
                <p>Conduit fill is just Step 1. The *real* engineering task is determining the cable's safe current-carrying capacity (ampacity). The NEC requires you to **derate** (reduce) the ampacity for every current-carrying conductor (CCC) in a raceway beyond three.</p>
                <p>This is **not optional**. It is the most critical calculation for preventing fires. The 40% fill rule does *not* save you from this.</p>
                <ul>
                    <li><strong>What is a "Current-Carrying Conductor" (CCC)?</strong> It's any conductor that normally carries current. This includes all ungrounded "hot" conductors (phases).
                        <ul>
                            <li>An **Equipment Grounding Conductor (EGC)** (the "ground wire") *never* counts as a CCC, as it only carries current during a fault.</li>
                            <li>A **Neutral Conductor** *sometimes* counts. In a balanced 3-phase, 4-wire circuit, the neutral carries no current and does *not* count. However, if the load consists of non-linear (harmonic-generating) equipment like VFDs, LEDs, or computers, the neutral *must* be counted as a CCC (per NEC 310.15(E)), as it can carry significant harmonic currents.</li>
                        </ul>
                    </li>
                    <li><strong>Example Derating:**</strong> You pull (4) 3/0 AWG THWN-2 conductors for a 3-phase, 4-wire circuit with harmonic loads (so, 4 CCCs).
                        <ol>
                            <li><strong>Base Ampacity (Table 310.16):</strong> 3/0 AWG THWN-2 Copper is 200A.</li>
                            <li><strong>Derating (Table 310.15(C)(1)):</strong> For 4-6 CCCs, you must apply an 80% adjustment factor.</li>
                            <li><strong>Final Ampacity:</strong> $200A \times 0.80 = 160A$.</li>
                        </ol>
                    </li>
                </ul>
                <p>Your 200A-rated wire can now only safely carry 160A. If your load was 180A, you would have to increase your wire size, even though you were not over 40% fill. This calculator helps you with Step 1; derating is the critical Step 2.</p>
            </div>

            <div class="insight-card math-content">
                <h4><i class="fas fa-globe-americas"></i> Advanced Scenarios: NEC vs. IEC 60364</h4>
                <p>The world of electrical standards is broadly split into two philosophies, which affects how conduit fill is handled.</p>
                <ul>
                    <li><strong>NEC (North America): Prescriptive.</strong> The NEC (used in the US, Canada, Mexico, etc.) is "prescriptive." It gives you a set of explicit rules and tables to follow. "Use this conduit, use this wire, fill it to 40%." This tool is based on the NEC's prescriptive rules.
                        <ul>
                            <li><strong>NEC 300.20 (Parallel Runs):</strong> For large services (e.g., 800A), conductors are run in parallel (e.g., two conduits). The NEC mandates that each conduit must contain a full set of conductors (Phase A, B, C, N, EGC) to cancel out magnetic fields. You cannot run all Phase A wires in one conduit and all Phase B in another, as this would cause severe inductive heating in metal conduits.</li>
                            <li><strong>NEC Chapter 9, Note 4 (Nipples):</strong> A raceway under 24 inches (600 mm) is a "nipple." Because it's so short, heat buildup and pulling tension are not significant concerns. Therefore, the NEC allows a 60% fill for nipples.</li>
                        </ul>
                    </li>
                    <li><strong>IEC (International): Performance-Based.</strong> The IEC 60364 series (used in Europe, Asia, South America, etc.) is "performance-based." It is less concerned with a hard fill percentage. Instead, it focuses on **Installation Reference Methods** (e.g., "Method B1: Conductors in conduit in a wall," "Method C: Cables on a wall"). Each method has its own ampacity table. The engineer's job is to calculate the final ampacity based on grouping factors, ambient temperature, and soil resistivity, ensuring the cable never exceeds its temperature limit. While a 40-50% fill is a good rule of thumb, it is not a hard code rule in the same way.</li>
                </ul>
            </div>
        </div>
    </main>

    <!-- Footer from perfect.txt -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <h4>Design Calculators</h4>
                    <p style="font-size: 0.9rem; line-height: 1.6; margin-bottom: 15px;">If you find this tool helpful, please consider sharing it with your colleagues!</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn linkedin" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer" class="social-btn youtube" title="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn twitter" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn facebook" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource%20https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn whatsapp" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href='/'>Home</a></li>
                        <li><a href="/indexele.html">Electrical</a></li>
                        <li><a href="/indexmech.html">Mechanical</a></li>
                        <li><a href="/indexinst.html">Instrumentation</a></li>                    
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="/about.html">About Us</a></li>
                        <li><a href="/contact.html">Contact</a></li>
                        <li><a href="/faq.html">FAQ</a></li>
                        <li><a href="/privacy-policy.html">Privacy Policy</a></li>
                        <li><a href="/terms-of-service.html">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>More</h4>
                    <ul>
                        <li><a href='/articles.html'>Articles & Whitepapers</a></li>
                        <li><a href="/sitemap2.html">Sitemap</a></li>
                        <li><a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer">YouTube Channel</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>All calculations are provided for preliminary design guidance and educational purposes only, based on the National Electrical Code (NEC). Final electrical designs must be performed by a qualified engineer and are subject to all applicable national and local codes, standards, and jurisdictions. Always consult the latest NEC edition and perform full ampacity derating calculations (NEC 310.15) for your specific application. The user assumes all liability for the use of this tool.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">A Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {

            // --- DATA OBJECTS (Based on NEC Chapter 9, Tables 4 & 5) ---
            // Areas are in mm²
            const conduitData = {
                "EMT": {
                    "trade_size": ["1/2", "3/4", "1", "1 1/4", "1 1/2", "2", "2 1/2", "3", "3 1/2", "4"],
                    "total_area_mm2": [215.4, 371.5, 590.1, 1011.3, 1313.1, 2112.1, 3334.4, 5143.5, 6634.3, 8292.2]
                },
                "RMC": {
                    "trade_size": ["1/2", "3/4", "1", "1 1/4", "1 1/2", "2", "2 1/2", "3", "3 1/2", "4", "5", "6"],
                    "total_area_mm2": [197.4, 341.2, 552.1, 954.5, 1296.3, 2066.3, 3350.5, 5082.8, 6500.8, 8180.5, 12720.2, 18456.9]
                },
                "PVC Sch 40": {
                    "trade_size": ["1/2", "3/4", "1", "1 1/4", "1 1/2", "2", "2 1/2", "3", "3 1/2", "4", "5", "6"],
                    "total_area_mm2": [183.8, 320.5, 525.6, 908.7, 1225.3, 2005.6, 3133.3, 4786.5, 6138.9, 7887.8, 12270.3, 17822.4]
                },
                "PVC Sch 80": {
                    "trade_size": ["1/2", "3/4", "1", "1 1/4", "1 1/2", "2", "2 1/2", "3", "3 1/2", "4", "5", "6"],
                    "total_area_mm2": [144.5, 273.5, 451.4, 793.3, 1081.5, 1786.5, 2792.7, 4224.6, 5456.3, 7069.1, 11090.8, 16125.6]
                },
                "LFMC": { // Liquidtight Flexible Metal Conduit
                    "trade_size": ["1/2", "3/4", "1", "1 1/4", "1 1/2", "2", "2 1/2", "3", "4"],
                    "total_area_mm2": [201.9, 351.5, 563.7, 970.7, 1334.4, 2154.0, 3405.4, 5146.7, 8345.7]
                },
                "IMC": { // Intermediate Metal Conduit
                    "trade_size": ["1/2", "3/4", "1", "1 1/4", "1 1/2", "2", "2 1/2", "3", "3 1/2", "4"],
                    "total_area_mm2": [233.5, 396.0, 626.9, 1067.4, 1431.1, 2269.4, 3535.7, 5411.7, 6944.0, 8660.5]
                }
            };

            // Areas are in mm²
            const conductorData = {
                "THHN": {
                    "14": 8.6, "12": 11.7, "10": 15.9, "8": 28.1, "6": 39.7, "4": 56.1, "3": 68.0, "2": 81.9, "1": 103.2,
                    "1/0": 122.5, "2/0": 146.3, "3/0": 175.0, "4/0": 208.2,
                    "250": 240.5, "300": 277.9, "350": 313.4, "400": 347.5, "500": 444.5,
                    "600": 530.1, "750": 646.2, "1000": 831.9
                },
                "THWN-2": { // Same as THHN per NEC Table 5
                    "14": 8.6, "12": 11.7, "10": 15.9, "8": 28.1, "6": 39.7, "4": 56.1, "3": 68.0, "2": 81.9, "1": 103.2,
                    "1/0": 122.5, "2/0": 146.3, "3/0": 175.0, "4/0": 208.2,
                    "250": 240.5, "300": 277.9, "350": 313.4, "400": 347.5, "500": 444.5,
                    "600": 530.1, "750": 646.2, "1000": 831.9
                },
                "XHHW-2": {
                    "14": 12.3, "12": 15.9, "10": 21.1, "8": 36.6, "6": 48.3, "4": 66.0, "3": 79.1, "2": 95.3, "1": 115.6,
                    "1/0": 137.9, "2/0": 164.5, "3/0": 196.3, "4/0": 232.8,
                    "250": 272.8, "300": 313.4, "350": 352.1, "400": 388.9, "500": 486.2,
                    "600": 570.7, "750": 693.3, "1000": 891.9
                },
                "RHW-2": { // (No outer covering)
                    "14": 20.7, "12": 25.1, "10": 31.0, "8": 46.4, "6": 58.7, "4": 79.0, "3": 92.9, "2": 110.1, "1": 131.5,
                    "1/0": 155.0, "2/0": 182.8, "3/0": 216.0, "4/0": 253.9,
                    "250": 296.7, "300": 339.9, "350": 380.5, "400": 420.5, "500": 520.4,
                    "600": 609.4, "750": 737.8, "1000": 935.8
                }
            };
            
            // --- DOM Elements ---
            const conduitTypeSelect = document.getElementById('conduit-type');
            const conduitSizeSelect = document.getElementById('conduit-size');
            const addWireGroupBtn = document.getElementById('add-wire-group-btn');
            const wireGroupsContainer = document.getElementById('wire-groups-container');
            const calculateBtn = document.getElementById('calculate-conduit-fill-btn');
            const resetBtn = document.getElementById('reset-btn');
            const resultContainer = document.getElementById('result-container');
            const messageBox = document.getElementById('custom-message-box');
            const themeSwitch = document.getElementById('theme-switch');

            // --- Initialization ---

            function populateConduitTypes() {
                const types = Object.keys(conduitData);
                conduitTypeSelect.innerHTML = types.map(type => `<option value="${type}">${type}</option>`).join('');
                conduitTypeSelect.value = "EMT"; // Default
                populateConduitSizes();
            }

            function populateConduitSizes() {
                const selectedType = conduitTypeSelect.value;
                const sizes = conduitData[selectedType].trade_size;
                conduitSizeSelect.innerHTML = sizes.map(size => `<option value="${size}">${size}"</option>`).join('');
                conduitSizeSelect.value = "2"; // Default
            }

            function createWireGroup() {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'wire-group';

                const insulations = Object.keys(conductorData);
                const insulationOptions = insulations.map(ins => `<option value="${ins}">${ins}</option>`).join('');
                
                // Get sizes for the default insulation (THHN)
                const defaultInsulation = insulations[0];
                const sizes = Object.keys(conductorData[defaultInsulation]);
                const sizeOptions = sizes.map(size => `<option value="${size}">${size} AWG/kcmil</option>`).join('');

                groupDiv.innerHTML = `
                    <div class="form-group">
                        <label for="num-conductors"># Wires</label>
                        <input type="number" class="num-conductors" value="3" min="1" step="1">
                    </div>
                    <div class="form-group">
                        <label for="insulation-type">Insulation</label>
                        <select class="insulation-type">${insulationOptions}</select>
                    </div>
                    <div class="form-group form-group-full">
                        <label for="conductor-size">Size (AWG/kcmil)</label>
                        <select class="conductor-size">${sizeOptions}</select>
                    </div>
                    <button type="button" class="remove-group-btn" title="Remove this group"><i class="fas fa-trash-alt"></i></button>
                `;

                wireGroupsContainer.appendChild(groupDiv);

                // Add event listener for the new insulation select
                groupDiv.querySelector('.insulation-type').addEventListener('change', updateConductorSizes);
            }

            function updateConductorSizes(event) {
                const insulationSelect = event.target;
                const sizeSelect = insulationSelect.closest('.wire-group').querySelector('.conductor-size');
                const selectedInsulation = insulationSelect.value;
                
                const sizes = Object.keys(conductorData[selectedInsulation]);
                const sizeOptions = sizes.map(size => `<option value="${size}">${size} AWG/kcmil</option>`).join('');
                
                sizeSelect.innerHTML = sizeOptions;
            }

            // --- Event Listeners ---

            conduitTypeSelect.addEventListener('change', populateConduitSizes);
            
            addWireGroupBtn.addEventListener('click', createWireGroup);

            wireGroupsContainer.addEventListener('click', function(e) {
                if (e.target.closest('.remove-group-btn')) {
                    e.target.closest('.wire-group').remove();
                }
            });

            calculateBtn.addEventListener('click', performCalculation);
            
            resetBtn.addEventListener('click', () => {
                wireGroupsContainer.innerHTML = '';
                createWireGroup();
                resultContainer.style.display = 'none';
                document.getElementById('conduit-fill-form').reset();
                populateConduitTypes(); // Resets dropdowns to default
                showMessage('Form has been reset.', 'info');
            });

            // Theme Switcher Logic (from perfect.txt)
            themeSwitch.addEventListener('change', function() {
                if (this.checked) {
                    document.body.classList.add('dark-mode');
                    localStorage.setItem('theme', 'dark');
                } else {
                    document.body.classList.remove('dark-mode');
                    localStorage.setItem('theme', 'light');
                }
            });

            // Load Dark Mode Preference
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                themeSwitch.checked = true;
            }

            // --- Utility Functions ---

            function showMessage(message, type = "info", animate = false) {
                messageBox.textContent = message;
                messageBox.classList.remove('error', 'warning', 'info');
                messageBox.classList.add(type);
                messageBox.classList.add('show');

                setTimeout(() => {
                    messageBox.classList.remove('show');
                }, 4000);
            }

            // --- Main Calculation Logic ---

            function performCalculation() {
                try {
                    // 1. Get Conduit Area
                    const cType = conduitTypeSelect.value;
                    const cSize = conduitSizeSelect.value;
                    const cSizeIndex = conduitData[cType].trade_size.indexOf(cSize);
                    const conduitInternalArea = conduitData[cType].total_area_mm2[cSizeIndex];

                    if (!conduitInternalArea) {
                        throw new Error("Could not find conduit area. Please select type and size.");
                    }

                    // 2. Calculate Total Conductor Area
                    const wireGroups = wireGroupsContainer.querySelectorAll('.wire-group');
                    if (wireGroups.length === 0) {
                        throw new Error("Please add at least one wire group.");
                    }

                    let totalConductorArea = 0;
                    let totalConductorCount = 0;
                    let breakdownHtml = '';

                    for (const group of wireGroups) {
                        const num = parseInt(group.querySelector('.num-conductors').value);
                        const ins = group.querySelector('.insulation-type').value;
                        const size = group.querySelector('.conductor-size').value;

                        if (isNaN(num) || num <= 0) {
                            throw new Error("Please enter a valid number of wires for all groups.");
                        }

                        const individualArea = conductorData[ins][size];
                        if (!individualArea) {
                            throw new Error(`Could not find area for ${size} ${ins}.`);
                        }

                        const subtotalArea = num * individualArea;
                        totalConductorArea += subtotalArea;
                        totalConductorCount += num;

                        breakdownHtml += `
                            <tr>
                                <td>${num}</td>
                                <td>${size} ${ins}</td>
                                <td>${individualArea.toFixed(2)} mm²</td>
                                <td>${subtotalArea.toFixed(2)} mm²</td>
                            </tr>
                        `;
                    }
                    
                    // Add total row to breakdown
                    breakdownHtml += `
                        <tr class="total-row">
                            <td colspan="3">Total Combined Area</td>
                            <td>${totalConductorArea.toFixed(2)} mm²</td>
                        </tr>
                    `;
                    document.getElementById('result-table-body').innerHTML = breakdownHtml;

                    // 3. Determine Allowable Fill
                    const isNipple = document.getElementById('is-nipple-checkbox').checked;
                    let allowableFillPercent = 0.40; // Default for 3+
                    let fillRule = "40% (3+ Conductors)";

                    if (isNipple) {
                        allowableFillPercent = 0.60;
                        fillRule = "60% (Nipple < 24in)";
                    } else if (totalConductorCount === 1) {
                        allowableFillPercent = 0.53;
                        fillRule = "53% (1 Conductor)";
                    } else if (totalConductorCount === 2) {
                        allowableFillPercent = 0.31;
                        fillRule = "31% (2 Conductors)";
                    }

                    const allowedFillArea = conduitInternalArea * allowableFillPercent;
                    const finalFillPercent = (totalConductorArea / conduitInternalArea) * 100;
                    const remainingArea = allowedFillArea - totalConductorArea;

                    // 4. Display Results
                    document.getElementById('result-conduit-type').textContent = cType;
                    document.getElementById('result-conduit-size').textContent = `${cSize}"`;
                    document.getElementById('result-conduit-area').textContent = `${conduitInternalArea.toFixed(2)} mm²`;
                    document.getElementById('result-fill-rule').textContent = fillRule;
                    document.getElementById('result-allowed-area').textContent = `${allowedFillArea.toFixed(2)} mm²`;
                    document.getElementById('result-total-conductor-area').textContent = `${totalConductorArea.toFixed(2)} mm²`;
                    document.getElementById('result-remaining-area').textContent = `${remainingArea.toFixed(2)} mm²`;

                    const finalFillEl = document.getElementById('final-fill-percentage');
                    const statusEl = document.getElementById('compliance-status');

                    finalFillEl.textContent = `${finalFillPercent.toFixed(2)}%`;
                    
                    if (finalFillPercent > 100) {
                        finalFillEl.className = 'percentage fail';
                        statusEl.className = 'status fail';
                        statusEl.textContent = "CRITICAL FAILURE! Physically Impossible.";
                        showMessage("Error: Total conductor area is larger than the conduit's total area!", "error");
                    } else if (finalFillPercent > (allowableFillPercent * 100)) {
                        finalFillEl.className = 'percentage fail';
                        statusEl.className = 'status fail';
                        statusEl.textContent = "FAIL - Overfill Violation";
                        showMessage("Warning: Conduit fill exceeds NEC limits!", "warning");
                    } else {
                        finalFillEl.className = 'percentage pass';
                        statusEl.className = 'status pass';
                        statusEl.textContent = "PASS - Code Compliant";
                        showMessage("Calculation complete. Conduit fill is code compliant.", "info");
                    }

                    resultContainer.style.display = 'block';
                    resultContainer.scrollIntoView({ behavior: 'smooth' });
                    
                    // Rerender MathJax for the new content
                    if (window.MathJax) {
                        window.MathJax.typesetPromise();
                    }

                } catch (e) {
                    showMessage(e.message, "error");
                    resultContainer.style.display = 'none';
                }
            }

            // --- Initial Page Load ---
            populateConduitTypes();
            createWireGroup();
            
            // Rerender MathJax on initial load
            if (window.MathJax) {
                window.MathJax.typesetPromise();
            }

        });
    </script>
</body>
</html>


