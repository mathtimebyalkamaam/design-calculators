<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Junction Box Load Calculator - Instrumentation | Design Calculators</title>
    <link rel="canonical" href="https://designcalculators.co.in/junctionbox.html" />
<meta name="description" content="Professional junction box load calculator for instrumentation systems. Calculate power supply load, signal distribution, intrinsic safety parameters, and proper JB sizing for field devices. Based on IEC, ISA, and NEC standards for process automation.">
<meta name="keywords" content="junction box calculator, JB sizing, power supply load, intrinsic safety, fieldbus junction box, instrument marshalling, IEC 60079, ISA standards">
<meta name="author" content="Design Calculators">
<meta name="robots" content="index, follow">

<!-- AdSense & Analytics -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-23Y1V450SR');
</script>

<!-- Preconnect -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- MathJax for equations -->
<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
MathJax = {
tex: {
inlineMath: [['$', '$'], ['\\(', '\\)']],
displayMath: [['$$', '$$'], ['\\[', '\\]']]
},
svg: {
fontCache: 'global'
}
};
</script>

<!-- Favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="icon" href="/favicon.ico" type="image/x-icon">

<style>
:root {
--primary-color: #1E3A8A;
--secondary-color: #2563EB;
--accent-color: #F59E0B;
--bg-color: #F8FAFC;
--card-bg: #FFFFFF;
--text-color: #4B5563;
--heading-color: #111827;
--footer-bg: #0F172A;
--border-color: #E2E8F0;
--gradient-primary: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
--gradient-dark: linear-gradient(135deg, #0F172A, #1E293B);
--card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
--hover-color: #e2e6ea;
--button-hover-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
--highlight-bg: rgba(245, 158, 11, 0.2);
}

body.dark-mode {
--primary-color: #10B981;
--secondary-color: #34D399;
--bg-color: #0F172A;
--card-bg: #1E293B;
--text-color: #CBD5E1;
--heading-color: #F1F5F9;
--footer-bg: #020617;
--border-color: #334155;
--highlight-bg: rgba(16, 185, 129, 0.3);
--hover-color: #1E293B;
}

html { 
scroll-behavior: smooth;
}

body {
font-family: 'Inter', sans-serif;
background-color: var(--bg-color);
color: var(--text-color);
line-height: 1.8;
transition: background-color 0.3s, color 0.3s;
overflow-x: hidden;
margin: 0;
padding: 0;
}

.container { 
max-width: 1280px; 
margin: 0 auto; 
padding: 0 24px; 
}

.content-container {
max-width: 1200px;
margin: 0 auto;
padding: 20px;
}

/* Header */
.header {
background: var(--gradient-primary);
color: white;
padding: 24px 0;
position: relative;
overflow: hidden;
}

.navbar { 
display: flex; 
justify-content: space-between;
align-items: center; 
}

.logo-container { 
display: flex; 
align-items: center; 
gap: 16px; 
text-decoration: none; 
color: white; 
}

.logo { 
height: 56px;
}

.logo-text {
font-size: 1.75rem;
font-weight: 800;
font-family: 'Montserrat', sans-serif;
}

.nav-links {
display: flex;
gap: 24px;
align-items: center;
list-style: none;
margin: 0;
padding: 0;
}

.nav-links a {
color: white;
text-decoration: none;
font-weight: 500;
transition: color 0.3s;
}

.nav-links a:hover {
color: var(--accent-color);
}

.theme-toggle { 
display: flex; 
align-items: center; 
gap: 12px;
}

.theme-toggle .icon { 
color: white; 
font-size: 1.2rem; 
}

.switch { 
position: relative; 
display: inline-block; 
width: 56px; 
height: 30px;
}

.switch input { 
opacity: 0; 
width: 0; 
height: 0; 
}

.slider { 
position: absolute; 
cursor: pointer; 
top: 0; 
left: 0;
right: 0; 
bottom: 0; 
background-color: rgba(0,0,0,0.2); 
transition: .4s; 
border-radius: 30px; 
}

.slider:before { 
position: absolute; 
content: ""; 
height: 22px; 
width: 22px;
left: 4px; 
bottom: 4px; 
background-color: white; 
transition: .4s; 
border-radius: 50%; 
}

input:checked + .slider { 
background-color: var(--accent-color);
}

input:checked + .slider:before { 
transform: translateX(26px); 
}

main { 
padding: 40px 0; 
}

/* Calculator Specific Styles */
.tool-container {
background-color: var(--card-bg);
border-radius: 8px;
padding: 30px;
box-shadow: var(--card-shadow);
margin-bottom: 30px;
}

.tool-container h2 {
color: var(--primary-color);
border-bottom: 3px solid var(--primary-color);
padding-bottom: 15px;
margin-top: 0;
margin-bottom: 25px;
font-family: 'Montserrat', sans-serif;
}

.tool-description {
margin-bottom: 25px;
color: var(--text-color);
font-size: 1.1rem;
}

.calculator-form {
background-color: var(--card-bg);
border-radius: 8px;
padding: 25px;
margin-top: 25px;
box-shadow: var(--card-shadow);
}

.form-group {
margin-bottom: 20px;
}

.form-group label {
display: block;
margin-bottom: 8px;
font-weight: 600;
color: var(--heading-color);
}

.form-group input, .form-group select {
width: 100%;
padding: 12px;
border: 1px solid var(--border-color);
border-radius: 5px;
background-color: var(--bg-color);
color: var(--text-color);
box-sizing: border-box;
transition: border-color 0.3s, box-shadow 0.3s;
font-size: 1rem;
}

.form-group input:focus, .form-group select:focus {
border-color: var(--primary-color);
box-shadow: 0 0 8px rgba(30, 58, 138, 0.3);
outline: none;
}

.form-row {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 20px;
}

.device-entry {
background-color: var(--bg-color);
border: 1px solid var(--border-color);
border-radius: 8px;
padding: 20px;
margin-bottom: 15px;
}

.device-entry h4 {
color: var(--primary-color);
margin-top: 0;
margin-bottom: 15px;
font-size: 1.1rem;
}

.add-device-btn {
background-color: var(--secondary-color);
color: white;
border: none;
padding: 10px 20px;
border-radius: 5px;
cursor: pointer;
font-size: 0.95rem;
font-weight: 600;
margin-top: 10px;
transition: background-color 0.3s;
display: inline-flex;
align-items: center;
gap: 8px;
}

.add-device-btn:hover {
background-color: var(--primary-color);
}

.remove-device-btn {
background-color: #EF4444;
color: white;
border: none;
padding: 6px 12px;
border-radius: 4px;
cursor: pointer;
font-size: 0.85rem;
float: right;
}

.calculate-btn {
background: var(--gradient-primary);
color: white;
border: none;
padding: 15px 25px;
border-radius: 5px;
cursor: pointer;
font-size: 1.1rem;
font-weight: 700;
margin-top: 15px;
transition: transform 0.2s, box-shadow 0.3s;
position: relative;
overflow: hidden;
width: 100%;
}

.calculate-btn:hover {
transform: translateY(-3px);
box-shadow: var(--button-hover-shadow);
}

.calculate-btn .ripple {
position: absolute;
border-radius: 50%;
background-color: rgba(255, 255, 255, 0.7);
animation: ripple-effect 0.6s linear forwards;
transform: scale(0);
pointer-events: none;
}

@keyframes ripple-effect {
to {
transform: scale(4);
opacity: 0;
}
}

.result-container {
margin-top: 40px;
padding: 25px;
border-radius: 8px;
background-color: var(--card-bg);
box-shadow: var(--card-shadow);
display: none;
opacity: 0;
transform: translateY(20px);
transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}

.result-container.show {
display: block;
opacity: 1;
transform: translateY(0);
}

.result-container h3 {
color: var(--primary-color);
margin-bottom: 20px;
font-family: 'Montserrat', sans-serif;
font-size: 1.5rem;
}

.calculation-step-container {
margin-bottom: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
overflow: hidden;
opacity: 0;
transform: translateX(-20px);
animation: fadeInSlideIn 0.5s ease-out forwards;
}

.calculation-step-container:nth-child(odd) {
background-color: rgba(0,0,0,0.02);
}

body.dark-mode .calculation-step-container:nth-child(odd) {
background-color: rgba(255,255,255,0.02);
}

.step-header {
background-color: var(--hover-color);
padding: 12px 15px;
font-weight: 700;
color: var(--heading-color);
border-bottom: 1px solid var(--border-color);
cursor: pointer;
display: flex;
align-items: center;
justify-content: space-between;
}

.step-content {
            width: 100% !important;
            max-width: 100% !important;
            box-sizing: border-box; /* v6 */
padding: 15px;
display: block;
}

.step-content p.formula {
font-family: 'Times New Roman', serif;
font-size: 1.1em;
text-align: center;
padding: 12px;
background-color: var(--bg-color);
border: 1px solid var(--border-color);
border-radius: 4px;
margin: 10px 0;
overflow-x: auto;
color: var(--text-color);
line-height: 1.8;
}

.step-content p.calculation {
font-family: 'Courier New', monospace;
background-color: var(--bg-color);
padding: 10px 12px;
border-radius: 3px;
margin: 8px 0;
color: var(--text-color);
word-wrap: break-word;
line-height: 1.6;
border-left: 3px solid var(--secondary-color);
}

.step-content .final-result {
font-weight: 700;
font-size: 1.1rem;
color: var(--primary-color);
background: var(--highlight-bg);
padding: 12px 15px;
border-radius: 5px;
text-align: center;
margin-top: 12px;
border-left: 4px solid var(--primary-color);
}

.load-table {
width: 100%;
border-collapse: collapse;
margin: 20px 0;
}

.load-table th,
.load-table td {
border: 1px solid var(--border-color);
padding: 12px;
text-align: left;
}

.load-table th {
background-color: var(--primary-color);
color: white;
font-weight: 700;
}

.load-table tr:nth-child(even) {
background-color: rgba(0,0,0,0.02);
}

body.dark-mode .load-table tr:nth-child(even) {
background-color: rgba(255,255,255,0.02);
}

.recommendations {
margin-top: 30px;
padding: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
background-color: var(--bg-color);
}

.recommendations h4 {
color: var(--secondary-color);
margin-top: 0;
margin-bottom: 15px;
}

.recommendations ul {
padding-left: 20px;
margin: 0;
}

.recommendations ul li {
margin-bottom: 12px;
line-height: 1.6;
}

.info-icon {
color: var(--primary-color);
margin-left: 8px;
cursor: help;
}

.tooltip {
position: relative;
display: inline-block;
}

.tooltip .tooltiptext {
visibility: hidden;
width: 250px;
background-color: #333;
color: #fff;
text-align: center;
border-radius: 6px;
padding: 8px;
position: absolute;
z-index: 1;
bottom: 125%;
left: 50%;
margin-left: -125px;
opacity: 0;
transition: opacity 0.3s;
font-size: 0.9rem;
line-height: 1.4;
}

.tooltip:hover .tooltiptext {
visibility: visible;
opacity: 1;
}

#custom-message-box {
position: fixed;
top: 20px;
left: 50%;
transform: translateX(-50%);
padding: 15px 25px;
border-radius: 8px;
box-shadow: 0 4px 10px rgba(0,0,0,0.2);
z-index: 1000;
font-weight: bold;
color: white;
opacity: 0;
transition: opacity 0.5s ease-in-out;
}

@keyframes fadeInSlideIn {
from {
opacity: 0;
transform: translateX(-20px);
}
to {
opacity: 1;
transform: translateX(0);
}
}

.jb-diagram-container {
margin-top: 30px;
padding: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
background-color: var(--card-bg);
}

.jb-diagram-container h4 {
color: var(--primary-color);
margin-top: 0;
margin-bottom: 15px;
font-family: 'Montserrat', sans-serif;
text-align: center;
}

#jb-diagram-canvas {
display: block;
width: 100%;
max-width: 800px;
height: 400px;
margin: 0 auto;
border: 1px solid var(--border-color);
border-radius: 5px;
background-color: var(--bg-color);
}

.jb-analysis {
margin-top: 30px;
padding: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
background-color: var(--card-bg);
}

.jb-analysis h4 {
color: var(--primary-color);
margin-top: 0;
margin-bottom: 15px;
font-family: 'Montserrat', sans-serif;
}

.analysis-item {
margin-bottom: 15px;
padding: 15px;
border-radius: 5px;
background-color: var(--hover-color);
}

.analysis-item.critical {
border-left: 4px solid #EF4444;
background-color: rgba(239, 68, 68, 0.1);
}

.analysis-item.warning {
border-left: 4px solid var(--accent-color);
background-color: rgba(245, 158, 11, 0.1);
}

.analysis-item.info {
border-left: 4px solid var(--secondary-color);
background-color: rgba(37, 99, 235, 0.1);
}

.analysis-item h5 {
margin-top: 0;
margin-bottom: 10px;
display: flex;
align-items: center;
gap: 8px;
color: var(--heading-color);
}

.analysis-item p {
margin: 0;
line-height: 1.6;
}

.export-section {
margin-top: 25px;
text-align: center;
}

.export-btn {
background-color: var(--secondary-color);
color: white;
border: none;
padding: 12px 20px;
border-radius: 5px;
cursor: pointer;
font-weight: 600;
transition: background-color 0.3s;
display: inline-flex;
align-items: center;
gap: 8px;
}

.export-btn:hover {
background-color: var(--primary-color);
}

/* Footer */
footer { 
background: var(--gradient-dark);
color: #CBD5E1;
padding: 50px 0 20px 0; 
}

.footer-content {
display: flex;
justify-content: space-between;
align-items: flex-start;
flex-wrap: wrap;
gap: 40px;
margin-bottom: 30px;
}

.footer-col {
flex: 1;
min-width: 200px;
}

.footer-col h4 { 
font-size: 1.1rem;
color: white; 
margin-bottom: 15px; 
font-weight: 700;
}

.footer-col ul { 
list-style: none; 
padding: 0; 
margin: 0;
}

.footer-col ul li { 
margin-bottom: 10px;
}

.footer-col a { 
color: #CBD5E1; 
text-decoration: none; 
transition: color 0.3s;
font-size: 0.95rem;
}

.footer-col a:hover { 
color: var(--accent-color); 
}

.footer-disclaimer {
text-align: center;
margin: 30px auto;
padding-top: 25px;
border-top: 1px solid #334155;
max-width: 800px;
font-size: 0.9rem;
line-height: 1.6;
}

.footer-bottom { 
text-align: center; 
padding-top: 20px;
font-size: 0.9rem; 
color: #94A3B8;
}

.creator-name { 
color: var(--secondary-color); 
font-weight: bold; 
}

.social-buttons {
display: flex;
gap: 12px;
margin-top: 15px;
}

.social-btn {
width: 40px;
height: 40px;
display: inline-flex;
justify-content: center;
align-items: center;
color: white;
border-radius: 50%;
text-decoration: none;
font-size: 1.1rem;
transition: transform 0.3s, box-shadow 0.3s;
box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.social-btn:hover {
transform: translateY(-4px);
box-shadow: 0 8px 16px rgba(0,0,0,0.3);
}

.social-btn.linkedin {
background-color: #0A66C2;
}

.social-btn.youtube {
background-color: #FF0000;
}

.social-btn.twitter {
background-color: #1DA1F2;
}

.social-btn.facebook {
background-color: #1877F2;
}

.social-btn.whatsapp {
background-color: #25D366;
}

@media (max-width: 768px) {
.navbar { 
flex-direction: column;
gap: 20px; 
}

.nav-links {
flex-direction: column;
gap: 12px;
text-align: center;
}

.form-row {
grid-template-columns: 1fr;
}

.container {
padding: 15px;
}

.content-container {
padding: 15px;
}

.tool-container {
padding: 20px;
}

.footer-content {
flex-direction: column;
gap: 25px;
}

#jb-diagram-canvas {
height: 300px;
}
}
</style>
    <link rel="stylesheet" href="styles.css">
    <meta property="og:title" content="Junction Box Load Calculator - Instrumentation | Design Calculators">
    <meta property="og:description" content="Professional junction box load calculator for instrumentation systems. Calculate power supply load, signal distribution, intrinsic safety parameters, and proper JB sizing for field devices. Based on IEC, ISA, and NEC standards for process automation.">
</head>
<body>

<header class="header">
        <div class="header-bg-animation"></div>
        <div class="container">
            <nav class="navbar">
                <a href="/" class="logo-container">
                    <img src="logo.png" alt="Design Calculators Logo" class="logo">
                    <span class="logo-text">Design Calculators</span>
                </a>

                <div class="nav-menu">
                    <button class="mobile-menu-toggle" aria-label="Toggle menu">
                        <i class="fas fa-bars"></i>
                    </button>

                    <ul class="nav-links">
                        <li><a href="/index.html">Home</a></li>
                        
    <li class="dropdown">
        <a href="/indexele.html" class="dropdown-toggle">Electrical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/arcflash.html">Arc Flash Calculator</a><a href="/breaker-sizing.html">Breaker Sizing</a><a href="/cable-thermal-rating.html">Cable Ampacity</a><a href="/comm-cable-loss.html">Comm Cable Loss</a><a href="/earth-conductor-size.html">Earth Conductor Size</a><a href="/generatorsizing.html">Generator Sizing</a><a href="/harmonicsanalyser.html">Harmonics Analyser</a><a href="/insulationresistance.html">Insulation Resistance</a><a href="/logicgate.html">Logic Gates Simulator</a><a href="/motor-starting.html">Motor Starting Current</a><a href="/pcbtrace.html">PCB Trace Width</a><a href="/protection-device.html">Protection Device</a><a href="/resistor.html">Resistor Color Code</a><a href="/solarcable.html">Solar Cable Sizing</a><a href="/systemxrcalculator.html">System X/R Ratio</a><a href="/transmissionline.html">Transmission Line</a><a href="/vfd-selection.html">VFD Selection Tool</a></div><div><a href="/batterylife.html">Battery Life Estimator</a><a href="/busbarampacity.html">Busbar Ampacity</a><a href="/cablepulling.html">Cable Pulling Tension</a><a href="/conduit-fill.html">Conduit Fill Calculator</a><a href="/earthingfaultsimulator.html">Earthing Fault Simulator</a><a href="/grounding.html">Grounding System Design</a><a href="/hvac-sizing.html">HVAC Sizing Calculator</a><a href="/lcresonancecalculator.html">LC Resonance Calculator</a><a href="/maintenance-guide.html">Maintenance Guide</a><a href="/nemaipconvertor.html">NEMA to IP Converter</a><a href="/power-factor.html">Power Factor Correction</a><a href="/relay-coordination.html">Relay Coordination</a><a href="/short-circuit.html">Short Circuit Current</a><a href="/solarpvarray.html">Solar PV Array</a><a href="/transformer-calculator.html">Transformer Calculator</a><a href="/unit-converter.html">Unit Converter</a><a href="/voltage-drop.html">Voltage Drop Calculator</a></div><div><a href="/battery-sizing.html">Battery Sizing (AH)</a><a href="/busbarshortcircuit.html">Busbar Short Circuit</a><a href="/cable-sizing.html">Cable Sizing Calculator</a><a href="/ctsaturation.html">CT Saturation</a><a href="/equipment-relay.html">Equipment Relay Setting</a><a href="/harmonic-distortion.html">Harmonic Distortion</a><a href="/industriallighting.html">Industrial Lighting</a><a href="/lighting-calulator.html">Lighting Calculator</a><a href="/motor-efficiency.html">Motor Efficiency</a><a href="/neutral-earth-fault-current.html">Neutral Earth Fault</a><a href="/powertriangletool.html">Power Triangle</a><a href="/electricalresidentialload.html">Residential Load Calc</a><a href="/skindepth.html">Skin Depth Calculator</a><a href="/symmetricalcomponents.html">Symmetrical Components</a><a href="/transformerinrush.html">Transformer Inrush</a><a href="/ups-sizing.html">UPS Sizing</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexele.html" class="view-all-link">View All Electrical Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexinst.html" class="dropdown-toggle">Instrumentation <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/adc-resolution.html">ADC Resolution</a><a href="/capillarylengthtemperatureerror.html">Capillary Error</a><a href="/cv-kv-valve.html">Cv/Kv Valve Sizing</a><a href="/dp-level.html">DP Level Measurement</a><a href="/hydrostatic-level.html">Hydrostatic Level</a><a href="/instrument-range.html">Instrument Range</a><a href="/loop-impedance.html">Loop Impedance</a><a href="/orifice-plate.html">Orifice Plate Beta</a><a href="/pid-tuning.html">PID Tuning</a><a href="/profibus.html">Profibus Calculator</a><a href="/tempsensorresponse.html">Response Time (Tau)</a><a href="/rtd-lead-comp.html">RTD Lead Wire Comp.</a><a href="/sealfluidzeroshift.html">Seal Fluid Shift</a><a href="/snr-calculator.html">SNR Calculator</a><a href="/thermocoupleextensioncable.html">TC Extension Cable</a><a href="/thermowellwakefreq.html">Thermowell Frequency</a><a href="/pressuretransmitteroverrange.html">Tx Overrange</a><a href="/valvecavitationcalculator.html">Valve Cavitation</a><a href="/vibrationtransmitter.html">Vibration Tx</a><a href="/zoneclassificationhelper.html">Zone Classification</a></div><div><a href="/baud-rate.html">Baud Rate Calculator</a><a href="/gascompressibility.html">Compressibility (Z)</a><a href="/dbcalculator.html">dB Gain/Loss Calc</a><a href="/flowprofiledistortioncalculator.html">Flow Distortion</a><a href="/impulselinefreezing.html">Impulse Freezing</a><a href="/intrinsic-safety.html">Intrinsic Safety Loop</a><a href="/measurement.html">Measurement Uncertainty</a><a href="/ph-temp-comp.html">pH Temp Compensation</a><a href="/plcscantime.html">PLC Scan Time</a><a href="/pressurereliefvalve.html">PRV Sizing (API 520)</a><a href="/reynoldsnumbercal.html">Reynolds Number</a><a href="/rtdselfheating.html">RTD Self-Heating</a><a href="/signal-scaling.html">Signal Scaling</a><a href="/staticheadcal.html">Static Head</a><a href="/temperaturesensorlag.html">Temp Sensor Lag</a><a href="/thermowell-wake.html">Thermowell Wake</a><a href="/ultrasoniclevel.html">Ultrasonic Level</a><a href="/valve-cv.html">Valve Cv Viewer</a><a href="/wetlegdensitycompensation.html">Wet Leg Compensation</a></div><div><a href="/capacitance-level.html">Capacitance Level</a><a href="/controlvalvenoise.html">Control Valve Noise</a><a href="/dp-flow-conversion.html">DP Flow Conversion</a><a href="/hartdevices.html">HART Devices</a><a href="/impulse-pressure-drop.html">Impulse Pressure Drop</a><a href="/junctionbox.html">Junction Box Sizing</a><a href="/orifice-flow.html">Orifice Flow Calculator</a><a href="/pid-symbol-library.html">PID Symbol Library</a><a href="/power-supply-load.html">Power Supply Load</a><a href="/prvsizing.html">Relief Orifice Area</a><a href="/rtdexcitationcurrentselection.html">RTD Excitation</a><a href="/rtd-tc-conversion.html">RTD/TC Conversion</a><a href="/sil.html">SIL Calculator</a><a href="/steamflow.html">Steam Flow</a><a href="/thermocouplecjccalculator.html">Thermocouple CJC</a><a href="/turndown.html">Turndown Ratio</a><a href="/controlvalveauthority.html">Valve Authority</a><a href="/controlvalveleakage.html">Valve Leakage Class</a><a href="/wirelesshart.html">WirelessHART Range</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexinst.html" class="view-all-link">View All Instrumentation Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexmech.html" class="dropdown-toggle">Mechanical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/aircompressorfad.html">Air Compressor FAD</a><a href="/asme-vessel.html">ASME Vessel Design</a><a href="/belt-pulley.html">Belt & Pulley</a><a href="/bolt-torque.html">Bolt Torque</a><a href="/controlvalveactuator.html">Control Valve Actuator</a><a href="/frictionfactortool.html">Darcy Friction Factor</a><a href="/fatigue.html">Fatigue Analysis</a><a href="/fuel-combustion.html">Fuel Combustion</a><a href="/gas.html">Gas Properties</a><a href="/heat-exchanger.html">Heat Exchanger</a><a href="/hydroliccylinder.html">Hydraulic Cylinder</a><a href="/material-compatibility.html">Material Compatibility</a><a href="/nozzle-reinforcement.html">Nozzle Reinforcement</a><a href="/openchannelflow.html">Open Channel Flow</a><a href="/pipescheduletool.html">Pipe Schedule & Stress</a><a href="/pump-head.html">Pump Head</a><a href="/shaft-power-torque.html">Shaft Power & Torque</a><a href="/steam-table.html">Steam Table</a><a href="/vibrationanalysis.html">Vibration Analysis</a></div><div><a href="/air-flow-duct.html">Air Flow Duct Sizing</a><a href="/beam-deflection.html">Beam Deflection</a><a href="/bernoulli-equation.html">Bernoulli Equation</a><a href="/chiller-capacity.html">Chiller Capacity</a><a href="/cooling-tower-sizing.html">Cooling Tower Sizing</a><a href="/darcy-weisbach.html">Darcy-Weisbach</a><a href="/finned-tube-heat-transfer.html">Finned Tube Heat</a><a href="/furnace-heat-duty.html">Furnace Heat Duty</a><a href="/gear-design.html">Gear Design</a><a href="/heat-loss-pipes.html">Heat Loss Pipes</a><a href="/jacketed-vessel-heat-transfer.html">Jacketed Vessel</a><a href="/metalweight.html">Metal Weight Calculator</a><a href="/nptbspthreadcalculator.html">NPT/BSP Threads</a><a href="/overall-heat-transfer.html">Overall Heat Transfer</a><a href="/pipe-stress-flexibility.html">Pipe Stress</a><a href="/pump-power.html">Pump Power</a><a href="/specific-heat-enthalpy.html">Specific Heat</a><a href="/storage-tank-volume.html">Storage Tank Volume</a><a href="/weldingstress.html">Welding Stress</a></div><div><a href="/allowable-stress-safety-factor.html">Allowable Stress</a><a href="/bearinglife.html">Bearing Life Calculator</a><a href="/boiler-efficiency.html">Boiler Efficiency</a><a href="/compressor-power.html">Compressor Power</a><a href="/corrosion-rate.html">Corrosion Rate</a><a href="/fan-laws.html">Fan Laws</a><a href="/foundation.html">Foundation Design</a><a href="/gas-laws.html">Gas Laws</a><a href="/hardness.html">Hardness Converter</a><a href="/conduction-convection-radiation.html">Heat Transfer Modes</a><a href="/machining.html">Machining Calculator</a><a href="/momentofinertia.html">Moment of Inertia</a><a href="/oring.html">O-Ring Sizing</a><a href="/pipe-flow.html">Pipe Flow Calculator</a><a href="/psychrometric.html">Psychrometric Calc</a><a href="/reynolds-number.html">Reynolds Number</a><a href="/spring.html">Spring Design</a><a href="/thermal-expansion.html">Thermal Expansion</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexmech.html" class="view-all-link">View All Mechanical Tools â†’</a>
            </div>
        </div>
    </li>
                        <li><a href="/index.html#articles">Articles</a></li>
                        <li><a href="/sitemap2.html">Site Map</a></li>
                    </ul>

                    <div class="theme-toggle">
                        <i class="fas fa-sun icon"></i>
                        <label class="switch">
                            <input type="checkbox" id="theme-switch">
                            <span class="slider"></span>
                        </label>
                        <i class="fas fa-moon icon"></i>
                    </div>
                </div>
            </nav>
    </header>

<main class="content-container">

<div class="tool-container">
<h2>Junction Box Load Calculator</h2>

<div class="tool-description">
<p>This professional junction box load calculator sizes instrumentation junction boxes (marshalling boxes) for field devices in process automation and control systems. Calculate total power supply load, signal distribution requirements, intrinsic safety parameters (for Ex i applications), terminal count, and proper enclosure sizing per IEC 60079, ISA-RP12, and NEC Article 314 standards. Essential for instrumentation engineers, E&I designers, and commissioning teams designing field junction box installations in oil & gas, chemical, pharmaceutical, power generation, water treatment, and manufacturing facilities.</p>

<p><strong>Key Features:</strong> Power budget calculation for 4-20mA loops (loop-powered and externally powered devices), fieldbus junction box loading (Foundation Fieldbus, Profibus PA, HART), intrinsic safety barrier compatibility verification, terminal block sizing, cable entry requirements, environmental ratings (IP65/66/67, NEMA 4X, explosion-proof), and compliance verification for safe area, hazardous area (Ex d, Ex e, Ex i), and hybrid installations.</p>
</div>

<div class="calculator-form">
<form id="jb-form">

<!-- JB Configuration -->
<div class="form-row">
<div class="form-group">
<label for="jb-type">Junction Box Type</label>
<select id="jb-type" required>
<option value="standard" selected>Standard (Safe Area)</option>
<option value="increased-safety">Increased Safety (Ex e)</option>
<option value="intrinsic-safety">Intrinsic Safety (Ex i)</option>
<option value="flameproof">Flameproof (Ex d)</option>
<option value="fieldbus">Fieldbus Junction Box</option>
</select>
</div>
<div class="form-group">
<label for="application">Application / Industry</label>
<select id="application" required>
<option value="oil-gas" selected>Oil & Gas</option>
<option value="chemical">Chemical Processing</option>
<option value="pharma">Pharmaceutical</option>
<option value="power">Power Generation</option>
<option value="water">Water/Wastewater</option>
<option value="manufacturing">Manufacturing</option>
<option value="food-bev">Food & Beverage</option>
</select>
</div>
</div>

<!-- Power Supply Configuration -->
<div class="form-row">
<div class="form-group">
<label for="power-supply-voltage">Power Supply Voltage (VDC) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Typical: 24VDC for standard, 12-30VDC for Ex i</span></span></label>
<input type="number" id="power-supply-voltage" value="24" min="1" step="0.1" required>
</div>
<div class="form-group">
<label for="power-supply-capacity">Power Supply Capacity (A) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Maximum current available from supply</span></span></label>
<input type="number" id="power-supply-capacity" value="2" min="0.1" step="0.1" required>
</div>
</div>

<!-- Environmental Conditions -->
<div class="form-row">
<div class="form-group">
<label for="environment">Environment / Hazardous Area Classification</label>
<select id="environment" required>
<option value="safe-area" selected>Safe Area (Non-Hazardous)</option>
<option value="zone-2">Zone 2 / Div 2 (Gas/Vapor)</option>
<option value="zone-1">Zone 1 / Div 1 (Gas/Vapor)</option>
<option value="zone-22">Zone 22 / Div 2 (Dust)</option>
<option value="zone-21">Zone 21 / Div 1 (Dust)</option>
</select>
</div>
<div class="form-group">
<label for="enclosure-rating">Required Enclosure Rating</label>
<select id="enclosure-rating" required>
<option value="ip65" selected>IP65 (Dust tight, water jets)</option>
<option value="ip66">IP66 (Dust tight, powerful water jets)</option>
<option value="ip67">IP67 (Dust tight, temporary immersion)</option>
<option value="nema-4x">NEMA 4X (Corrosion resistant)</option>
<option value="nema-7">NEMA 7 (Explosion proof)</option>
</select>
</div>
</div>

<!-- Devices Section -->
<div id="devices-container">
<h3 style="color: var(--primary-color); margin: 25px 0 15px 0;">Field Devices Connected to JB</h3>
<p style="margin-bottom: 20px; color: var(--text-color);">Add all field devices that will be connected to this junction box.</p>
</div>

<button type="button" id="add-device" class="add-device-btn"><i class="fas fa-plus"></i> Add Device</button>

<button type="button" id="calculate-btn" class="calculate-btn">Calculate JB Load</button>
</form>
</div>

<div id="result-container" class="result-container">
<h3>Junction Box Load Calculation Results</h3>
<div id="calculation-steps">
<!-- Calculation steps will be dynamically inserted here -->
</div>

<div class="jb-diagram-container">
<h4>Junction Box Configuration Diagram</h4>
<canvas id="jb-diagram-canvas"></canvas>
</div>

<div class="jb-analysis">
<h4>Junction Box Analysis & Sizing Recommendations</h4>
<div id="jb-analysis-content">
<!-- JB assessment will be dynamically inserted here -->
</div>
</div>

<div class="recommendations">
<h4>Design Standards & Installation Guidelines</h4>
<div id="recommendations-content">
<!-- Recommendations will be dynamically inserted here -->
</div>
</div>

<div class="export-section">
<button id="export-report" class="export-btn"><i class="fas fa-file-pdf"></i> Export JB Specification</button>
</div>
</div>
</div>

<!-- Educational Content -->
<div class="tool-container" style="margin-top: 40px;">
<h2>Understanding Junction Box Load Calculation & Sizing</h2>

<h3 style="color: var(--primary-color); margin-top: 25px;">What is an Instrumentation Junction Box?</h3>
<p>An instrumentation junction box (also called marshalling box, terminal box, or field junction box) is an enclosure housing terminal blocks that provide connection points for field instrumentation to control system wiring. Junction boxes serve as distributed connection hubs in process plants, enabling orderly cable management, simplified troubleshooting, and protection of signal and power connections from environmental conditions. Typically installed near clusters of field devices (transmitters, analyzers, valves, switches), junction boxes reduce cable runs to control rooms/PLCs, organize large cable counts into manageable groups, provide test points for commissioning and maintenance, protect sensitive electronics and connections from weather and industrial environments, and enable intrinsically safe field wiring through integration with safety barriers. Junction boxes are fundamental infrastructure in process automation, with hundreds to thousands deployed across large facilities.</p>

<p>Junction box design involves several engineering disciplines converging: electrical (power distribution, circuit protection), instrumentation (signal integrity, loop powering), safety (intrinsic safety, explosion protection), and mechanical (enclosure sizing, cable entry management). Proper sizing requires calculating total power load ensuring supply capacity isn't exceeded, determining terminal count based on device I/O points, verifying intrinsic safety parameters for hazardous area installations, selecting appropriate enclosure dimensions and ratings, and planning cable entry arrangements. Undersized junction boxes cause installation difficulties, insufficient terminal space, inadequate cable entry provisions, and potential power supply overload. Oversized boxes increase costs unnecessarily and consume valuable field real estate. This calculator provides systematic methodology for optimal junction box specification meeting safety, functional, and practical requirements.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Power Supply Load Calculation</h3>

<p><strong>4-20mA Loop-Powered Devices:</strong> Loop-powered instruments draw operating current from the same two wires carrying the 4-20mA signal, typically consuming 3.5-3.8mA from a 24VDC supply. Total loop resistance (wiring + device) must maintain adequate voltage for device operation - most devices require minimum 12VDC. Calculate total power: P = V × I × n, where n is number of devices. For 10 transmitters @ 3.6mA each: P = 24V × 0.036A × 10 = 8.64W, I_total = 360mA. This simple calculation works for standard safe area applications. Junction box merely provides terminal connections - power supplied from control system or remote power supplies.</p>

<p><strong>Externally Powered Devices:</strong> Solenoid valves, indicators, relays, and some transmitters require separate power supplies beyond signal wiring. Typical loads: solenoid valves 5-20W, indicators 2-5W, relays 1-3W. Sum all device loads plus safety margin (typically 25%). If JB contains local power distribution (power supply module within JB), calculate total current: I_total = Σ(P_device/V_supply). For 24VDC supply powering 5 solenoids @ 10W each: I_total = 50W/24V = 2.08A. Include wire resistance voltage drop: ΔV = I × R, where R = ρ × 2L / A (ρ = resistivity 0.0172 Ω·mm²/m for copper, L = cable length, A = cross-section). Ensure V_device ≥ V_min after voltage drop.</p>

<p><strong>Fieldbus Power Budget:</strong> Foundation Fieldbus and Profibus PA provide bus-powered operation where field devices draw operating power from the data bus itself (MBP - Manchester Bus Powered). Maximum segment power depends on coupler/supply specifications: standard FF couplers provide 400-500mA @ 32VDC maximum, advanced couplers 1000mA. Each device consumes 10-20mA typically (check manufacturer datasheet). Calculate: I_total = Σ I_devices, verify I_total ≤ I_coupler_max. Account for voltage drop along cable: distant devices see reduced voltage due to cable resistance. Minimum voltage at furthest device must be ≥9VDC. Power budget calculation ensures all devices receive adequate power while maintaining communication reliability.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Intrinsic Safety Considerations</h3>

<p><strong>Ex i Junction Box Requirements:</strong> Intrinsically safe junction boxes for hazardous area installations (Zone 1/Div 1) must meet IEC 60079-11 / ATEX / IECEx requirements. The junction box houses terminals connecting intrinsically safe field devices (in hazardous area) to safety barriers or isolators (in safe area). Critical parameters: maximum voltage (Ui) and current (Ii) the device can safely receive, maximum power (Pi), maximum capacitance (Ci) and inductance (Li) including cable. Entity concept requires: Uo ≤ Ui (barrier output ≤ device input), Io ≤ Ii, Po ≤ Pi, Co + Ccable ≤ Ci, Lo + Lcable ≤ Li, where subscript 'o' denotes barrier output parameters. Verify each loop compliance. Junction boxes used for Ex i must have increased safety (Ex e) or flameproof (Ex d) enclosure certification, proper bonding/grounding per IEC 60079-14, and separation of Ex i circuits from non-Ex i circuits preventing cross-contamination.</p>

<p><strong>Separation and Segregation:</strong> Within junction boxes, different signal types require physical separation preventing interference and maintaining safety integrity: Ex i circuits minimum 50mm spacing from non-Ex i, or use insulating barriers; analog 4-20mA separate from digital signals (Foundation Fieldbus, Profibus) avoiding cross-talk; power circuits (24VDC, 120VAC) isolated from low-level signals preventing noise coupling; shield termination points separated by circuit to avoid ground loops. Terminal block selection affects segregation: use blue terminals for Ex i (visual identification), barrier terminal blocks with built-in separation, or separate terminal strips with adequate spacing. Document separation methodology in junction box layout drawings and loop diagrams. Inspection authorities verify separation during commissioning and periodic audits.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Terminal Count and Sizing</h3>

<p><strong>Terminal Requirements Per Device:</strong> Calculate terminals needed based on device connections: 2-wire devices (transmitters, simple switches) need 2 terminals per device; 3-wire devices (some RTDs) require 3 terminals; 4-wire devices (RTDs, mag meters, analyzers) need 4 terminals minimum; multi-variable devices (Coriolis meters, multi-sensor analyzers) may require 8+ terminals. Add terminals for: shields (one per shielded cable), spare capacity (typically 20% spares for future additions/modifications), jumper points enabling flexible routing, test terminals for loop checking without disconnecting wires. For 20 two-wire transmitters: 20 devices × 2 terminals + 20 shields + 20% spares = 40 + 20 + 12 = 72 terminals minimum. Terminal blocks come in standard terminal counts (12, 24, 36, 48 positions) - select adequate capacity.</p>

<p><strong>Terminal Block Selection:</strong> Choose terminals matching application requirements: spring-clamp or screw terminals (spring preferred for vibration resistance and maintenance-free operation), rated voltage/current (typically 300V, 10-20A for instrumentation), wire size compatibility (typically AWG 24-14 / 0.2-2.5 mm²), feed-through vs. disconnect vs. fuse terminals (disconnect terminals enable isolation for testing), color coding (gray=standard, blue=Ex i, red=power, green/yellow=ground), and accessories (test plugs, end brackets, markers). Quality terminals from Phoenix Contact, Weidmüller, Wago are standard in industrial installations. Avoid economy terminals in critical applications - poor contact resistance causes signal errors and connection failures.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Enclosure Sizing and Selection</h3>

<p>Junction box physical size must accommodate: terminal blocks with adequate spacing (typical 5-10mm between terminals), cable entry glands (top/bottom/sides based on field conditions), wiring channels and cable management, working space for installation and maintenance (NEC requires accessible terminals), internal clearance for environmental conditions (conformal coating, heaters in cold climates). Standard enclosure sizes range from 200×200×150mm (small, 4-8 devices) to 800×600×300mm (large marshalling cabinets, 50+ devices). Material selection affects corrosion resistance and explosion protection: 316 stainless steel (marine/corrosive environments), powder-coated carbon steel (standard industrial), polycarbonate (lightweight, non-corrosive), aluminum (weight-sensitive applications, not suitable all hazardous areas). Ingress protection rating must match environment: IP65 minimum outdoors, IP66/67 for high-pressure washdown, IP68 for submersible applications. Explosion-proof ratings (Ex d, Ex e) require certified enclosures - field modifications void certifications.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Installation Best Practices</h3>

<p>Junction box installation requires careful attention to location, mounting, cable entry, and grounding. Install JBs: near device clusters minimizing field cable runs, accessible for maintenance and troubleshooting (eye-level preferred), protected from direct sunlight, rain, and water pooling (orient cable entries downward for drainage), away from vibration sources, heat sources (avoid mounting on hot pipe racks), and mechanical impact zones. Mounting must withstand wind loads, vibration, and thermal expansion - use substantial brackets bolted to structural steel or concrete. Cable entries use certified glands: EMC glands for shielded cables maintaining shield continuity, stuffing glands for unarmored cables providing strain relief, armored cable glands for SWA/MC cables terminating armor, Ex d cable glands for flameproof enclosures maintaining flame path. All unused cable entries must be blanked with certified plugs maintaining IP rating and explosion protection. Grounding is critical: bond enclosure to equipment ground, terminate cable shields properly (typically one end only to avoid ground loops, document shield termination strategy), use separate ground terminals for Ex i circuits if required by safety barrier manufacturer.</p>
</div>

<div class="tool-container" style="margin-top: 40px;">
<h2>Standards and References</h2>

<p>This calculator implements methodologies from the following instrumentation and electrical standards:</p>

<ul style="line-height: 2;">
<li><strong>IEC 60079 Series:</strong> Explosive atmospheres - Equipment protection standards (Ex d, Ex e, Ex i certification requirements)</li>
<li><strong>IEC 60079-14:</strong> Explosive atmospheres - Electrical installations design, selection and erection</li>
<li><strong>IEC 60079-11:</strong> Explosive atmospheres - Intrinsic safety "i" (entity concept and power limitation)</li>
<li><strong>ISA-RP12.6:</strong> Recommended Practice for Wiring Methods for Hazardous (Classified) Locations</li>
<li><strong>NEC Article 314:</strong> Outlet, Device, Pull, and Junction Boxes; Conduit Bodies; Fittings; and Handhole Enclosures</li>
<li><strong>NEC Article 500-505:</strong> Hazardous (Classified) Locations requirements</li>
<li><strong>IEC 60529:</strong> Degrees of protection provided by enclosures (IP Code)</li>
<li><strong>NEMA 250:</strong> Enclosures for Electrical Equipment (NEMA ratings)</li>
<li><strong>ISA-5.1:</strong> Instrumentation Symbols and Identification standards (documentation requirements)</li>
</ul>

<p><strong>Important Disclaimer:</strong> This calculator provides preliminary junction box load calculations and sizing recommendations based on typical instrumentation practices and standards. Actual installations must comply with all applicable local electrical codes, hazardous area classification drawings, manufacturer specifications, and site-specific safety requirements. Intrinsically safe installations require entity calculations verified by qualified instrumentation engineers and inspection by certified authorities (electrical inspector, third-party certification body). All hazardous area equipment must be certified for the specific Zone/Division classification and installed per certification requirements. Modifications to certified enclosures void certifications. Consult with qualified E&I engineers for critical applications and hazardous area installations.</p>
</div>

</main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <a href="/" class="footer-logo">
                        <img src="logo.png" alt="Design Calculators Logo" loading="lazy" decoding="async">
                        <span class="footer-logo-text">Design Calculators</span>
                    </a>
                    <p class="footer-description">A comprehensive engineering calculator hub based on IEC, IEEE, and
                        global standards.</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn linkedin"
                            aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer"
                            class="social-btn youtube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in&text=Check%20out%20this%20amazing%20engineering%20calculator%20hub!"
                            target="_blank" rel="noopener noreferrer" class="social-btn twitter" aria-label="Twitter"><i
                                class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn facebook"
                            aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn whatsapp"
                            aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="footer-col">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href='/indexele.html'>Electrical Tools</a></li>
                            <li><a href='/indexmech.html'>Mechanical Tools</a></li>
                            <li><a href='/indexinst.html'>Instrumentation Tools</a></li>
                            <li><a href='/about.html'>About Us</a></li>
                            <li><a href='/faq.html'>FAQ</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Learn More</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/@designcalculators" target="_blank"
                                    rel="noopener noreferrer">YouTube Channel</a></li>
                            <li><a href='/contact.html'>Contact Us</a></li>
                            <li><a href='/privacy-policy.html'>Privacy Policy</a></li>
                            <li><a href='/terms-of-service.html'>Terms of Service</a></li>
                            <li><a href='/sitemap2.html'>Sitemap</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Our Network</h4>
                        <ul>
                            <li style="margin-bottom: 12px;">
                                <a href="https://reliabilitytools.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">Reliability Tools</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Reliability
                                    & maintenance engineering calculators.</span>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="https://electrosafe.homes/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">ElectroSafe</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Dedicated
                                    to home electrical safety & protection.</span>
                            </li>
                            <li>
                                <a href="https://knowyourname.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">KnowYourName</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Scientific
                                    name analysis: Phonetics, Ergonomics & Acoustics.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>All calculations are for preliminary engineering design guidance. Final designs must comply with all applicable local and international standards (including but not limited to ASHRAE 90.1, ARI 550/590). Always verify calculations and consult with a licensed professional engineer before implementation or construction.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">Anil Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

<div id="custom-message-box"></div>

<script>
// Wait for DOM to be fully loaded
window.addEventListener('DOMContentLoaded', function() {
    let deviceCount = 0;
    const devicesContainer = document.getElementById('devices-container');
    const addDeviceBtn = document.getElementById('add-device');
    const calculateBtn = document.getElementById('calculate-btn');
    const resultContainer = document.getElementById('result-container');
    const calculationStepsDiv = document.getElementById('calculation-steps');
    const jbAnalysisDiv = document.getElementById('jb-analysis-content');
    const recommendationsDiv = document.getElementById('recommendations-content');
    const exportReportBtn = document.getElementById('export-report');
    
    // Canvas for diagram
    const canvas = document.getElementById('jb-diagram-canvas');
    if (!canvas) {
        console.error('Canvas element not found!');
        return;
    }
    
    const ctx = canvas.getContext('2d');
    if (!ctx) {
        console.error('Cannot get canvas 2D context!');
        return;
    }
    
    // Set canvas dimensions
    function resizeCanvas() {
        const container = canvas.parentElement;
        const displayWidth = Math.min(container.clientWidth - 40, 800);
        const displayHeight = 400;
        
        canvas.style.width = displayWidth + 'px';
        canvas.style.height = displayHeight + 'px';
        
        const scale = window.devicePixelRatio || 1;
        canvas.width = displayWidth * scale;
        canvas.height = displayHeight * scale;
        ctx.scale(scale, scale);
    }
    
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    // Add initial devices
    addDevice();
    addDevice();

    addDeviceBtn.addEventListener('click', addDevice);

    function addDevice() {
        deviceCount++;
        const devDiv = document.createElement('div');
        devDiv.className = 'device-entry';
        devDiv.id = `device-${deviceCount}`;
        
        devDiv.innerHTML = `
            <h4>Device ${deviceCount} 
                <button type="button" class="remove-device-btn" onclick="removeDevice(${deviceCount})">
                    <i class="fas fa-trash"></i> Remove
                </button>
            </h4>
            <div class="form-row">
                <div class="form-group">
                    <label>Device Type</label>
                    <select class="device-type" required>
                        <option value="transmitter-loop" selected>Transmitter (Loop Powered 4-20mA)</option>
                        <option value="transmitter-ext">Transmitter (Externally Powered)</option>
                        <option value="valve-solenoid">Solenoid Valve</option>
                        <option value="switch">On/Off Switch</option>
                        <option value="analyzer">Analyzer (Multi-channel)</option>
                        <option value="rtd">RTD (3 or 4-wire)</option>
                        <option value="thermocouple">Thermocouple</option>
                        <option value="fieldbus">Fieldbus Device (FF/PA)</option>
                        <option value="hart">HART Device</option>
                        <option value="relay">Relay/Indicator</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Device Tag</label>
                    <input type="text" class="device-tag" placeholder="e.g., TT-101" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Power Consumption (mA or W)</label>
                    <input type="number" class="device-power" value="3.6" step="0.1" placeholder="mA for loop, W for powered" required>
                </div>
                <div class="form-group">
                    <label>Number of Terminals Required</label>
                    <input type="number" class="device-terminals" value="2" min="1" step="1" required>
                </div>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" class="device-is-intrinsic" style="width: auto; margin-right: 8px;">
                    Intrinsically Safe (Ex i) Device
                </label>
            </div>
        `;
        
        devicesContainer.appendChild(devDiv);
    }

    window.removeDevice = function(id) {
        const devDiv = document.getElementById(`device-${id}`);
        if (devDiv) {
            devDiv.remove();
        }
    };

    calculateBtn.addEventListener('click', (e) => {
        const ripple = document.createElement('span');
        const diameter = Math.max(calculateBtn.clientWidth, calculateBtn.clientHeight);
        const radius = diameter / 2;
        ripple.style.width = ripple.style.height = `${diameter}px`;
        ripple.style.left = `${e.clientX - (calculateBtn.getBoundingClientRect().left + radius)}px`;
        ripple.style.top = `${e.clientY - (calculateBtn.getBoundingClientRect().top + radius)}px`;
        ripple.classList.add('ripple');
        calculateBtn.appendChild(ripple);
        ripple.addEventListener('animationend', () => ripple.remove());
        
        if (validateInputs()) {
            performJBCalculation();
        }
    });

    function validateInputs() {
        const devices = document.querySelectorAll('.device-entry');
        if (devices.length < 1) {
            displayMessage("Error: Add at least one device.", "error");
            return false;
        }
        return true;
    }

    function performJBCalculation() {
        calculationStepsDiv.innerHTML = '';
        jbAnalysisDiv.innerHTML = '';
        
        // Get JB configuration
        const jbType = document.getElementById('jb-type').value;
        const supplyVoltage = parseFloat(document.getElementById('power-supply-voltage').value);
        const supplyCapacity = parseFloat(document.getElementById('power-supply-capacity').value);
        const environment = document.getElementById('environment').value;
        
        // Collect devices
        const devices = [];
        document.querySelectorAll('.device-entry').forEach(dev => {
            const type = dev.querySelector('.device-type').value;
            const tag = dev.querySelector('.device-tag').value;
            const power = parseFloat(dev.querySelector('.device-power').value);
            const terminals = parseInt(dev.querySelector('.device-terminals').value);
            const isIntrinsic = dev.querySelector('.device-is-intrinsic').checked;
            
            devices.push({ type, tag, power, terminals, isIntrinsic });
        });

        // Step 1: Device inventory
        let deviceList = devices.map((d, i) => 
            `${i+1}. ${d.tag || 'Device ' + (i+1)}: ${d.type}, ${d.power} ${d.type.includes('loop') || d.type === 'fieldbus' ? 'mA' : 'W'}, ${d.terminals} terminals${d.isIntrinsic ? ' (Ex i)' : ''}`
        ).join('<br>');
        
        addCalculationStep(1, 'Device Inventory',
            'List all devices connected to junction box',
            `${devices.length} devices total:<br>${deviceList}`,
            `<strong>${devices.length} field devices</strong>`
        );

        // Step 2: Calculate total power load
        let totalCurrent = 0;
        let totalPower = 0;
        
        devices.forEach(d => {
            if (d.type.includes('loop') || d.type === 'fieldbus') {
                totalCurrent += d.power / 1000; // Convert mA to A
                totalPower += supplyVoltage * (d.power / 1000);
            } else {
                totalPower += d.power;
                totalCurrent += d.power / supplyVoltage;
            }
        });
        
        const powerMargin = supplyCapacity - totalCurrent;
        const utilizationPercent = (totalCurrent / supplyCapacity) * 100;
        
        addCalculationStep(2, 'Total Power Load Calculation',
            '$$I_{total} = \\sum I_{devices}, \\quad P_{total} = V \\times I_{total}$$',
            `Supply voltage: ${supplyVoltage} VDC<br>` +
            `Supply capacity: ${supplyCapacity} A<br>` +
            `Total current: ${totalCurrent.toFixed(3)} A<br>` +
            `Total power: ${totalPower.toFixed(2)} W<br>` +
            `Available margin: ${powerMargin.toFixed(3)} A<br>` +
            `Utilization: ${utilizationPercent.toFixed(1)}%`,
            `Power Load: <strong>${totalCurrent.toFixed(3)} A (${totalPower.toFixed(1)} W)</strong>`
        );

        // Step 3: Calculate terminal count
        const totalTerminals = devices.reduce((sum, d) => sum + d.terminals, 0);
        const shieldTerminals = Math.ceil(devices.length * 0.8); // Assume 80% have shields
        const spareTerminals = Math.ceil(totalTerminals * 0.2); // 20% spares
        const grandTotalTerminals = totalTerminals + shieldTerminals + spareTerminals;
        
        addCalculationStep(3, 'Terminal Block Sizing',
            'Total terminals including device, shield, and spare capacity',
            `Device terminals: ${totalTerminals}<br>` +
            `Shield terminals: ${shieldTerminals}<br>` +
            `Spare terminals (20%): ${spareTerminals}<br>` +
            `Total required: ${grandTotalTerminals}`,
            `Terminals Needed: <strong>${grandTotalTerminals} positions</strong>`
        );

        // Step 4: Intrinsic safety check
        const exiDevices = devices.filter(d => d.isIntrinsic).length;
        const nonExiDevices = devices.length - exiDevices;
        
        if (exiDevices > 0) {
            addCalculationStep(4, 'Intrinsic Safety Requirements',
                'Devices requiring Ex i certification and separation',
                `Intrinsically safe devices: ${exiDevices}<br>` +
                `Non-Ex i devices: ${nonExiDevices}<br>` +
                `Required: Ex e or Ex d enclosure, 50mm separation, blue terminals for Ex i circuits`,
                `Ex i Compliance: <strong>${exiDevices} device(s) require intrinsic safety</strong>`
            );
        }

        // Step 5: Cable entry requirements
        const cableEntries = devices.length + Math.ceil(devices.length * 0.1); // 10% spares
        
        addCalculationStep(5, 'Cable Entry Requirements',
            'Minimum cable glands needed for field cables',
            `Devices: ${devices.length}<br>` +
            `Spare capacity: ${Math.ceil(devices.length * 0.1)}<br>` +
            `Minimum entries: ${cableEntries}<br>` +
            `Recommend: ${Math.ceil(cableEntries / 2)} top + ${Math.ceil(cableEntries / 2)} bottom entries`,
            `Cable Entries: <strong>${cableEntries} glands minimum</strong>`
        );

        // Step 6: Enclosure size recommendation
        let enclosureSize;
        if (grandTotalTerminals <= 24) enclosureSize = "300 × 250 × 150 mm";
        else if (grandTotalTerminals <= 48) enclosureSize = "400 × 300 × 200 mm";
        else if (grandTotalTerminals <= 96) enclosureSize = "600 × 400 × 250 mm";
        else enclosureSize = "800 × 600 × 300 mm";
        
        addCalculationStep(6, 'Enclosure Size Recommendation',
            'Based on terminal count and cable entry requirements',
            `Terminal capacity: ${grandTotalTerminals}<br>` +
            `Cable entries: ${cableEntries}<br>` +
            `Environment: ${environment}<br>` +
            `Recommended minimum size: ${enclosureSize}`,
            `Enclosure Size: <strong>${enclosureSize}</strong>`
        );

        // Render MathJax
        if (window.MathJax) {
            window.MathJax.typesetPromise([calculationStepsDiv]);
        }

        // Draw JB diagram
        drawJBDiagram(devices.length, grandTotalTerminals, cableEntries);

        // Analysis
        performJBAnalysis(utilizationPercent, powerMargin, exiDevices, grandTotalTerminals, jbType);

        // Recommendations
        generateRecommendations(jbType, environment, exiDevices, devices.length);

        // Show results
        resultContainer.classList.add('show');
        setTimeout(() => resultContainer.scrollIntoView({ behavior: 'smooth', block: 'start' }), 300);
    }

    function addCalculationStep(step, title, formula, calculation, result) {
        const stepDiv = document.createElement('div');
        stepDiv.className = 'calculation-step-container';
        
        let content = `<div class="step-header">Step ${step}: ${title}</div>
                       <div class="step-content">`;
        if (formula) content += `<p class="formula">${formula}</p>`;
        if (calculation) content += `<p class="calculation">${calculation}</p>`;
        if (result) content += `<p class="final-result">${result}</p>`;
        content += `</div>`;
        
        stepDiv.innerHTML = content;
        calculationStepsDiv.appendChild(stepDiv);
    }

    function drawJBDiagram(deviceCount, terminals, cableEntries) {
        const canvasWidth = canvas.width / (window.devicePixelRatio || 1);
        const canvasHeight = canvas.height / (window.devicePixelRatio || 1);
        
        ctx.clearRect(0, 0, canvasWidth, canvasHeight);
        
        const jbX = canvasWidth / 2 - 150;
        const jbY = canvasHeight / 2 - 100;
        const jbWidth = 300;
        const jbHeight = 200;
        
        // Draw JB enclosure
        ctx.strokeStyle = '#2563EB';
        ctx.lineWidth = 3;
        ctx.strokeRect(jbX, jbY, jbWidth, jbHeight);
        
        ctx.fillStyle = 'rgba(37, 99, 235, 0.1)';
        ctx.fillRect(jbX, jbY, jbWidth, jbHeight);
        
        // Draw terminal blocks inside
        ctx.fillStyle = '#10B981';
        const termWidth = 200;
        const termHeight = 40;
        ctx.fillRect(jbX + 50, jbY + 30, termWidth, termHeight);
        ctx.fillRect(jbX + 50, jbY + 80, termWidth, termHeight);
        ctx.fillRect(jbX + 50, jbY + 130, termWidth, termHeight);
        
        // Terminal labels
        ctx.fillStyle = '#111827';
        ctx.font = '12px Inter';
        ctx.textAlign = 'center';
        ctx.fillText('Terminal Blocks', jbX + jbWidth/2, jbY + 55);
        ctx.fillText(`${terminals} Positions`, jbX + jbWidth/2, jbY + 105);
        
        // Draw cable entries (top)
        ctx.strokeStyle = '#F59E0B';
        ctx.lineWidth = 2;
        const topEntries = Math.min(cableEntries, 6);
        for (let i = 0; i < topEntries; i++) {
            const x = jbX + 40 + i * 45;
            ctx.beginPath();
            ctx.moveTo(x, jbY);
            ctx.lineTo(x, jbY - 30);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.arc(x, jbY - 35, 5, 0, 2 * Math.PI);
            ctx.fill();
        }
        
        // Labels
        ctx.fillStyle = '#111827';
        ctx.font = 'bold 16px Inter';
        ctx.textAlign = 'center';
        ctx.fillText('Junction Box', jbX + jbWidth/2, jbY - 60);
        
        ctx.font = '12px Inter';
        ctx.fillText(`${deviceCount} Devices`, jbX + jbWidth/2, jbY + jbHeight + 30);
        ctx.fillText(`${cableEntries} Cable Entries`, jbX + jbWidth/2, jbY + jbHeight + 50);
    }

    function performJBAnalysis(utilization, margin, exiCount, terminals, jbType) {
        let html = '';
        
        // Power assessment
        if (utilization < 60) {
            html += `
                <div class="analysis-item info">
                    <h5><i class="fas fa-check-circle"></i> Adequate Power Capacity</h5>
                    <p>Power supply utilization of ${utilization.toFixed(1)}% provides excellent margin (${margin.toFixed(2)}A available). 
                    This headroom accommodates: future device additions, startup inrush currents, aging effects reducing supply capacity, 
                    and worst-case device power consumption. Good design practice maintains <70% utilization for reliability.</p>
                </div>
            `;
        } else if (utilization < 85) {
            html += `
                <div class="analysis-item warning">
                    <h5><i class="fas fa-exclamation-circle"></i> High Power Utilization</h5>
                    <p>Power supply utilization of ${utilization.toFixed(1)}% approaches capacity limits (only ${margin.toFixed(2)}A margin). 
                    Consider: (1) Upgrading to higher capacity supply, (2) Splitting load across multiple JBs, (3) Verifying actual device consumption vs. specifications, 
                    or (4) Using loop-powered devices where possible to reduce load. Limited margin risks brownout conditions affecting device operation.</p>
                </div>
            `;
        } else {
            html += `
                <div class="analysis-item critical">
                    <h5><i class="fas fa-exclamation-triangle"></i> Insufficient Power Capacity</h5>
                    <p>CRITICAL: Power supply utilization ${utilization.toFixed(1)}% EXCEEDS capacity! Only ${margin.toFixed(2)}A margin (negative indicates overload). 
                    This configuration WILL NOT operate reliably. Devices experience brownouts, erratic operation, or complete failure. 
                    REQUIRED ACTION: Increase supply capacity or reduce load. Do not proceed with installation until resolved.</p>
                </div>
            `;
        }
        
        // Terminal capacity
        html += `
            <div class="analysis-item info">
                <h5><i class="fas fa-grip-horizontal"></i> Terminal Block Configuration</h5>
                <p>Total ${terminals} terminal positions required. Recommend terminal block arrangement: 
                ${Math.ceil(terminals / 48)} rows of 48-position blocks or equivalent. 
                Use spring-clamp terminals for vibration resistance and maintenance-free operation. 
                Color coding: Gray (standard signals), Blue (Ex i circuits), Red (power), Green/Yellow (ground). 
                Include disconnect terminals for test points enabling loop checking without disconnecting wires.</p>
            </div>
        `;
        
        // Intrinsic safety
        if (exiCount > 0) {
            html += `
                <div class="analysis-item warning">
                    <h5><i class="fas fa-shield-alt"></i> Intrinsic Safety Requirements</h5>
                    <p>${exiCount} intrinsically safe device(s) require special considerations: 
                    (1) Junction box must have Ex e (increased safety) or Ex d (flameproof) certification for Zone 1/Div 1 installations, 
                    (2) Minimum 50mm physical separation between Ex i and non-Ex i circuits, or use insulating barriers, 
                    (3) Use blue terminals for Ex i circuits (visual identification), (4) Verify entity parameters: Uo ≤ Ui, Io ≤ Ii, Co+Ccable ≤ Ci, Lo+Lcable ≤ Li, 
                    (5) Proper bonding and grounding per IEC 60079-14. Document entity calculations and maintain with installation records.</p>
                </div>
            `;
        }
        
        jbAnalysisDiv.innerHTML = html;
    }

    function generateRecommendations(jbType, environment, exiCount, deviceCount) {
        let html = '<ul>';
        
        html += `<li><strong>Junction Box Type Selection:</strong> ${jbType} configuration selected. 
                 Requirements: Standard (safe area) uses general purpose enclosures meeting IP rating only. 
                 Increased safety (Ex e) for Zone 1 non-sparking equipment with enhanced terminal protection. 
                 Intrinsic safety (Ex i) requires Ex e or Ex d enclosure housing IS terminals. 
                 Flameproof (Ex d) contains internal explosions preventing ignition of external atmosphere. 
                 Fieldbus JBs integrate power supply, terminators, and diagnostics for FF/Profibus networks. 
                 All hazardous area equipment must be certified by recognized body (ATEX, IECEx, CSA, FM).</li>`;
        
        html += `<li><strong>Environmental Protection Standards:</strong> ${environment} classification requires proper enclosure selection. 
                 IP65: Dust tight, protected against water jets (outdoor, standard industrial). 
                 IP66: Dust tight, protected against powerful water jets (high-pressure washdown areas). 
                 IP67: Dust tight, protected against temporary immersion 1m depth (flood-prone areas). 
                 NEMA 4X: Watertight, dust tight, corrosion resistant (marine, chemical plants). 
                 NEMA 7: Explosion-proof for Division 1 hazardous locations. 
                 Maintain IP rating: Use only certified cable glands, blank unused entries, ensure gasket condition, verify door seal integrity.</li>`;
        
        html += `<li><strong>Terminal Block Best Practices:</strong> For ${deviceCount} devices, use quality terminal blocks from reputable manufacturers (Phoenix Contact, Weidmüller, Wago). 
                 Spring-clamp terminals preferred over screw terminals for: vibration resistance, no periodic retightening, faster installation, consistent contact force. 
                 Select appropriate terminal type: Feed-through (standard), disconnect (test points), fuse holders (individual circuit protection), ground terminals (separate from signal). 
                 Wire size compatibility typically AWG 24-14 (0.2-2.5 mm²). Voltage/current rating: 300V, 10-20A minimum for instrumentation. 
                 Proper torque for screw terminals critical - under-tightened causes high resistance and heating, over-tightened damages conductor.</li>`;
        
        html += `<li><strong>Cable Entry Planning:</strong> Calculate entries: one per field cable plus 10-20% spares for future additions. 
                 Entry location strategy: Top entries for overhead cable tray/conduit installation, bottom entries for underground/trench runs (preferred for water drainage), 
                 side entries for horizontal routing. Orient JB so cable entries slope downward for water drainage preventing pooling inside glands. 
                 Use certified cable glands maintaining enclosure rating: EMC glands (shielded cables), armored cable glands (SWA termination), 
                 Ex d glands (flameproof applications), thread adapters (NPT↔metric conversion). All unused entries must be blanked with certified plugs.</li>`;
        
        html += `<li><strong>Grounding and EMC:</strong> Proper grounding essential for: personnel safety (fault current path), equipment protection (lightning/surge), 
                 EMI immunity (shield termination), and intrinsic safety (ground reference). Bond JB enclosure to equipment ground using minimum 6mm² (AWG 10) conductor. 
                 For shielded instrumentation cables: terminate shields at one end only preventing ground loops (typically at control system end), 
                 use insulated shield terminals at field JB end if not grounding there, document shield termination strategy in loop diagrams. 
                 Ex i circuits may require both ends grounded per safety barrier manufacturer specifications. Verify continuity of ground path during commissioning.</li>`;
        
        if (exiCount > 0) {
            html += `<li><strong>Intrinsic Safety Installation Requirements (IEC 60079-11/14):</strong> Verify entity parameters for each IS loop: 
                     Safety barrier output parameters (Uo, Io, Po, Co, Lo) must be ≤ device input parameters (Ui, Ii, Pi, Ci, Li). 
                     Include cable capacitance/inductance: Co+Ccable ≤ Ci, Lo+Lcable ≤ Li. Use manufacturer cable specifications or conservative estimates (60 pF/m, 1 μH/m). 
                     Physical separation: 50mm air gap or insulating barrier between IS and non-IS circuits. No sharing of terminals or wireway between IS/non-IS. 
                     Blue terminals for IS circuits (IEC standard). Label all IS wiring with IS symbol. IS circuits must be grounded per barrier manufacturer requirements. 
                     Inspection authority will verify all entity calculations and separation during commissioning approval.</li>`;
        }
        
        html += `<li><strong>Power Supply Sizing Methodology:</strong> Calculate load accounting for: Nameplate device ratings (may be maximum, not typical), 
                 startup inrush (momentary high current), simultaneous operation (worst-case), ambient temperature derating (power supplies derate at high temperature), 
                 and aging (supply capacity decreases over time). Design margin: 25-40% headroom recommended. For 4-20mA loops, power = V × I × n (simple sum). 
                 For solenoid valves: account for inrush (5-10× holding current), use holding current for steady-state calculation. 
                 Install circuit protection: Fuse or circuit breaker at supply output protecting wiring from overcurrent faults. 
                 Consider redundant power supplies for critical applications (1+1 or N+1 configuration).</li>`;
        
        html += `<li><strong>Installation Location and Mounting:</strong> Position JBs near device clusters minimizing field cable runs (cost reduction, signal integrity). 
                 Mounting height: 1.2-1.8m eye level for maintenance accessibility. Avoid: direct sun exposure (internal temperature rise affecting electronics), 
                 water pooling locations (even IP67 fails with standing water), vibration sources (machinery, pipe racks with flow-induced vibration), 
                 heat sources (hot pipes, heaters), mechanical impact zones (vehicle traffic, material handling). 
                 Mounting must withstand: wind loads (calculate per local code), thermal expansion (allow movement or use flexible mount), 
                 vibration (use anti-vibration mounts if needed). Structure attachment: bolt to substantial support (structural steel, concrete) 
                 capable of supporting JB weight plus cable loading. Use stainless steel hardware in corrosive environments.</li>`;
        
        html += `<li><strong>Documentation and Labeling:</strong> Maintain complete documentation: JB internal wiring diagram showing terminal assignments, 
                 device list with tag numbers and terminal allocations, cable schedules identifying each cable and destination, 
                 loop diagrams showing signal flow from field to control room, entity calculations for IS circuits, and test records from commissioning. 
                 Labeling requirements: JB identification tag (unique identifier), terminal labels matching loop diagrams, cable identification at each end, 
                 IS circuit identification (blue background), hazardous area rating placard, and warning labels per code requirements. 
                 Keep one copy of documentation inside JB in weatherproof holder for field reference during maintenance and troubleshooting.</li>`;
        
        html += '</ul>';
        recommendationsDiv.innerHTML = html;
    }

    function displayMessage(message, type = "info") {
        const messageBox = document.getElementById('custom-message-box');
        messageBox.textContent = message;
        messageBox.style.color = 'white';
        if (type === "error") messageBox.style.backgroundColor = '#dc3545';
        else if (type === "warning") {
            messageBox.style.backgroundColor = '#ffc107';
            messageBox.style.color = '#333';
        } else messageBox.style.backgroundColor = '#28a745';
        messageBox.style.opacity = 1;
        setTimeout(() => { messageBox.style.opacity = 0; }, 5000);
    }

    exportReportBtn.addEventListener('click', function() {
        displayMessage("Export feature would generate complete JB specification document with wiring diagrams in full implementation", "success");
    });
    
    console.log('Junction box load calculator initialized successfully');
});

// Theme Toggle
document.addEventListener('DOMContentLoaded', () => {
    const themeSwitch = document.getElementById('theme-switch');
    const body = document.body;
    const currentTheme = localStorage.getItem('theme');
    if (currentTheme) {
        body.classList.add(currentTheme);
        if (currentTheme === 'dark-mode') themeSwitch.checked = true;
    }
    themeSwitch.addEventListener('change', () => {
        if (themeSwitch.checked) {
            body.classList.add('dark-mode');
            localStorage.setItem('theme', 'dark-mode');
        } else {
            body.classList.remove('dark-mode');
            localStorage.setItem('theme', 'light-mode');
        }
    });
});
</script>

</body>
</html>
