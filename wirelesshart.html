<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WirelessHART Network Planner - Professional Edition | Design Calculators</title>
<meta name="description" content="Professional WirelessHART network planning tool for device placement, gateway sizing, and mesh network design. Plan reliable wireless networks following IEC 62591, FieldComm Group guidelines for process automation.">
<meta name="keywords" content="WirelessHART network planner, IEC 62591, wireless device placement, mesh network design, gateway sizing, FieldComm Group, industrial wireless">
<meta name="author" content="Design Calculators">
<meta name="robots" content="index, follow">

<!-- AdSense & Analytics -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-23Y1V450SR');
</script>

<!-- Preconnect -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- MathJax for equations -->
<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
MathJax = {
tex: {
inlineMath: [['$', '$'], ['\\(', '\\)']],
displayMath: [['$$', '$$'], ['\\[', '\\]']]
},
svg: {
fontCache: 'global'
}
};
</script>

<!-- Favicon -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="icon" href="/favicon.ico" type="image/x-icon">

<style>
:root {
--primary-color: #1E3A8A;
--secondary-color: #2563EB;
--accent-color: #F59E0B;
--bg-color: #F8FAFC;
--card-bg: #FFFFFF;
--text-color: #4B5563;
--heading-color: #111827;
--footer-bg: #0F172A;
--border-color: #E2E8F0;
--gradient-primary: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
--gradient-dark: linear-gradient(135deg, #0F172A, #1E293B);
--card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
--hover-color: #e2e6ea;
--button-hover-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
--highlight-bg: rgba(245, 158, 11, 0.2);
}

body.dark-mode {
--primary-color: #10B981;
--secondary-color: #34D399;
--bg-color: #0F172A;
--card-bg: #1E293B;
--text-color: #CBD5E1;
--heading-color: #F1F5F9;
--footer-bg: #020617;
--border-color: #334155;
--highlight-bg: rgba(16, 185, 129, 0.3);
--hover-color: #1E293B;
}

html { 
scroll-behavior: smooth;
}

body {
font-family: 'Inter', sans-serif;
background-color: var(--bg-color);
color: var(--text-color);
line-height: 1.8;
transition: background-color 0.3s, color 0.3s;
overflow-x: hidden;
margin: 0;
padding: 0;
}

.container { 
max-width: 1280px; 
margin: 0 auto; 
padding: 0 24px; 
}

.content-container {
max-width: 1200px;
margin: 0 auto;
padding: 20px;
}

/* Header */
.header {
background: var(--gradient-primary);
color: white;
padding: 24px 0;
position: relative;
overflow: hidden;
}

.navbar { 
display: flex; 
justify-content: space-between;
align-items: center; 
}

.logo-container { 
display: flex; 
align-items: center; 
gap: 16px; 
text-decoration: none; 
color: white; 
}

.logo { 
height: 56px;
}

.logo-text {
font-size: 1.75rem;
font-weight: 800;
font-family: 'Montserrat', sans-serif;
}

.nav-links {
display: flex;
gap: 24px;
align-items: center;
list-style: none;
margin: 0;
padding: 0;
}

.nav-links a {
color: white;
text-decoration: none;
font-weight: 500;
transition: color 0.3s;
}

.nav-links a:hover {
color: var(--accent-color);
}

.theme-toggle { 
display: flex; 
align-items: center; 
gap: 12px;
}

.theme-toggle .icon { 
color: white; 
font-size: 1.2rem; 
}

.switch { 
position: relative; 
display: inline-block; 
width: 56px; 
height: 30px;
}

.switch input { 
opacity: 0; 
width: 0; 
height: 0; 
}

.slider { 
position: absolute; 
cursor: pointer; 
top: 0; 
left: 0;
right: 0; 
bottom: 0; 
background-color: rgba(0,0,0,0.2); 
transition: .4s; 
border-radius: 30px; 
}

.slider:before { 
position: absolute; 
content: ""; 
height: 22px; 
width: 22px;
left: 4px; 
bottom: 4px; 
background-color: white; 
transition: .4s; 
border-radius: 50%; 
}

input:checked + .slider { 
background-color: var(--accent-color);
}

input:checked + .slider:before { 
transform: translateX(26px); 
}

main { 
padding: 40px 0; 
}

/* Calculator Specific Styles */
.tool-container {
background-color: var(--card-bg);
border-radius: 8px;
padding: 30px;
box-shadow: var(--card-shadow);
margin-bottom: 30px;
}

.tool-container h2 {
color: var(--primary-color);
border-bottom: 3px solid var(--primary-color);
padding-bottom: 15px;
margin-top: 0;
margin-bottom: 25px;
font-family: 'Montserrat', sans-serif;
}

.tool-description {
margin-bottom: 25px;
color: var(--text-color);
font-size: 1.1rem;
}

.calculator-form {
background-color: var(--card-bg);
border-radius: 8px;
padding: 25px;
margin-top: 25px;
box-shadow: var(--card-shadow);
}

.form-group {
margin-bottom: 20px;
}

.form-group label {
display: block;
margin-bottom: 8px;
font-weight: 600;
color: var(--heading-color);
}

.form-group input, .form-group select {
width: 100%;
padding: 12px;
border: 1px solid var(--border-color);
border-radius: 5px;
background-color: var(--bg-color);
color: var(--text-color);
box-sizing: border-box;
transition: border-color 0.3s, box-shadow 0.3s;
font-size: 1rem;
}

.form-group input:focus, .form-group select:focus {
border-color: var(--primary-color);
box-shadow: 0 0 8px rgba(30, 58, 138, 0.3);
outline: none;
}

.form-row {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 20px;
}

.calculate-btn {
background: var(--gradient-primary);
color: white;
border: none;
padding: 15px 25px;
border-radius: 5px;
cursor: pointer;
font-size: 1.1rem;
font-weight: 700;
margin-top: 15px;
transition: transform 0.2s, box-shadow 0.3s;
position: relative;
overflow: hidden;
width: 100%;
}

.calculate-btn:hover {
transform: translateY(-3px);
box-shadow: var(--button-hover-shadow);
}

.calculate-btn .ripple {
position: absolute;
border-radius: 50%;
background-color: rgba(255, 255, 255, 0.7);
animation: ripple-effect 0.6s linear forwards;
transform: scale(0);
pointer-events: none;
}

@keyframes ripple-effect {
to {
transform: scale(4);
opacity: 0;
}
}

.result-container {
margin-top: 40px;
padding: 25px;
border-radius: 8px;
background-color: var(--card-bg);
box-shadow: var(--card-shadow);
display: none;
opacity: 0;
transform: translateY(20px);
transition: opacity 0.5s ease-out, transform 0.5s ease-out;
}

.result-container.show {
display: block;
opacity: 1;
transform: translateY(0);
}

.result-container h3 {
color: var(--primary-color);
margin-bottom: 20px;
font-family: 'Montserrat', sans-serif;
font-size: 1.5rem;
}

.calculation-step-container {
margin-bottom: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
overflow: hidden;
opacity: 0;
transform: translateX(-20px);
animation: fadeInSlideIn 0.5s ease-out forwards;
}

.calculation-step-container:nth-child(odd) {
background-color: rgba(0,0,0,0.02);
}

body.dark-mode .calculation-step-container:nth-child(odd) {
background-color: rgba(255,255,255,0.02);
}

.step-header {
background-color: var(--hover-color);
padding: 12px 15px;
font-weight: 700;
color: var(--heading-color);
border-bottom: 1px solid var(--border-color);
cursor: pointer;
display: flex;
align-items: center;
justify-content: space-between;
}

.step-content {
padding: 15px;
display: block;
}

.step-content p.formula {
font-family: 'Times New Roman', serif;
font-size: 1.1em;
text-align: center;
padding: 12px;
background-color: var(--bg-color);
border: 1px solid var(--border-color);
border-radius: 4px;
margin: 10px 0;
overflow-x: auto;
color: var(--text-color);
line-height: 1.8;
}

.step-content p.calculation {
font-family: 'Courier New', monospace;
background-color: var(--bg-color);
padding: 10px 12px;
border-radius: 3px;
margin: 8px 0;
color: var(--text-color);
word-wrap: break-word;
line-height: 1.6;
border-left: 3px solid var(--secondary-color);
}

.step-content .final-result {
font-weight: 700;
font-size: 1.1rem;
color: var(--primary-color);
background: var(--highlight-bg);
padding: 12px 15px;
border-radius: 5px;
text-align: center;
margin-top: 12px;
border-left: 4px solid var(--primary-color);
}

.network-table {
width: 100%;
border-collapse: collapse;
margin: 20px 0;
}

.network-table th,
.network-table td {
border: 1px solid var(--border-color);
padding: 12px;
text-align: left;
}

.network-table th {
background-color: var(--primary-color);
color: white;
font-weight: 700;
}

.network-table tr:nth-child(even) {
background-color: rgba(0,0,0,0.02);
}

body.dark-mode .network-table tr:nth-child(even) {
background-color: rgba(255,255,255,0.02);
}

.recommendations {
margin-top: 30px;
padding: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
background-color: var(--bg-color);
}

.recommendations h4 {
color: var(--secondary-color);
margin-top: 0;
margin-bottom: 15px;
}

.recommendations ul {
padding-left: 20px;
margin: 0;
}

.recommendations ul li {
margin-bottom: 12px;
line-height: 1.6;
}

.info-icon {
color: var(--primary-color);
margin-left: 8px;
cursor: help;
}

.tooltip {
position: relative;
display: inline-block;
}

.tooltip .tooltiptext {
visibility: hidden;
width: 250px;
background-color: #333;
color: #fff;
text-align: center;
border-radius: 6px;
padding: 8px;
position: absolute;
z-index: 1;
bottom: 125%;
left: 50%;
margin-left: -125px;
opacity: 0;
transition: opacity 0.3s;
font-size: 0.9rem;
line-height: 1.4;
}

.tooltip:hover .tooltiptext {
visibility: visible;
opacity: 1;
}

#custom-message-box {
position: fixed;
top: 20px;
left: 50%;
transform: translateX(-50%);
padding: 15px 25px;
border-radius: 8px;
box-shadow: 0 4px 10px rgba(0,0,0,0.2);
z-index: 1000;
font-weight: bold;
color: white;
opacity: 0;
transition: opacity 0.5s ease-in-out;
}

@keyframes fadeInSlideIn {
from {
opacity: 0;
transform: translateX(-20px);
}
to {
opacity: 1;
transform: translateX(0);
}
}

/* Network diagram container */
.network-diagram-container {
margin-top: 30px;
padding: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
background-color: var(--card-bg);
}

.network-diagram-container h4 {
color: var(--primary-color);
margin-top: 0;
margin-bottom: 15px;
font-family: 'Montserrat', sans-serif;
text-align: center;
}

#network-topology-canvas {
display: block;
width: 100%;
max-width: 800px;
height: 400px;
margin: 0 auto;
border: 1px solid var(--border-color);
border-radius: 5px;
background-color: var(--bg-color);
}

.network-analysis {
margin-top: 30px;
padding: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
background-color: var(--card-bg);
}

.network-analysis h4 {
color: var(--primary-color);
margin-top: 0;
margin-bottom: 15px;
font-family: 'Montserrat', sans-serif;
}

.network-item {
margin-bottom: 15px;
padding: 15px;
border-radius: 5px;
background-color: var(--hover-color);
}

.network-item.critical {
border-left: 4px solid #EF4444;
background-color: rgba(239, 68, 68, 0.1);
}

.network-item.warning {
border-left: 4px solid var(--accent-color);
background-color: rgba(245, 158, 11, 0.1);
}

.network-item.info {
border-left: 4px solid var(--secondary-color);
background-color: rgba(37, 99, 235, 0.1);
}

.network-item h5 {
margin-top: 0;
margin-bottom: 10px;
display: flex;
align-items: center;
gap: 8px;
color: var(--heading-color);
}

.network-item p {
margin: 0;
line-height: 1.6;
}

.export-section {
margin-top: 25px;
text-align: center;
}

.export-btn {
background-color: var(--secondary-color);
color: white;
border: none;
padding: 12px 20px;
border-radius: 5px;
cursor: pointer;
font-weight: 600;
transition: background-color 0.3s;
display: inline-flex;
align-items: center;
gap: 8px;
}

.export-btn:hover {
background-color: var(--primary-color);
}

/* Footer */
footer { 
background: var(--gradient-dark);
color: #CBD5E1;
padding: 50px 0 20px 0; 
}

.footer-content {
display: flex;
justify-content: space-between;
align-items: flex-start;
flex-wrap: wrap;
gap: 40px;
margin-bottom: 30px;
}

.footer-col {
flex: 1;
min-width: 200px;
}

.footer-col h4 { 
font-size: 1.1rem;
color: white; 
margin-bottom: 15px; 
font-weight: 700;
}

.footer-col ul { 
list-style: none; 
padding: 0; 
margin: 0;
}

.footer-col ul li { 
margin-bottom: 10px;
}

.footer-col a { 
color: #CBD5E1; 
text-decoration: none; 
transition: color 0.3s;
font-size: 0.95rem;
}

.footer-col a:hover { 
color: var(--accent-color); 
}

.footer-disclaimer {
text-align: center;
margin: 30px auto;
padding-top: 25px;
border-top: 1px solid #334155;
max-width: 800px;
font-size: 0.9rem;
line-height: 1.6;
}

.footer-bottom { 
text-align: center; 
padding-top: 20px;
font-size: 0.9rem; 
color: #94A3B8;
}

.creator-name { 
color: var(--secondary-color); 
font-weight: bold; 
}

.social-buttons {
display: flex;
gap: 12px;
margin-top: 15px;
}

.social-btn {
width: 40px;
height: 40px;
display: inline-flex;
justify-content: center;
align-items: center;
color: white;
border-radius: 50%;
text-decoration: none;
font-size: 1.1rem;
transition: transform 0.3s, box-shadow 0.3s;
box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.social-btn:hover {
transform: translateY(-4px);
box-shadow: 0 8px 16px rgba(0,0,0,0.3);
}

.social-btn.linkedin {
background-color: #0A66C2;
}

.social-btn.youtube {
background-color: #FF0000;
}

.social-btn.twitter {
background-color: #1DA1F2;
}

.social-btn.facebook {
background-color: #1877F2;
}

.social-btn.whatsapp {
background-color: #25D366;
}

@media (max-width: 768px) {
.navbar { 
flex-direction: column;
gap: 20px; 
}

.nav-links {
flex-direction: column;
gap: 12px;
text-align: center;
}

.form-row {
grid-template-columns: 1fr;
}

.container {
padding: 15px;
}

.content-container {
padding: 15px;
}

.tool-container {
padding: 20px;
}

.footer-content {
flex-direction: column;
gap: 25px;
}

#network-topology-canvas {
height: 300px;
}
}
</style>
</head>
<body>

<header class="header">
<div class="container">
<nav class="navbar">
<a href="/" class="logo-container">
<span class="logo-text">Design Calculators</span>
</a>
<ul class="nav-links">
<li><a href="/">Home</a></li>
<li><a href="/articles.html">Articles</a></li>
<li><a href="/indexMech.html">Mechanical</a></li>
<li><a href="/indexele.html">Electrical</a></li>
<li><a href="/indexinst.html">Instrumentation</a></li>
</ul>
<div class="theme-toggle">
<i class="fas fa-sun icon"></i>
<label class="switch">
<input type="checkbox" id="theme-switch">
<span class="slider"></span>
</label>
<i class="fas fa-moon icon"></i>
</div>
</nav>
</div>
</header>

<main class="content-container">

<div class="tool-container">
<h2>WirelessHART Network Planner</h2>

<div class="tool-description">
<p>This professional WirelessHART network planning tool helps design reliable wireless mesh networks for process automation and asset monitoring. Based on IEC 62591 standard and FieldComm Group deployment guidelines, this calculator determines gateway requirements, optimal device placement, network topology, power budgets, and communication reliability. Essential for instrumentation engineers, automation specialists, and commissioning teams deploying WirelessHART networks in oil & gas, chemical, power generation, water treatment, and manufacturing facilities.</p>

<p><strong>Key Features:</strong> Calculate gateway capacity, device-to-gateway ratios, mesh network redundancy, RF path loss analysis, neighbor device recommendations, battery life estimation for field devices, network latency calculations, and compliance verification per industry best practices for industrial wireless deployments.</p>
</div>

<div class="calculator-form">
<form id="network-form">

<!-- Network Scope -->
<div class="form-group">
<label for="industry-type">Industry / Application Type</label>
<select id="industry-type" required>
<option value="oil-gas" selected>Oil & Gas (Refinery/Upstream)</option>
<option value="chemical">Chemical Processing</option>
<option value="power">Power Generation</option>
<option value="water">Water/Wastewater Treatment</option>
<option value="pharma">Pharmaceutical</option>
<option value="pulp-paper">Pulp & Paper</option>
<option value="mining">Mining & Minerals</option>
<option value="food-bev">Food & Beverage</option>
</select>
</div>

<!-- Device Count -->
<div class="form-row">
<div class="form-group">
<label for="total-devices">Total WirelessHART Devices <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Number of field devices + adapters to be deployed</span></span></label>
<input type="number" id="total-devices" value="50" min="1" max="500" step="1" required>
</div>
<div class="form-group">
<label for="device-density">Device Density <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Average number of devices per 100m radius</span></span></label>
<select id="device-density" required>
<option value="low">Low (< 10 devices/100m)</option>
<option value="medium" selected>Medium (10-20 devices/100m)</option>
<option value="high">High (> 20 devices/100m)</option>
</select>
</div>
</div>

<!-- Coverage Area -->
<div class="form-row">
<div class="form-group">
<label for="area-length">Site Length (m) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Maximum distance across network coverage area</span></span></label>
<input type="number" id="area-length" value="200" min="10" step="10" required>
</div>
<div class="form-group">
<label for="area-width">Site Width (m) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Perpendicular dimension of coverage area</span></span></label>
<input type="number" id="area-width" value="150" min="10" step="10" required>
</div>
</div>

<!-- Environment -->
<div class="form-group">
<label for="environment">RF Environment <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Typical RF conditions affect signal propagation</span></span></label>
<select id="environment" required>
<option value="open">Open Field (Minimal Obstacles)</option>
<option value="light" selected>Light Industrial (Some Pipes/Structures)</option>
<option value="moderate">Moderate Industrial (Dense Piping/Equipment)</option>
<option value="heavy">Heavy Industrial (Metal Structures/Vessels)</option>
<option value="indoor">Indoor Facility (Multiple Floors/Walls)</option>
</select>
</div>

<!-- Update Rate -->
<div class="form-row">
<div class="form-group">
<label for="update-rate">Required Update Rate (seconds) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">How often devices must report data</span></span></label>
<select id="update-rate" required>
<option value="1">1 second (Critical Control)</option>
<option value="4">4 seconds (Fast Monitoring)</option>
<option value="8" selected>8 seconds (Standard)</option>
<option value="16">16 seconds (Asset Monitoring)</option>
<option value="32">32 seconds (Slow Monitoring)</option>
<option value="60">60 seconds (Periodic Data)</option>
</select>
</div>
<div class="form-group">
<label for="power-source">Primary Power Source <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Affects battery life calculations</span></span></label>
<select id="power-source" required>
<option value="battery" selected>Battery Powered (AA/D-Cell)</option>
<option value="loop">Loop Powered (4-20mA)</option>
<option value="solar">Solar with Battery Backup</option>
<option value="line">Line Powered (24VDC)</option>
</select>
</div>
</div>

<!-- Reliability Requirements -->
<div class="form-row">
<div class="form-group">
<label for="reliability">Network Reliability Target <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Percentage of successful packet delivery</span></span></label>
<select id="reliability" required>
<option value="95">95% (Basic Monitoring)</option>
<option value="98">98% (Standard)</option>
<option value="99" selected>99% (High Reliability)</option>
<option value="99.5">99.5% (Critical Process)</option>
<option value="99.9">99.9% (Safety Critical)</option>
</select>
</div>
<div class="form-group">
<label for="redundancy">Redundancy Level <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Path diversity for mesh network</span></span></label>
<select id="redundancy" required>
<option value="basic">Basic (3+ neighbors per device)</option>
<option value="standard" selected>Standard (5+ neighbors per device)</option>
<option value="high">High (7+ neighbors per device)</option>
</select>
</div>
</div>

<!-- Obstacles -->
<div class="form-group">
<label for="obstacles">Major RF Obstacles Present</label>
<select id="obstacles" required>
<option value="minimal">Minimal (Open Process Area)</option>
<option value="moderate" selected>Moderate (Tanks, Columns, Piperack)</option>
<option value="significant">Significant (Dense Equipment, Buildings)</option>
</select>
</div>

<button type="button" id="calculate-btn" class="calculate-btn">Plan WirelessHART Network</button>
</form>
</div>

<div id="result-container" class="result-container">
<h3>WirelessHART Network Planning Results</h3>
<div id="calculation-steps">
<!-- Calculation steps will be dynamically inserted here -->
</div>

<div class="network-diagram-container">
<h4>Network Topology Visualization</h4>
<canvas id="network-topology-canvas"></canvas>
<p style="text-align: center; margin-top: 10px; font-size: 0.9rem; color: var(--text-color);">
<strong>Blue:</strong> Gateways | <strong>Green:</strong> Field Devices | <strong>Orange:</strong> Handheld Access Points
</p>
</div>

<div class="network-analysis">
<h4>Network Health & Performance Assessment</h4>
<div id="network-analysis-content">
<!-- Network assessment will be dynamically inserted here -->
</div>
</div>

<div class="recommendations">
<h4>IEC 62591 Compliance & Best Practices</h4>
<div id="recommendations-content">
<!-- Recommendations will be dynamically inserted here -->
</div>
</div>

<div class="export-section">
<button id="export-report" class="export-btn"><i class="fas fa-file-pdf"></i> Export Network Plan</button>
</div>
</div>
</div>

<!-- Educational Content -->
<div class="tool-container" style="margin-top: 40px;">
<h2>Understanding WirelessHART Network Planning</h2>

<h3 style="color: var(--primary-color); margin-top: 25px;">What is WirelessHART?</h3>
<p>WirelessHART is the leading industrial wireless communication protocol specifically designed for process measurement and control applications. Standardized as IEC 62591, WirelessHART extends the proven HART protocol into a wireless mesh network operating in the 2.4 GHz ISM band. Unlike consumer wireless technologies, WirelessHART is engineered for the harsh industrial environment with requirements for high reliability (>99%), deterministic communication, coexistence with other wireless systems, and operation in areas with significant RF noise and physical obstacles. The protocol employs Time-Synchronized Mesh Protocol (TSMP) with frequency hopping spread spectrum to achieve robust, secure, and interference-resistant communication suitable for both monitoring and closed-loop control applications in process industries.</p>

<p>WirelessHART networks consist of field devices (transmitters, valves, analyzers), gateways that connect the wireless network to plant DCS/PLC systems, a network manager that optimizes routing and manages the mesh, handheld devices for commissioning and maintenance, and optional access points for coverage extension. The self-organizing mesh topology provides multiple communication paths between any two devices, ensuring that temporary RF obstructions (cranes, vehicles, scaffolding) don't disrupt communication. Each device can serve as a router for other devices, creating redundant pathways that automatically adapt to changing RF conditions. This fundamental architecture enables WirelessHART to deliver wire-like reliability while eliminating the cost and complexity of cable installation, particularly valuable for remote or hard-to-access measurement points.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Key Planning Concepts</h3>

<p><strong>Gateway Sizing and Placement:</strong> Gateways serve as the bridge between wireless field devices and the control system. Each gateway manages up to 100 devices typically, though practical deployments often limit this to 50-75 devices to maintain adequate update rates and network responsiveness. Gateway placement follows the principle of logical organization by process unit or area, similar to how junction boxes and marshaling cabinets are distributed. The gateway antenna should be centrally located within its coverage area, elevated 2-3 meters above most equipment to provide line-of-sight paths to devices, and positioned with consideration for existing Wi-Fi access points (maintain 1+ meter separation). For large facilities, multiple gateways are deployed with overlapping coverage zones to eliminate single points of failure and enable load balancing across gateways.</p>

<p><strong>Mesh Network Redundancy:</strong> Reliability in WirelessHART comes from path diversity. Industry best practice recommends each device maintain connections with minimum 5 neighbors within RF range. This "5-neighbor rule" ensures that even if 2-3 communication paths fail simultaneously (due to temporary obstacles or interference), alternate routes remain available. Devices with fewer neighbors become potential weak points where single-point failures can isolate sections of the network. Network planning tools verify neighbor counts during design phase, and during commissioning, actual RF site surveys confirm that devices achieve target neighbor counts. Strategic placement of router devices (either dedicated routers or field devices configured to serve routing functions) fills coverage gaps and ensures uniform mesh connectivity throughout the network.</p>

<p><strong>RF Path Loss and Link Budget:</strong> Wireless signal strength decreases with distance and attenuation through obstacles. Free-space path loss at 2.4 GHz follows the formula: Path Loss (dB) = 40 + 20×log₁₀(distance in meters). Additional losses occur from walls (3-8 dB), metal tanks and vessels (10-20 dB), wire mesh (6-10 dB), and general industrial clutter. Typical WirelessHART radios transmit at +10 dBm and require -90 dBm received signal strength for reliable communication, providing approximately 100 dB link budget. In open areas, this enables 200+ meter range, but in dense industrial environments, practical range reduces to 50-100 meters. Antenna height is critical - elevating antennas just 2 meters above surrounding equipment can double effective range by providing line-of-sight paths that avoid ground-level clutter.</p>

<p><strong>Update Rate and Network Capacity:</strong> WirelessHART uses TDMA (Time Division Multiple Access) with 10-millisecond timeslots. Each device requires dedicated timeslots for transmitting data and additional slots for routing other devices' traffic. Faster update rates consume more network bandwidth and limit the number of devices a gateway can support. For 8-second updates (typical for process monitoring), 50-75 devices per gateway is standard. For 1-4 second updates (required for some control loops), device count per gateway reduces to 25-40 devices. The network manager dynamically allocates timeslots and routes to balance load and meet update rate requirements. During planning, calculate total required slots = (devices/gateway) × (3600/update rate) to verify that network capacity isn't exceeded, maintaining headroom for retransmissions and routing overhead.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Environmental Considerations</h3>

<p><strong>Industrial RF Environment:</strong> Process plants present challenging RF environments with metal structures causing multi-path reflections, tanks and vessels blocking line-of-sight, and transient obstacles like cranes and vehicles constantly changing propagation conditions. High temperatures near furnaces and heaters affect equipment operation and battery life. Electrical noise from VFDs, welding equipment, and high-voltage switchgear can interfere with 2.4 GHz signals. Humidity and precipitation attenuate RF signals and can affect antenna performance. Proper network planning accounts for these challenges through conservative link budgets, strategic antenna placement above obstacle level, appropriate device selection (extended temperature ratings where needed), and site surveys to identify RF interference sources. Environmental ratings (IP66/67, NEMA 4X, explosion-proof ratings) must match installation conditions.</p>

<p><strong>Coexistence with Wi-Fi and Other 2.4 GHz Systems:</strong> The 2.4 GHz ISM band hosts numerous wireless technologies including Wi-Fi, Bluetooth, and other industrial wireless systems. WirelessHART employs channel blacklisting and frequency hopping across 15 channels to avoid interference, but planning must ensure adequate spectral separation. Best practice: conduct RF site surveys identifying existing 2.4 GHz sources, maintain physical separation between WirelessHART and Wi-Fi antennas (>1 meter minimum), configure Wi-Fi to use channels 1, 6, or 11 which minimize overlap with WirelessHART channels, and monitor network statistics for evidence of interference. Modern combined Wi-Fi/WirelessHART access points intelligently manage channel selection and power levels to optimize coexistence, offering integrated solution for converged networks.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Device Selection and Power Management</h3>

<p><strong>Battery vs. Powered Devices:</strong> WirelessHART devices are available in battery-powered (portable, easy installation) or externally powered (line power, loop power, solar) configurations. Battery-powered devices using two 3.6V "D" cell lithium batteries typically achieve 5-10 year life at 8-16 second update rates, depending on transmit power, routing load, and temperature. Faster update rates or high routing loads reduce battery life - a device updating every second may only last 1-2 years on batteries. Loop-powered WirelessHART adapters connect to existing 4-20mA instruments, drawing power from the loop (typically 3.6-3.8 mA) while transmitting process data wirelessly, offering unlimited operating life. For critical applications or devices requiring fast updates, prefer powered devices. Battery devices are ideal for temporary monitoring, remote locations without power, or applications accepting longer update intervals. Always plan for battery replacement logistics before deployment.</p>

<p><strong>Antenna Selection and Placement:</strong> Standard WirelessHART devices use integrated omnidirectional antennas suitable for most applications. For challenging installations (devices inside metal enclosures, buried equipment, hazardous areas requiring remote mounting), external antennas are available. Antenna placement guidelines: mount vertically in standard orientation, maintain 0.5 meter clearance from large metal surfaces to avoid detuning, elevate 1.5-2 meters above grade to improve line-of-sight, avoid installing inside metal cabinets without external antennas, and protect from physical damage and weathering. Gateway antennas should be centrally located within their coverage area and elevated 2-3 meters above most field devices. Directional antennas are available for long-distance point-to-point links (gateways to remote access points) but not typically used for field device connections in mesh networks.</p>

<h3 style="color: var(--primary-color); margin-top: 25px;">Commissioning and Optimization</h3>

<p>After installation, commission the WirelessHART network through systematic verification procedures. Use network management software to monitor join process as devices discover neighbors and establish mesh connectivity. Verify each device achieves target neighbor count (minimum 5 for standard reliability) and acceptable signal strength (RSSI > -75 dBm for reliable links). Conduct end-to-end latency tests confirming update rates meet specifications. Monitor network statistics including PER (Packet Error Rate - target <1%), path stability, and retry rates. Identify weak areas with poor connectivity and add router devices or relocate gateways as needed. Implement ongoing network health monitoring using Key Performance Indicators (KPIs) defined in IEC 62591: network reliability, average/max latency, join rate, and device-specific metrics. Establish maintenance procedures for battery replacement, firmware updates, and adding new devices to operational networks.</p>
</div>

<div class="tool-container" style="margin-top: 40px;">
<h2>Standards and References</h2>

<p>This calculator implements methodologies from the following WirelessHART standards and guidelines:</p>

<ul style="line-height: 2;">
<li><strong>IEC 62591:2016:</strong> Industrial networks - Wireless communication network and communication profiles - WirelessHART™</li>
<li><strong>HART Communication Foundation:</strong> System Engineering Guidelines for WirelessHART Networks</li>
<li><strong>FieldComm Group:</strong> WirelessHART Deployment Methodology and Best Practices</li>
<li><strong>ISA-100.11a:</strong> Wireless Systems for Industrial Automation (complementary standard)</li>
<li><strong>IEEE 802.15.4:</strong> Physical layer specification for 2.4 GHz wireless</li>
<li><strong>ANSI/ISA-62443:</strong> Security for Industrial Automation and Control Systems (applicable to wireless)</li>
<li><strong>Emerson/Honeywell/ABB:</strong> Vendor-specific WirelessHART deployment guides and best practices</li>
</ul>

<p><strong>Important Note:</strong> This calculator provides preliminary network planning based on industry guidelines and typical deployment scenarios. Actual network performance depends on site-specific RF conditions, obstacle placement, interference sources, and device characteristics. All designs should be validated through RF site surveys using spectrum analyzers and signal strength measurements. Critical applications require professional commissioning by certified WirelessHART experts with experience in similar environments. Network management software and monitoring tools are essential for ongoing optimization and troubleshooting of deployed networks.</p>
</div>

</main>

<footer>
<div class="container">
<div class="footer-content">
<div class="footer-col">
<h4>Design Calculators</h4>
<p style="font-size: 0.9rem; line-height: 1.6; margin-bottom: 15px;">The world's first comprehensive engineering calculator hub based on IEC, IEEE, ISA, ASME, and API standards.</p>
<div class="social-buttons">
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn linkedin" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
<a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer" class="social-btn youtube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
<a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn twitter" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
<a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn facebook" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
<a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn whatsapp" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
</div>
</div>
<div class="footer-col">
<h4>Quick Links</h4>
<ul>
<li><a href="/">Home</a></li>
<li><a href="/indexele.html">Electrical</a></li>
<li><a href="/indexMech.html">Mechanical</a></li>
<li><a href="/indexinst.html">Instrumentation</a></li>
<li><a href="/articles.html">Articles</a></li>
</ul>
</div>
<div class="footer-col">
<h4>Resources</h4>
<ul>
<li><a href="/about.html">About Us</a></li>
<li><a href="/contact.html">Contact</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/privacy-policy.html">Privacy Policy</a></li>
<li><a href="/terms-of-service.html">Terms of Service</a></li>
</ul>
</div>
<div class="footer-col">
<h4>More</h4>
<ul>
<li><a href="/blog.html">Blog</a></li>
<li><a href="/sitemap2.html">Sitemap</a></li>
<li><a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer">YouTube Channel</a></li>
</ul>
</div>
</div>

<div class="footer-disclaimer">
<p>All tools are for guidance only and should not replace professional engineering judgment. WirelessHART network designs must be verified through RF site surveys and commissioned by qualified instrumentation professionals. This site is not affiliated with or endorsed by FieldComm Group, IEC, or any standards organization.</p>
</div>

<div class="footer-bottom">
<p>&copy; 2025 Design Calculators. Created by <span class="creator-name">A Sharma</span>. All rights reserved.</p>
</div>
</div>
</footer>

<div id="custom-message-box"></div>

<script>
// Wait for DOM to be fully loaded
window.addEventListener('DOMContentLoaded', function() {
    // Form Elements
    const industryType = document.getElementById('industry-type');
    const totalDevices = document.getElementById('total-devices');
    const deviceDensity = document.getElementById('device-density');
    const areaLength = document.getElementById('area-length');
    const areaWidth = document.getElementById('area-width');
    const environment = document.getElementById('environment');
    const updateRate = document.getElementById('update-rate');
    const powerSource = document.getElementById('power-source');
    const reliability = document.getElementById('reliability');
    const redundancy = document.getElementById('redundancy');
    const obstacles = document.getElementById('obstacles');
    const calculateBtn = document.getElementById('calculate-btn');
    const resultContainer = document.getElementById('result-container');
    const calculationStepsDiv = document.getElementById('calculation-steps');
    const networkAnalysisDiv = document.getElementById('network-analysis-content');
    const recommendationsDiv = document.getElementById('recommendations-content');
    const exportReportBtn = document.getElementById('export-report');
    
    // Canvas for network topology
    const canvas = document.getElementById('network-topology-canvas');
    if (!canvas) {
        console.error('Canvas element not found!');
        return;
    }
    
    const ctx = canvas.getContext('2d');
    if (!ctx) {
        console.error('Cannot get canvas 2D context!');
        return;
    }
    
    // Set canvas dimensions
    function resizeCanvas() {
        const container = canvas.parentElement;
        const displayWidth = Math.min(container.clientWidth - 40, 800);
        const displayHeight = 400;
        
        canvas.style.width = displayWidth + 'px';
        canvas.style.height = displayHeight + 'px';
        
        const scale = window.devicePixelRatio || 1;
        canvas.width = displayWidth * scale;
        canvas.height = displayHeight * scale;
        ctx.scale(scale, scale);
    }
    
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    calculateBtn.addEventListener('click', (e) => {
        const ripple = document.createElement('span');
        const diameter = Math.max(calculateBtn.clientWidth, calculateBtn.clientHeight);
        const radius = diameter / 2;
        ripple.style.width = ripple.style.height = `${diameter}px`;
        ripple.style.left = `${e.clientX - (calculateBtn.getBoundingClientRect().left + radius)}px`;
        ripple.style.top = `${e.clientY - (calculateBtn.getBoundingClientRect().top + radius)}px`;
        ripple.classList.add('ripple');
        calculateBtn.appendChild(ripple);
        ripple.addEventListener('animationend', () => ripple.remove());
        
        if (validateInputs()) {
            performNetworkPlanning();
        }
    });

    function validateInputs() {
        const inputs = document.querySelectorAll('#network-form [required]');
        for (const input of inputs) {
            if (!input.value || (input.type === 'number' && parseFloat(input.value) <= 0)) {
                displayMessage(`Error: "${input.previousElementSibling.textContent}" must be a positive value.`, "error");
                return false;
            }
        }
        return true;
    }

    function performNetworkPlanning() {
        calculationStepsDiv.innerHTML = '';
        networkAnalysisDiv.innerHTML = '';
        
        // Get inputs
        const devices = parseInt(totalDevices.value);
        const density = deviceDensity.value;
        const length = parseFloat(areaLength.value);
        const width = parseFloat(areaWidth.value);
        const env = environment.value;
        const update = parseInt(updateRate.value);
        const power = powerSource.value;
        const rel = parseFloat(reliability.value);
        const red = redundancy.value;
        const obst = obstacles.value;

        // Step 1: Calculate coverage area
        const area = length * width;
        
        addCalculationStep(1, 'Coverage Area Calculation',
            '$$Area = Length \\times Width$$',
            `Area = ${length} m × ${width} m<br>Total Coverage = ${area.toFixed(0)} m²`,
            `Coverage Area: <strong>${area.toFixed(0)} m²</strong>`
        );

        // Step 2: RF range estimation based on environment
        let typicalRange;
        let pathLossExponent;
        switch(env) {
            case 'open': typicalRange = 200; pathLossExponent = 2.0; break;
            case 'light': typicalRange = 150; pathLossExponent = 2.5; break;
            case 'moderate': typicalRange = 100; pathLossExponent = 3.0; break;
            case 'heavy': typicalRange = 75; pathLossExponent = 3.5; break;
            case 'indoor': typicalRange = 60; pathLossExponent = 4.0; break;
            default: typicalRange = 100; pathLossExponent = 3.0;
        }
        
        addCalculationStep(2, 'RF Range Estimation',
            'Based on environment type and path loss model',
            `Environment: ${env}<br>Path Loss Exponent: ${pathLossExponent}<br>Typical Device Range: ${typicalRange} m`,
            `Expected RF Range: <strong>${typicalRange} meters</strong>`
        );

        // Step 3: Gateway count calculation
        const coveragePerGateway = Math.PI * Math.pow(typicalRange, 2) * 0.8; // 80% efficiency
        const gatewaysFromArea = Math.ceil(area / coveragePerGateway);
        
        const devicesPerGateway = update <= 4 ? 40 : (update <= 8 ? 60 : 75);
        const gatewaysFromDevices = Math.ceil(devices / devicesPerGateway);
        
        const gatewaysRequired = Math.max(gatewaysFromArea, gatewaysFromDevices);
        
        addCalculationStep(3, 'Gateway Requirements',
            'Number of gateways determined by area coverage and device capacity',
            `Coverage per gateway = π × ${typicalRange}² × 0.8 = ${coveragePerGateway.toFixed(0)} m²<br>` +
            `Gateways from area = ${gatewaysFromArea}<br>` +
            `Devices per gateway @ ${update}s update = ${devicesPerGateway}<br>` +
            `Gateways from capacity = ${gatewaysFromDevices}<br>` +
            `Required gateways = max(${gatewaysFromArea}, ${gatewaysFromDevices})`,
            `<strong>${gatewaysRequired} Gateway(s) Required</strong>`
        );

        // Step 4: Device distribution
        const devicesPerActualGateway = Math.ceil(devices / gatewaysRequired);
        
        addCalculationStep(4, 'Device Distribution',
            'Devices allocated evenly across gateways',
            `${devices} devices ÷ ${gatewaysRequired} gateways = ${devicesPerActualGateway} devices per gateway<br>` +
            `Capacity utilization = ${((devicesPerActualGateway/devicesPerGateway)*100).toFixed(1)}%`,
            `Average: <strong>${devicesPerActualGateway} devices per gateway</strong>`
        );

        // Step 5: Neighbor count requirement
        let minNeighbors;
        switch(red) {
            case 'basic': minNeighbors = 3; break;
            case 'standard': minNeighbors = 5; break;
            case 'high': minNeighbors = 7; break;
            default: minNeighbors = 5;
        }
        
        const deviceSpacing = Math.sqrt(area / devices);
        
        addCalculationStep(5, 'Mesh Network Redundancy',
            'Neighbor count ensures path diversity for reliability',
            `Redundancy level: ${red}<br>` +
            `Minimum neighbors per device: ${minNeighbors}<br>` +
            `Average device spacing: ${deviceSpacing.toFixed(1)} m`,
            `Target: <strong>Minimum ${minNeighbors} neighbors per device</strong>`
        );

        // Step 6: Network capacity and update rate
        const slotsPerCycle = 3600 / update; // cycles per hour
        const totalSlots = devices * (3600 / update);
        const networkLoad = (totalSlots / (3600 * 100)) * 100; // percentage
        
        addCalculationStep(6, 'Network Capacity Analysis',
            'TDMA timeslot allocation and bandwidth utilization',
            `Update rate: ${update} seconds<br>` +
            `Cycles per hour: ${slotsPerCycle}<br>` +
            `Total slots needed: ${totalSlots.toFixed(0)}<br>` +
            `Network load: ${networkLoad.toFixed(1)}%`,
            `Network utilization: <strong>${networkLoad.toFixed(1)}%</strong> ${networkLoad > 80 ? '(Near Capacity!)' : ''}`
        );

        // Step 7: Battery life estimation
        let batteryLife = 0;
        if (power === 'battery') {
            const baseBatteryLife = 10; // years at 16s update
            batteryLife = baseBatteryLife * (16 / update) * 0.8; // Conservative estimate
            
            addCalculationStep(7, 'Battery Life Estimation',
                'Based on update rate and typical power consumption',
                `Base battery life @ 16s: ${baseBatteryLife} years<br>` +
                `Update rate factor: ${(16/update).toFixed(2)}<br>` +
                `Expected battery life: ${batteryLife.toFixed(1)} years`,
                `Battery Life: <strong>${batteryLife.toFixed(1)} years</strong>`
            );
        } else {
            addCalculationStep(7, 'Power Source',
                'Devices are externally powered',
                `Power source: ${power}<br>No battery replacement needed`,
                `Power: <strong>Continuous (${power})</strong>`
            );
        }

        // Render MathJax
        if (window.MathJax) {
            window.MathJax.typesetPromise([calculationStepsDiv]);
        }

        // Draw network topology
        drawNetworkTopology(gatewaysRequired, devices, length, width);

        // Network assessment
        performNetworkAssessment(gatewaysRequired, devicesPerActualGateway, networkLoad, minNeighbors, batteryLife, rel);

        // Recommendations
        generateRecommendations(gatewaysRequired, devices, env, update, power, red, obst, typicalRange);

        // Show results
        resultContainer.classList.add('show');
        setTimeout(() => resultContainer.scrollIntoView({ behavior: 'smooth', block: 'start' }), 300);
    }

    function addCalculationStep(step, title, formula, calculation, result) {
        const stepDiv = document.createElement('div');
        stepDiv.className = 'calculation-step-container';
        
        let content = `<div class="step-header">Step ${step}: ${title}</div>
                       <div class="step-content">`;
        if (formula) content += `<p class="formula">${formula}</p>`;
        if (calculation) content += `<p class="calculation">${calculation}</p>`;
        if (result) content += `<p class="final-result">${result}</p>`;
        content += `</div>`;
        
        stepDiv.innerHTML = content;
        calculationStepsDiv.appendChild(stepDiv);
    }

    function drawNetworkTopology(gateways, devices, length, width) {
        const canvasWidth = canvas.width / (window.devicePixelRatio || 1);
        const canvasHeight = canvas.height / (window.devicePixelRatio || 1);
        
        ctx.clearRect(0, 0, canvasWidth, canvasHeight);
        
        const margin = 40;
        const drawWidth = canvasWidth - 2 * margin;
        const drawHeight = canvasHeight - 2 * margin;
        
        // Draw coverage area
        ctx.strokeStyle = '#94A3B8';
        ctx.lineWidth = 2;
        ctx.strokeRect(margin, margin, drawWidth, drawHeight);
        
        // Draw gateways (blue circles)
        ctx.fillStyle = '#2563EB';
        const gatewayPositions = [];
        for (let i = 0; i < gateways; i++) {
            const angle = (2 * Math.PI * i) / gateways;
            const x = margin + drawWidth/2 + (drawWidth/3) * Math.cos(angle);
            const y = margin + drawHeight/2 + (drawHeight/3) * Math.sin(angle);
            gatewayPositions.push({x, y});
            
            ctx.beginPath();
            ctx.arc(x, y, 12, 0, 2 * Math.PI);
            ctx.fill();
            
            ctx.fillStyle = 'white';
            ctx.font = 'bold 10px Inter';
            ctx.textAlign = 'center';
            ctx.fillText('GW', x, y + 4);
            ctx.fillStyle = '#2563EB';
        }
        
        // Draw devices (green dots)
        ctx.fillStyle = '#10B981';
        const deviceCount = Math.min(devices, 30); // Limit visual representation
        for (let i = 0; i < deviceCount; i++) {
            const x = margin + Math.random() * drawWidth;
            const y = margin + Math.random() * drawHeight;
            
            ctx.beginPath();
            ctx.arc(x, y, 4, 0, 2 * Math.PI);
            ctx.fill();
            
            // Draw connection to nearest gateway
            let minDist = Infinity;
            let nearestGW = null;
            gatewayPositions.forEach(gw => {
                const dist = Math.sqrt(Math.pow(x - gw.x, 2) + Math.pow(y - gw.y, 2));
                if (dist < minDist) {
                    minDist = dist;
                    nearestGW = gw;
                }
            });
            
            if (nearestGW) {
                ctx.strokeStyle = 'rgba(16, 185, 129, 0.2)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(nearestGW.x, nearestGW.y);
                ctx.stroke();
            }
        }
        
        // Legend
        ctx.fillStyle = '#111827';
        ctx.font = '12px Inter';
        ctx.textAlign = 'left';
        ctx.fillText(`${gateways} Gateway(s), ${devices} Devices`, margin, canvasHeight - 10);
    }

    function performNetworkAssessment(gateways, devicesPerGW, networkLoad, minNeighbors, batteryLife, reliability) {
        let html = '';
        
        // Gateway assessment
        html += `
            <div class="network-item info">
                <h5><i class="fas fa-router"></i> Gateway Configuration</h5>
                <p><strong>${gateways} gateway(s)</strong> required for your network with average <strong>${devicesPerGW} devices per gateway</strong>. 
                Gateways should be positioned centrally within their coverage zones and elevated 2-3 meters above field devices. 
                Ensure redundant Ethernet connectivity to control system for gateway reliability.</p>
            </div>
        `;
        
        // Network load assessment
        if (networkLoad > 80) {
            html += `
                <div class="network-item critical">
                    <h5><i class="fas fa-exclamation-triangle"></i> High Network Load Warning</h5>
                    <p>Network utilization is ${networkLoad.toFixed(1)}%, approaching capacity limits. This leaves minimal headroom for retransmissions 
                    and routing overhead. Consider: (1) Reducing update rates for non-critical devices, (2) Adding gateways to distribute load, 
                    (3) Implementing prioritization for critical process variables. High load can cause increased latency and reduced reliability.</p>
                </div>
            `;
        } else if (networkLoad > 60) {
            html += `
                <div class="network-item warning">
                    <h5><i class="fas fa-exclamation-circle"></i> Moderate Network Load</h5>
                    <p>Network utilization is ${networkLoad.toFixed(1)}%, which is acceptable but monitor during commissioning. 
                    Actual performance depends on routing efficiency and RF conditions. Plan for 10-20% growth capacity in future device additions. 
                    Consider load balancing across gateways if performance issues arise.</p>
                </div>
            `;
        } else {
            html += `
                <div class="network-item info">
                    <h5><i class="fas fa-check-circle"></i> Healthy Network Load</h5>
                    <p>Network utilization is ${networkLoad.toFixed(1)}%, providing good headroom for retransmissions, routing, and future expansion. 
                    This configuration should deliver reliable performance with target reliability of ${reliability}%. 
                    Adequate capacity exists for adding more devices or increasing update rates if needed.</p>
                </div>
            `;
        }
        
        // Redundancy assessment
        html += `
            <div class="network-item info">
                <h5><i class="fas fa-project-diagram"></i> Mesh Network Redundancy</h5>
                <p>Target: Each device maintains <strong>${minNeighbors}+ neighbors</strong> for path diversity. During commissioning, verify actual neighbor counts 
                using network management software. Devices with fewer neighbors may experience reduced reliability. Add router devices in areas with 
                sparse coverage to ensure uniform mesh connectivity. The self-healing mesh automatically routes around obstacles and failed devices.</p>
            </div>
        `;
        
        // Battery life if applicable
        if (batteryLife > 0) {
            if (batteryLife < 3) {
                html += `
                    <div class="network-item warning">
                        <h5><i class="fas fa-battery-quarter"></i> Short Battery Life</h5>
                        <p>Estimated battery life is only ${batteryLife.toFixed(1)} years due to fast update rate. Frequent battery replacements increase maintenance costs 
                        and operational burden. Consider: (1) Using loop-powered or line-powered devices for fast-updating points, (2) Solar with battery backup for remote locations, 
                        (3) Implementing adaptive update rates that increase frequency only during process upsets. Plan battery replacement logistics before deployment.</p>
                    </div>
                `;
            } else if (batteryLife < 5) {
                html += `
                    <div class="network-item info">
                        <h5><i class="fas fa-battery-half"></i> Moderate Battery Life</h5>
                        <p>Expected battery life of ${batteryLife.toFixed(1)} years is reasonable for most applications. Establish battery replacement schedule and stock spares. 
                        Consider implementing battery monitoring in network management system to predict replacement needs. Temperature extremes reduce battery life - 
                        verify device temperature ratings match installation conditions.</p>
                    </div>
                `;
            } else {
                html += `
                    <div class="network-item info">
                        <h5><i class="fas fa-battery-full"></i> Excellent Battery Life</h5>
                        <p>Expected battery life of ${batteryLife.toFixed(1)} years minimizes maintenance burden. This long life is achievable with moderate update rates and 
                        low routing loads. Monitor actual battery voltage during operation - significant deviation from predictions indicates environmental factors (temperature, 
                        excessive routing) affecting performance. Plan initial battery replacement at 80% of predicted life.</p>
                    </div>
                `;
            }
        }
        
        networkAnalysisDiv.innerHTML = html;
    }

    function generateRecommendations(gateways, devices, env, update, power, red, obstacles, range) {
        let html = '<ul>';
        
        html += `<li><strong>IEC 62591 Compliance:</strong> WirelessHART is standardized as IEC 62591, ensuring interoperability of devices from multiple vendors. 
                 All devices should be FieldComm Group registered and tested for compliance. The standard specifies physical layer (IEEE 802.15.4 at 2.4 GHz), 
                 data link layer (TDMA with 10ms slots), network layer (mesh with source routing), and application layer (HART commands over wireless). 
                 Compliance testing verifies coexistence, security, and performance under industrial conditions.</li>`;
        
        html += `<li><strong>Gateway Placement Strategy:</strong> Install ${gateways} gateway(s) at strategic locations with these guidelines: 
                 (1) Position antennas 2-3 meters above surrounding equipment for line-of-sight, (2) Centrally locate within coverage area to balance path lengths, 
                 (3) Maintain 1+ meter separation from Wi-Fi access points, (4) Ensure reliable Ethernet or serial connectivity to control system, 
                 (5) Provide reliable power (PoE, 24VDC, or AC) with UPS backup for critical applications. Document gateway locations for future maintenance and expansion.</li>`;
        
        html += `<li><strong>Device Installation Best Practices:</strong> Install ${devices} field devices following these rules: 
                 (1) Mount antennas vertically in standard orientation, (2) Maintain 0.5 meter clearance from large metal surfaces, 
                 (3) Elevate devices 1.5+ meters above grade to improve line-of-sight, (4) Avoid installing inside metal cabinets without external antennas, 
                 (5) Verify each device achieves ${red === 'basic' ? '3+' : red === 'standard' ? '5+' : '7+'} neighbors during commissioning using network visualization tools. 
                 Poor placement creates single-point failures that compromise network reliability.</li>`;
        
        if (env === 'heavy' || env === 'indoor' || obstacles === 'significant') {
            html += `<li><strong>Challenging RF Environment Mitigation:</strong> Your ${env} environment with ${obstacles} obstacles presents RF propagation challenges. 
                     Expected range is limited to ${range} meters. Strategies to improve coverage: (1) Add dedicated router devices at strategic locations to bridge gaps, 
                     (2) Use external antennas for devices in metal enclosures or difficult locations, (3) Conduct RF site survey with spectrum analyzer to identify interference, 
                     (4) Consider higher gateway density (more gateways with fewer devices each) for better coverage, (5) Implement channel blacklisting to avoid noisy frequencies. 
                     Dense industrial environments may require 30-50% more infrastructure than open-field installations.</li>`;
        }
        
        html += `<li><strong>Update Rate Optimization:</strong> Current configuration uses ${update}-second update rate. Balance timeliness vs. battery life: 
                 • 1-4 seconds: Suitable for regulatory monitoring or control applications requiring fast response. Reduces battery life and limits devices per gateway. 
                 • 8-16 seconds: Standard for process monitoring, good balance of responsiveness and efficiency. Typical industrial deployment. 
                 • 32-60 seconds: Acceptable for asset monitoring, equipment health, or environmental conditions. Maximizes battery life and network capacity. 
                 Implement variable update rates: faster for critical variables, slower for informational data. Use alarm-by-exception for rarely-changing values.</li>`;
        
        html += `<li><strong>Security Configuration:</strong> WirelessHART implements robust security per IEC 62591: 
                 (1) AES-128 encryption for all communications (2) Network-level join keys prevent unauthorized device access (3) Unique session keys per device updated periodically 
                 (4) Message authentication codes (MIC) verify integrity (5) Security manager controls key distribution. Configure strong join keys (not default), 
                 implement proper key management procedures, restrict physical access to devices during join window, and audit network logs for unauthorized join attempts. 
                 Consider integration with plant cybersecurity infrastructure per ISA-62443 standards.</li>`;
        
        html += `<li><strong>Commissioning Verification Procedures:</strong> Systematic commissioning ensures network performance: 
                 (1) Verify each device joins network successfully - monitor neighbor counts and signal strength (RSSI target: -75 dBm or better for reliable links) 
                 (2) Conduct end-to-end latency tests - confirm update rates meet specifications under loaded conditions 
                 (3) Monitor network statistics - Packet Error Rate (PER) should be <1%, path stability >95% 
                 (4) Test failure scenarios - verify mesh self-heals when communication paths are blocked 
                 (5) Document baseline performance - establish KPIs for ongoing monitoring. Use network management software to identify weak areas requiring optimization.</li>`;
        
        html += `<li><strong>Coexistence with Other 2.4 GHz Systems:</strong> The 2.4 GHz ISM band is crowded with Wi-Fi, Bluetooth, and other wireless systems. 
                 Ensure coexistence through: (1) Physical separation - maintain 1+ meter between WirelessHART and Wi-Fi antennas 
                 (2) Channel planning - configure Wi-Fi to use channels 1, 6, or 11 (minimizes overlap with WirelessHART hopping channels) 
                 (3) RF site survey - measure interference before deployment using spectrum analyzer 
                 (4) Power level optimization - reduce transmit power where possible to minimize interference 
                 (5) Monitoring - track WirelessHART channel blacklist in network manager to identify problematic frequencies. 
                 Consider combined Wi-Fi/WirelessHART access points for integrated infrastructure with intelligent coexistence management.</li>`;
        
        html += `<li><strong>Network Health Monitoring:</strong> Implement ongoing monitoring using these Key Performance Indicators (KPIs) per IEC 62591: 
                 • Network Reliability: Percentage of successful packet delivery (target >99%) 
                 • Average/Maximum Latency: Time from device transmission to gateway receipt (target <2× update rate) 
                 • Join Success Rate: Percentage of devices successfully joining network (target >95%) 
                 • Neighbor Count Distribution: Verify devices maintain target neighbor counts 
                 • Battery Voltage Trends: Predict replacement needs before failure 
                 • Channel Blacklist Changes: Identify increasing RF interference 
                 • Routing Path Stability: Frequent path changes indicate RF environment issues. 
                 Establish alert thresholds and corrective action procedures. Trending analysis identifies degrading conditions before they impact operations.</li>`;
        
        html += `<li><strong>Maintenance and Expansion Planning:</strong> Plan for lifecycle management: 
                 (1) Battery replacement schedule: Stock spares, establish replacement procedures, target 80% of predicted life 
                 (2) Firmware updates: Coordinate with vendors for security patches and performance improvements 
                 (3) Device additions: Verify network capacity before adding devices, rebalance gateway loads if needed 
                 (4) Documentation: Maintain network topology maps, device inventory, configuration database 
                 (5) Training: Ensure technicians understand WirelessHART principles, troubleshooting tools, and safety procedures. 
                 Retain copies of all network configuration files for disaster recovery. Establish change management procedures for network modifications.</li>`;
        
        html += '</ul>';
        recommendationsDiv.innerHTML = html;
    }

    function displayMessage(message, type = "info") {
        const messageBox = document.getElementById('custom-message-box');
        messageBox.textContent = message;
        messageBox.style.color = 'white';
        if (type === "error") messageBox.style.backgroundColor = '#dc3545';
        else if (type === "warning") {
            messageBox.style.backgroundColor = '#ffc107';
            messageBox.style.color = '#333';
        } else messageBox.style.backgroundColor = '#28a745';
        messageBox.style.opacity = 1;
        setTimeout(() => { messageBox.style.opacity = 0; }, 5000);
    }

    exportReportBtn.addEventListener('click', function() {
        displayMessage("Export feature would generate detailed WirelessHART network plan PDF in full implementation", "success");
    });
    
    console.log('WirelessHART network planner initialized successfully');
});

// Theme Toggle
document.addEventListener('DOMContentLoaded', () => {
    const themeSwitch = document.getElementById('theme-switch');
    const body = document.body;
    const currentTheme = localStorage.getItem('theme');
    if (currentTheme) {
        body.classList.add(currentTheme);
        if (currentTheme === 'dark-mode') themeSwitch.checked = true;
    }
    themeSwitch.addEventListener('change', () => {
        if (themeSwitch.checked) {
            body.classList.add('dark-mode');
            localStorage.setItem('theme', 'dark-mode');
        } else {
            body.classList.remove('dark-mode');
            localStorage.setItem('theme', 'light-mode');
        }
    });
});
</script>

</body>
</html>
