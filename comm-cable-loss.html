<!DOCTYPE html>
<html lang="en">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
     crossorigin="anonymous"></script>
                <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-23Y1V450SR');
</script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Engineering Calculators - Design Calculators - Electrical</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- MathJax for LaTeX rendering -->
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="icon" href="/favicon.ico" type="image/x-icon">

    <style>
        /* Basic CSS Variables for a consistent theme */
        :root {
            --primary-color: #4CAF50; /* Green */
            --secondary-color: #45a049; /* Darker Green */
            --accent-color: #FFC107; /* Amber */
            --bg-color: #f4f7f6; /* Light Greyish Green */
            --card-bg: #ffffff; /* White */
            --text-color: #333333; /* Dark Grey */
            --header-bg: #2C3E50; /* Dark Blue Grey */
            --footer-bg: #34495E; /* Slightly Lighter Dark Blue Grey */
            --border-color: #cccccc;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --hover-color: #e2e6ea;
        }

        /* Dark Mode Variables */
        body.dark-mode {
            --bg-color: #2c3e50;
            --card-bg: #34495e;
            --text-color: #ecf0f1;
            --header-bg: #2c3e50;
            --footer-bg: #2c3e50;
            --border-color: #555555;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            --hover-color: #446688;
        }

        /* General Body Styling */
        body {
            font-family: 'Inter', sans-serif; /* Using Inter as specified */
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, var(--bg-color), #e0e0e0);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--header-bg);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative; /* For theme toggle positioning */
        }

        header h1 {
            margin: 0;
            font-size: 2.5em;
            color: var(--primary-color);
        }

        header .subtitle {
            margin: 5px 0 0;
            font-size: 1em;
            color: #bdc3c7;
        }

        main {
            padding: 20px 0;
        }

        .tool-container {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
        }

        .tool-container h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-top: 0;
            margin-bottom: 20px;
        }

        .tool-description {
            margin-bottom: 20px;
            color: var(--text-color);
        }

        .back-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border-radius: 4px;
            text-decoration: none;
            margin-bottom: 20px;
            transition: background-color 0.3s, transform 0.3s;
            width: fit-content; 
        }

        .back-button:hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
        }

        /* Theme Toggle */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
        }

        .theme-toggle .light-icon,
        .theme-toggle .dark-icon {
            color: white;
            margin: 0 5px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:focus + .slider {
            box-shadow: 0 0 1px var(--primary-color);
        }

        input:checked + .slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(26px);
            transform: translateX(26px);
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        /* Footer Styling */
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
        }

        footer .disclaimer h3,
        footer .social-share h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        footer .disclaimer p {
            font-size: 0.9em;
            color: #bdc3c7;
        }

        .social-buttons {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .social-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.2em;
            transition: transform 0.3s ease-in-out;
        }

        .social-btn:hover {
            transform: translateY(-3px);
        }

        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.reddit { background-color: #FF4500; }

        /* Styles for Calculator Forms and Results */
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: var(--card-shadow);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: var(--bg-color);
            color: var(--text-color);
            box-sizing: border-box; /* Ensure padding doesn't increase width */
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: flex-start; /* Align items to the top to prevent stretching */
            justify-content: center; /* Center form groups horizontally */
        }
        
        .form-row .form-group {
            flex: 1 1 200px; /* Allows flexibility, minimum 200px */
            max-width: 280px; /* New: Limit maximum width to reduce breadth */
        }
        
        .calculate-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin-top: 10px;
            transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
            width: fit-content; /* Adjust width to content */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .calculate-btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        .result-container {
            margin-top: 30px;
            padding: 20px;
            border-radius: 8px;
            background-color: var(--card-bg);
            box-shadow: var(--card-shadow);
            display: none; /* Hidden by default */
            opacity: 0; /* For animation */
            transition: opacity 0.5s ease-in-out;
        }
        
        .result-container.show {
            opacity: 1;
        }

        .result-container h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .result-table th, .result-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .result-table th {
            background-color: var(--hover-color);
        }
        
        .standard-reference {
            margin-top: 20px;
            font-style: italic;
            font-size: 0.9rem;
            color: var(--text-color);
        }
        
        .info-icon {
            color: var(--primary-color);
            margin-left: 5px;
            cursor: help;
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Custom message box style */
        #custom-message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        /* Styles for calculation details */
        #calculation-details {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 0.95em;
            color: var(--text-color);
        }
        #calculation-details h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 10px;
        }
        #calculation-details p.formula {
            font-family: 'Times New Roman', serif; /* A font suitable for mathematical formulas */
            font-style: italic;
            font-size: 1.1em;
            text-align: center;
            padding: 10px 0;
            background-color: var(--hover-color);
            border-radius: 4px;
            margin: 10px 0;
            overflow-x: auto; /* Allow horizontal scrolling for long formulas */
        }
        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace; /* Monospace for steps */
            background-color: var(--hover-color);
            padding: 5px 10px;
            border-radius: 3px;
            margin-bottom: 5px;
        }
        #calculation-details ul {
            list-style-type: disc;
            margin-left: 20px;
            padding-left: 0;
        }
        #calculation-details ul li {
            margin-bottom: 5px;
        }

        /* Specific styles for hiding/showing fields based on calculator type */
        .hidden {
            display: none;
        }
        /* Style for centering the button */
        .button-wrapper {
            display: flex;
            justify-content: center; /* Center the button horizontally */
            width: 100%; /* Ensure it takes full width to center effectively */
            padding-top: 15px; /* Add some spacing above the button */
        }

        /* Animation for input fields on focus */
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3); /* Green glow */
            outline: none;
            animation: pulse 0.8s infinite alternate;
        }

        @keyframes pulse {
            from {
                box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3);
            }
            to {
                box-shadow: 0 0 0 6px rgba(76, 175, 80, 0.6);
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Design Calculators - Electrical</h1>
            <p class="subtitle">Electrical Calculations Made Easy — Learn with Every Step</p>
            <div class="theme-toggle">
                <span class="light-icon"><i class="fas fa-sun"></i></span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
                <span class="dark-icon"><i class="fas fa-moon"></i></span>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Changed back-button to be in its own container for independent centering -->
        <div style="display: flex; justify-content: center; margin-bottom: 20px;">
            <a href="indexEle.html" class="back-button"><i class="fas fa-arrow-left"></i> Back to Tools</a>
        </div>
        
        <div class="tool-container">
            <h2>Advanced Engineering Calculator</h2>
            
            <div class="tool-description">
                <p>This powerful calculator can perform complex calculations across various engineering disciplines, including electrical, mechanical, and civil engineering. Select a calculation type to get started.</p>
            </div>
        
            <div class="calculator-form">
                <form id="engineering-calculator-form">
                    <!-- Universal Calculator Type Selector -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="calc-type">Calculation Type <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select the type of engineering calculation you need.</span></span></label>
                            <select id="calc-type" required>
                                <option value="communication-cable-loss">Communication Cable Loss</option>
                                <option value="ohms-law">Ohm's Law</option>
                                <option value="power-calculation">Power Calculation</option>
                                <option value="resistor-color-code">Resistor Color Code</option>
                                <option value="voltage-divider">Voltage Divider</option>
                                <option value="capacitor-charge">Capacitor Charge/Discharge</option>
                                <option value="inductor-energy">Inductor Energy Storage</option>
                                <option value="beam-deflection">Beam Deflection (Cantilever)</option>
                                <option value="fluid-flow-rate">Fluid Flow Rate (Pipe)</option>
                                <option value="heat-transfer">Heat Transfer (Conduction)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Communication Cable Loss Fields (Original) -->
                    <div id="communication-cable-loss-fields">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cable-type">Cable Type <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select the type of communication cable.</span></span></label>
                                <select id="cable-type" required>
                                    <option value="twisted-pair">Twisted Pair (e.g., Cat5e, Cat6)</option>
                                    <option value="coaxial">Coaxial Cable (e.g., RG-6, RG-58)</option>
                                    <option value="fiber-optic">Fiber Optic Cable</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="cable-length">Cable Length <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The total length of the cable run.</span></span></label>
                                <input type="number" id="cable-length" min="0.1" step="0.1" value="100" required>
                            </div>
                            <div class="form-group">
                                <label for="length-unit">Length Unit</label>
                                <select id="length-unit" required>
                                    <option value="meters">Meters</option>
                                    <option value="feet">Feet</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Twisted Pair Specific Fields -->
                        <div id="twisted-pair-fields">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="tp-category">Twisted Pair Category <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Common twisted pair cable categories have different attenuation characteristics.</span></span></label>
                                    <select id="tp-category">
                                        <option value="cat5e">Cat5e</option>
                                        <option value="cat6">Cat6</option>
                                        <option value="cat6a">Cat6a</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="tp-frequency">Frequency (MHz) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The highest signal frequency expected on the twisted pair cable.</span></span></label>
                                    <input type="number" id="tp-frequency" min="1" step="1" value="100">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="tp-connector-loss-per-pair">Connector Loss per Pair (dB) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Typical loss per RJ45 connector pair.</span></span></label>
                                    <input type="number" id="tp-connector-loss-per-pair" min="0" step="0.01" value="0.1">
                                </div>
                                <div class="form-group">
                                    <label for="tp-num-connectors">Number of Connectors <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Number of RJ45 connector pairs in the link. Typically 2 (one at each end).</span></span></label>
                                    <input type="number" id="tp-num-connectors" min="0" step="1" value="2">
                                </div>
                            </div>
                        </div>

                        <!-- Coaxial Cable Specific Fields -->
                        <div id="coaxial-fields" class="hidden">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="coax-type">Coaxial Cable Type <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Common coaxial cable types have different loss characteristics.</span></span></label>
                                    <select id="coax-type">
                                        <option value="rg6">RG-6</option>
                                        <option value="rg58">RG-58</option>
                                        <option value="rg11">RG-11</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="coax-frequency">Frequency (MHz) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The signal frequency for coaxial cable.</span></span></label>
                                    <input type="number" id="coax-frequency" min="1" step="1" value="500">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="coax-connector-loss">Connector Loss per Connector (dB) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Typical loss per coaxial connector (e.g., F-type, BNC).</span></span></label>
                                    <input type="number" id="coax-connector-loss" min="0" step="0.01" value="0.2">
                                </div>
                                <div class="form-group">
                                    <label for="coax-num-connectors">Number of Connectors <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Number of coaxial connectors in the link.</span></span></label>
                                    <input type="number" id="coax-num-connectors" min="0" step="1" value="2">
                                </div>
                            </div>
                        </div>

                        <!-- Fiber Optic Specific Fields -->
                        <div id="fiber-optic-fields" class="hidden">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="fiber-type">Fiber Optic Type <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Multimode (MM) or Singlemode (SM) fiber.</span></span></label>
                                    <select id="fiber-type">
                                        <option value="multimode">Multimode (OM1/OM2/OM3/OM4)</option>
                                        <option value="singlemode">Singlemode (OS1/OS2)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="wavelength">Wavelength (nm) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Common wavelengths for fiber optic communication.</span></span></label>
                                    <select id="wavelength">
                                        <option value="850">850 nm (Multimode)</option>
                                        <option value="1300">1300 nm (Multimode)</option>
                                        <option value="1310">1310 nm (Singlemode)</option>
                                        <option value="1550">1550 nm (Singlemode)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="fiber-connector-loss">Connector Loss per Connector (dB) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Typical loss per fiber optic connector (e.g., LC, SC).</span></span></label>
                                    <input type="number" id="fiber-connector-loss" min="0" step="0.01" value="0.75">
                                </div>
                                <div class="form-group">
                                    <label for="fiber-num-connectors">Number of Connectors <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Number of fiber optic connectors in the link.</span></span></label>
                                    <input type="number" id="fiber-num-connectors" min="0" step="1" value="2">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="fiber-splice-loss">Splice Loss per Splice (dB) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Typical loss per fusion or mechanical splice.</span></span></label>
                                    <input type="number" id="fiber-splice-loss" min="0" step="0.01" value="0.1">
                                </div>
                                <div class="form-group">
                                    <label for="fiber-num-splices">Number of Splices <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Number of fiber optic splices in the link.</span></span></label>
                                    <input type="number" id="fiber-num-splices" min="0" step="1" value="0">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Ohm's Law Fields -->
                    <div id="ohms-law-fields" class="hidden">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ohms-voltage">Voltage (V) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the voltage. Leave blank to calculate.</span></span></label>
                                <input type="number" id="ohms-voltage" min="0" step="0.01" value="12">
                            </div>
                            <div class="form-group">
                                <label for="ohms-current">Current (A) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the current. Leave blank to calculate.</span></span></label>
                                <input type="number" id="ohms-current" min="0" step="0.001" value="2">
                            </div>
                            <div class="form-group">
                                <label for="ohms-resistance">Resistance (Ω) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the resistance. Leave blank to calculate.</span></span></label>
                                <input type="number" id="ohms-resistance" min="0" step="0.1" value="6">
                            </div>
                        </div>
                    </div>

                    <!-- Power Calculation Fields -->
                    <div id="power-calculation-fields" class="hidden">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="power-voltage">Voltage (V) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the voltage.</span></span></label>
                                <input type="number" id="power-voltage" min="0" step="0.01" value="230">
                            </div>
                            <div class="form-group">
                                <label for="power-current">Current (A) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the current.</span></span></label>
                                <input type="number" id="power-current" min="0" step="0.001" value="5">
                            </div>
                            <div class="form-group">
                                <label for="power-resistance">Resistance (Ω) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the resistance.</span></span></label>
                                <input type="number" id="power-resistance" min="0" step="0.1" value="46">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="power-factor">Power Factor (for AC) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the power factor (0 to 1). Leave 1 for DC.</span></span></label>
                                <input type="number" id="power-factor" min="0" max="1" step="0.01" value="1">
                            </div>
                            <div class="form-group">
                                <label for="power-phases">Phases <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Number of phases (1 for single-phase, 3 for three-phase).</span></span></label>
                                <select id="power-phases">
                                    <option value="1">Single-Phase</option>
                                    <option value="3">Three-Phase</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Resistor Color Code Fields -->
                    <div id="resistor-color-code-fields" class="hidden">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="band1">Band 1</label>
                                <select id="band1">
                                    <option value="black">Black</option>
                                    <option value="brown">Brown</option>
                                    <option value="red">Red</option>
                                    <option value="orange">Orange</option>
                                    <option value="yellow">Yellow</option>
                                    <option value="green">Green</option>
                                    <option value="blue">Blue</option>
                                    <option value="violet">Violet</option>
                                    <option value="grey">Grey</option>
                                    <option value="white">White</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="band2">Band 2</label>
                                <select id="band2">
                                    <option value="black">Black</option>
                                    <option value="brown">Brown</option>
                                    <option value="red">Red</option>
                                    <option value="orange">Orange</option>
                                    <option value="yellow">Yellow</option>
                                    <option value="green">Green</option>
                                    <option value="blue">Blue</option>
                                    <option value="violet">Violet</option>
                                    <option value="grey">Grey</option>
                                    <option value="white">White</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="band3">Band 3 (Multiplier)</label>
                                <select id="band3">
                                    <option value="black">Black</option>
                                    <option value="brown">Brown</option>
                                    <option value="red">Red</option>
                                    <option value="orange">Orange</option>
                                    <option value="yellow">Yellow</option>
                                    <option value="green">Green</option>
                                    <option value="blue">Blue</option>
                                    <option value="violet">Violet</option>
                                    <option value="grey">Grey</option>
                                    <option value="white">White</option>
                                    <option value="gold">Gold</option>
                                    <option value="silver">Silver</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="band4">Band 4 (Tolerance)</label>
                                <select id="band4">
                                    <option value="none">None</option>
                                    <option value="brown">Brown</option>
                                    <option value="red">Red</option>
                                    <option value="gold">Gold</option>
                                    <option value="silver">Silver</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Voltage Divider Fields -->
                    <div id="voltage-divider-fields" class="hidden">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="vd-vin">Input Voltage (V_in)</label>
                                <input type="number" id="vd-vin" min="0" step="0.01" value="12">
                            </div>
                            <div class="form-group">
                                <label for="vd-r1">Resistor R1 (Ω)</label>
                                <input type="number" id="vd-r1" min="0" step="0.1" value="1000">
                            </div>
                            <div class="form-group">
                                <label for="vd-r2">Resistor R2 (Ω)</label>
                                <input type="number" id="vd-r2" min="0" step="0.1" value="2200">
                            </div>
                        </div>
                    </div>

                    <!-- Capacitor Charge/Discharge Fields -->
                    <div id="capacitor-charge-fields" class="hidden">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cap-voltage-source">Source Voltage (V_s) (V)</label>
                                <input type="number" id="cap-voltage-source" min="0" step="0.01" value="5">
                            </div>
                            <div class="form-group">
                                <label for="cap-resistance">Resistance (R) (Ω)</label>
                                <input type="number" id="cap-resistance" min="0" step="0.1" value="1000">
                            </div>
                            <div class="form-group">
                                <label for="cap-capacitance">Capacitance (C) (μF)</label>
                                <input type="number" id="cap-capacitance" min="0.001" step="0.001" value="10">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cap-time">Time (t) (ms) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Time elapsed for charge/discharge.</span></span></label>
                                <input type="number" id="cap-time" min="0" step="0.1" value="5">
                            </div>
                            <div class="form-group">
                                <label for="cap-initial-voltage">Initial Capacitor Voltage (V_0) (V) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Initial voltage across the capacitor (for discharge).</span></span></label>
                                <input type="number" id="cap-initial-voltage" min="0" step="0.01" value="0">
                            </div>
                            <div class="form-group">
                                <label for="cap-mode">Mode</label>
                                <select id="cap-mode">
                                    <option value="charge">Charge</option>
                                    <option value="discharge">Discharge</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Inductor Energy Storage Fields -->
                    <div id="inductor-energy-fields" class="hidden">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ind-inductance">Inductance (L) (mH)</label>
                                <input type="number" id="ind-inductance" min="0.001" step="0.001" value="10">
                            </div>
                            <div class="form-group">
                                <label for="ind-current">Current (I) (A)</label>
                                <input type="number" id="ind-current" min="0" step="0.01" value="0.5">
                            </div>
                        </div>
                    </div>

                    <!-- Beam Deflection (Cantilever) Fields -->
                    <div id="beam-deflection-fields" class="hidden">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="beam-load">Point Load (P) (N)</label>
                                <input type="number" id="beam-load" min="0.1" step="0.1" value="100">
                            </div>
                            <div class="form-group">
                                <label for="beam-length">Beam Length (L) (m)</label>
                                <input type="number" id="beam-length" min="0.1" step="0.1" value="1">
                            </div>
                            <div class="form-group">
                                <label for="beam-modulus">Young's Modulus (E) (GPa) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Material stiffness (e.g., Steel ~200 GPa).</span></span></label>
                                <input type="number" id="beam-modulus" min="0.1" step="0.1" value="200">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="beam-inertia">Moment of Inertia (I) (mm^4) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Cross-sectional resistance to bending.</span></span></label>
                                <input type="number" id="beam-inertia" min="0.1" step="0.1" value="1000000">
                            </div>
                        </div>
                    </div>

                    <!-- Fluid Flow Rate (Pipe) Fields -->
                    <div id="fluid-flow-rate-fields" class="hidden">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="pipe-diameter">Pipe Diameter (D) (m)</label>
                                <input type="number" id="pipe-diameter" min="0.01" step="0.001" value="0.1">
                            </div>
                            <div class="form-group">
                                <label for="pipe-velocity">Fluid Velocity (V) (m/s)</label>
                                <input type="number" id="pipe-velocity" min="0.01" step="0.01" value="1.5">
                            </div>
                        </div>
                    </div>

                    <!-- Heat Transfer (Conduction) Fields -->
                    <div id="heat-transfer-fields" class="hidden">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ht-area">Area (A) (m²)</label>
                                <input type="number" id="ht-area" min="0.01" step="0.01" value="1">
                            </div>
                            <div class="form-group">
                                <label for="ht-temp-hot">Hot Side Temp (T_hot) (°C)</label>
                                <input type="number" id="ht-temp-hot" value="100">
                            </div>
                            <div class="form-group">
                                <label for="ht-temp-cold">Cold Side Temp (T_cold) (°C)</label>
                                <input type="number" id="ht-temp-cold" value="20">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ht-thickness">Thickness (L) (m)</label>
                                <input type="number" id="ht-thickness" min="0.001" step="0.001" value="0.05">
                            </div>
                            <div class="form-group">
                                <label for="ht-conductivity">Thermal Conductivity (k) (W/m·K) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Material's ability to conduct heat (e.g., Copper ~400, Wood ~0.15).</span></span></label>
                                <input type="number" id="ht-conductivity" min="0.001" step="0.001" value="15">
                            </div>
                        </div>
                    </div>

                    <div class="button-wrapper">
                        <button type="button" id="calculate-btn" class="calculate-btn">Calculate</button>
                    </div>
                </form>
            </div>
            
            <div id="result-container" class="result-container">
                <h3>Calculation Results</h3>
                <div id="calculation-details">
                    <!-- Calculation steps will be inserted here -->
                </div>
                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body">
                        <!-- Results will be dynamically inserted here -->
                    </tbody>
                </table>
                <div class="standard-reference" id="standard-reference">
                    <!-- Standard reference text will be inserted here -->
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="disclaimer">
                
                <p>Disclaimer: Always verify calculation results against applicable engineering standards and guidelines.</p>
            </div>
            <div class="credit">
                <p>Created by A Sharma</p>
                <p>&copy; 2025 Design Calculators</p>
            </div>
            <div class="social-share">
                <h3>Share This Site</h3>
                <div class="social-buttons">
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in&title=Design Calculators - Electrical" target="_blank" class="social-btn linkedin">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" class="social-btn facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?text=Check out this amazing Design Calculators - Electrical!&url=https://designcalculators.co.in" target="_blank" class="social-btn twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text=Check out this amazing Design Calculators - Electrical! https://designcalculators.co.in" target="_blank" class="social-btn whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.reddit.com/submit?url=https://designcalculators.co.in&title=Design Calculators - Electrical" target="_blank" class="social-btn reddit">
                        <i class="fab fa-reddit"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const calcTypeSelect = document.getElementById('calc-type');
            const communicationCableLossFields = document.getElementById('communication-cable-loss-fields');
            const ohmsLawFields = document.getElementById('ohms-law-fields');
            const powerCalculationFields = document.getElementById('power-calculation-fields');
            const resistorColorCodeFields = document.getElementById('resistor-color-code-fields');
            const voltageDividerFields = document.getElementById('voltage-divider-fields');
            const capacitorChargeFields = document.getElementById('capacitor-charge-fields');
            const inductorEnergyFields = document.getElementById('inductor-energy-fields');
            const beamDeflectionFields = document.getElementById('beam-deflection-fields');
            const fluidFlowRateFields = document.getElementById('fluid-flow-rate-fields');
            const heatTransferFields = document.getElementById('heat-transfer-fields');

            // Specific fields for Communication Cable Loss
            const cableTypeSelect = document.getElementById('cable-type');
            const twistedPairFields = document.getElementById('twisted-pair-fields');
            const coaxialFields = document.getElementById('coaxial-fields');
            const fiberOpticFields = document.getElementById('fiber-optic-fields');

            const calculateBtn = document.getElementById('calculate-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const standardReference = document.getElementById('standard-reference');
            const calculationDetailsDiv = document.getElementById('calculation-details');

            // Function to show/hide fields based on main calculator type selection
            function toggleMainCalculatorFields() {
                const selectedCalcType = calcTypeSelect.value;

                // Define all main field containers
                const allMainFieldContainers = [
                    communicationCableLossFields,
                    ohmsLawFields,
                    powerCalculationFields,
                    resistorColorCodeFields,
                    voltageDividerFields,
                    capacitorChargeFields,
                    inductorEnergyFields,
                    beamDeflectionFields,
                    fluidFlowRateFields,
                    heatTransferFields
                ];

                // Iterate through all main containers to hide/disable or show/enable
                allMainFieldContainers.forEach(container => {
                    if (container.id === selectedCalcType + '-fields') {
                        // Show and enable inputs for the selected container
                        container.classList.remove('hidden');
                        Array.from(container.querySelectorAll('input, select')).forEach(input => input.disabled = false);
                        // If it's the communication cable loss section, also trigger its sub-toggle
                        if (selectedCalcType === 'communication-cable-loss') {
                            toggleCommunicationCableFields();
                        }
                    } else {
                        // Hide and disable inputs for other containers
                        container.classList.add('hidden');
                        Array.from(container.querySelectorAll('input, select')).forEach(input => input.disabled = true);
                    }
                });
            }

            // Function to show/hide sub-fields for communication cable loss
            function toggleCommunicationCableFields() {
                const selectedType = cableTypeSelect.value;
                
                // Define all communication sub-field containers
                const allCommunicationSubFields = [
                    twistedPairFields,
                    coaxialFields,
                    fiberOpticFields
                ];

                // Iterate through all sub-containers to hide/disable or show/enable
                allCommunicationSubFields.forEach(container => {
                    if (container.id === selectedType + '-fields') {
                        // Show and enable inputs for the selected sub-container
                        container.classList.remove('hidden');
                        Array.from(container.querySelectorAll('input, select')).forEach(input => input.disabled = false);
                    } else {
                        // Hide and disable inputs for other sub-containers
                        container.classList.add('hidden');
                        Array.from(container.querySelectorAll('input, select')).forEach(input => input.disabled = true);
                    }
                });
            }

            // Initial toggle when page loads
            toggleMainCalculatorFields();
            calcTypeSelect.addEventListener('change', toggleMainCalculatorFields);
            cableTypeSelect.addEventListener('change', toggleCommunicationCableFields);

            calculateBtn.addEventListener('click', function() {
                const selectedCalcType = calcTypeSelect.value;
                let totalLoss = 0;
                let calculationHtml = '<h4>Detailed Calculation Steps:</h4>';
                let standardRefText = '';
                resultTableBody.innerHTML = ''; // Clear previous results
                resultContainer.classList.remove('show'); // Hide previous results for animation

                // Helper function to add rows to the result table
                function addResultRow(parameter, value) {
                    const row = resultTableBody.insertRow();
                    const paramCell = row.insertCell();
                    const valueCell = row.insertCell();
                    paramCell.textContent = parameter;
                    valueCell.textContent = value;
                }

                // Attenuation values (examples - real values vary by manufacturer and exact cable spec)
                const attenuationRates = {
                    'twisted-pair': {
                        'cat5e': {
                            '100': 22.0, // dB/100m @ 100MHz
                            '250': 38.0 // dB/100m @ 250MHz (approx)
                        },
                        'cat6': {
                            '100': 19.8, // dB/100m @ 100MHz
                            '250': 32.8, // dB/100m @ 250MHz
                            '500': 53.0 // dB/100m @ 500MHz (approx)
                        },
                        'cat6a': {
                            '100': 19.8, // dB/100m @ 100MHz
                            '250': 31.8, // dB/100m @ 250MHz
                            '500': 49.0 // dB/100m @ 500MHz
                        }
                    },
                    'coaxial': { // dB/100m at specified frequency
                        'rg6': { // Attenuation at various frequencies (MHz)
                            '50': 4.0, '200': 8.0, '500': 13.0, '1000': 20.0
                        },
                        'rg58': {
                            '50': 7.0, '200': 14.0, '500': 22.0, '1000': 35.0
                        },
                        'rg11': {
                            '50': 2.0, '200': 5.0, '500': 8.0, '1000': 13.0
                        }
                    },
                    'fiber-optic': { // dB/km
                        'multimode': {
                            '850': 3.5, // OM1/OM2/OM3/OM4 up to 3.5 dB/km
                            '1300': 1.5 // OM1/OM2/OM3/OM4 up to 1.5 dB/km
                        },
                        'singlemode': {
                            '1310': 0.4, // OS1/OS2 up to 0.4 dB/km
                            '1550': 0.25 // OS1/OS2 up to 0.25 dB/km
                        }
                    }
                };

                // Helper to linearly interpolate attenuation for coaxial cables
                function interpolateCoaxAttenuation(freq, type) {
                    const data = attenuationRates.coaxial[type];
                    const frequencies = Object.keys(data).map(Number).sort((a,b) => a - b);

                    if (freq <= frequencies[0]) return data[frequencies[0]];
                    if (freq >= frequencies[frequencies.length - 1]) return data[frequencies[frequencies.length - 1]];

                    for (let i = 0; i < frequencies.length - 1; i++) {
                        const f1 = frequencies[i];
                        const f2 = frequencies[i+1];
                        if (freq >= f1 && freq <= f2) {
                            const att1 = data[f1];
                            const att2 = data[f2];
                            return att1 + (att2 - att1) * (freq - f1) / (f2 - f1);
                        }
                    }
                    return 0; // Should not reach here
                }

                // Resistor Color Code mapping
                const resistorBands = {
                    'black': { digit: 0, multiplier: 1, tolerance: NaN },
                    'brown': { digit: 1, multiplier: 10, tolerance: 1 },
                    'red': { digit: 2, multiplier: 100, tolerance: 2 },
                    'orange': { digit: 3, multiplier: 1000, tolerance: NaN },
                    'yellow': { digit: 4, multiplier: 10000, tolerance: NaN },
                    'green': { digit: 5, multiplier: 100000, tolerance: 0.5 },
                    'blue': { digit: 6, multiplier: 1000000, tolerance: 0.25 },
                    'violet': { digit: 7, multiplier: 10000000, tolerance: 0.1 },
                    'grey': { digit: 8, multiplier: 100000000, tolerance: 0.05 },
                    'white': { digit: 9, multiplier: 1000000000, tolerance: NaN },
                    'gold': { digit: NaN, multiplier: 0.1, tolerance: 5 },
                    'silver': { digit: NaN, multiplier: 0.01, tolerance: 10 },
                    'none': { digit: NaN, multiplier: NaN, tolerance: 20 }
                };

                // --- Calculation Logic based on selectedCalcType ---
                if (selectedCalcType === 'communication-cable-loss') {
                    const cableType = cableTypeSelect.value;
                    let cableLength = parseFloat(document.getElementById('cable-length').value);
                    const lengthUnit = document.getElementById('length-unit').value;

                    // Convert length to meters for internal calculations
                    if (lengthUnit === 'feet') {
                        cableLength *= 0.3048; // 1 foot = 0.3048 meters
                    }

                    if (isNaN(cableLength) || cableLength <= 0) {
                        displayMessage("Please enter a valid positive cable length.", "error");
                        return;
                    }

                    let cableLoss = 0;
                    let connectorLoss = 0;
                    let spliceLoss = 0;

                    if (cableType === 'twisted-pair') {
                        const tpCategory = document.getElementById('tp-category').value;
                        const tpFrequency = parseFloat(document.getElementById('tp-frequency').value);
                        const tpConnectorLossPerPair = parseFloat(document.getElementById('tp-connector-loss-per-pair').value);
                        const tpNumConnectors = parseInt(document.getElementById('tp-num-connectors').value);

                        if (isNaN(tpFrequency) || tpFrequency <= 0 || isNaN(tpConnectorLossPerPair) || tpConnectorLossPerPair < 0 || isNaN(tpNumConnectors) || tpNumConnectors < 0) {
                            displayMessage("Please enter valid positive numbers for Twisted Pair fields.", "error");
                            return;
                        }

                        let attenuationPer100m;
                        if (tpCategory === 'cat5e') {
                            attenuationPer100m = attenuationRates['twisted-pair'][tpCategory]['100']; 
                            if (tpFrequency > 100) {
                                displayMessage("For Cat5e, attenuation values provided are for 100MHz. Calculations for higher frequencies may be less accurate.", "warning");
                            }
                        } else if (tpCategory === 'cat6') {
                            if (tpFrequency <= 250) {
                                attenuationPer100m = attenuationRates['twisted-pair'][tpCategory]['250'];
                            } else {
                                attenuationPer100m = attenuationRates['twisted-pair'][tpCategory]['500']; 
                                displayMessage("For Cat6, higher frequency attenuation (above 250MHz) is estimated.", "warning");
                            }
                        } else if (tpCategory === 'cat6a') {
                            if (tpFrequency <= 500) {
                                attenuationPer100m = attenuationRates['twisted-pair'][tpCategory]['500'];
                            } else {
                                attenuationPer100m = attenuationRates['twisted-pair'][tpCategory]['500']; 
                                displayMessage("For Cat6a, attenuation values provided are for 500MHz. Calculations for higher frequencies may be less accurate.", "warning");
                            }
                        }

                        cableLoss = (cableLength / 100) * attenuationPer100m;
                        connectorLoss = tpConnectorLossPerPair * tpNumConnectors;
                        totalLoss = cableLoss + connectorLoss;

                        calculationHtml += `<p><strong>1. Cable Attenuation:</strong></p>`;
                        calculationHtml += `<p>Attenuation for twisted pair cables is highly dependent on frequency and cable category. Values are typically specified in dB per 100 meters, as per <a href="https://standards.ieee.org/" target="_blank">IEEE 802.3</a> and <a href="https://global.ihs.com/search_results.cfm?search_type=document&id=1055740&RID=GBL-EIASRCH" target="_blank">TIA/EIA-568-D</a> series standards.</p>`;
                        calculationHtml += `<p class="formula">$$\\text{Cable Loss} = \\frac{\\text{Cable Length (m)}}{100 \\text{ m}} \\times \\text{Attenuation Rate (dB/100m)}$$</p>`;
                        calculationHtml += `<ul>
                            <li>Cable Length = ${cableLength.toFixed(2)} m</li>
                            <li>${tpCategory.toUpperCase()} Attenuation Rate @ ${tpFrequency} MHz = ${attenuationPer100m.toFixed(2)} dB/100m</li>
                        </ul>`;
                        calculationHtml += `<p class="calculation-step">
                            Cable Loss = (${cableLength.toFixed(2)} / 100) x ${attenuationPer100m.toFixed(2)} = ${cableLoss.toFixed(2)} dB
                        </p>`;
                        
                        calculationHtml += `<p><strong>2. Connector Loss:</strong></p>`;
                        calculationHtml += `<p>Each connector introduces a small amount of signal loss. For twisted pair, this is typically per connection point, as outlined in <a href="https://global.ihs.com/search_results.cfm?search_type=document&id=1055740&RID=GBL-EIASRCH" target="_blank">TIA/EIA-568-D</a> standards.</p>`;
                        calculationHtml += `<p class="formula">$$\\text{Connector Loss} = \\text{Loss per Connector Pair} \\times \\text{Number of Connectors}$$</p>`;
                        calculationHtml += `<ul>
                            <li>Loss per Connector Pair = ${tpConnectorLossPerPair.toFixed(2)} dB</li>
                            <li>Number of Connectors = ${tpNumConnectors}</li>
                        </ul>`;
                        calculationHtml += `<p class="calculation-step">
                            Connector Loss = ${tpConnectorLossPerPair.toFixed(2)} dB x ${tpNumConnectors} = ${connectorLoss.toFixed(2)} dB
                        </p>`;

                        standardRefText = "Twisted pair cable loss calculations are based on industry standards such as <a href=\"https://standards.ieee.org/\" target=\"_blank\">IEEE 802.3</a> (Ethernet standards) and <a href=\"https://global.ihs.com/search_results.cfm?search_type=document&id=1055740&RID=GBL-EIASRCH\" target=\"_blank\">TIA/EIA-568-D</a> (Commercial Building Telecommunications Cabling Standard). These standards define attenuation limits and testing procedures for various cable categories. Actual performance should always be verified with field testing using compliant equipment.";

                        addResultRow("Cable Type", cableType.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' '));
                        addResultRow("Cable Length", `${document.getElementById('cable-length').value} ${lengthUnit} (${cableLength.toFixed(2)} meters)`);
                        addResultRow("TP Category", document.getElementById('tp-category').value.toUpperCase());
                        addResultRow("Frequency", `${document.getElementById('tp-frequency').value} MHz`);
                        addResultRow("Connectors", `${document.getElementById('tp-num-connectors').value} x ${document.getElementById('tp-connector-loss-per-pair').value} dB/pair`);

                    } else if (cableType === 'coaxial') {
                        const coaxType = document.getElementById('coax-type').value;
                        const coaxFrequency = parseFloat(document.getElementById('coax-frequency').value);
                        const coaxConnectorLoss = parseFloat(document.getElementById('coax-connector-loss').value);
                        const coaxNumConnectors = parseInt(document.getElementById('coax-num-connectors').value);

                        if (isNaN(coaxFrequency) || coaxFrequency <= 0 || isNaN(coaxConnectorLoss) || coaxConnectorLoss < 0 || isNaN(coaxNumConnectors) || coaxNumConnectors < 0) {
                            displayMessage("Please enter valid positive numbers for Coaxial Cable fields.", "error");
                            return;
                        }

                        const attenuationPer100m = interpolateCoaxAttenuation(coaxFrequency, coaxType);

                        cableLoss = (cableLength / 100) * attenuationPer100m;
                        connectorLoss = coaxConnectorLoss * coaxNumConnectors;
                        totalLoss = cableLoss + connectorLoss;

                        calculationHtml += `<p><strong>1. Cable Attenuation:</strong></p>`;
                        calculationHtml += `<p>Attenuation for coaxial cables is dependent on frequency and cable type. Values are typically specified in dB per 100 meters at specific frequencies, in line with industry best practices and general specifications for RG-type cables (e.g., as defined by <a href="https://www.iec.ch/" target="_blank">IEC</a> standards for RF cables).</p>`;
                        calculationHtml += `<p class="formula">$$\\text{Cable Loss} = \\frac{\\text{Cable Length (m)}}{100 \\text{ m}} \\times \\text{Attenuation Rate (dB/100m)}$$</p>`;
                        calculationHtml += `<ul>
                            <li>Cable Length = ${cableLength.toFixed(2)} m</li>
                            <li>${coaxType.toUpperCase()} Attenuation Rate @ ${coaxFrequency} MHz = ${attenuationPer100m.toFixed(2)} dB/100m</li>
                        </ul>`;
                        calculationHtml += `<p class="calculation-step">
                            Cable Loss = (${cableLength.toFixed(2)} / 100) x ${attenuationPer100m.toFixed(2)} = ${cableLoss.toFixed(2)} dB
                        </p>`;

                        calculationHtml += `<p><strong>2. Connector Loss:</strong></p>`;
                        calculationHtml += `<p>Each connector introduces a small amount of signal loss. These values are typical industry figures for common coaxial connectors (e.g., F-type, BNC).</p>`;
                        calculationHtml += `<p class="formula">$$\\text{Connector Loss} = \\text{Loss per Connector} \\times \\text{Number of Connectors}$$</p>`;
                        calculationHtml += `<ul>
                            <li>Loss per Connector = ${coaxConnectorLoss.toFixed(2)} dB</li>
                            <li>Number of Connectors = ${coaxNumConnectors}</li>
                        </ul>`;
                        calculationHtml += `<p class="calculation-step">
                            Connector Loss = ${coaxConnectorLoss.toFixed(2)} dB x ${coaxNumConnectors} = ${connectorLoss.toFixed(2)} dB
                        </p>`;

                        standardRefText = "Coaxial cable loss calculations follow principles consistent with <a href=\"https://www.iec.ch/\" target=\"_blank\">IEC</a> and <a href=\"https://www.itu.int/en/pages/default.aspx\" target=\"_blank\">ITU-T</a> recommendations for transmission lines. Attenuation properties are derived from cable construction and material, typically provided by manufacturers. While no single standard governs all coaxial applications universally, the fundamental physics and industry-accepted attenuation characteristics are applied.";

                        addResultRow("Cable Type", cableType.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' '));
                        addResultRow("Cable Length", `${document.getElementById('cable-length').value} ${lengthUnit} (${cableLength.toFixed(2)} meters)`);
                        addResultRow("Coax Type", document.getElementById('coax-type').value.toUpperCase());
                        addResultRow("Frequency", `${document.getElementById('coax-frequency').value} MHz`);
                        addResultRow("Connectors", `${document.getElementById('coax-num-connectors').value} x ${document.getElementById('coax-connector-loss').value} dB/connector`);

                    } else if (cableType === 'fiber-optic') {
                        const fiberType = document.getElementById('fiber-type').value;
                        const wavelength = parseFloat(document.getElementById('wavelength').value);
                        const fiberConnectorLoss = parseFloat(document.getElementById('fiber-connector-loss').value);
                        const fiberNumConnectors = parseInt(document.getElementById('fiber-num-connectors').value);
                        const fiberSpliceLoss = parseFloat(document.getElementById('fiber-splice-loss').value);
                        const fiberNumSplices = parseInt(document.getElementById('fiber-num-splices').value);

                        if (isNaN(wavelength) || wavelength <= 0 || isNaN(fiberConnectorLoss) || fiberConnectorLoss < 0 || isNaN(fiberNumConnectors) || fiberNumConnectors < 0 || isNaN(fiberSpliceLoss) || fiberSpliceLoss < 0 || isNaN(fiberNumSplices) || fiberNumSplices < 0) {
                            displayMessage("Please enter valid positive numbers for Fiber Optic fields.", "error");
                            return;
                        }

                        let attenuationPerKm;
                        if (fiberType === 'multimode') {
                            if (wavelength === 850) attenuationPerKm = attenuationRates['fiber-optic'][fiberType]['850'];
                            else if (wavelength === 1300) attenuationPerKm = attenuationRates['fiber-optic'][fiberType]['1300'];
                            else {
                                displayMessage("Selected wavelength is not typical for Multimode fiber. Using 850nm attenuation.", "warning");
                                attenuationPerKm = attenuationRates['fiber-optic'][fiberType]['850'];
                            }
                        } else { // Singlemode
                            if (wavelength === 1310) attenuationPerKm = attenuationRates['fiber-optic'][fiberType]['1310'];
                            else if (wavelength === 1550) attenuationPerKm = attenuationRates['fiber-optic'][fiberType]['1550'];
                            else {
                                displayMessage("Selected wavelength is not typical for Singlemode fiber. Using 1310nm attenuation.", "warning");
                                attenuationPerKm = attenuationRates['fiber-optic'][fiberType]['1310'];
                            }
                        }

                        cableLoss = (cableLength / 1000) * attenuationPerKm; // Convert meters to km
                        connectorLoss = fiberConnectorLoss * fiberNumConnectors;
                        spliceLoss = fiberSpliceLoss * fiberNumSplices;
                        totalLoss = cableLoss + connectorLoss + spliceLoss;

                        calculationHtml += `<p><strong>1. Cable Attenuation:</strong></p>`;
                        calculationHtml += `<p>Attenuation in fiber optic cables is dependent on fiber type, wavelength, and length. Values are typically specified in dB per kilometer. These rates align with those found in <a href="https://standards.ieee.org/" target="_blank">IEEE 802.3</a> and <a href="https://www.tiaonline.org/standards/" target="_blank">TIA/EIA</a> standards for optical fiber characteristics.</p>`;
                        calculationHtml += `<p class="formula">$$\\text{Cable Loss} = \\frac{\\text{Cable Length (m)}}{1000 \\text{ m}} \\times \\text{Attenuation Rate (dB/km)}$$</p>`;
                        calculationHtml += `<ul>
                            <li>Cable Length = ${cableLength.toFixed(2)} m</li>
                            <li>${fiberType.toUpperCase()} Attenuation Rate @ ${wavelength} nm = ${attenuationPerKm.toFixed(2)} dB/km</li>
                        </ul>`;
                        calculationHtml += `<p class="calculation-step">
                            Cable Loss = (${cableLength.toFixed(2)} / 1000) x ${attenuationPerKm.toFixed(2)} = ${cableLoss.toFixed(2)} dB
                        </p>`;

                        calculationHtml += `<p><strong>2. Connector Loss:</strong></p>`;
                        calculationHtml += `<p>Each connector introduces a small amount of signal loss. Fiber optic connector losses are critical for link budget analysis and are specified in standards like <a href="https://www.tiaonline.org/standards/" target="_blank">TIA/EIA-568-D</a> and <a href="https://www.iec.ch/" target="_blank">IEC 61753</a> series (Fiber optic interconnecting devices and passive components - Performance standard).</p>`;
                        calculationHtml += `<p class="formula">$$\\text{Connector Loss} = \\text{Loss per Connector} \\times \\text{Number of Connectors}$$</p>`;
                        calculationHtml += `<ul>
                            <li>Loss per Connector = ${fiberConnectorLoss.toFixed(2)} dB</li>
                            <li>Number of Connectors = ${fiberNumConnectors}</li>
                        </ul>`;
                        calculationHtml += `<p class="calculation-step">
                            Connector Loss = ${fiberConnectorLoss.toFixed(2)} dB x ${fiberNumConnectors} = ${connectorLoss.toFixed(2)} dB
                        </p>`;

                        calculationHtml += `<p><strong>3. Splice Loss:</strong></p>`;
                        calculationHtml += `<p>Splices (fusion or mechanical) also contribute to signal loss in fiber optic links. Typical splice losses are also covered by <a href="https://www.tiaonline.org/standards/" target="_blank">TIA/EIA</a> and <a href="https://www.iec.ch/" target="_blank">IEC</a> standards (e.g., IEC 61753-1).</p>`;
                        calculationHtml += `<p class="formula">$$\\text{Splice Loss} = \\text{Loss per Splice} \\times \\text{Number of Splices}$$</p>`;
                        calculationHtml += `<ul>
                            <li>Loss per Splice = ${fiberSpliceLoss.toFixed(2)} dB</li>
                            <li>Number of Splices = ${fiberNumSplices}</li>
                        </ul>`;
                        calculationHtml += `<p class="calculation-step">
                            Splice Loss = ${fiberSpliceLoss.toFixed(2)} dB x ${fiberNumSplices} = ${spliceLoss.toFixed(2)} dB
                        </p>`;

                        standardRefText = "Fiber optic cable loss calculations are based on fundamental optical principles and are guided by international standards from organizations such as the <a href=\"https://standards.ieee.org/\" target=\"_blank\">Institute of Electrical and Electronics Engineers (IEEE)</a>, particularly <a href=\"https://standards.ieee.org/\" target=\"_blank\">IEEE 802.3</a> (Ethernet standards), the <a href=\"https://www.tiaonline.org/standards/\" target=\"_blank\">Telecommunications Industry Association (TIA)</a>, especially <a href=\"https://global.ihs.com/search_results.cfm?search_type=document&id=1055740&RID=GBL-EIASRCH\" target=\"_blank\">TIA/EIA-568-D</a> (Commercial Building Telecommunications Cabling Standard), and the <a href=\"https://www.iec.ch/\" target=\"_blank\">International Electrotechnical Commission (IEC)</a>, notably the <a href=\"https://www.iec.ch/\" target=\"_blank\">IEC 61753</a> series for performance standards of fiber optic interconnecting devices. These standards provide guidelines for cable attenuation, connector loss, and splice loss. Exact values may vary by specific component and manufacturer specifications.";
                        
                        addResultRow("Cable Type", cableType.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' '));
                        addResultRow("Cable Length", `${document.getElementById('cable-length').value} ${lengthUnit} (${cableLength.toFixed(2)} meters)`);
                        addResultRow("Fiber Type", document.getElementById('fiber-type').value.toUpperCase());
                        addResultRow("Wavelength", `${document.getElementById('wavelength').value} nm`);
                        addResultRow("Connectors", `${document.getElementById('fiber-num-connectors').value} x ${document.getElementById('fiber-connector-loss').value} dB/connector`);
                        addResultRow("Splices", `${document.getElementById('fiber-num-splices').value} x ${document.getElementById('fiber-splice-loss').value} dB/splice`);
                    }
                    totalLoss = cableLoss + connectorLoss + spliceLoss;
                    addResultRow("Total Estimated Loss", totalLoss.toFixed(2) + " dB");

                } else if (selectedCalcType === 'ohms-law') {
                    const voltage = parseFloat(document.getElementById('ohms-voltage').value);
                    const current = parseFloat(document.getElementById('ohms-current').value);
                    const resistance = parseFloat(document.getElementById('ohms-resistance').value);

                    let calculatedValue;
                    let calculatedParameter = '';
                    let formula = '';
                    let steps = '';

                    // Determine which value to calculate
                    if (!isNaN(voltage) && !isNaN(current) && isNaN(resistance)) {
                        // Calculate Resistance (R = V / I)
                        if (current === 0) {
                            displayMessage("Current cannot be zero for resistance calculation.", "error");
                            return;
                        }
                        calculatedValue = voltage / current;
                        calculatedParameter = "Resistance (R)";
                        formula = "$$R = \\frac{V}{I}$$";
                        steps = `R = ${voltage} V / ${current} A = ${calculatedValue.toFixed(2)} Ω`;
                    } else if (!isNaN(voltage) && isNaN(current) && !isNaN(resistance)) {
                        // Calculate Current (I = V / R)
                        if (resistance === 0) {
                            displayMessage("Resistance cannot be zero for current calculation.", "error");
                            return;
                        }
                        calculatedValue = voltage / resistance;
                        calculatedParameter = "Current (I)";
                        formula = "$$I = \\frac{V}{R}$$";
                        steps = `I = ${voltage} V / ${resistance} Ω = ${calculatedValue.toFixed(2)} A`;
                    } else if (isNaN(voltage) && !isNaN(current) && !isNaN(resistance)) {
                        // Calculate Voltage (V = I * R)
                        calculatedValue = current * resistance;
                        calculatedParameter = "Voltage (V)";
                        formula = "$$V = I \\times R$$";
                        steps = `V = ${current} A x ${resistance} Ω = ${calculatedValue.toFixed(2)} V`;
                    } else {
                        displayMessage("Please enter exactly two values to calculate the third.", "error");
                        return;
                    }

                    calculationHtml += `<p><strong>Ohm's Law Calculation:</strong></p>`;
                    calculationHtml += `<p>Ohm's Law states the relationship between voltage, current, and resistance in an electrical circuit. It is a fundamental law in electronics.</p>`;
                    calculationHtml += `<p class="formula">${formula}</p>`;
                    calculationHtml += `<ul>
                        <li>Voltage (V) = ${isNaN(voltage) ? 'Calculated' : voltage} V</li>
                        <li>Current (I) = ${isNaN(current) ? 'Calculated' : current} A</li>
                        <li>Resistance (R) = ${isNaN(resistance) ? 'Calculated' : resistance} Ω</li>
                    </ul>`;
                    calculationHtml += `<p class="calculation-step">${steps}</p>`;
                    
                    standardRefText = "Ohm's Law is a fundamental principle in electrical engineering, as described by <a href=\"https://www.ieee.org/\" target=\"_blank\">IEEE</a> standards and basic circuit theory. It forms the basis for analyzing and designing electrical circuits.";

                    addResultRow("Calculated Parameter", calculatedParameter);
                    addResultRow("Calculated Value", calculatedValue.toFixed(2));
                    addResultRow("Voltage (V)", isNaN(voltage) ? calculatedValue.toFixed(2) : voltage);
                    addResultRow("Current (A)", isNaN(current) ? calculatedValue.toFixed(2) : current);
                    addResultRow("Resistance (Ω)", isNaN(resistance) ? calculatedValue.toFixed(2) : resistance);

                } else if (selectedCalcType === 'power-calculation') {
                    const voltage = parseFloat(document.getElementById('power-voltage').value);
                    const current = parseFloat(document.getElementById('power-current').value);
                    const resistance = parseFloat(document.getElementById('power-resistance').value);
                    const powerFactor = parseFloat(document.getElementById('power-factor').value);
                    const phases = parseInt(document.getElementById('power-phases').value);

                    if (isNaN(voltage) || isNaN(current) || isNaN(resistance) || isNaN(powerFactor) || isNaN(phases) || voltage < 0 || current < 0 || resistance < 0 || powerFactor < 0 || powerFactor > 1 || (phases !== 1 && phases !== 3)) {
                        displayMessage("Please enter valid positive numbers for Voltage, Current, Resistance, Power Factor (0-1), and select valid Phases (1 or 3).", "error");
                        return;
                    }

                    let power = 0;
                    let formula = '';
                    let steps = '';

                    if (phases === 1) { // Single-Phase Power
                        if (!isNaN(voltage) && !isNaN(current)) {
                            power = voltage * current * powerFactor;
                            formula = "$$P = V \\times I \\times \\text{PF}$$";
                            steps = `P = ${voltage} V x ${current} A x ${powerFactor} = ${power.toFixed(2)} W`;
                        } else if (!isNaN(voltage) && !isNaN(resistance)) {
                            power = (voltage * voltage / resistance) * powerFactor;
                            formula = "$$P = \\frac{V^2}{R} \\times \\text{PF}$$";
                            steps = `P = (${voltage}^2 / ${resistance}) x ${powerFactor} = ${power.toFixed(2)} W`;
                        } else if (!isNaN(current) && !isNaN(resistance)) {
                            power = (current * current * resistance) * powerFactor;
                            formula = "$$P = I^2 \\times R \\times \\text{PF}$$";
                            steps = `P = (${current}^2 x ${resistance}) x ${powerFactor} = ${power.toFixed(2)} W`;
                        } else {
                            displayMessage("Please provide at least two values (V, I, R) for power calculation.", "error");
                            return;
                        }
                    } else if (phases === 3) { // Three-Phase Power
                        if (!isNaN(voltage) && !isNaN(current)) {
                            power = Math.sqrt(3) * voltage * current * powerFactor;
                            formula = "$$P = \\sqrt{3} \\times V_L \\times I_L \\times \\text{PF}$$";
                            steps = `P = √3 x ${voltage} V x ${current} A x ${powerFactor} = ${power.toFixed(2)} W`;
                        } else {
                             displayMessage("For three-phase power, Voltage and Current are required.", "error");
                             return;
                        }
                    }

                    calculationHtml += `<p><strong>Power Calculation:</strong></p>`;
                    calculationHtml += `<p>This calculates the active power (real power) in a circuit. For AC circuits, the power factor (PF) accounts for the phase difference between voltage and current.</p>`;
                    calculationHtml += `<p class="formula">${formula}</p>`;
                    calculationHtml += `<ul>
                        <li>Voltage (V) = ${voltage} V</li>
                        <li>Current (A) = ${current} A</li>
                        <li>Resistance (Ω) = ${resistance} Ω</li>
                        <li>Power Factor (PF) = ${powerFactor}</li>
                        <li>Phases = ${phases}</li>
                    </ul>`;
                    calculationHtml += `<p class="calculation-step">${steps}</p>`;

                    standardRefText = "Electrical power calculations are based on fundamental laws of physics and electrical engineering principles, consistent with <a href=\"https://www.ieee.org/\" target=\"_blank\">IEEE</a> standards for electrical systems. For AC circuits, power factor correction is crucial for efficiency and compliance with grid regulations.";

                    addResultRow("Calculated Power", power.toFixed(2) + " W");
                    addResultRow("Voltage (V)", voltage);
                    addResultRow("Current (A)", current);
                    addResultRow("Resistance (Ω)", resistance);
                    addResultRow("Power Factor", powerFactor);
                    addResultRow("Phases", phases === 1 ? "Single-Phase" : "Three-Phase");

                } else if (selectedCalcType === 'resistor-color-code') {
                    const band1 = document.getElementById('band1').value;
                    const band2 = document.getElementById('band2').value;
                    const band3 = document.getElementById('band3').value; // Multiplier
                    const band4 = document.getElementById('band4').value; // Tolerance

                    const digit1 = resistorBands[band1].digit;
                    const digit2 = resistorBands[band2].digit;
                    const multiplier = resistorBands[band3].multiplier;
                    const tolerance = resistorBands[band4].tolerance;

                    if (isNaN(digit1) || isNaN(digit2) || isNaN(multiplier)) {
                        displayMessage("Invalid color selection for resistor bands. Please check your inputs.", "error");
                        return;
                    }

                    const resistanceValue = (digit1 * 10 + digit2) * multiplier;
                    const resistanceFormatted = formatResistance(resistanceValue);
                    const toleranceFormatted = isNaN(tolerance) ? 'N/A' : `±${tolerance}%`;

                    calculationHtml += `<p><strong>Resistor Color Code Calculation:</strong></p>`;
                    calculationHtml += `<p>This calculator decodes the resistance value and tolerance of a resistor based on its color bands. The standard color code system is used globally for electronic components.</p>`;
                    calculationHtml += `<p class="formula">$$\\text{Resistance} = (\\text{Band1Digit} \\times 10 + \\text{Band2Digit}) \\times \\text{Multiplier}$$</p>`;
                    calculationHtml += `<p class="formula">$$\\text{Tolerance} = \\text{Band4Percentage}$$</p>`;
                    calculationHtml += `<ul>
                        <li>Band 1: ${band1.charAt(0).toUpperCase() + band1.slice(1)} (${digit1})</li>
                        <li>Band 2: ${band2.charAt(0).toUpperCase() + band2.slice(1)} (${digit2})</li>
                        <li>Band 3 (Multiplier): ${band3.charAt(0).toUpperCase() + band3.slice(1)} (x${multiplier})</li>
                        <li>Band 4 (Tolerance): ${band4.charAt(0).toUpperCase() + band4.slice(1)} (${toleranceFormatted})</li>
                    </ul>`;
                    calculationHtml += `<p class="calculation-step">
                        Resistance = (${digit1} x 10 + ${digit2}) x ${multiplier} = ${resistanceValue} Ω
                    </p>`;
                    calculationHtml += `<p class="calculation-step">
                        Tolerance = ${toleranceFormatted}
                    </p>`;

                    standardRefText = "Resistor color codes adhere to <a href=\"https://www.iec.ch/\" target=\"_blank\">IEC 60062</a> standard (Marking codes for resistors and capacitors). This international standard ensures consistent identification of electronic components worldwide.";

                    addResultRow("Resistance Value", resistanceFormatted);
                    addResultRow("Tolerance", toleranceFormatted);

                } else if (selectedCalcType === 'voltage-divider') {
                    const vin = parseFloat(document.getElementById('vd-vin').value);
                    const r1 = parseFloat(document.getElementById('vd-r1').value);
                    const r2 = parseFloat(document.getElementById('vd-r2').value);

                    if (isNaN(vin) || isNaN(r1) || isNaN(r2) || vin < 0 || r1 <= 0 || r2 <= 0) {
                        displayMessage("Please enter valid positive numbers for Input Voltage and Resistors R1, R2.", "error");
                        return;
                    }

                    const vout = vin * (r2 / (r1 + r2));

                    calculationHtml += `<p><strong>Voltage Divider Calculation:</strong></p>`;
                    calculationHtml += `<p>A voltage divider is a simple passive linear circuit that produces an output voltage (V_out) that is a fraction of its input voltage (V_in). It's commonly used to scale down voltages.</p>`;
                    calculationHtml += `<p class="formula">$$V_{out} = V_{in} \\times \\frac{R_2}{R_1 + R_2}$$</p>`;
                    calculationHtml += `<ul>
                        <li>Input Voltage (V_in) = ${vin} V</li>
                        <li>Resistor R1 = ${r1} Ω</li>
                        <li>Resistor R2 = ${r2} Ω</li>
                    </ul>`;
                    calculationHtml += `<p class="calculation-step">
                        V_out = ${vin} V x (${r2} Ω / (${r1} Ω + ${r2} Ω)) = ${vout.toFixed(2)} V
                    </p>`;

                    standardRefText = "Voltage divider principles are fundamental to basic electronics and circuit design, widely covered in textbooks and engineering curricula globally. They are a core concept in electrical engineering.";

                    addResultRow("Input Voltage (V_in)", vin + " V");
                    addResultRow("Resistor R1", r1 + " Ω");
                    addResultRow("Resistor R2", r2 + " Ω");
                    addResultRow("Output Voltage (V_out)", vout.toFixed(2) + " V");

                } else if (selectedCalcType === 'capacitor-charge') {
                    const Vs = parseFloat(document.getElementById('cap-voltage-source').value);
                    const R = parseFloat(document.getElementById('cap-resistance').value);
                    const C_uF = parseFloat(document.getElementById('cap-capacitance').value);
                    const t_ms = parseFloat(document.getElementById('cap-time').value);
                    const V0 = parseFloat(document.getElementById('cap-initial-voltage').value);
                    const mode = document.getElementById('cap-mode').value;

                    if (isNaN(Vs) || isNaN(R) || isNaN(C_uF) || isNaN(t_ms) || isNaN(V0) || R <= 0 || C_uF <= 0 || t_ms < 0 || Vs < 0 || V0 < 0) {
                        displayMessage("Please enter valid positive numbers for Source Voltage, Resistance, Capacitance, Time, and Initial Voltage.", "error");
                        return;
                    }

                    const C = C_uF * 1e-6; // Convert microfarads to farads
                    const t = t_ms * 1e-3; // Convert milliseconds to seconds
                    const tau = R * C; // Time constant

                    let Vt = 0;
                    let formula = '';
                    let steps = '';

                    if (mode === 'charge') {
                        // Capacitor charging formula: V(t) = Vs * (1 - e^(-t/RC))
                        Vt = Vs * (1 - Math.exp(-t / tau));
                        formula = "$$V(t) = V_s \\left(1 - e^{-\\frac{t}{RC}}\\right)$$";
                        steps = `V(t) = ${Vs} V x (1 - e^(-${t} s / (${R} Ω x ${C} F))) = ${Vt.toFixed(4)} V`;
                    } else { // discharge
                        // Capacitor discharging formula: V(t) = V0 * e^(-t/RC)
                        Vt = V0 * Math.exp(-t / tau);
                        formula = "$$V(t) = V_0 e^{-\\frac{t}{RC}}$$";
                        steps = `V(t) = ${V0} V x e^(-${t} s / (${R} Ω x ${C} F))) = ${Vt.toFixed(4)} V`;
                    }

                    calculationHtml += `<p><strong>Capacitor ${mode.charAt(0).toUpperCase() + mode.slice(1)} Calculation:</strong></p>`;
                    calculationHtml += `<p>This calculates the voltage across a capacitor at a given time during charging or discharging. The time constant (RC) governs the rate of charge/discharge.</p>`;
                    calculationHtml += `<p class="formula">${formula}</p>`;
                    calculationHtml += `<ul>
                        <li>Source Voltage (V_s) = ${Vs} V</li>
                        <li>Resistance (R) = ${R} Ω</li>
                        <li>Capacitance (C) = ${C_uF} μF</li>
                        <li>Time (t) = ${t_ms} ms</li>
                        <li>Initial Voltage (V_0) = ${V0} V</li>
                        <li>Time Constant (τ) = ${tau.toFixed(4)} s</li>
                    </ul>`;
                    calculationHtml += `<p class="calculation-step">${steps}</p>`;

                    standardRefText = "Capacitor charge and discharge characteristics are fundamental concepts in transient circuit analysis, widely covered in electrical engineering and electronics textbooks. These principles are consistent with standard electrical circuit theory.";

                    addResultRow("Mode", mode.charAt(0).toUpperCase() + mode.slice(1));
                    addResultRow("Source Voltage (Vs)", Vs + " V");
                    addResultRow("Resistance (R)", R + " Ω");
                    addResultRow("Capacitance (C)", C_uF + " μF");
                    addResultRow("Time (t)", t_ms + " ms");
                    addResultRow("Initial Voltage (V0)", V0 + " V");
                    addResultRow("Time Constant (τ)", tau.toFixed(4) + " s");
                    addResultRow("Voltage at Time t (V(t))", Vt.toFixed(4) + " V");

                } else if (selectedCalcType === 'inductor-energy') {
                    const L_mH = parseFloat(document.getElementById('ind-inductance').value);
                    const I = parseFloat(document.getElementById('ind-current').value);

                    if (isNaN(L_mH) || isNaN(I) || L_mH <= 0 || I < 0) {
                        displayMessage("Please enter valid positive numbers for Inductance and Current.", "error");
                        return;
                    }

                    const L = L_mH * 1e-3; // Convert millihenries to henries
                    const energy = 0.5 * L * I * I; // Energy stored in inductor: E = 0.5 * L * I^2

                    calculationHtml += `<p><strong>Inductor Energy Storage Calculation:</strong></p>`;
                    calculationHtml += `<p>This calculates the magnetic energy stored in an inductor when a current flows through it. Inductors store energy in their magnetic field.</p>`;
                    calculationHtml += `<p class="formula">$$E = \\frac{1}{2} L I^2$$</p>`;
                    calculationHtml += `<ul>
                        <li>Inductance (L) = ${L_mH} mH</li>
                        <li>Current (I) = ${I} A</li>
                    </ul>`;
                    calculationHtml += `<p class="calculation-step">
                        E = 0.5 x ${L_mH} mH x (${I} A)^2 = ${energy.toFixed(6)} Joules
                    </p>`;

                    standardRefText = "Inductor energy storage is a core concept in electromagnetism and electrical circuit theory, consistent with fundamental physics principles and applications in power electronics and energy storage systems.";

                    addResultRow("Inductance (L)", L_mH + " mH");
                    addResultRow("Current (I)", I + " A");
                    addResultRow("Stored Energy (E)", energy.toFixed(6) + " Joules");

                } else if (selectedCalcType === 'beam-deflection') {
                    const P = parseFloat(document.getElementById('beam-load').value);
                    const L_m = parseFloat(document.getElementById('beam-length').value);
                    const E_GPa = parseFloat(document.getElementById('beam-modulus').value);
                    const I_mm4 = parseFloat(document.getElementById('beam-inertia').value);

                    if (isNaN(P) || isNaN(L_m) || isNaN(E_GPa) || isNaN(I_mm4) || P <= 0 || L_m <= 0 || E_GPa <= 0 || I_mm4 <= 0) {
                        displayMessage("Please enter valid positive numbers for Load, Length, Young's Modulus, and Moment of Inertia.", "error");
                        return;
                    }

                    const E = E_GPa * 1e9; // Convert GPa to Pa (N/m²)
                    const I = I_mm4 * 1e-12; // Convert mm^4 to m^4

                    // Deflection formula for a cantilever beam with a point load at the free end: delta = (P * L^3) / (3 * E * I)
                    const deflection = (P * Math.pow(L_m, 3)) / (3 * E * I); // in meters
                    const deflection_mm = deflection * 1000; // Convert to mm

                    calculationHtml += `<p><strong>Cantilever Beam Deflection Calculation:</strong></p>`;
                    calculationHtml += `<p>This calculates the maximum deflection of a cantilever beam subjected to a point load at its free end. This is a fundamental calculation in structural and mechanical engineering.</p>`;
                    calculationHtml += `<p class="formula">$$\\delta = \\frac{P L^3}{3 E I}$$</p>`;
                    calculationHtml += `<ul>
                        <li>Point Load (P) = ${P} N</li>
                        <li>Beam Length (L) = ${L_m} m</li>
                        <li>Young's Modulus (E) = ${E_GPa} GPa</li>
                        <li>Moment of Inertia (I) = ${I_mm4} mm<sup>4</sup></li>
                    </ul>`;
                    calculationHtml += `<p class="calculation-step">
                        $\delta$ = (${P} N x (${L_m} m)<sup>3</sup>) / (3 x ${E_GPa} GPa x ${I_mm4} mm<sup>4</sup>) = ${deflection_mm.toFixed(4)} mm
                    </p>`;

                    standardRefText = "Beam deflection calculations are based on principles of solid mechanics and strength of materials, as detailed in civil and mechanical engineering standards and textbooks (e.g., <a href=\"https://www.asce.org/\" target=\"_blank\">ASCE</a> standards for structural design).";

                    addResultRow("Point Load (P)", P + " N");
                    addResultRow("Beam Length (L)", L_m + " m");
                    addResultRow("Young's Modulus (E)", E_GPa + " GPa");
                    addResultRow("Moment of Inertia (I)", I_mm4 + " mm^4");
                    addResultRow("Maximum Deflection (δ)", deflection_mm.toFixed(4) + " mm");

                } else if (selectedCalcType === 'fluid-flow-rate') {
                    const D = parseFloat(document.getElementById('pipe-diameter').value);
                    const V = parseFloat(document.getElementById('pipe-velocity').value);

                    if (isNaN(D) || isNaN(V) || D <= 0 || V <= 0) {
                        displayMessage("Please enter valid positive numbers for Pipe Diameter and Fluid Velocity.", "error");
                        return;
                    }

                    // Area of the pipe: A = pi * (D/2)^2
                    const A = Math.PI * Math.pow(D / 2, 2);
                    // Flow rate: Q = A * V
                    const Q = A * V; // in m³/s
                    const Q_LPS = Q * 1000; // Convert to Liters per second
                    const Q_LPM = Q_LPS * 60; // Convert to Liters per minute

                    calculationHtml += `<p><strong>Fluid Flow Rate (Pipe) Calculation:</strong></p>`;
                    calculationHtml += `<p>This calculates the volumetric flow rate of a fluid through a circular pipe. It is a fundamental concept in fluid mechanics and hydraulic engineering.</p>`;
                    calculationHtml += `<p class="formula">$$Q = A \\times V = \\pi \\left(\\frac{D}{2}\\right)^2 \\times V$$</p>`;
                    calculationHtml += `<ul>
                        <li>Pipe Diameter (D) = ${D} m</li>
                        <li>Fluid Velocity (V) = ${V} m/s</li>
                        <li>Pipe Cross-sectional Area (A) = ${A.toFixed(4)} m<sup>2</sup></li>
                    </ul>`;
                    calculationHtml += `<p class="calculation-step">
                        Q = ${A.toFixed(4)} m<sup>2</sup> x ${V} m/s = ${Q.toFixed(4)} m<sup>3</sup>/s
                    </p>`;
                    calculationHtml += `<p class="calculation-step">
                        Q = ${Q_LPS.toFixed(2)} L/s = ${Q_LPM.toFixed(2)} L/min
                    </p>`;

                    standardRefText = "Fluid flow rate calculations are based on principles of fluid dynamics, widely used in hydraulic, mechanical, and civil engineering. These are consistent with international standards for fluid measurements and piping design (e.g., <a href=\"https://www.iso.org/\" target=\"_blank\">ISO</a> standards for fluid flow in pipes).";

                    addResultRow("Pipe Diameter (D)", D + " m");
                    addResultRow("Fluid Velocity (V)", V + " m/s");
                    addResultRow("Cross-sectional Area (A)", A.toFixed(4) + " m²");
                    addResultRow("Volumetric Flow Rate (Q)", Q.toFixed(4) + " m³/s");
                    addResultRow("Flow Rate (L/s)", Q_LPS.toFixed(2) + " L/s");
                    addResultRow("Flow Rate (L/min)", Q_LPM.toFixed(2) + " L/min");

                } else if (selectedCalcType === 'heat-transfer') {
                    const A = parseFloat(document.getElementById('ht-area').value);
                    const T_hot = parseFloat(document.getElementById('ht-temp-hot').value);
                    const T_cold = parseFloat(document.getElementById('ht-temp-cold').value);
                    const L = parseFloat(document.getElementById('ht-thickness').value);
                    const k = parseFloat(document.getElementById('ht-conductivity').value);

                    if (isNaN(A) || isNaN(T_hot) || isNaN(T_cold) || isNaN(L) || isNaN(k) || A <= 0 || L <= 0 || k <= 0) {
                        displayMessage("Please enter valid positive numbers for Area, Thickness, and Thermal Conductivity. Temperatures can be any number.", "error");
                        return;
                    }

                    // Fourier's Law of Heat Conduction: Q = -k * A * (dT/dx)
                    // For steady-state 1D conduction: Q = k * A * (T_hot - T_cold) / L
                    const heatTransferRate = k * A * (T_hot - T_cold) / L;

                    calculationHtml += `<p><strong>Heat Transfer (Conduction) Calculation:</strong></p>`;
                    calculationHtml += `<p>This calculates the rate of heat transfer through a material by conduction, based on Fourier's Law. This is a core concept in thermodynamics and heat transfer engineering.</p>`;
                    calculationHtml += `<p class="formula">$$Q = k \\times A \\times \\frac{(T_{hot} - T_{cold})}{L}$$</p>`;
                    calculationHtml += `<ul>
                        <li>Area (A) = ${A} m<sup>2</sup></li>
                        <li>Hot Side Temperature (T_hot) = ${T_hot} °C</li>
                        <li>Cold Side Temperature (T_cold) = ${T_cold} °C</li>
                        <li>Thickness (L) = ${L} m</li>
                        <li>Thermal Conductivity (k) = ${k} W/m·K</li>
                    </ul>`;
                    calculationHtml += `<p class="calculation-step">
                        Q = ${k} W/m·K x ${A} m<sup>2</sup> x ((${T_hot} °C - ${T_cold} °C) / ${L} m) = ${heatTransferRate.toFixed(2)} W
                    </p>`;

                    standardRefText = "Heat transfer calculations, particularly conduction, are based on fundamental thermodynamic principles and Fourier's Law, as covered in mechanical and chemical engineering curricula. These are consistent with international standards for thermal properties of materials (e.g., <a href=\"https://www.astm.org/\" target=\"_blank\">ASTM</a> standards).";

                    addResultRow("Area (A)", A + " m²");
                    addResultRow("Hot Side Temp (T_hot)", T_hot + " °C");
                    addResultRow("Cold Side Temp (T_cold)", T_cold + " °C");
                    addResultRow("Thickness (L)", L + " m");
                    addResultRow("Thermal Conductivity (k)", k + " W/m·K");
                    addResultRow("Heat Transfer Rate (Q)", heatTransferRate.toFixed(2) + " W");
                }

                calculationDetailsDiv.innerHTML = calculationHtml;
                // Trigger MathJax to render the new content
                if (window.MathJax) {
                    window.MathJax.typesetPromise([calculationDetailsDiv]);
                }

                standardReference.innerHTML = standardRefText; // Use innerHTML to render links
                resultContainer.style.display = 'block';
                // Add a slight delay for the opacity transition to be visible
                setTimeout(() => {
                    resultContainer.classList.add('show');
                    resultContainer.scrollIntoView({ behavior: 'smooth' }); // Scroll to results
                }, 10); // Small delay

                // Function to format resistance values (e.g., 1000000 -> 1 MΩ)
                function formatResistance(ohms) {
                    if (ohms >= 1e9) return (ohms / 1e9).toFixed(2) + " GΩ";
                    if (ohms >= 1e6) return (ohms / 1e6).toFixed(2) + " MΩ";
                    if (ohms >= 1e3) return (ohms / 1e3).toFixed(2) + " kΩ";
                    return ohms.toFixed(2) + " Ω";
                }
            });

            // Function to display messages (replaces alert())
            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    messageBox.style.cssText = `
                        position: fixed;
                        top: 20px;
                        left: 50%;
                        transform: translateX(-50%);
                        padding: 15px 25px;
                        border-radius: 8px;
                        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
                        z-index: 1000;
                        font-weight: bold;
                        color: white;
                        opacity: 0;
                        transition: opacity 0.5s ease-in-out;
                    `;
                    document.body.appendChild(messageBox);
                }

                messageBox.textContent = message;
                if (type === "error") {
                    messageBox.style.backgroundColor = '#dc3545'; /* Red */
                } else if (type === "warning") {
                    messageBox.style.backgroundColor = '#ffc107'; /* Amber */
                    messageBox.style.color = '#333';
                } else {
                    messageBox.style.backgroundColor = '#28a745'; /* Green */
                }
                messageBox.style.opacity = 1;

                // Hide after 5 seconds
                setTimeout(() => {
                    messageBox.style.opacity = 0;
                }, 5000);
            }

            // Theme switch logic
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                // Check for saved theme preference
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }

                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }
        });
    </script>
</body>

</html>


