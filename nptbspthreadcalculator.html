<!DOCTYPE html>
<html lang="en">

<head>
    <!-- AdSense & Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
        crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>

    <!-- SEO Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NPT / BSP Master Thread Calculator & Metrology Guide</title>
    <meta name="description"
        content="Industrial Thread Calculator for NPT, NPTF, BSPT (R), and BSPP (G). Features ASME B1.20.1 & ISO 7 Metrology Data, Pitch Diameter (E1), L1 Gauging, custom Tap Drill sizing for exotic alloys, and detailed inspection guides.">
    <meta name="keywords"
        content="npt thread dimensions, bsp thread chart, pitch diameter calculator, L1 gauge length, pipe thread inspection, tap drill size stainless steel, asme b1.20.1 table, iso 7 thread geometry, whitworth thread calculator, cnc threading data">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://designcalculators.co.in/nptbspthreadcalculator.html" />

    <!-- JSON-LD Schema: Software Application -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Industrial Thread Geometry Analyzer",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "A professional metrology tool for pipe threads. Provides precise dimensions for NPT, BSPT, and BSPP threads, calculates tap drill sizes for varying percentages of thread, and visualizes thread profiles.",
      "featureList": "NPT/BSP Database, Tap Drill Calculator, Thread Profile Visualizer, Engagement Analysis, Gaging Data",
      "author": {
        "@type": "Organization",
        "name": "Design Calculators"
      }
    }
    </script>

    <!-- JSON-LD Schema: FAQ Page -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        { "@type": "Question", "name": "Can I screw NPT into BSPT?", "acceptedAnswer": { "@type": "Answer", "text": "No. While 1/2\" and 3/4\" sizes have the same TPI (14), NPT has a 60° thread angle and flattened roots/crests, while BSPT has a 55° Whitworth angle with rounded roots/crests. Forcing them together damages the threads and will leak under pressure." } },
        { "@type": "Question", "name": "What is the difference between BSPP and BSPT?", "acceptedAnswer": { "@type": "Answer", "text": "BSPT (British Standard Pipe Taper), denoted as 'R', has a 1:16 taper and seals via thread interference. BSPP (British Standard Pipe Parallel), denoted as 'G', has straight threads and relies on a bonded seal washer or O-ring for sealing." } },
        { "@type": "Question", "name": "How is Tap Drill size calculated?", "acceptedAnswer": { "@type": "Answer", "text": "Tap drill size depends on the desired percentage of full thread (usually 75%). For tapered pipe threads, reaming is often required after drilling to create the initial taper before tapping." } },
        { "@type": "Question", "name": "What does NPTF stand for?", "acceptedAnswer": { "@type": "Answer", "text": "NPTF stands for National Pipe Taper Fuel (also called Dryseal). It is designed to seal without Teflon tape or dope. The crests and roots effectively crush into each other to form a metal-to-metal seal." } },
        { "@type": "Question", "name": "What is the 'Hand Tight' engagement length?", "acceptedAnswer": { "@type": "Answer", "text": "This is the distance the male thread screws into the female fitting by hand before a wrench is needed. It is a critical gauging dimension (L1) to ensure the thread is machined to the correct depth." } },
        { "@type": "Question", "name": "Why is the OD of 1/8\" pipe actually 0.405\"?", "acceptedAnswer": { "@type": "Answer", "text": "Pipe sizes are based on nominal bore. In the early days, a 1/8\" pipe had a 1/8\" ID and very thick walls. As materials improved, walls got thinner, increasing the ID, but the OD was kept constant to maintain compatibility with fittings." } },
        { "@type": "Question", "name": "What is the taper ratio for NPT and BSPT?", "acceptedAnswer": { "@type": "Answer", "text": "Both standards use a taper of 1:16, which equates to 0.75 inches per foot, or an angle of 1° 47' 24\" relative to the center axis." } },
        { "@type": "Question", "name": "How do I measure Pitch Diameter?", "acceptedAnswer": { "@type": "Answer", "text": "Pitch diameter cannot be measured directly with calipers. It requires a thread micrometer or the 3-wire method. For tapered threads, the pitch diameter changes continuously along the length; standards define it at the 'Gauge Plane' (L1 distance from end)." } },
        { "@type": "Question", "name": "Can I use Metric Drill bits for NPT?", "acceptedAnswer": { "@type": "Answer", "text": "Yes, as long as the millimeter equivalent matches the required hole size. This calculator provides the closest standard Metric and Fractional drill bit sizes." } },
        { "@type": "Question", "name": "What is the flank angle of Whitworth threads?", "acceptedAnswer": { "@type": "Answer", "text": "Whitworth threads (used in BSP/ISO 7) have a 55° included angle. American National threads (NPT/Unified) have a 60° included angle." } }
      ]
    }
    </script>

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.3/jspdf.plugin.autotable.min.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

    <!-- MathJax for Formulas -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)'], ['$', '$']],
                displayMath: [['\\[', '\\]'], ['$$', '$$']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <style>
        /* --- CORE THEME (Blue Industrial) --- */
        :root {
            --primary: #1E3A8A;
            /* Dark Blue */
            --secondary: #2563EB;
            /* Bright Blue */
            --accent: #F59E0B;
            /* Amber */
            --success: #10B981;
            --danger: #DC2626;
            --warning: #F59E0B;
            --bg: #F8FAFC;
            --card: #FFFFFF;
            --text: #334155;
            --heading: #0F172A;
            --footer-bg: #0F172A;
            --border: #E2E8F0;
            --grad: linear-gradient(135deg, var(--primary), var(--secondary));
            --grad-dark: linear-gradient(135deg, #0F172A, #1E293B);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --input-bg: #FFFFFF;
        }

        body.dark-mode {
            --primary: #3B82F6;
            --secondary: #60A5FA;
            --bg: #0F172A;
            --card: #1E293B;
            --text: #E2E8F0;
            --heading: #F8FAFC;
            --footer-bg: #020617;
            --border: #334155;
            --accent: #FBBF24;
            --input-bg: #334155;
        }

        * {
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Header & Nav */
        header {
            background: var(--grad);
            color: white;
            padding: 24px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-container {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: white;
        }

        .logo-text {
            font-size: 1.75rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
            letter-spacing: -0.5px;
        }

        .logo-subtitle {
            font-size: 0.8rem;
            margin: 4px 0 0 0;
            color: #DBEAFE;
            font-weight: 500;
        }

        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
            opacity: 0.9;
        }

        .nav-links a:hover {
            opacity: 1;
            transform: translateY(-1px);
        }

        /* Theme Toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }

        .switch {
            position: relative;
            width: 52px;
            height: 28px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: .4s;
            border-radius: 34px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: var(--success);
            border-color: var(--success);
        }

        input:checked+.slider:before {
            transform: translateX(24px);
        }

        /* Main Content */
        main {
            padding: 40px 0;
        }

        .card {
            background: var(--card);
            border-radius: 16px;
            padding: 32px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 1px solid var(--border);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card h2 {
            color: var(--primary);
            border-bottom: 2px solid var(--border);
            padding-bottom: 15px;
            margin-top: 0;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.75rem;
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: -0.5px;
        }

        h3 {
            color: var(--heading);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.4rem;
            margin-top: 25px;
            margin-bottom: 20px;
        }

        h4 {
            color: var(--heading);
            font-size: 1.1rem;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 8px;
        }

        /* Forms */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .form-group {
            margin-bottom: 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--heading);
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background-color: var(--input-bg);
            color: var(--text);
            font-size: 1rem;
            transition: all 0.2s ease;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
        }

        /* Tool Switcher */
        .tool-switcher {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tool-btn {
            background: var(--card);
            border: 2px solid var(--border);
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 700;
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tool-btn:hover {
            border-color: var(--secondary);
            transform: translateY(-2px);
        }

        .tool-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
        }

        /* Module Containers */
        .tool-module {
            display: none;
            animation: fadeIn 0.4s ease-out;
        }

        .tool-module.active {
            display: block;
        }

        /* Results Big Display */
        .result-box {
            text-align: center;
            padding: 25px;
            background: var(--card);
            border: 2px solid var(--primary);
            border-radius: 12px;
            margin-top: 30px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .result-box::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: var(--grad);
        }

        .main-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            font-family: 'Montserrat', sans-serif;
            margin: 10px 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .sub-value {
            font-size: 1.1rem;
            color: var(--text);
            opacity: 0.9;
            font-weight: 500;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Calculation Steps Styling */
        .calc-steps {
            text-align: left;
            margin-top: 25px;
            background: var(--bg);
            padding: 25px;
            border-radius: 8px;
            border-left: 4px solid var(--accent);
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--text);
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.03);
        }

        .calc-steps h4 {
            margin-top: 0;
            color: var(--primary);
            font-family: 'Inter', sans-serif;
            border-bottom: 1px dashed var(--border);
            padding-bottom: 8px;
            margin-bottom: 15px;
        }

        .calc-steps strong {
            color: var(--heading);
        }

        .step-block {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .step-block:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .step-title {
            font-weight: 700;
            color: var(--secondary);
            display: block;
            margin-bottom: 5px;
            font-family: 'Inter', sans-serif;
        }

        /* Visualizer */
        .viz-container {
            height: 350px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 10px;
        }

        canvas {
            max-height: 100%;
            max-width: 100%;
        }

        /* Buttons (Shared) */
        .btn {
            background: var(--grad);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.25);
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(37, 99, 235, 0.35);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--border);
            color: var(--text);
            box-shadow: none;
        }

        .btn-outline:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(37, 99, 235, 0.05);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        /* Message Box */
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 24px;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            z-index: 9999;
            font-weight: 600;
            color: white;
            opacity: 0;
            transition: all 0.3s;
            display: none;
        }

        .message-box.show {
            display: block;
            opacity: 1;
            top: 30px;
        }

        /* Educational Section */
        .education-section {
            padding: 40px;
        }

        .article-content {
            font-family: 'Inter', sans-serif;
            color: var(--text);
        }

        .article-block {
            margin-bottom: 40px;
        }

        .article-block h3 {
            color: var(--primary);
            border-left: 5px solid var(--accent);
            padding-left: 15px;
            margin-bottom: 20px;
            font-size: 1.4rem;
            margin-top: 0;
        }

        .article-block h4 {
            color: var(--heading);
            margin-top: 25px;
            margin-bottom: 15px;
            font-weight: 700;
            font-size: 1.1rem;
            border-bottom: none;
        }

        .article-block p {
            line-height: 1.8;
            margin-bottom: 15px;
            text-align: justify;
        }

        .article-block ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }

        .article-block li {
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .highlight-box {
            background: rgba(37, 99, 235, 0.05);
            border: 1px solid var(--border);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .formula {
            background: var(--bg);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.1rem;
            border: 1px solid var(--border);
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        /* FAQ Accordion */
        .faq-item {
            border-bottom: 1px solid var(--border);
            padding: 15px 0;
        }

        .faq-question {
            font-weight: 700;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--heading);
            transition: color 0.2s;
        }

        .faq-question:hover {
            color: var(--primary);
        }

        .faq-answer {
            display: none;
            margin-top: 10px;
            color: var(--text);
            line-height: 1.7;
            text-align: justify;
        }

        .faq-item.active .faq-answer {
            display: block;
            animation: fadeIn 0.3s;
        }

        .faq-icon {
            transition: transform 0.3s;
        }

        .faq-item.active .faq-icon {
            transform: rotate(180deg);
        }

        /* Results Grid */
        .res-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        @media(max-width:768px) {
            .res-grid {
                grid-template-columns: 1fr;
            }
        }

        .res-item {
            background: var(--bg);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .res-label {
            font-size: 0.85rem;
            color: var(--text);
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .res-val {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--heading);
        }

        /* Footer */
        footer {
            background: var(--grad-dark);
            color: #94A3B8;
            padding: 60px 0 30px 0;
            margin-top: 80px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-col {
            flex: 1;
            min-width: 200px;
        }

        .footer-col h4 {
            color: white;
            margin-bottom: 20px;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .footer-col ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-col li {
            margin-bottom: 12px;
        }

        .footer-col a {
            color: #CBD5E1;
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-col a:hover {
            color: var(--accent);
        }

        .social-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        /* Social Buttons Styling */
        .social-btn {
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            border-radius: 50%;
            font-size: 1.1rem;
            transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .social-btn:hover {
            transform: translateY(-4px);
        }

        .social-btn.linkedin {
            background-color: #0A66C2;
        }

        .social-btn.youtube {
            background-color: #FF0000;
        }

        .social-btn.twitter {
            background-color: #1DA1F2;
        }

        .social-btn.facebook {
            background-color: #1877F2;
        }

        .social-btn.whatsapp {
            background-color: #25D366;
        }

        .footer-disclaimer {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 900px;
            margin: 0 auto;
            font-size: 0.85rem;
            line-height: 1.6;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            font-size: 0.85rem;
        }

        .hidden {
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 20px;
            }

            .nav-links {
                flex-direction: column;
                width: 100%;
                text-align: center;
            }

            .tool-switcher {
                flex-direction: column;
            }
        }
    </style>
    <style>
        /* Core Header Styles */
        .header {
            background: var(--gradient-primary, linear-gradient(135deg, #1E3A8A, #2563EB));
            color: white;
            padding: 10px 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1000;
            overflow: visible !important;
        }

        .header .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            position: relative;
        }

        .header .logo-container {
            display: flex !important;
            align-items: center !important;
            gap: 12px !important;
            text-decoration: none;
            color: white;
        }

        .header .logo {
            height: 48px !important;
            width: auto;
            object-fit: contain;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: #ffffff;
            margin-bottom: 2px;
            white-space: nowrap;
            font-family: 'Montserrat', sans-serif;
        }

        .logo-text-group {
            display: flex;
            flex-direction: column;
            justify-content: center;
            line-height: 1.1;
        }

        .logo-subtitle {
            font-size: 0.7rem !important;
            color: rgba(255, 255, 255, 0.85) !important;
            font-weight: 500;
            margin: 0 !important;
            line-height: 1.2;
            max-width: 250px;
            white-space: normal;
        }

        .header .nav-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .header .nav-links {
            display: flex;
            gap: 25px;
            list-style: none;
            margin: 0;
            padding: 0;
            align-items: center;
        }

        .header .nav-links li {
            margin: 0;
            position: relative;
            display: inline-block;
        }

        .header .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            opacity: 0.9;
        }

        .header .nav-links a:hover {
            opacity: 1;
            transform: translateY(-1px);
        }

        .header .theme-toggle {
            margin-left: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px;
            z-index: 1000;
        }

        /* Mega Menu Styles */
        .nav-links .dropbtn {
            cursor: pointer;
            padding: 10px 0;
            display: inline-block;
        }

        .nav-links .dropbtn i {
            font-size: 0.8em;
            margin-left: 4px;
            opacity: 0.7;
            transition: transform 0.3s;
        }

        .nav-links .nav-item:hover .dropbtn i {
            transform: rotate(180deg);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--card-bg, #ffffff);
            width: 600px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            z-index: 2000;
            border-radius: 12px;
            padding: 20px;
            top: 100%;
            margin-top: 5px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease-in-out;
            border-top: 4px solid var(--secondary-color, #2563EB);
        }

        .nav-links .nav-item:hover .dropdown-content {
            display: block;
            opacity: 1;
            visibility: visible;
        }

        .dropdown-content .row {
            display: flex;
            gap: 20px;
        }

        .dropdown-content .column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .dropdown-content a {
            color: var(--text-color, #4B5563) !important;
            padding: 6px 8px;
            text-decoration: none;
            display: block;
            font-size: 0.9rem !important;
            border-radius: 6px;
            transition: background 0.2s, color 0.2s;
            font-weight: 400 !important;
            line-height: 1.4;
        }

        .dropdown-content a:hover {
            background-color: var(--hover-color, #F1F5F9);
            color: var(--primary-color, #1E3A8A) !important;
            transform: translateX(4px);
        }

        .mega-menu-footer {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color, #E2E8F0);
            text-align: center;
        }

        .mega-menu-footer .view-all-btn {
            display: inline-block;
            color: var(--primary-color, #1E3A8A) !important;
            font-weight: 700 !important;
            font-size: 0.95rem !important;
        }

        /* Dark Mode Overrides */
        body.dark-mode .dropdown-content {
            background-color: var(--card-bg, #1E293B);
            border-color: var(--secondary-color, #34D399);
        }

        body.dark-mode .dropdown-content a {
            color: var(--text-color, #CBD5E1) !important;
        }

        body.dark-mode .dropdown-content a:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--primary-color, #10B981) !important;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .mobile-menu-toggle {
                display: block;
            }

            .header .nav-menu {
                display: flex;
            }

            .nav-links {
                position: fixed;
                top: 0;
                left: -100%;
                width: 280px;
                height: 100vh;
                background: var(--gradient-dark, #0F172A);
                flex-direction: column;
                padding: 100px 30px 30px;
                gap: 24px;
                transition: left 0.4s ease-in-out;
                box-shadow: 4px 0 12px rgba(0, 0, 0, 0.3);
                z-index: 999;
                align-items: flex-start;
            }

            .nav-links.active {
                left: 0;
            }

            .nav-links a {
                width: 100%;
                padding: 12px 16px;
                border-radius: 8px;
                background: rgba(255, 255, 255, 0.05);
                display: block;
            }

            .dropdown-content {
                position: static;
                width: 100%;
                box-shadow: none;
                transform: none;
                display: none !important;
                padding: 0 0 0 15px;
                background: transparent;
                border: none;
            }

            .nav-links .nav-item:hover .dropdown-content {
                display: block !important;
                opacity: 1;
                visibility: visible;
            }

            .dropdown-content .row {
                flex-direction: column;
                gap: 0;
            }

            .nav-links .nav-item {
                display: block;
                width: 100%;
            }

            .nav-links .dropbtn {
                width: 100%;
                display: flex;
                justify-content: space-between;
            }

            .header .logo-text {
                font-size: 1.1rem;
            }

            .header .logo {
                height: 40px;
            }
        }
    </style>
    <link rel="stylesheet" href="/styles.css">
    <meta property="og:title" content="NPT / BSP Master Thread Calculator & Metrology Guide">
    <meta property="og:description" content="Industrial Thread Calculator for NPT, NPTF, BSPT (R), and BSPP (G). Features ASME B1.20.1 & ISO 7 Metrology Data, Pitch Diameter (E1), L1 Gauging, custom Tap Drill sizing for exotic alloys, and detailed inspection guides.">
</head>

<body>
    <div id="message-box" class="message-box"></div>

    <header class="header">
        <div class="header-bg-animation"></div>
        <div class="container">
            <nav class="navbar">
                <a href="/" class="logo-container">
                    <img src="logo.png" alt="Design Calculators Logo" class="logo">
                    <span class="logo-text">Design Calculators</span>
                </a>

                <div class="nav-menu">
                    <button class="mobile-menu-toggle" aria-label="Toggle menu">
                        <i class="fas fa-bars"></i>
                    </button>

                    <ul class="nav-links">
                        <li><a href="/index.html">Home</a></li>
                        
    <li class="dropdown">
        <a href="/indexele.html" class="dropdown-toggle">Electrical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/arcflash.html">Arc Flash Calculator</a><a href="/breaker-sizing.html">Breaker Sizing</a><a href="/cable-thermal-rating.html">Cable Ampacity</a><a href="/comm-cable-loss.html">Comm Cable Loss</a><a href="/earth-conductor-size.html">Earth Conductor Size</a><a href="/generatorsizing.html">Generator Sizing</a><a href="/harmonicsanalyser.html">Harmonics Analyser</a><a href="/insulationresistance.html">Insulation Resistance</a><a href="/logicgate.html">Logic Gates Simulator</a><a href="/motor-starting.html">Motor Starting Current</a><a href="/pcbtrace.html">PCB Trace Width</a><a href="/protection-device.html">Protection Device</a><a href="/resistor.html">Resistor Color Code</a><a href="/solarcable.html">Solar Cable Sizing</a><a href="/systemxrcalculator.html">System X/R Ratio</a><a href="/transmissionline.html">Transmission Line</a><a href="/vfd-selection.html">VFD Selection Tool</a></div><div><a href="/batterylife.html">Battery Life Estimator</a><a href="/busbarampacity.html">Busbar Ampacity</a><a href="/cablepulling.html">Cable Pulling Tension</a><a href="/conduit-fill.html">Conduit Fill Calculator</a><a href="/earthingfaultsimulator.html">Earthing Fault Simulator</a><a href="/grounding.html">Grounding System Design</a><a href="/hvac-sizing.html">HVAC Sizing Calculator</a><a href="/lcresonancecalculator.html">LC Resonance Calculator</a><a href="/maintenance-guide.html">Maintenance Guide</a><a href="/nemaipconvertor.html">NEMA to IP Converter</a><a href="/power-factor.html">Power Factor Correction</a><a href="/relay-coordination.html">Relay Coordination</a><a href="/short-circuit.html">Short Circuit Current</a><a href="/solarpvarray.html">Solar PV Array</a><a href="/transformer-calculator.html">Transformer Calculator</a><a href="/unit-converter.html">Unit Converter</a><a href="/voltage-drop.html">Voltage Drop Calculator</a></div><div><a href="/battery-sizing.html">Battery Sizing (AH)</a><a href="/busbarshortcircuit.html">Busbar Short Circuit</a><a href="/cable-sizing.html">Cable Sizing Calculator</a><a href="/ctsaturation.html">CT Saturation</a><a href="/equipment-relay.html">Equipment Relay Setting</a><a href="/harmonic-distortion.html">Harmonic Distortion</a><a href="/industriallighting.html">Industrial Lighting</a><a href="/lighting-calulator.html">Lighting Calculator</a><a href="/motor-efficiency.html">Motor Efficiency</a><a href="/neutral-earth-fault-current.html">Neutral Earth Fault</a><a href="/powertriangletool.html">Power Triangle</a><a href="/electricalresidentialload.html">Residential Load Calc</a><a href="/skindepth.html">Skin Depth Calculator</a><a href="/symmetricalcomponents.html">Symmetrical Components</a><a href="/transformerinrush.html">Transformer Inrush</a><a href="/ups-sizing.html">UPS Sizing</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexele.html" class="view-all-link">View All Electrical Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexinst.html" class="dropdown-toggle">Instrumentation <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/adc-resolution.html">ADC Resolution</a><a href="/capillarylengthtemperatureerror.html">Capillary Error</a><a href="/cv-kv-valve.html">Cv/Kv Valve Sizing</a><a href="/dp-level.html">DP Level Measurement</a><a href="/hydrostatic-level.html">Hydrostatic Level</a><a href="/instrument-range.html">Instrument Range</a><a href="/loop-impedance.html">Loop Impedance</a><a href="/orifice-plate.html">Orifice Plate Beta</a><a href="/pid-tuning.html">PID Tuning</a><a href="/profibus.html">Profibus Calculator</a><a href="/tempsensorresponse.html">Response Time (Tau)</a><a href="/rtd-lead-comp.html">RTD Lead Wire Comp.</a><a href="/sealfluidzeroshift.html">Seal Fluid Shift</a><a href="/snr-calculator.html">SNR Calculator</a><a href="/thermocoupleextensioncable.html">TC Extension Cable</a><a href="/thermowellwakefreq.html">Thermowell Frequency</a><a href="/pressuretransmitteroverrange.html">Tx Overrange</a><a href="/valvecavitationcalculator.html">Valve Cavitation</a><a href="/vibrationtransmitter.html">Vibration Tx</a><a href="/zoneclassificationhelper.html">Zone Classification</a></div><div><a href="/baud-rate.html">Baud Rate Calculator</a><a href="/gascompressibility.html">Compressibility (Z)</a><a href="/dbcalculator.html">dB Gain/Loss Calc</a><a href="/flowprofiledistortioncalculator.html">Flow Distortion</a><a href="/impulselinefreezing.html">Impulse Freezing</a><a href="/intrinsic-safety.html">Intrinsic Safety Loop</a><a href="/measurement.html">Measurement Uncertainty</a><a href="/ph-temp-comp.html">pH Temp Compensation</a><a href="/plcscantime.html">PLC Scan Time</a><a href="/pressurereliefvalve.html">PRV Sizing (API 520)</a><a href="/reynoldsnumbercal.html">Reynolds Number</a><a href="/rtdselfheating.html">RTD Self-Heating</a><a href="/signal-scaling.html">Signal Scaling</a><a href="/staticheadcal.html">Static Head</a><a href="/temperaturesensorlag.html">Temp Sensor Lag</a><a href="/thermowell-wake.html">Thermowell Wake</a><a href="/ultrasoniclevel.html">Ultrasonic Level</a><a href="/valve-cv.html">Valve Cv Viewer</a><a href="/wetlegdensitycompensation.html">Wet Leg Compensation</a></div><div><a href="/capacitance-level.html">Capacitance Level</a><a href="/controlvalvenoise.html">Control Valve Noise</a><a href="/dp-flow-conversion.html">DP Flow Conversion</a><a href="/hartdevices.html">HART Devices</a><a href="/impulse-pressure-drop.html">Impulse Pressure Drop</a><a href="/junctionbox.html">Junction Box Sizing</a><a href="/orifice-flow.html">Orifice Flow Calculator</a><a href="/pid-symbol-library.html">PID Symbol Library</a><a href="/power-supply-load.html">Power Supply Load</a><a href="/prvsizing.html">Relief Orifice Area</a><a href="/rtdexcitationcurrentselection.html">RTD Excitation</a><a href="/rtd-tc-conversion.html">RTD/TC Conversion</a><a href="/sil.html">SIL Calculator</a><a href="/steamflow.html">Steam Flow</a><a href="/thermocouplecjccalculator.html">Thermocouple CJC</a><a href="/turndown.html">Turndown Ratio</a><a href="/controlvalveauthority.html">Valve Authority</a><a href="/controlvalveleakage.html">Valve Leakage Class</a><a href="/wirelesshart.html">WirelessHART Range</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexinst.html" class="view-all-link">View All Instrumentation Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexmech.html" class="dropdown-toggle">Mechanical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/aircompressorfad.html">Air Compressor FAD</a><a href="/asme-vessel.html">ASME Vessel Design</a><a href="/belt-pulley.html">Belt & Pulley</a><a href="/bolt-torque.html">Bolt Torque</a><a href="/controlvalveactuator.html">Control Valve Actuator</a><a href="/frictionfactortool.html">Darcy Friction Factor</a><a href="/fatigue.html">Fatigue Analysis</a><a href="/fuel-combustion.html">Fuel Combustion</a><a href="/gas.html">Gas Properties</a><a href="/heat-exchanger.html">Heat Exchanger</a><a href="/hydroliccylinder.html">Hydraulic Cylinder</a><a href="/material-compatibility.html">Material Compatibility</a><a href="/nozzle-reinforcement.html">Nozzle Reinforcement</a><a href="/openchannelflow.html">Open Channel Flow</a><a href="/pipescheduletool.html">Pipe Schedule & Stress</a><a href="/pump-head.html">Pump Head</a><a href="/shaft-power-torque.html">Shaft Power & Torque</a><a href="/steam-table.html">Steam Table</a><a href="/vibrationanalysis.html">Vibration Analysis</a></div><div><a href="/air-flow-duct.html">Air Flow Duct Sizing</a><a href="/beam-deflection.html">Beam Deflection</a><a href="/bernoulli-equation.html">Bernoulli Equation</a><a href="/chiller-capacity.html">Chiller Capacity</a><a href="/cooling-tower-sizing.html">Cooling Tower Sizing</a><a href="/darcy-weisbach.html">Darcy-Weisbach</a><a href="/finned-tube-heat-transfer.html">Finned Tube Heat</a><a href="/furnace-heat-duty.html">Furnace Heat Duty</a><a href="/gear-design.html">Gear Design</a><a href="/heat-loss-pipes.html">Heat Loss Pipes</a><a href="/jacketed-vessel-heat-transfer.html">Jacketed Vessel</a><a href="/metalweight.html">Metal Weight Calculator</a><a href="/nptbspthreadcalculator.html">NPT/BSP Threads</a><a href="/overall-heat-transfer.html">Overall Heat Transfer</a><a href="/pipe-stress-flexibility.html">Pipe Stress</a><a href="/pump-power.html">Pump Power</a><a href="/specific-heat-enthalpy.html">Specific Heat</a><a href="/storage-tank-volume.html">Storage Tank Volume</a><a href="/weldingstress.html">Welding Stress</a></div><div><a href="/allowable-stress-safety-factor.html">Allowable Stress</a><a href="/bearinglife.html">Bearing Life Calculator</a><a href="/boiler-efficiency.html">Boiler Efficiency</a><a href="/compressor-power.html">Compressor Power</a><a href="/corrosion-rate.html">Corrosion Rate</a><a href="/fan-laws.html">Fan Laws</a><a href="/foundation.html">Foundation Design</a><a href="/gas-laws.html">Gas Laws</a><a href="/hardness.html">Hardness Converter</a><a href="/conduction-convection-radiation.html">Heat Transfer Modes</a><a href="/machining.html">Machining Calculator</a><a href="/momentofinertia.html">Moment of Inertia</a><a href="/oring.html">O-Ring Sizing</a><a href="/pipe-flow.html">Pipe Flow Calculator</a><a href="/psychrometric.html">Psychrometric Calc</a><a href="/reynolds-number.html">Reynolds Number</a><a href="/spring.html">Spring Design</a><a href="/thermal-expansion.html">Thermal Expansion</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexmech.html" class="view-all-link">View All Mechanical Tools â†’</a>
            </div>
        </div>
    </li>
                        <li><a href="/index.html#articles">Articles</a></li>
                        <li><a href="/sitemap2.html">Site Map</a></li>
                    </ul>

                    <div class="theme-toggle">
                        <i class="fas fa-sun icon"></i>
                        <label class="switch">
                            <input type="checkbox" id="theme-switch">
                            <span class="slider"></span>
                        </label>
                        <i class="fas fa-moon icon"></i>
                    </div>
                </div>
            </nav>
    </header>

    <main class="container">
        <div class="card">
            <h2><i class="fas fa-wrench"></i> Industrial Thread Metrology & Calculator (NPT/BSP)</h2>
            <div class="tool-description">
                <p>Advanced Engineering Tool for <strong>Heavy Industry, Oil & Gas, and Precision Machining</strong>.
                    Provides authoritative data for <strong>ASME B1.20.1 (NPT)</strong>, <strong>ISO 7
                        (BSPT/R)</strong>, and <strong>ISO 228 (BSPP/G)</strong>. Features include L1/L2 Gauging Data,
                    Pitch Diameter (E1), and Material-Specific Tap Drill Calculations.</p>
            </div>

            <!-- Tool Switcher -->
            <div class="tool-switcher">
                <button class="tool-btn active" onclick="switchTool('lookup')"><i class="fas fa-database"></i> Metrology
                    Lookup</button>
                <button class="tool-btn" onclick="switchTool('calc')"><i class="fas fa-calculator"></i> Advanced Drill
                    Calc</button>
            </div>

            <!-- Visualizer -->
            <div class="viz-container">
                <canvas id="threadCanvas"></canvas>
            </div>

            <!-- MODULE 1: THREAD LOOKUP -->
            <div id="mod-lookup" class="tool-module active">
                <div class="form-row">
                    <div class="form-group">
                        <label>Thread Standard</label>
                        <select id="std-select" onchange="updateSizes()">
                            <option value="NPT">NPT (ANSI/ASME B1.20.1)</option>
                            <option value="BSPT">BSPT (R / Rc) - ISO 7 Taper</option>
                            <option value="BSPP">BSPP (G) - ISO 228 Parallel</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Nominal Pipe Size</label>
                        <select id="size-select">
                            <!-- Filled by JS -->
                        </select>
                    </div>
                </div>

                <div class="button-wrapper">
                    <button type="button" class="btn" onclick="calcThread()">Access Thread Data</button>
                </div>
            </div>

            <!-- MODULE 2: TAP DRILL CALCULATOR -->
            <div id="mod-calc" class="tool-module">
                <div class="form-row">
                    <div class="form-group">
                        <label>Material / Thread %</label>
                        <select id="mat-pct">
                            <option value="75">Standard Steel / Brass (75%)</option>
                            <option value="60">Stainless Steel / Titanium (60%)</option>
                            <option value="50">Hard Alloys / Inconel (50%)</option>
                            <option value="85">Aluminum / Plastic (85%)</option>
                            <option value="custom">Custom Percentage...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Custom % (if selected)</label>
                        <input type="number" id="thread-pct" value="75" min="40" max="95">
                    </div>
                </div>

                <div class="button-wrapper">
                    <button type="button" class="btn" onclick="calcThread(true)">Calculate Drill Size</button>
                </div>
            </div>

            <!-- RESULTS -->
            <div class="result-box" id="main-result" style="display:none;">
                <div class="sub-value" id="res-subtitle">Thread Specification</div>
                <div id="res-main" class="main-value">--</div>

                <div class="res-grid">
                    <div class="res-item">
                        <div class="res-label">Threads Per Inch (TPI)</div>
                        <div class="res-val" id="res-tpi">--</div>
                    </div>
                    <div class="res-item">
                        <div class="res-label">Pitch Diameter @ Gauge (E1)</div>
                        <div class="res-val" id="res-pitch-dia">--</div>
                    </div>
                    <div class="res-item">
                        <div class="res-label">Major Diameter (OD)</div>
                        <div class="res-val" id="res-od">--</div>
                    </div>
                    <div class="res-item">
                        <div class="res-label">Calculated Tap Drill</div>
                        <div class="res-val" id="res-drill">--</div>
                    </div>
                    <div class="res-item">
                        <div class="res-label">Hand Tight Length (L1)</div>
                        <div class="res-val" id="res-l1">--</div>
                    </div>
                    <div class="res-item">
                        <div class="res-label">Minor Diameter (Ref)</div>
                        <div class="res-val" id="res-minor">--</div>
                    </div>
                </div>

                <div class="calc-steps" id="calc-steps-box"></div>
            </div>

            <div class="button-wrapper" style="margin-top:40px;">
                <button type="button" id="pdf-btn" class="btn btn-outline"><i class="fas fa-file-pdf"></i> Download
                    Metrology Report</button>
            </div>
        </div>

        <!-- EDUCATIONAL SECTION -->
        <div class="card education-section" style="margin-top: 40px;">
            <h2><i class="fas fa-book-open"></i> Engineering Guide: Industrial Pipe Threads</h2>
            <div class="article-content">

                <div class="article-block">
                    <h3>1. Introduction to Pipe Threads</h3>
                    <p>In the world of heavy industry, fluid conveyance is the lifeblood of operations. Pipe threads are
                        the standard method for joining and sealing pipes in systems ranging from low-pressure water
                        lines to high-pressure hydraulic circuits. Unlike bolt threads, which are designed primarily for
                        fastening, pipe threads serve a dual purpose: mechanical joining and leak-proof sealing.</p>
                    <p>The two dominant global standards are <strong>NPT (National Pipe Taper)</strong>, used primarily
                        in North America, and <strong>BSP (British Standard Pipe)</strong>, used throughout Europe,
                        Asia, and most of the rest of the world. Understanding the distinct geometry, gauging, and
                        machining requirements of these threads is critical for engineers, machinists, and quality
                        control personnel to prevent catastrophic system failures.</p>
                </div>

                <div class="article-block">
                    <h3>2. NPT (ANSI/ASME B1.20.1): The American Standard</h3>
                    <p>NPT threads are characterized by a 60° included angle and flattened roots and crests. The
                        fundamental feature is the <strong>taper</strong>, which is 1:16 (0.75 inches per foot). This
                        taper allows the flanks of the threads to compress against each other as the fitting is
                        tightened, creating a seal.</p>
                    <p><strong>Geometry Details:</strong></p>
                    <ul>
                        <li><strong>Thread Angle:</strong> 60° (30° per flank).</li>
                        <li><strong>Truncation:</strong> Roots and crests are flat truncated by approximately 0.033 ×
                            Pitch. This ensures that the flanks engage before the roots/crests, but it leaves a spiral
                            leak path.</li>
                        <li><strong>Sealing:</strong> NPT requires a sealant (Pipe Dope or Teflon Tape) to fill the
                            helical void between the root and crest.</li>
                    </ul>
                </div>

                <div class="article-block">
                    <h3>3. NPTF (Dryseal): For Critical Systems</h3>
                    <p>NPTF (National Pipe Taper Fuel) is a variation of NPT designed to seal without the use of
                        additional compounds. The design modifies the major and minor diameters to ensure that the
                        <strong>roots and crests interfere (crush)</strong> before the flanks make full contact. This
                        deformation creates a metal-to-metal seal.
                    </p>
                    <p><strong>Usage:</strong> Common in automotive fuel systems, hydraulic lines, and applications
                        where sealant debris could clog sensitive valves. NPTF fittings can be screwed into NPT holes,
                        but NPT male fittings cannot effectively seal in NPTF holes without sealant.</p>
                </div>

                <div class="article-block">
                    <h3>4. BSPT (ISO 7) vs BSPP (ISO 228)</h3>
                    <p>The British Standard Pipe family uses the Whitworth thread form, which features a <strong>55°
                            thread angle</strong> and rounded roots and crests.</p>
                    <p><strong>BSPT (Tapered, "R" Series):</strong> Similar concept to NPT but incompatible due to the
                        55° angle and different pitch. The male thread is tapered (R), and it mates with a tapered
                        female (Rc) or sometimes a parallel female (Rp). Sealing is via thread interference.</p>
                    <p><strong>BSPP (Parallel, "G" Series):</strong> Straight threads with no taper. These threads
                        provide NO sealing capability on the threads themselves. Sealing is achieved via:</p>
                    <ul>
                        <li>A bonded seal washer (Dowty seal) at the shoulder.</li>
                        <li>An O-ring.</li>
                        <li>A machined 60° cone seat at the fitting connection.</li>
                    </ul>
                </div>

                <div class="article-block">
                    <h3>5. Gauging and Metrology (L1, L2, L3)</h3>
                    <p>Checking tapered threads requires specific ring and plug gauges. You cannot simply measure the
                        diameter with calipers because the diameter changes constantly along the length.</p>
                    <ul>
                        <li><strong>L1 (Hand-Tight Engagement):</strong> The most critical dimension. It represents the
                            length of thread that screws in by hand. The Pitch Diameter ($E_1$) is defined at this
                            plane. If a part gauges correctly at L1, it ensures proper engagement depth.</li>
                        <li><strong>L2 (Effective Thread):</strong> Includes the L1 length plus the wrench make-up
                            threads. Ensures threads are cut deep enough for full tightening.</li>
                        <li><strong>L3 (Wrench Tight):</strong> Used for NPTF to verify the root/crest interference
                            capability.</li>
                    </ul>
                </div>

                <div class="article-block">
                    <h3>6. Tap Drill Sizing Strategy</h3>
                    <p>Choosing the correct tap drill is a balance between tap life and thread strength. A smaller hole
                        yields a higher percentage of thread (stronger) but dramatically increases torque and tap
                        breakage risk.</p>
                    <ul>
                        <li><strong>Standard (75%):</strong> Ideal for mild steel, brass, and aluminum. Provides full
                            strength.</li>
                        <li><strong>Hard Materials (50-60%):</strong> For Stainless Steel (304/316), Titanium, or
                            Inconel. Reducing thread height to 50% reduces tapping torque by over 40% with minimal loss
                            in pull-out strength.</li>
                        <li><strong>Taper Reaming:</strong> For NPT/BSPT, drilling a straight hole leaves excessive
                            material at the bottom of the taper. Best practice is to drill, then <strong>Ream</strong>
                            with a tapered reamer (1:16) before tapping to ensure uniform load on the tap teeth.</li>
                    </ul>
                </div>

                <div class="article-block">
                    <h3>7. Troubleshooting Leaks</h3>
                    <p>Leakage is the enemy of pipe threads. Common causes include:</p>
                    <ul>
                        <li><strong>Mixing Standards:</strong> Screwing NPT (60°) into BSP (55°). It feels tight but
                            contacts only on a spiral line, guaranteeing leaks.</li>
                        <li><strong>Overtightening:</strong> Cracking the female boss (especially cast iron or plastic)
                            by exceeding hoop stress limits.</li>
                        <li><strong>Poor Thread Quality:</strong> Torn threads or chatter marks from machining provide
                            leak paths that dope cannot seal.</li>
                        <li><strong>Galling:</strong> Stainless steel on Stainless steel can cold weld (gall) during
                            assembly, seizing the fitting before a seal is made. Use anti-seize or PTFE paste.</li>
                    </ul>
                </div>

                <div class="article-block">
                    <h3>8. Frequently Asked Questions (FAQ)</h3>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">1. Can I screw NPT into BSPT? <i
                                class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer">No. While 1/2" and 3/4" sizes have the same TPI (14), NPT has a 60°
                            thread angle and flattened roots/crests, while BSPT has a 55° Whitworth angle with rounded
                            roots/crests. Forcing them together damages the threads and will leak under pressure.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">2. What is the difference between BSPP and
                            BSPT? <i class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer">BSPT (British Standard Pipe Taper), denoted as 'R', has a 1:16 taper and
                            seals via thread interference. BSPP (British Standard Pipe Parallel), denoted as 'G', has
                            straight threads and relies on a bonded seal washer or O-ring for sealing.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">3. How is Tap Drill size calculated? <i
                                class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer">Tap drill size depends on the desired percentage of full thread (usually
                            75%). For tapered pipe threads, reaming is often required after drilling to create the
                            initial taper before tapping.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">4. What does NPTF stand for? <i
                                class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer">NPTF stands for National Pipe Taper Fuel (also called Dryseal). It is
                            designed to seal without Teflon tape or dope. The crests and roots effectively crush into
                            each other to form a metal-to-metal seal.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">5. What is the 'Hand Tight' engagement
                            length? <i class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer">This is the distance the male thread screws into the female fitting by
                            hand before a wrench is needed. It is a critical gauging dimension (L1) to ensure the thread
                            is machined to the correct depth.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">6. Why is the OD of 1/8" pipe actually
                            0.405"? <i class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer">Pipe sizes are based on nominal bore. In the early days, a 1/8" pipe had
                            a 1/8" ID and very thick walls. As materials improved, walls got thinner, increasing the ID,
                            but the OD was kept constant to maintain compatibility with fittings.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">7. What is the taper ratio for NPT and BSPT?
                            <i class="fas fa-chevron-down faq-icon"></i>
                        </div>
                        <div class="faq-answer">Both standards use a taper of 1:16, which equates to 0.75 inches per
                            foot, or an angle of 1° 47' 24" relative to the center axis.</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">8. How do I measure Pitch Diameter? <i
                                class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer">Pitch diameter cannot be measured directly with calipers. It requires a
                            thread micrometer or the 3-wire method. For tapered threads, the pitch diameter changes
                            continuously along the length; standards define it at the 'Gauge Plane' (L1 distance from
                            end).</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">9. Can I use Metric Drill bits for NPT? <i
                                class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer">Yes, as long as the millimeter equivalent matches the required hole
                            size. This calculator provides the closest standard Metric and Fractional drill bit sizes.
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">10. What is the flank angle of Whitworth
                            threads? <i class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer">Whitworth threads (used in BSP/ISO 7) have a 55° included angle.
                            American National threads (NPT/Unified) have a 60° included angle.</div>
                    </div>

                </div>
            </div>
        </div>
    </main>

        <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <a href="/" class="footer-logo">
                        <img src="logo.png" alt="Design Calculators Logo" loading="lazy" decoding="async">
                        <span class="footer-logo-text">Design Calculators</span>
                    </a>
                    <p class="footer-description">A comprehensive engineering calculator hub based on IEC, IEEE, and
                        global standards.</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn linkedin"
                            aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer"
                            class="social-btn youtube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in&text=Check%20out%20this%20amazing%20engineering%20calculator%20hub!"
                            target="_blank" rel="noopener noreferrer" class="social-btn twitter" aria-label="Twitter"><i
                                class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn facebook"
                            aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn whatsapp"
                            aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="footer-col">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href='/indexele.html'>Electrical Tools</a></li>
                            <li><a href='/indexmech.html'>Mechanical Tools</a></li>
                            <li><a href='/indexinst.html'>Instrumentation Tools</a></li>
                            <li><a href='/about.html'>About Us</a></li>
                            <li><a href='/faq.html'>FAQ</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Learn More</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/@designcalculators" target="_blank"
                                    rel="noopener noreferrer">YouTube Channel</a></li>
                            <li><a href='/contact.html'>Contact Us</a></li>
                            <li><a href='/privacy-policy.html'>Privacy Policy</a></li>
                            <li><a href='/terms-of-service.html'>Terms of Service</a></li>
                            <li><a href='/sitemap2.html'>Sitemap</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Our Network</h4>
                        <ul>
                            <li style="margin-bottom: 12px;">
                                <a href="https://reliabilitytools.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">Reliability Tools</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Reliability
                                    & maintenance engineering calculators.</span>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="https://electrosafe.homes/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">ElectroSafe</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Dedicated
                                    to home electrical safety & protection.</span>
                            </li>
                            <li>
                                <a href="https://knowyourname.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">KnowYourName</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Scientific
                                    name analysis: Phonetics, Ergonomics & Acoustics.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>All calculations are for preliminary engineering design guidance. Final designs must comply with all applicable local and international standards (including but not limited to ASHRAE 90.1, ARI 550/590). Always verify calculations and consult with a licensed professional engineer before implementation or construction.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">Anil Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global State
        let lastResult = {};
        let canvas = document.getElementById('threadCanvas');
        let ctx = canvas.getContext('2d');

        // --- DATABASE: NPT / BSP DATA (Metrology Grade) ---
        // E1: Pitch Dia at L1 Plane (Hand Tight). Minor: Approx Minor Dia at End.
        const THREAD_DATA = {
            "NPT": {
                "1/8": { od: 0.405, tpi: 27, drill: 0.332, l1: 0.1615, e1: 0.37360, minor: 0.358 },
                "1/4": { od: 0.540, tpi: 18, drill: 0.438, l1: 0.2278, e1: 0.49163, minor: 0.468 },
                "3/8": { od: 0.675, tpi: 18, drill: 0.562, l1: 0.240, e1: 0.62701, minor: 0.603 },
                "1/2": { od: 0.840, tpi: 14, drill: 0.703, l1: 0.320, e1: 0.77843, minor: 0.745 },
                "3/4": { od: 1.050, tpi: 14, drill: 0.906, l1: 0.339, e1: 0.98887, minor: 0.954 },
                "1": { od: 1.315, tpi: 11.5, drill: 1.141, l1: 0.400, e1: 1.23863, minor: 1.189 },
                "1-1/4": { od: 1.660, tpi: 11.5, drill: 1.484, l1: 0.420, e1: 1.58338, minor: 1.533 },
                "1-1/2": { od: 1.900, tpi: 11.5, drill: 1.719, l1: 0.420, e1: 1.82234, minor: 1.772 },
                "2": { od: 2.375, tpi: 11.5, drill: 2.188, l1: 0.436, e1: 2.29627, minor: 2.246 }
            },
            "BSPT": { // R / Rc (ISO 7)
                "1/8": { od: 0.383, tpi: 28, drill: 0.323, l1: 0.157, e1: 0.360, minor: 0.337 },
                "1/4": { od: 0.518, tpi: 19, drill: 0.433, l1: 0.236, e1: 0.485, minor: 0.451 },
                "3/8": { od: 0.656, tpi: 19, drill: 0.571, l1: 0.252, e1: 0.622, minor: 0.588 },
                "1/2": { od: 0.825, tpi: 14, drill: 0.709, l1: 0.323, e1: 0.778, minor: 0.734 },
                "3/4": { od: 1.041, tpi: 14, drill: 0.925, l1: 0.374, e1: 0.992, minor: 0.949 },
                "1": { od: 1.309, tpi: 11, drill: 1.161, l1: 0.409, e1: 1.247, minor: 1.193 }
            },
            "BSPP": { // G (ISO 228) - Parallel, No L1
                "1/8": { od: 0.383, tpi: 28, drill: 0.344, l1: 0, e1: 0.360, minor: 0.337 },
                "1/4": { od: 0.518, tpi: 19, drill: 0.465, l1: 0, e1: 0.485, minor: 0.451 },
                "3/8": { od: 0.656, tpi: 19, drill: 0.598, l1: 0, e1: 0.622, minor: 0.588 },
                "1/2": { od: 0.825, tpi: 14, drill: 0.748, l1: 0, e1: 0.778, minor: 0.734 },
                "3/4": { od: 1.041, tpi: 14, drill: 0.965, l1: 0, e1: 0.992, minor: 0.949 },
                "1": { od: 1.309, tpi: 11, drill: 1.211, l1: 0, e1: 1.247, minor: 1.193 }
            }
        };

        // UI Logic
        document.addEventListener('DOMContentLoaded', () => {
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch && localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                themeSwitch.checked = true;
            }
            if (themeSwitch) {
                themeSwitch.addEventListener('change', function () {
                    document.body.classList.toggle('dark-mode');
                    localStorage.setItem('theme', this.checked ? 'dark' : 'light');
                });
            }
            document.getElementById('pdf-btn').addEventListener('click', generatePDF);
            document.getElementById('mat-pct').addEventListener('change', function () {
                if (this.value !== 'custom') {
                    document.getElementById('thread-pct').value = this.value;
                }
            });

            initThreadSelect();
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
        });

        function switchTool(toolId) {
            document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));
            event.currentTarget.classList.add('active');
            document.querySelectorAll('.tool-module').forEach(m => m.classList.remove('active'));
            document.getElementById('mod-' + toolId).classList.add('active');
            document.getElementById('main-result').style.display = 'none';
        }

        function toggleFaq(element) {
            const item = element.parentElement;
            item.classList.toggle('active');
        }

        function initThreadSelect() {
            updateSizes();
        }

        function updateSizes() {
            const std = document.getElementById('std-select').value;
            const sizeSel = document.getElementById('size-select');
            sizeSel.innerHTML = "";

            const sizes = Object.keys(THREAD_DATA[std]);
            sizes.forEach(sz => {
                const opt = document.createElement('option');
                opt.value = sz;
                opt.innerText = `${sz}" Size`;
                sizeSel.appendChild(opt);
            });
            sizeSel.value = "1/2";
        }

        function resizeCanvas() {
            const container = document.querySelector('.viz-container');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            if (lastResult.od) drawThread(lastResult.od, lastResult.taper, lastResult.angle);
        }

        // --- MATH ENGINE ---

        function drawThread(od, isTapered, angleDeg) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const w = canvas.width;
            const h = canvas.height;

            const scale = Math.min(w, h) / (od * 1.5);
            const cx = w / 2;
            const cy = h / 2;

            // Schematic
            ctx.strokeStyle = '#64748B';
            ctx.fillStyle = '#1E293B';
            ctx.lineWidth = 2;

            const len = w * 0.8;
            const startX = (w - len) / 2;
            const steps = 10;
            const stepSize = len / steps;
            const taperRatio = isTapered ? 0.0625 : 0;

            // Top Profile
            ctx.beginPath();
            for (let i = 0; i <= steps; i++) {
                const x = startX + (i * stepSize);
                const r = (od / 2) * scale + (i * stepSize * taperRatio * 0.5);
                const yBase = cy - r;
                if (i === 0) ctx.moveTo(x, yBase);
                else {
                    const prevX = startX + ((i - 1) * stepSize);
                    const midX = (prevX + x) / 2;
                    ctx.lineTo(midX, yBase + 10);
                    ctx.lineTo(x, yBase);
                }
            }
            ctx.stroke();

            // Bottom Profile
            ctx.beginPath();
            for (let i = 0; i <= steps; i++) {
                const x = startX + (i * stepSize);
                const r = (od / 2) * scale + (i * stepSize * taperRatio * 0.5);
                const yBase = cy + r;
                if (i === 0) ctx.moveTo(x, yBase);
                else {
                    const prevX = startX + ((i - 1) * stepSize);
                    const midX = (prevX + x) / 2;
                    ctx.lineTo(midX, yBase - 10);
                    ctx.lineTo(x, yBase);
                }
            }
            ctx.stroke();

            // Labels
            ctx.fillStyle = '#FFFFFF';
            ctx.font = 'bold 16px Inter';
            ctx.textAlign = 'center';
            ctx.fillText(`${angleDeg}° Angle`, cx, 30);

            if (isTapered) {
                ctx.fillText("Taper 1:16 (0.75 in/ft)", cx, h - 20);
                // Guide lines
                ctx.strokeStyle = '#F59E0B';
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(startX, cy);
                ctx.lineTo(startX + len, cy);
                ctx.stroke();
                ctx.setLineDash([]);
            } else {
                ctx.fillText("Parallel Thread", cx, h - 20);
            }
        }

        function calcThread(isCalcMode = false) {
            const std = document.getElementById('std-select').value;
            const size = document.getElementById('size-select').value;

            const data = THREAD_DATA[std][size];
            if (!data) return alert("Data missing");

            const pitch = 1 / data.tpi;
            const isTapered = (std === 'NPT' || std === 'BSPT');
            const angle = (std === 'NPT') ? 60 : 55;

            // Default Standard Drill
            let finalDrill = data.drill;
            let calcDesc = "Standard Chart Value";

            // Custom Drill Logic (Approximation for Parallel, Reamer for Taper)
            let pct = 75;
            if (isCalcMode) {
                pct = parseFloat(document.getElementById('thread-pct').value);
                // Theoretical Drill Formula (Straight approximation):
                // Drill = Major - ( (0.01299 * % * P_pitch) / (TPI)?? No.
                // Formula: Drill = MajorDia - (2 * % * H_basic * 5/8??) 
                // Simplified: Drill = Major - (Factor / TPI)
                // For 60 deg (NPT/Metric): Factor ~ 1.08 * %/100
                // For 55 deg (BSP): Factor ~ 1.28 * %/100 (Deeper thread)

                // Note: For NPT/BSPT, calculating drill is tricky due to taper.
                // We calculate the drill size at the small end or use the parallel equivalent.
                // We will use a simplified formula to show the EFFECT of percentage.
                // D = OD_actual - ( (pct/100) / TPI ) * (AngleFactor)
                // AngleFactor 60deg = 0.9743? No.
                // Let's use: Drill = OD - ( (0.013 * pct * (60/angle)) / Pitch? )
                // Robust Approx: Drill = OD - ( (pct/75) * (OD - StdDrill) )

                const diff = data.od - data.drill; // The "bite" at 75% roughly
                const adjBite = diff * (pct / 75);
                finalDrill = data.od - adjBite;

                calcDesc = `Calculated for ${pct}% Thread`;
            }

            // Results
            document.getElementById('main-result').style.display = 'block';
            document.getElementById('res-subtitle').innerText = `${std} ${size}" Data`;
            document.getElementById('res-main').innerText = `${std} ${size}`;

            document.getElementById('res-tpi').innerText = `${data.tpi} TPI`;
            document.getElementById('res-pitch-dia').innerText = `${data.e1.toFixed(4)}" (${(data.e1 * 25.4).toFixed(2)} mm)`;
            document.getElementById('res-od').innerText = `${data.od.toFixed(3)}"`;
            document.getElementById('res-drill').innerText = `${finalDrill.toFixed(3)}" (${(finalDrill * 25.4).toFixed(2)} mm)`;
            document.getElementById('res-minor').innerText = `${data.minor.toFixed(3)}"`;

            if (isTapered) {
                document.getElementById('res-l1').innerText = `${data.l1.toFixed(4)}"`;
            } else {
                document.getElementById('res-l1').innerText = "N/A";
            }

            let steps = `<h4>Forensic Metrology Data</h4>`;
            steps += `<div class="step-block">
                <span class="step-title">Step 1: Thread Geometry Definition</span>
                Standard: <strong>${std}</strong> (Angle: ${angle}° included).<br>
                Thread Height (H): $0.8660 \\times P$ (NPT) or $0.9605 \\times P$ (BSP).<br>
                Effective Height ($h$): Truncated to approx $0.8 \\times P$ (NPT).
            </div>`;

            steps += `<div class="step-block">
                <span class="step-title">Step 2: Pitch & Lead</span>
                Pitch ($P$) = $1 / ${data.tpi} = \\mathbf{${pitch.toFixed(5)} \\text{ in}}$<br>
                Taper Angle: 1° 47' 24" relative to axis (1:16 slope).
            </div>`;

            if (isTapered) {
                steps += `<div class="step-block">
                    <span class="step-title">Step 3: Gauging Criteria (L1)</span>
                    Hand Tight Length ($L_1$): <strong>${data.l1}"</strong>.<br>
                    Pitch Diameter at L1 Plane ($E_1$): <strong>${data.e1}"</strong>.<br>
                    <em>Parts must screw in to L1 +/- 1 turn to pass inspection.</em>
                </div>`;
            }

            if (isCalcMode) {
                steps += `<div class="step-block">
                    <span class="step-title">Step 4: Custom Drill Calculation</span>
                    Target Thread: <strong>${parseFloat(document.getElementById('thread-pct').value)}%</strong>.<br>
                    Adjusted Drill Size: $\\approx \\mathbf{${finalDrill.toFixed(3)} \\text{ in}}$<br>
                    <em>Warning: Use tapered reamer for NPT/BSPT for proper fit.</em>
                </div>`;
            }

            document.getElementById('calc-steps-box').innerHTML = steps;
            if (window.MathJax) window.MathJax.typesetPromise();

            drawThread(data.od, isTapered, angle);
            lastResult = { std, size, od: data.od, tpi: data.tpi, steps, drill: finalDrill.toFixed(3) };
        }

        function generatePDF() {
            if (!lastResult.od) { alert("Calculate first!"); return; }
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            doc.setFontSize(18); doc.setTextColor(30, 58, 138);
            doc.text("Industrial Metrology Report", 14, 20);

            doc.setFontSize(12); doc.setTextColor(0);
            doc.text(`Thread Spec: ${lastResult.std} ${lastResult.size}"`, 14, 40);
            doc.text(`Date: ${new Date().toLocaleDateString()}`, 14, 50);

            doc.setDrawColor(30, 58, 138);
            doc.setLineWidth(0.5);
            doc.line(14, 55, 196, 55);

            doc.setFontSize(14);
            doc.text(`Major Dia: ${lastResult.od}"`, 20, 75);
            doc.text(`TPI: ${lastResult.tpi}`, 20, 85);
            doc.text(`Rec. Tap Drill: ${lastResult.drill}"`, 20, 95);

            // Add canvas image
            const imgData = canvas.toDataURL("image/png");
            doc.addImage(imgData, 'PNG', 20, 110, 100, 60);

            const stepsText = document.getElementById('calc-steps-box').innerText;
            // Simple strip for PDF
            doc.text("See online tool for full geometric breakdown.", 14, 180);

            doc.save('Thread_Inspection_Report.pdf');
        }
    </script>
    <script src="/main.js"></script>
</body>

</html>
