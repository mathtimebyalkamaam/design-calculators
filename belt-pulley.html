<!DOCTYPE html>
<html lang="en">
<head>
    <head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-23Y1V450SR');
</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belt & Pulley Speed Ratio Calculator - Mechanical Tools Hub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- MathJax for LaTeX rendering -->
    <script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="icon" href="/favicon.ico" type="image/x-icon">

    <script>
        // MathJax configuration to support inline and display LaTeX
        MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']],
                processEscapes: true
            }
        };
    </script>
    <style>
        /* CSS Variables for theming (light and dark mode) */
        :root {
            --primary-color: #2196F3;
            --secondary-color: #1976D2;
            --accent-color: #FFC107;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333333;
            --header-bg: #2C3E50;
            --footer-bg: #34495E;
            --border-color: #cccccc;
            --card-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            --hover-color: #e2e6ea;
            --primary-color-rgb: 33, 150, 243;
            --success-color: #28a745;
            --error-color: #dc3545;
        }
        /* Dark mode overrides */
        body.dark-mode {
            --primary-color: #5DADE2;
            --secondary-color: #2874A6;
            --bg-color: #252D3A;
            --card-bg: #2F3C4C;
            --text-color: #E0E6EB;
            --header-bg: #252D3A;
            --footer-bg: #252D3A;
            --border-color: #4C5C70;
            --card-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            --hover-color: #3A475C;
            --primary-color-rgb: 93, 173, 226;
            --success-color: #4CAF50;
            --error-color: #F44336;
        }
        /* Base body styling */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at center, var(--bg-color) 0%, rgba(244, 247, 246, 0.8) 100%);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s, background-image 0.3s;
        }
        /* Container for content width limitation and centering */
        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }
        /* Header styling */
        header {
            background-color: var(--header-bg);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative;
        }
        header h1 {
            margin: 0;
            font-size: 2.8em;
            color: var(--primary-color);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        header .subtitle {
            margin: 8px 0 0;
            font-size: 1.1em;
            color: #bdc3c7;
        }
        /* Main content area styling */
        main {
            padding: 30px 0;
        }
        /* Tool container styling */
        .tool-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            margin-bottom: 25px;
            transition: transform 0.3s ease-in-out;
        }
        .tool-container:hover {
            transform: translateY(-5px);
        }
        .tool-container h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 12px;
            margin-top: 0;
            margin-bottom: 25px;
            font-size: 2em;
        }
        .tool-description {
            margin-bottom: 25px;
            color: var(--text-color);
            font-size: 1.05em;
        }
        .tool-description ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
            margin-top: 15px;
        }
        .tool-description ul li {
            margin-bottom: 8px;
        }
        .tool-description strong {
            color: var(--primary-color);
        }
        /* Back button styling */
        .back-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            margin-bottom: 25px;
            transition: background-color 0.3s, transform 0.2s ease-in-out;
            font-weight: bold;
        }
        .back-button:hover {
            background-color: var(--secondary-color);
            transform: scale(1.03);
        }
        /* Theme toggle switch styling */
        .theme-toggle {
            position: absolute;
            top: 25px;
            right: 25px;
            display: flex;
            align-items: center;
        }
        .theme-toggle .light-icon,
        .theme-toggle .dark-icon {
            color: white;
            margin: 0 8px;
            font-size: 1.3em;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 65px;
            height: 38px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 30px;
            width: 30px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        input:focus + .slider {
            box-shadow: 0 0 1px var(--primary-color);
        }
        input:checked + .slider:before {
            transform: translateX(27px);
        }
        .slider.round {
            border-radius: 38px;
        }
        .slider.round:before {
            border-radius: 50%;
        }
        /* Footer styling */
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.2);
            margin-top: 40px;
        }
        footer .disclaimer h3,
        footer .social-share h3 {
            color: var(--primary-color);
            margin-bottom: 12px;
            font-size: 1.3em;
        }
        footer .disclaimer p {
            font-size: 0.95em;
            color: #bdc3c7;
        }
        .social-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .social-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.4em;
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .social-btn:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 15px rgba(0,0,0,0.3);
        }
        /* Specific social button colors */
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.reddit { background-color: #FF4500; }
        .social-btn.email { background-color: #7f8c8d; }
        /* Calculator form styling */
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            margin-top: 25px;
            box-shadow: var(--card-shadow);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 1.05em;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--bg-color);
            color: var(--text-color);
            box-sizing: border-box;
            font-size: 1em;
            transition: border-color 0.3s, box-shadow 0.3s;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.08);
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb), 0.3);
            outline: none;
        }
        /* Responsive form row layout */
        .form-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap; /* Allows items to wrap on smaller screens */
        }
        .form-row .form-group {
            flex: 1 1 calc(50% - 10px); /* Two columns, with gap */
            min-width: 280px; /* Minimum width before wrapping */
        }
        /* Media query for single column on small screens */
        @media (max-width: 600px) {
            .form-row .form-group {
                flex: 1 1 100%; /* Single column */
            }
        }
        /* Calculate button styling */
        .calculate-btn {
            background-image: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 18px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 17px;
            font-weight: bold;
            margin-top: 20px;
            transition: background-image 0.3s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 100%; /* Full width button */
        }
        .calculate-btn:hover {
            background-image: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        /* Result container styling */
        .result-container {
            margin-top: 40px;
            padding: 30px;
            border-radius: 12px;
            background-color: var(--card-bg);
            box-shadow: var(--card-shadow);
            display: block; /* Always block, but opacity controls visibility */
            opacity: 0;
            transition: opacity 0.6s ease-out;
            pointer-events: none; /* Prevents interaction when hidden */
        }
        .result-container.show {
            opacity: 1;
            pointer-events: auto; /* Allows interaction when shown */
        }
        .result-container h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        /* Result table styling */
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .result-table th, .result-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        .result-table th {
            background-color: var(--hover-color);
            font-weight: bold;
            font-size: 1.1em;
        }
        .result-table tr:last-child td {
            border-bottom: none;
        }
        /* Standard reference text styling */
        .standard-reference {
            margin-top: 25px;
            font-style: italic;
            font-size: 0.95rem;
            line-height: 1.5;
            padding: 10px;
            background-color: var(--bg-color);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        /* Tooltip styling */
        .info-icon {
            color: var(--primary-color);
            margin-left: 8px;
            cursor: help;
            font-size: 1em;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%; /* Position above the element */
            left: 50%;
            margin-left: -110px; /* Center the tooltip */
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85em;
        }
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%; /* Arrow at the bottom */
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        /* Custom message box for alerts */
        #custom-message-box {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 18px 30px;
            border-radius: 10px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.5s ease-in-out, background-color 0.3s;
            font-size: 1.1em;
        }
        #custom-message-box.info {
            background-color: var(--success-color);
        }
        #custom-message-box.error {
            background-color: var(--error-color);
        }
        #custom-message-box.warning {
            background-color: var(--accent-color);
            color: #333;
        }

        /* Calculation details section styling */
        #calculation-details {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            font-size: 0.98em;
            overflow-x: auto; /* Allow horizontal scrolling for formulas if needed */
        }
        #calculation-details h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        #calculation-details p.formula {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            font-size: 1.2em;
            text-align: center;
            padding: 12px 0;
            background-color: var(--hover-color);
            border-radius: 6px;
            margin: 15px 0;
            border: 1px dashed var(--border-color);
            white-space: nowrap; /* Prevent formula from wrapping */
        }
        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace;
            background-color: var(--hover-color);
            padding: 8px 12px;
            border-radius: 5px;
            margin-bottom: 8px;
            font-size: 0.95em;
            white-space: nowrap; /* Prevent calculation steps from wrapping */
        }
        #calculation-details ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
        }
        #calculation-details ul li {
            margin-bottom: 5px;
        }
        /* Specific styling for required inputs to highlight visually */
        input:required:invalid {
            border-color: var(--error-color);
        }
        input:required:valid {
            border-color: var(--success-color);
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Design Calculators - Mechanical</h1>
            <p class="subtitle">Smart Tools for Modern Mechanical Engineers</p>
            <div class="theme-toggle">
                <span class="light-icon"><i class="fas fa-sun"></i></span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
                <span class="dark-icon"><i class="fas fa-moon"></i></span>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Back to Tools link -->
        <a href="indexMech.html" class="back-button">
            <i class="fas fa-arrow-left"></i> Back to Tools
        </a>

        <div class="tool-container">
            <h2>Belt & Pulley Speed Ratio Calculator</h2>
            <div class="tool-description">
                <p>This calculator determines the speed ratio and unknown parameters (speed, diameter, or number of teeth) for belt and pulley, or chain and sprocket drive systems. It's essential for designing and analyzing power transmission systems.</p>
                <p><strong>Key Inputs:</strong></p>
                <ul>
                    <li><strong>Unit System:</strong> Select Metric (mm, RPM) or Imperial (inch, RPM) for measurements.</li>
                    <li><strong>Drive Type:</strong> Choose 'Belt/Pulley' (uses diameters) or 'Chain/Gear' (uses number of teeth).</li>
                    <li><strong>Calculation Mode:</strong> Select which parameter you want to calculate (e.g., Driven Speed, Driver Diameter).</li>
                    <li><strong>Driver Diameter (\(D_{driver}\)) / Teeth (\(T_{driver}\)):</strong> Diameter of the driving pulley/sprocket or number of teeth on the driving gear.</li>
                    <li><strong>Driven Diameter (\(D_{driven}\)) / Teeth (\(T_{driven}\)):</strong> Diameter of the driven pulley/sprocket or number of teeth on the driven gear.</li>
                    <li><strong>Driver Speed (\(N_{driver}\)):</strong> Rotational speed of the driving shaft (e.g., motor speed).</li>
                    <li><strong>Driven Speed (\(N_{driven}\)):</strong> Rotational speed of the driven shaft.</li>
                </ul>
                <p><strong>Calculated Outputs:</strong></p>
                <ul>
                    <li><strong>Speed Ratio ((\(i\)) or (\(SR\))):</strong> The ratio of driver speed to driven speed, or driven diameter/teeth to driver diameter/teeth.</li>
                    <li><strong>Calculated Parameter:</strong> The value of the unknown parameter based on the selected calculation mode.</li>
                </ul>
            </div>

            <div class="calculator-form">
                <form id="belt-pulley-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="unit-system">Unit System: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select Metric (mm) or Imperial (inch) for diameter/teeth units. Speeds are always in RPM.</span></span></label>
                            <select id="unit-system" required>
                                <option value="metric">Metric (mm)</option>
                                <option value="imperial">Imperial (inch)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="drive-type">Drive Type: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Choose 'Belt/Pulley' if using diameters, or 'Chain/Gear' if using number of teeth.</span></span></label>
                            <select id="drive-type" required>
                                <option value="belt-pulley">Belt/Pulley (Diameters)</option>
                                <option value="chain-gear">Chain/Gear (Teeth)</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="calc-mode">Calculate: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select which parameter you want to determine. The other three must be known.</span></span></label>
                        <select id="calc-mode" required>
                            <option value="driven-speed">Driven Speed (N_driven)</option>
                            <option value="driver-speed">Driver Speed (N_driver)</option>
                            <option value="driven-size">Driven Pulley/Gear Size</option>
                            <option value="driver-size">Driver Pulley/Gear Size</option>
                        </select>
                    </div>

                    <h3>Input Parameters</h3>
                    <div class="form-row">
                        <div class="form-group" id="driver-size-group">
                            <label for="driver-size">Driver <span class="size-type-label">Pulley Diameter</span> (\(D_{driver}\)) <span class="size-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Diameter of the driving pulley/sprocket or number of teeth on the driving gear.</span></span></label>
                            <input type="number" id="driver-size" step="any" value="100" required min="0.01">
                        </div>
                        <div class="form-group" id="driven-size-group">
                            <label for="driven-size">Driven <span class="size-type-label">Pulley Diameter</span> (\(D_{driven}\)) <span class="size-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Diameter of the driven pulley/sprocket or number of teeth on the driven gear.</span></span></label>
                            <input type="number" id="driven-size" step="any" value="200" required min="0.01">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group" id="driver-speed-group">
                            <label for="driver-speed">Driver Speed (\(N_{driver}\)) (RPM): <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Rotational speed of the driving shaft, e.g., motor RPM.</span></span></label>
                            <input type="number" id="driver-speed" step="any" value="1750" required min="0.01">
                        </div>
                        <div class="form-group" id="driven-speed-group">
                            <label for="driven-speed">Driven Speed (\(N_{driven}\)) (RPM): <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Rotational speed of the driven shaft.</span></span></label>
                            <input type="number" id="driven-speed" step="any" value="875" required min="0.01">
                        </div>
                    </div>
                    
                    <button type="button" id="calculate-drive-btn" class="calculate-btn">Calculate Drive Parameters</button>
                </form>
            </div>

            <div id="result-container" class="result-container">
                <h3>Calculation Results</h3>
                <div id="calculation-details"></div>
                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body"></tbody>
                </table>
                <div class="standard-reference" id="standard-reference"></div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="disclaimer">
                <h3>Disclaimer</h3>
                <p>This tool provides theoretical calculations for belt & pulley or chain & gear speed ratios based on fundamental principles of power transmission. It is intended for preliminary design and analysis.</p>
                <p><strong>It does NOT account for:</strong></p>
                <ul>
                    <li><strong>Belt Slip:</strong> Actual belt drive systems experience some slip, which can reduce the driven speed slightly below theoretical values (typically 1-3%).</li>
                    <li><strong>Chain Stretch/Wear:</strong> Over time, chains can stretch, affecting the effective pitch diameter.</li>
                    <li><strong>Manufacturing Tolerances:</strong> Real-world components have variations from nominal dimensions.</li>
                    <li><strong>Load Conditions:</strong> Power transmission losses, torque variations, and dynamic loads are not considered.</li>
                    <li><strong>Efficiency:</strong> This calculator focuses solely on kinematic ratios, not power transmission efficiency.</li>
                    <li><strong>Specific Standards:</strong> This tool does not directly implement complex calculations from standards like ISO 5294 (V-ribbed belts), ISO 1081 (V-belts), ANSI/AGMA (gearing) which require detailed design considerations for specific drive types.</li>
                </ul>
                <p>For accurate design, selection, and troubleshooting in critical industrial applications, it is <strong>imperative</strong> to consult manufacturer specifications, relevant industry standards, comprehensive machine design handbooks, and qualified mechanical engineers.</p>
            </div>
            <div class="credit">
                <p>Created by A Sharma</p>
            </div>
            <div class="social-share">
                <h3>Share This Site</h3>
                <div class="social-buttons">
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in&title=Design Calculators - Mechanical" target="_blank" class="social-btn linkedin">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" class="social-btn facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?text=Check out this amazing Design Calculators - Mechanical!&url=https://designcalculators.co.in" target="_blank" class="social-btn twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text=Check out this amazing Design Calculators - Mechanical! https://designcalculators.co.in" target="_blank" class="social-btn whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.reddit.com/submit?url=https://designcalculators.co.in&title=Design Calculators - Mechanical" target="_blank" class="social-btn reddit">
                        <i class="fab fa-reddit"></i>
                    </a>
                    <a href="mailto:?subject=Check out Design Calculators - Mechanical!&body=I found this amazing Belt & Pulley Speed Ratio Calculator and other mechanical tools: https://designcalculators.co.in" class="social-btn email">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get references to DOM elements
            const calculateBtn = document.getElementById('calculate-drive-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const standardReference = document.getElementById('standard-reference');
            const calculationDetailsDiv = document.getElementById('calculation-details');

            // Input fields
            const unitSystemSelect = document.getElementById('unit-system');
            const driveTypeSelect = document.getElementById('drive-type');
            const calcModeSelect = document.getElementById('calc-mode');
            const driverSizeInput = document.getElementById('driver-size');
            const drivenSizeInput = document.getElementById('driven-size');
            const driverSpeedInput = document.getElementById('driver-speed');
            const drivenSpeedInput = document.getElementById('driven-speed');

            // Labels that change text
            const driverSizeLabel = document.querySelector('#driver-size-group label span.size-type-label');
            const drivenSizeLabel = document.querySelector('#driven-size-group label span.size-type-label');
            const driverSizeUnitLabel = document.querySelector('#driver-size-group label span.size-unit-label');
            const drivenSizeUnitLabel = document.querySelector('#driven-size-group label span.size-unit-label');

            // Groups for dynamic display/required attributes
            const driverSizeGroup = document.getElementById('driver-size-group');
            const drivenSizeGroup = document.getElementById('driven-size-group');
            const driverSpeedGroup = document.getElementById('driver-speed-group');
            const drivenSpeedGroup = document.getElementById('driven-speed-group');

            /**
             * Displays a custom message box at the top of the screen.
             * @param {string} message - The message to display.
             * @param {string} type - The type of message ('info', 'error', 'warning').
             */
            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    document.body.appendChild(messageBox);
                }
                messageBox.textContent = message;
                messageBox.className = ''; // Clear previous classes
                messageBox.classList.add(type); // Add type class for styling
                messageBox.style.opacity = 1;

                // Hide message after 5 seconds
                setTimeout(() => {
                    messageBox.style.opacity = 0;
                }, 5000);
            }

            /**
             * Updates unit labels and input defaults based on selected unit system and drive type.
             */
            function updateUnitLabelsAndDefaults() {
                const unitSystem = unitSystemSelect.value;
                const driveType = driveTypeSelect.value;

                // Update size type labels (Pulley Diameter vs. Number of Teeth)
                if (driveType === 'belt-pulley') {
                    driverSizeLabel.textContent = 'Pulley Diameter';
                    drivenSizeLabel.textContent = 'Pulley Diameter';
                } else { // chain-gear
                    driverSizeLabel.textContent = 'Gear/Sprocket Teeth';
                    drivenSizeLabel.textContent = 'Gear/Sprocket Teeth';
                }

                // Update unit labels for size inputs
                if (unitSystem === 'metric') {
                    driverSizeUnitLabel.textContent = driveType === 'belt-pulley' ? '(mm)' : '';
                    drivenSizeUnitLabel.textContent = driveType === 'belt-pulley' ? '(mm)' : '';
                    driverSizeInput.value = "100";
                    drivenSizeInput.value = "200";
                } else { // imperial
                    driverSizeUnitLabel.textContent = driveType === 'belt-pulley' ? '(inch)' : '';
                    drivenSizeUnitLabel.textContent = driveType === 'belt-pulley' ? '(inch)' : '';
                    driverSizeInput.value = "4";
                    drivenSizeInput.value = "8";
                }

                // Speeds are always RPM, defaults are constant
                driverSpeedInput.value = "1750";
                drivenSpeedInput.value = "875";

                toggleInputVisibility(); // Adjust input fields based on calculation mode
            }

            /**
             * Toggles visibility and required status of inputs based on calculation mode.
             */
            function toggleInputVisibility() {
                const calcMode = calcModeSelect.value;

                // Reset all to visible and required first, then adjust
                driverSizeGroup.style.display = 'block';
                drivenSizeGroup.style.display = 'block';
                driverSpeedGroup.style.display = 'block';
                drivenSpeedGroup.style.display = 'block';

                driverSizeInput.setAttribute('required', 'true');
                drivenSizeInput.setAttribute('required', 'true');
                driverSpeedInput.setAttribute('required', 'true');
                drivenSpeedInput.setAttribute('required', 'true');

                switch (calcMode) {
                    case 'driven-speed':
                        drivenSpeedGroup.style.display = 'none';
                        drivenSpeedInput.removeAttribute('required');
                        break;
                    case 'driver-speed':
                        driverSpeedGroup.style.display = 'none';
                        driverSpeedInput.removeAttribute('required');
                        break;
                    case 'driven-size':
                        drivenSizeGroup.style.display = 'none';
                        drivenSizeInput.removeAttribute('required');
                        break;
                    case 'driver-size':
                        driverSizeGroup.style.display = 'none';
                        driverSizeInput.removeAttribute('required');
                        break;
                }
            }

            // Event listeners
            unitSystemSelect.addEventListener('change', updateUnitLabelsAndDefaults);
            driveTypeSelect.addEventListener('change', updateUnitLabelsAndDefaults); // Also calls toggleInputVisibility
            calcModeSelect.addEventListener('change', toggleInputVisibility);

            // Initial UI setup on load
            updateUnitLabelsAndDefaults();

            /**
             * Adds a row to the result table.
             * @param {string} parameterHtml - The HTML content for the parameter column.
             * @param {string} valueHtml - The HTML content for the value column.
             */
            function addResultRow(parameterHtml, valueHtml) {
                const row = resultTableBody.insertRow();
                const paramCell = row.insertCell();
                const valueCell = row.insertCell();
                paramCell.innerHTML = parameterHtml;
                valueCell.innerHTML = valueHtml;
            }

            // Main Calculation Logic
            calculateBtn.addEventListener('click', function() {
                const form = document.getElementById('belt-pulley-form');
                if (!form.checkValidity()) {
                    displayMessage("Please fill in all required fields correctly.", "error");
                    form.reportValidity(); // Show native browser validation messages
                    return;
                }

                const unitSystem = unitSystemSelect.value;
                const driveType = driveTypeSelect.value;
                const calcMode = calcModeSelect.value;

                // Get inputs based on visibility and required attributes
                let D_driver, D_driven, N_driver, N_driven;

                try {
                    if (calcMode !== 'driver-size') D_driver = parseFloat(driverSizeInput.value);
                    if (calcMode !== 'driven-size') D_driven = parseFloat(drivenSizeInput.value);
                    if (calcMode !== 'driver-speed') N_driver = parseFloat(driverSpeedInput.value);
                    if (calcMode !== 'driven-speed') N_driven = parseFloat(drivenSpeedInput.value);
                } catch (e) {
                    displayMessage("Invalid input. Please enter numerical values.", "error");
                    return;
                }
                
                // Validate positive values where applicable
                if ((D_driver !== undefined && D_driver <= 0) ||
                    (D_driven !== undefined && D_driven <= 0) ||
                    (N_driver !== undefined && N_driver <= 0) ||
                    (N_driven !== undefined && N_driven <= 0)) {
                    displayMessage("All input values must be positive.", "error");
                    return;
                }


                let calculatedValue = null;
                let speedRatio = null;
                let calculationHtml = '<h4>Detailed Calculation Steps:</h4>';

                const sizeType = driveType === 'belt-pulley' ? 'Diameter' : 'Teeth';
                const D_symbol = driveType === 'belt-pulley' ? 'D' : 'T';
                const sizeUnit = unitSystem === 'metric' ? 'mm' : 'inch';


                // Formulas: D_driver * N_driver = D_driven * N_driven
                // Or: N_driven / N_driver = D_driver / D_driven
                // Speed Ratio SR = N_driver / N_driven = D_driven / D_driver (for speed reduction)
                // Or SR = N_driven / N_driver (if defined as such)
                // Let's use SR = N_driver / N_driven for consistency (driver to driven)

                calculationHtml += `<p>The fundamental relationship for belt/pulley or chain/gear drives is: </p>`;
                calculationHtml += `<p class="formula">\\[ ${D_symbol}_{driver} \\cdot N_{driver} = ${D_symbol}_{driven} \\cdot N_{driven} \\]</p>`;

                // Perform calculation based on mode
                switch (calcMode) {
                    case 'driven-speed':
                        calculatedValue = (D_driver * N_driver) / D_driven;
                        speedRatio = N_driver / calculatedValue;
                        calculationHtml += `<p><strong>Calculate Driven Speed (\\(N_{driven}\\)):</strong></p>`;
                        calculationHtml += `<p class="formula">\\[ N_{driven} = \\frac{${D_symbol}_{driver} \\cdot N_{driver}}{${D_symbol}_{driven}} \\]</p>`;
                        calculationHtml += `<p class="calculation-step">
                            \\( N_{driven} \\) = (${D_driver.toFixed(2)} ${sizeUnit} \\( \\times \\) ${N_driver.toFixed(2)} RPM) / ${D_driven.toFixed(2)} ${sizeUnit} = ${calculatedValue.toFixed(2)} RPM
                        </p>`;
                        break;
                    case 'driver-speed':
                        calculatedValue = (D_driven * N_driven) / D_driver;
                        speedRatio = calculatedValue / N_driven;
                        calculationHtml += `<p><strong>Calculate Driver Speed (\\(N_{driver}\\)):</strong></p>`;
                        calculationHtml += `<p class="formula">\\[ N_{driver} = \\frac{${D_symbol}_{driven} \\cdot N_{driven}}{${D_symbol}_{driver}} \\]</p>`;
                        calculationHtml += `<p class="calculation-step">
                            \\( N_{driver} \\) = (${D_driven.toFixed(2)} ${sizeUnit} \\( \\times \\) ${N_driven.toFixed(2)} RPM) / ${D_driver.toFixed(2)} ${sizeUnit} = ${calculatedValue.toFixed(2)} RPM
                        </p>`;
                        break;
                    case 'driven-size':
                        calculatedValue = (D_driver * N_driver) / N_driven;
                        speedRatio = N_driver / N_driven;
                        calculationHtml += `<p><strong>Calculate Driven ${sizeType} (\\(${D_symbol}_{driven}\\)):</strong></p>`;
                        calculationHtml += `<p class="formula">\\[ ${D_symbol}_{driven} = \\frac{${D_symbol}_{driver} \\cdot N_{driver}}{N_{driven}} \\]</p>`;
                        calculationHtml += `<p class="calculation-step">
                            \\( ${D_symbol}_{driven} \\) = (${D_driver.toFixed(2)} ${sizeUnit} \\( \\times \\) ${N_driver.toFixed(2)} RPM) / ${N_driven.toFixed(2)} RPM = ${calculatedValue.toFixed(2)} ${sizeUnit}
                        </p>`;
                        break;
                    case 'driver-size':
                        calculatedValue = (D_driven * N_driven) / N_driver;
                        speedRatio = N_driver / N_driven;
                        calculationHtml += `<p><strong>Calculate Driver ${sizeType} (\\(${D_symbol}_{driver}\\)):</strong></p>`;
                        calculationHtml += `<p class="formula">\\[ ${D_symbol}_{driver} = \\frac{${D_symbol}_{driven} \\cdot N_{driven}}{N_{driver}} \\]</p>`;
                        calculationHtml += `<p class="calculation-step">
                            \\( ${D_symbol}_{driver} \\) = (${D_driven.toFixed(2)} ${sizeUnit} \\( \\times \\) ${N_driven.toFixed(2)} RPM) / ${N_driver.toFixed(2)} RPM = ${calculatedValue.toFixed(2)} ${sizeUnit}
                        </p>`;
                        break;
                }

                // If speed ratio was not directly calculated by the mode, calculate it now from all available values
                if (speedRatio === null) {
                    if (N_driver && N_driven) {
                        speedRatio = N_driver / N_driven;
                    } else if (D_driven && D_driver) {
                        speedRatio = D_driven / D_driver;
                    }
                }
                
                calculationHtml += `<p><strong>Speed Ratio Calculation (\\(SR = N_{driver} / N_{driven}\\)):</strong></p>`;
                if (N_driver && N_driven) {
                     calculationHtml += `<p class="formula">\\[ SR = \\frac{N_{driver}}{N_{driven}} \\]</p>`;
                     calculationHtml += `<p class="calculation-step">
                        \\( SR \\) = ${N_driver.toFixed(2)} RPM / ${N_driven.toFixed(2)} RPM = ${speedRatio.toFixed(3)}
                    </p>`;
                } else if (D_driver && D_driven) {
                     calculationHtml += `<p class="formula">\\[ SR = \\frac{${D_symbol}_{driven}}{${D_symbol}_{driver}} \\]</p>`;
                     calculationHtml += `<p class="calculation-step">
                        \\( SR \\) = ${D_driven.toFixed(2)} ${sizeUnit} / ${D_driver.toFixed(2)} ${sizeUnit} = ${speedRatio.toFixed(3)}
                    </p>`;
                }
               

                // Clear previous results
                resultTableBody.innerHTML = '';
                calculationDetailsDiv.innerHTML = calculationHtml;

                // Populate results table
                addResultRow("Unit System", unitSystem === 'imperial' ? 'Imperial' : 'Metric');
                addResultRow("Drive Type", driveTypeSelect.options[driveTypeSelect.selectedIndex].text);
                addResultRow("Calculation Mode", calcModeSelect.options[calcModeSelect.selectedIndex].text);

                if (calcMode !== 'driver-size') {
                    addResultRow(`Driver ${sizeType} (\\(${D_symbol}_{driver}\\))`, `${D_driver.toFixed(2)} ${unitSystem === 'metric' ? 'mm' : 'inch'}`);
                }
                if (calcMode !== 'driven-size') {
                    addResultRow(`Driven ${sizeType} (\\(${D_symbol}_{driven}\\))`, `${D_driven.toFixed(2)} ${unitSystem === 'metric' ? 'mm' : 'inch'}`);
                }
                if (calcMode !== 'driver-speed') {
                    addResultRow("Driver Speed (\\(N_{driver}\\))", `${N_driver.toFixed(2)} RPM`);
                }
                if (calcMode !== 'driven-speed') {
                    addResultRow("Driven Speed (\\(N_{driven}\\))", `${N_driven.toFixed(2)} RPM`);
                }
                
                // Add calculated result and speed ratio
                if (calcMode === 'driven-speed') {
                    addResultRow("Calculated Driven Speed (\\(N_{driven}\\))", `<strong>\\( ${calculatedValue.toFixed(2)} \\) RPM</strong>`);
                } else if (calcMode === 'driver-speed') {
                    addResultRow("Calculated Driver Speed (\\(N_{driver}\\))", `<strong>\\( ${calculatedValue.toFixed(2)} \\) RPM</strong>`);
                } else if (calcMode === 'driven-size') {
                    addResultRow(`Calculated Driven ${sizeType} (\\(${D_symbol}_{driven}\\))`, `<strong>\\( ${calculatedValue.toFixed(2)} \\) ${unitSystem === 'metric' ? 'mm' : 'inch'}</strong>`);
                } else if (calcMode === 'driver-size') {
                    addResultRow(`Calculated Driver ${sizeType} (\\(${D_symbol}_{driver}\\))`, `<strong>\\( ${calculatedValue.toFixed(2)} \\) ${unitSystem === 'metric' ? 'mm' : 'inch'}</strong>`);
                }

                addResultRow("Speed Ratio (\\(SR = N_{driver}/N_{driven}\\))", `<strong>\\( ${speedRatio.toFixed(3)} \\)</strong>`);


                // Re-render MathJax equations - ensure MathJax is fully loaded
                if (window.MathJax && typeof window.MathJax.typesetPromise === 'function') {
                    window.MathJax.typesetPromise([calculationDetailsDiv, resultTableBody]);
                }

                // Display standard reference
                standardReference.innerHTML = "This tool provides theoretical calculations for belt & pulley or chain & gear speed ratios based on fundamental principles of power transmission. It is intended for preliminary design and analysis. It does NOT account for: Belt slip (typically 1-3%), chain stretch/wear, manufacturing tolerances, load conditions, power transmission efficiency, or specific international standards like ISO 5294 (V-ribbed belts), ISO 1081 (V-belts), ANSI/AGMA (gearing) which require detailed design considerations for specific drive types. For accurate design, selection, and troubleshooting in critical industrial applications, it is <strong>imperative</strong> to consult manufacturer specifications, relevant industry standards, comprehensive machine design handbooks, and qualified mechanical engineers.";

                // Show results container
                resultContainer.style.display = 'block';
                setTimeout(() => {
                    resultContainer.classList.add('show');
                }, 10);
                resultContainer.scrollIntoView({ behavior: 'smooth' });

                displayMessage("Calculation completed successfully!", "info");
            });

            // Theme switch functionality
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }
                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }
        });
    </script>
</body>
</html>


