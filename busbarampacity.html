<!DOCTYPE html>
<html lang="en">
<head>
    <!-- AdSense & Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>
    
    <!-- SEO Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industrial Busbar Ampacity Calculator - DIN 43671 & IEEE 605</title>
    <meta name="description" content="Commercial-grade Busbar Ampacity Calculator. Calculate current carrying capacity for Copper and Aluminum busbars based on thermal limits (DIN 43671). Accounts for Skin Effect, Radiation, and Convection.">
    <meta name="keywords" content="busbar ampacity calculator, copper busbar current, aluminum busbar, DIN 43671, IEEE 605, thermal rating, skin effect, electrical engineering tools, switchgear design">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- MathJax -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)'], ['$', '$']],
                displayMath: [['\\[', '\\]'], ['$$', '$$']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <style>
        /* --- CORE THEME (Standardized) --- */
        :root {
            --primary: #1E3A8A;
            --secondary: #2563EB;
            --accent: #F59E0B;
            --success: #10B981;
            --danger: #DC2626;
            --warning: #F59E0B;
            --bg: #F8FAFC;
            --card: #FFFFFF;
            --text: #4B5563;
            --heading: #111827;
            --footer-bg: #0F172A;
            --border: #E2E8F0;
            --grad: linear-gradient(135deg, var(--primary), var(--secondary));
            --grad-dark: linear-gradient(135deg, #0F172A, #1E293B);
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);
            
            /* Commercial Additions */
            --input-bg: #F1F5F9;
            --text-light: #64748b;
            --font-mono: 'Roboto Mono', monospace;
        }

        body.dark-mode {
            --primary: #10B981;
            --secondary: #34D399;
            --bg: #0F172A;
            --card: #1E293B;
            --text: #CBD5E1;
            --heading: #F1F5F9;
            --footer-bg: #020617;
            --border: #334155;
            --accent: #F59E0B;
            --input-bg: #0f172a;
            --text-light: #94a3b8;
        }

        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.7;
            margin: 0;
            padding: 0;
        }

        .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; }

        /* Header & Nav (Strictly Preserved) */
        header {
            background: var(--grad);
            color: white;
            padding: 24px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-bottom: none;
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-container {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: white;
        }
        .logo-text {
            font-size: 1.75rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
        }
        .logo-subtitle {
            font-size: 0.8rem;
            margin: 4px 0 0 0;
            color: #E0E7FF;
            opacity: 0.9;
        }
        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
            font-size: 1rem;
        }
        .nav-links a:hover { color: var(--accent); }
        
        /* Theme Toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }
        .switch {
            position: relative;
            width: 56px;
            height: 30px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.2);
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px; width: 22px;
            left: 4px; bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--accent); }
        input:checked + .slider:before { transform: translateX(26px); }

        /* Main Content & Cards */
        main { padding: 40px 0; }
        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }
        .card h2 {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            margin-top: 0;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        h3 {
            color: var(--heading);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            margin-top: 25px;
            margin-bottom: 20px;
        }
        
        .tool-description { padding: 20px 0; background: transparent; color: var(--text); font-size: 1rem; }

        /* Input Sections */
        .input-section {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 25px 20px 20px 20px;
            margin-bottom: 24px;
            position: relative;
        }
        .section-title {
            position: absolute;
            top: -12px;
            left: 16px;
            background: var(--card);
            padding: 0 10px;
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border: 1px solid var(--border);
            border-radius: 4px;
        }
        body.dark-mode .section-title { background: var(--card); }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 15px;
        }
        .form-group { margin-bottom: 0; position: relative; }
        .form-group label {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--heading);
            font-size: 0.9rem;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            background-color: var(--card);
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: var(--font-mono);
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }

        /* Tooltips */
        .info-icon { color: var(--secondary); cursor: help; font-size: 0.9em; opacity: 0.7; transition: opacity 0.2s; }
        .info-icon:hover { opacity: 1; }
        .tooltip-container { position: relative; display: inline-block; }
        .tooltip-container .tooltip-text {
            visibility: hidden; width: 240px; background-color: #333; color: #fff; text-align: left;
            border-radius: 6px; padding: 10px; position: absolute; z-index: 100; bottom: 135%; left: 50%;
            transform: translateX(-50%); opacity: 0; transition: opacity 0.3s; font-size: 0.8rem;
            line-height: 1.4; font-weight: 400; box-shadow: 0 4px 10px rgba(0,0,0,0.2); pointer-events: none;
        }
        .tooltip-container .tooltip-text::after {
            content: ""; position: absolute; top: 100%; left: 50%; margin-left: -5px;
            border-width: 5px; border-style: solid; border-color: #333 transparent transparent transparent;
        }
        .tooltip-container:hover .tooltip-text { visibility: visible; opacity: 1; }

        /* Buttons */
        .btn {
            background: var(--grad); color: white; border: none; padding: 16px 30px; border-radius: 8px;
            cursor: pointer; font-size: 1.1rem; font-weight: 700; box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
            transition: all 0.3s; width: 100%; display: inline-flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(30, 58, 138, 0.4); }
        .btn-outline {
            background: transparent; border: 2px solid var(--secondary); color: var(--secondary); font-size: 0.9rem; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-weight: 600; transition: all 0.3s;
        }
        .btn-outline:hover { background: var(--secondary); color: white; }
        .button-wrapper { display: flex; justify-content: center; width: 100%; padding-top: 15px; gap: 15px; }

        /* Presets */
        .preset-container { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px; }
        .preset-btn {
            padding: 8px 12px; font-size: 0.85rem; border: 1px solid var(--border); background: var(--card);
            border-radius: 20px; cursor: pointer; transition: all 0.2s; color: var(--text); display: flex; align-items: center; gap: 5px;
        }
        .preset-btn:hover { background: var(--bg); border-color: var(--secondary); color: var(--secondary); }

        /* Results Layout */
        .results-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; align-items: start; }
        @media (max-width: 1024px) { .results-grid { grid-template-columns: 1fr; } }

        .results-table { width: 100%; border-collapse: collapse; margin-top: 0; box-shadow: 0 2px 8px rgba(0,0,0,0.08); border-radius: 8px; overflow: hidden; }
        .results-table th, .results-table td { padding: 14px; text-align: left; border-bottom: 1px solid var(--border); }
        .results-table th { background: var(--grad); color: white; font-weight: 700; }
        .results-table tr:nth-child(even) { background-color: var(--bg); }
        .results-table td:first-child { font-weight: 600; color: var(--heading); }
        .results-table .val { font-family: var(--font-mono); font-weight: 700; color: var(--primary); font-size: 1.1rem; }
        .results-table .unit { color: var(--text-light); font-size: 0.85rem; margin-left: 4px; }

        /* Chart Container */
        .chart-container {
            background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 15px; position: relative; height: 300px; width: 100%;
        }
        .canvas-wrapper { background: #fff; border: 1px solid var(--border); border-radius: 8px; padding: 10px; height: 200px; display: flex; justify-content: center; align-items: center; }

        /* Educational Content (Article Style) */
        .education-section { margin-top: 50px; }
        .tech-article { display: grid; grid-template-columns: 250px 1fr; gap: 40px; align-items: start; }
        @media (max-width: 800px) { .tech-article { grid-template-columns: 1fr; } }
        
        .toc-sticky { position: sticky; top: 20px; background: var(--bg); padding: 20px; border-radius: 8px; border: 1px solid var(--border); }
        .toc-sticky h4 { margin-top: 0; color: var(--primary); border-bottom: 2px solid var(--border); padding-bottom: 10px; }
        .toc-sticky ul { list-style: none; padding: 0; margin: 0; }
        .toc-sticky li { margin-bottom: 8px; }
        .toc-sticky a { text-decoration: none; color: var(--text); font-size: 0.95rem; transition: color 0.2s; display: block; padding: 4px 0; }
        .toc-sticky a:hover { color: var(--secondary); transform: translateX(5px); }

        .article-content h3 { color: var(--secondary); font-family: 'Montserrat', sans-serif; font-size: 1.5rem; margin-top: 40px; padding-bottom: 10px; border-bottom: 1px solid var(--border); }
        .article-content h3:first-child { margin-top: 0; }
        .article-content p { line-height: 1.8; margin-bottom: 20px; font-size: 1.05rem; color: var(--text); }
        .article-content ul { line-height: 1.8; padding-left: 20px; margin-bottom: 20px; color: var(--text); }
        .article-content li { margin-bottom: 10px; }
        
        .highlight-box { background: var(--input-bg); border-left: 5px solid var(--accent); padding: 20px; border-radius: 0 8px 8px 0; margin: 25px 0; }
        .highlight-box h4 { margin: 0 0 10px 0; color: var(--accent); font-size: 1.1rem; display: flex; align-items: center; gap: 8px; }

        /* Formulas & Steps */
        .formula {
            background: var(--bg); border-left: 3px solid var(--accent); padding: 15px; margin: 12px 0; font-size: 1.1rem; border-radius: 4px; font-family: 'Courier New', monospace; overflow-x: auto; color: var(--heading);
        }
        .calculation-step {
            font-family: 'Courier New', monospace; background-color: rgba(0,0,0,0.03); padding: 15px; border-radius: 4px;
            margin-bottom: 15px; border-left: 4px solid var(--success); font-size: 0.95rem; line-height: 1.6;
        }
        body.dark-mode .calculation-step { background-color: rgba(255,255,255,0.05); }

        /* Message Box */
        .message-box { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); padding: 16px 28px; border-radius: 8px; box-shadow: 0 6px 16px rgba(0,0,0,0.25); z-index: 10000; font-weight: 600; color: white; opacity: 0; transition: all 0.4s; display: none; }
        .message-box.show { display: block; opacity: 1; top: 30px; }
        .hidden { display: none; }

        /* Footer (Strictly Preserved) */
        footer { background: var(--grad-dark); color: #CBD5E1; padding: 50px 0 20px 0; margin-top: 60px; }
        .footer-content { display: flex; justify-content: space-between; flex-wrap: wrap; gap: 40px; margin-bottom: 30px; }
        .footer-col { flex: 1; min-width: 200px; }
        .footer-col h4 { color: white; margin-bottom: 15px; font-weight: 700; }
        .footer-col ul { list-style: none; padding: 0; margin: 0; }
        .footer-col a { color: #CBD5E1; text-decoration: none; transition: color 0.3s; }
        .footer-col a:hover { color: var(--accent); }
        .social-buttons { display: flex; gap: 12px; margin-top: 15px; }
        .social-btn { width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; color: white; border-radius: 50%; font-size: 1.1rem; transition: transform 0.3s; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .social-btn:hover { transform: translateY(-4px); }
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.youtube { background-color: #FF0000; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .footer-disclaimer { text-align: center; padding-top: 25px; border-top: 1px solid #334155; max-width: 800px; margin: 0 auto; font-size: 0.9rem; }
        .footer-bottom { text-align: center; padding-top: 20px; font-size: 0.9rem; color: #94A3B8; }

        @media (max-width: 768px) {
            .container { padding: 0 15px; }
            .navbar { flex-direction: column; gap: 20px; }
            .nav-links { flex-direction: column; gap: 12px; text-align: center; }
            .form-row { grid-template-columns: 1fr; }
            .card { padding: 20px; }
            .footer-content { flex-direction: column; gap: 25px; }
            .results-grid { grid-template-columns: 1fr; }
        }
    </style>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div id="message-box" class="message-box"></div>

    <header class="header">
        <div class="header-bg-animation"></div>
        <div class="container">
            <nav class="navbar">
                <a href="/" class="logo-container">
                    <img src="logo.png" alt="Design Calculators Logo" class="logo">
                    <span class="logo-text">Design Calculators</span>
                </a>

                <div class="nav-menu">
                    <button class="mobile-menu-toggle" aria-label="Toggle menu">
                        <i class="fas fa-bars"></i>
                    </button>

                    <ul class="nav-links">
                        <li><a href="/index.html">Home</a></li>
                        
    <li class="dropdown">
        <a href="/indexele.html" class="dropdown-toggle">Electrical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/arcflash.html">Arc Flash Calculator</a><a href="/breaker-sizing.html">Breaker Sizing</a><a href="/cable-thermal-rating.html">Cable Ampacity</a><a href="/comm-cable-loss.html">Comm Cable Loss</a><a href="/earth-conductor-size.html">Earth Conductor Size</a><a href="/generatorsizing.html">Generator Sizing</a><a href="/harmonicsanalyser.html">Harmonics Analyser</a><a href="/insulationresistance.html">Insulation Resistance</a><a href="/logicgate.html">Logic Gates Simulator</a><a href="/motor-starting.html">Motor Starting Current</a><a href="/pcbtrace.html">PCB Trace Width</a><a href="/protection-device.html">Protection Device</a><a href="/resistor.html">Resistor Color Code</a><a href="/solarcable.html">Solar Cable Sizing</a><a href="/systemxrcalculator.html">System X/R Ratio</a><a href="/transmissionline.html">Transmission Line</a><a href="/vfd-selection.html">VFD Selection Tool</a></div><div><a href="/batterylife.html">Battery Life Estimator</a><a href="/busbarampacity.html">Busbar Ampacity</a><a href="/cablepulling.html">Cable Pulling Tension</a><a href="/conduit-fill.html">Conduit Fill Calculator</a><a href="/earthingfaultsimulator.html">Earthing Fault Simulator</a><a href="/grounding.html">Grounding System Design</a><a href="/hvac-sizing.html">HVAC Sizing Calculator</a><a href="/lcresonancecalculator.html">LC Resonance Calculator</a><a href="/maintenance-guide.html">Maintenance Guide</a><a href="/nemaipconvertor.html">NEMA to IP Converter</a><a href="/power-factor.html">Power Factor Correction</a><a href="/relay-coordination.html">Relay Coordination</a><a href="/short-circuit.html">Short Circuit Current</a><a href="/solarpvarray.html">Solar PV Array</a><a href="/transformer-calculator.html">Transformer Calculator</a><a href="/unit-converter.html">Unit Converter</a><a href="/voltage-drop.html">Voltage Drop Calculator</a></div><div><a href="/battery-sizing.html">Battery Sizing (AH)</a><a href="/busbarshortcircuit.html">Busbar Short Circuit</a><a href="/cable-sizing.html">Cable Sizing Calculator</a><a href="/ctsaturation.html">CT Saturation</a><a href="/equipment-relay.html">Equipment Relay Setting</a><a href="/harmonic-distortion.html">Harmonic Distortion</a><a href="/industriallighting.html">Industrial Lighting</a><a href="/lighting-calulator.html">Lighting Calculator</a><a href="/motor-efficiency.html">Motor Efficiency</a><a href="/neutral-earth-fault-current.html">Neutral Earth Fault</a><a href="/powertriangletool.html">Power Triangle</a><a href="/electricalresidentialload.html">Residential Load Calc</a><a href="/skindepth.html">Skin Depth Calculator</a><a href="/symmetricalcomponents.html">Symmetrical Components</a><a href="/transformerinrush.html">Transformer Inrush</a><a href="/ups-sizing.html">UPS Sizing</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexele.html" class="view-all-link">View All Electrical Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexinst.html" class="dropdown-toggle">Instrumentation <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/adc-resolution.html">ADC Resolution</a><a href="/capillarylengthtemperatureerror.html">Capillary Error</a><a href="/cv-kv-valve.html">Cv/Kv Valve Sizing</a><a href="/dp-level.html">DP Level Measurement</a><a href="/hydrostatic-level.html">Hydrostatic Level</a><a href="/instrument-range.html">Instrument Range</a><a href="/loop-impedance.html">Loop Impedance</a><a href="/orifice-plate.html">Orifice Plate Beta</a><a href="/pid-tuning.html">PID Tuning</a><a href="/profibus.html">Profibus Calculator</a><a href="/tempsensorresponse.html">Response Time (Tau)</a><a href="/rtd-lead-comp.html">RTD Lead Wire Comp.</a><a href="/sealfluidzeroshift.html">Seal Fluid Shift</a><a href="/snr-calculator.html">SNR Calculator</a><a href="/thermocoupleextensioncable.html">TC Extension Cable</a><a href="/thermowellwakefreq.html">Thermowell Frequency</a><a href="/pressuretransmitteroverrange.html">Tx Overrange</a><a href="/valvecavitationcalculator.html">Valve Cavitation</a><a href="/vibrationtransmitter.html">Vibration Tx</a><a href="/zoneclassificationhelper.html">Zone Classification</a></div><div><a href="/baud-rate.html">Baud Rate Calculator</a><a href="/gascompressibility.html">Compressibility (Z)</a><a href="/dbcalculator.html">dB Gain/Loss Calc</a><a href="/flowprofiledistortioncalculator.html">Flow Distortion</a><a href="/impulselinefreezing.html">Impulse Freezing</a><a href="/intrinsic-safety.html">Intrinsic Safety Loop</a><a href="/measurement.html">Measurement Uncertainty</a><a href="/ph-temp-comp.html">pH Temp Compensation</a><a href="/plcscantime.html">PLC Scan Time</a><a href="/pressurereliefvalve.html">PRV Sizing (API 520)</a><a href="/reynoldsnumbercal.html">Reynolds Number</a><a href="/rtdselfheating.html">RTD Self-Heating</a><a href="/signal-scaling.html">Signal Scaling</a><a href="/staticheadcal.html">Static Head</a><a href="/temperaturesensorlag.html">Temp Sensor Lag</a><a href="/thermowell-wake.html">Thermowell Wake</a><a href="/ultrasoniclevel.html">Ultrasonic Level</a><a href="/valve-cv.html">Valve Cv Viewer</a><a href="/wetlegdensitycompensation.html">Wet Leg Compensation</a></div><div><a href="/capacitance-level.html">Capacitance Level</a><a href="/controlvalvenoise.html">Control Valve Noise</a><a href="/dp-flow-conversion.html">DP Flow Conversion</a><a href="/hartdevices.html">HART Devices</a><a href="/impulse-pressure-drop.html">Impulse Pressure Drop</a><a href="/junctionbox.html">Junction Box Sizing</a><a href="/orifice-flow.html">Orifice Flow Calculator</a><a href="/pid-symbol-library.html">PID Symbol Library</a><a href="/power-supply-load.html">Power Supply Load</a><a href="/prvsizing.html">Relief Orifice Area</a><a href="/rtdexcitationcurrentselection.html">RTD Excitation</a><a href="/rtd-tc-conversion.html">RTD/TC Conversion</a><a href="/sil.html">SIL Calculator</a><a href="/steamflow.html">Steam Flow</a><a href="/thermocouplecjccalculator.html">Thermocouple CJC</a><a href="/turndown.html">Turndown Ratio</a><a href="/controlvalveauthority.html">Valve Authority</a><a href="/controlvalveleakage.html">Valve Leakage Class</a><a href="/wirelesshart.html">WirelessHART Range</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexinst.html" class="view-all-link">View All Instrumentation Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexmech.html" class="dropdown-toggle">Mechanical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/aircompressorfad.html">Air Compressor FAD</a><a href="/asme-vessel.html">ASME Vessel Design</a><a href="/belt-pulley.html">Belt & Pulley</a><a href="/bolt-torque.html">Bolt Torque</a><a href="/controlvalveactuator.html">Control Valve Actuator</a><a href="/frictionfactortool.html">Darcy Friction Factor</a><a href="/fatigue.html">Fatigue Analysis</a><a href="/fuel-combustion.html">Fuel Combustion</a><a href="/gas.html">Gas Properties</a><a href="/heat-exchanger.html">Heat Exchanger</a><a href="/hydroliccylinder.html">Hydraulic Cylinder</a><a href="/material-compatibility.html">Material Compatibility</a><a href="/nozzle-reinforcement.html">Nozzle Reinforcement</a><a href="/openchannelflow.html">Open Channel Flow</a><a href="/pipescheduletool.html">Pipe Schedule & Stress</a><a href="/pump-head.html">Pump Head</a><a href="/shaft-power-torque.html">Shaft Power & Torque</a><a href="/steam-table.html">Steam Table</a><a href="/vibrationanalysis.html">Vibration Analysis</a></div><div><a href="/air-flow-duct.html">Air Flow Duct Sizing</a><a href="/beam-deflection.html">Beam Deflection</a><a href="/bernoulli-equation.html">Bernoulli Equation</a><a href="/chiller-capacity.html">Chiller Capacity</a><a href="/cooling-tower-sizing.html">Cooling Tower Sizing</a><a href="/darcy-weisbach.html">Darcy-Weisbach</a><a href="/finned-tube-heat-transfer.html">Finned Tube Heat</a><a href="/furnace-heat-duty.html">Furnace Heat Duty</a><a href="/gear-design.html">Gear Design</a><a href="/heat-loss-pipes.html">Heat Loss Pipes</a><a href="/jacketed-vessel-heat-transfer.html">Jacketed Vessel</a><a href="/metalweight.html">Metal Weight Calculator</a><a href="/nptbspthreadcalculator.html">NPT/BSP Threads</a><a href="/overall-heat-transfer.html">Overall Heat Transfer</a><a href="/pipe-stress-flexibility.html">Pipe Stress</a><a href="/pump-power.html">Pump Power</a><a href="/specific-heat-enthalpy.html">Specific Heat</a><a href="/storage-tank-volume.html">Storage Tank Volume</a><a href="/weldingstress.html">Welding Stress</a></div><div><a href="/allowable-stress-safety-factor.html">Allowable Stress</a><a href="/bearinglife.html">Bearing Life Calculator</a><a href="/boiler-efficiency.html">Boiler Efficiency</a><a href="/compressor-power.html">Compressor Power</a><a href="/corrosion-rate.html">Corrosion Rate</a><a href="/fan-laws.html">Fan Laws</a><a href="/foundation.html">Foundation Design</a><a href="/gas-laws.html">Gas Laws</a><a href="/hardness.html">Hardness Converter</a><a href="/conduction-convection-radiation.html">Heat Transfer Modes</a><a href="/machining.html">Machining Calculator</a><a href="/momentofinertia.html">Moment of Inertia</a><a href="/oring.html">O-Ring Sizing</a><a href="/pipe-flow.html">Pipe Flow Calculator</a><a href="/psychrometric.html">Psychrometric Calc</a><a href="/reynolds-number.html">Reynolds Number</a><a href="/spring.html">Spring Design</a><a href="/thermal-expansion.html">Thermal Expansion</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexmech.html" class="view-all-link">View All Mechanical Tools â†’</a>
            </div>
        </div>
    </li>
                        <li><a href="/index.html#articles">Articles</a></li>
                        <li><a href="/sitemap2.html">Site Map</a></li>
                    </ul>

                    <div class="theme-toggle">
                        <i class="fas fa-sun icon"></i>
                        <label class="switch">
                            <input type="checkbox" id="theme-switch">
                            <span class="slider"></span>
                        </label>
                        <i class="fas fa-moon icon"></i>
                    </div>
                </div>
            </nav>
    </header>

    <main class="container">
        <div class="card">
            <h2><i class="fas fa-bolt"></i> Industrial Busbar Ampacity Calculator</h2>
            
            <div class="tool-description">
                <p>High-performance ampacity calculator for Copper and Aluminum busbars. Complies with <strong>DIN 43671</strong> and <strong>IEEE 605</strong> thermal models. Accounts for Skin Effect, Proximity Effect, Emissivity, and Convection/Radiation balance.</p>
            </div>

            <div class="calculator-form">
                <form id="bus-form">
                    
                    <div class="form-group">
                        <label>Quick Load Presets:</label>
                        <div class="preset-container" style="margin-bottom: 0;">
                            <button type="button" class="preset-btn" onclick="loadPreset('cu_lv')"><i class="fas fa-industry"></i> LV Copper 1000A</button>
                            <button type="button" class="preset-btn" onclick="loadPreset('al_mv')"><i class="fas fa-broadcast-tower"></i> MV Aluminum 2000A</button>
                            <button type="button" class="preset-btn" onclick="loadPreset('cu_hv')"><i class="fas fa-bolt"></i> Heavy Duty 4000A</button>
                        </div>
                    </div>

                    <!-- GEOMETRY & MATERIAL -->
                    <div class="input-section">
                        <div class="section-title">1. Conductor Specification</div>
                        <div class="form-row" style="grid-template-columns: 1fr 1fr 1fr;">
                            <div class="form-group">
                                <label>Material Type <div class="tooltip-container"><i class="fas fa-info-circle info-icon"></i><span class="tooltip-text">Copper ETP (58 MS/m) or Aluminum (35 MS/m). Affects conductivity and density.</span></div></label>
                                <select id="mat-type">
                                    <option value="cu">Copper (ETP)</option>
                                    <option value="al">Aluminum (6101)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Arrangement <div class="tooltip-container"><i class="fas fa-info-circle info-icon"></i><span class="tooltip-text">Vertical (Edge-to-Edge) allows better convection cooling than Horizontal (Flat).</span></div></label>
                                <select id="arr-type">
                                    <option value="vert">Vertical (Edge)</option>
                                    <option value="horiz">Horizontal (Flat)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Surface Condition <div class="tooltip-container"><i class="fas fa-info-circle info-icon"></i><span class="tooltip-text">Painted surfaces radiate heat much better (E=0.9) than shiny bare metal (E=0.15).</span></div></label>
                                <select id="surf-cond">
                                    <option value="0.35">Bare / Oxidized (Typ)</option>
                                    <option value="0.9">Painted / Sleeved</option>
                                    <option value="0.15">Shiny / Polished</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Width (mm)</label>
                                <input type="number" id="bus-w" value="100" step="1">
                            </div>
                            <div class="form-group">
                                <label>Thickness (mm)</label>
                                <input type="number" id="bus-t" value="10" step="1">
                            </div>
                            <div class="form-group">
                                <label>Bars per Phase ($n$)</label>
                                <input type="number" id="bus-n" value="2" min="1" max="4" step="1">
                            </div>
                            <div class="form-group">
                                <label>Bar Spacing (mm) <div class="tooltip-container"><i class="fas fa-info-circle info-icon"></i><span class="tooltip-text">Gap between parallel bars of the same phase. Critical for cooling and proximity effect.</span></div></label>
                                <input type="number" id="bus-space" value="10" step="1">
                            </div>
                        </div>
                    </div>

                    <!-- ELECTRICAL & THERMAL -->
                    <div class="input-section">
                        <div class="section-title">2. Environment & Load</div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Ambient Temp ($T_a$) (°C)</label>
                                <input type="number" id="temp-amb" value="40" step="1">
                            </div>
                            <div class="form-group">
                                <label>Max Conductor Temp ($T_c$) (°C) <div class="tooltip-container"><i class="fas fa-info-circle info-icon"></i><span class="tooltip-text">Usually limited by insulation or bolt connections. Typ: 85°C or 105°C.</span></div></label>
                                <input type="number" id="temp-max" value="85" step="1">
                            </div>
                            <div class="form-group">
                                <label>Frequency (Hz)</label>
                                <select id="sys-freq">
                                    <option value="50">50 Hz</option>
                                    <option value="60">60 Hz</option>
                                    <option value="0">DC</option>
                                </select>
                            </div>
                             <div class="form-group">
                                <label>Enclosure <div class="tooltip-container"><i class="fas fa-info-circle info-icon"></i><span class="tooltip-text">Indoor panels trap heat (Derate ~0.8). Outdoor ventilated is better.</span></div></label>
                                <select id="env-type">
                                    <option value="indoor">Indoor (Unventilated)</option>
                                    <option value="outdoor">Outdoor / Open Air</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="button-wrapper">
                        <button type="button" class="btn btn-outline" onclick="window.print()"><i class="fas fa-print"></i> Print Report</button>
                        <button type="button" id="calculate-btn" class="btn"><i class="fas fa-calculator"></i> Calculate Ampacity</button>
                    </div>
                </form>
            </div>

            <!-- Results Section -->
            <div id="result-container" class="card hidden" style="margin-top: 40px;">
                <h3><i class="fas fa-poll"></i> Calculation Results</h3>
                
                <div class="results-grid">
                    <!-- Left Col: Table -->
                    <div>
                        <h4 style="margin-top: 0; color: var(--primary); margin-bottom: 15px;">Capacity Rating</h4>
                        <table class="results-table">
                            <tbody>
                                <tr>
                                    <td><strong>Continuous Ampacity ($I_{rated}$)</strong></td>
                                    <td><span class="val" id="res-amp" style="font-size:1.4rem; color:var(--success);">0</span> <span class="unit">Amps</span></td>
                                </tr>
                                <tr>
                                    <td>Heat Dissipation ($P_{loss}$)</td>
                                    <td><span class="val" id="res-loss">0.0</span> <span class="unit">W/m</span></td>
                                </tr>
                                <tr>
                                    <td>AC Resistance ($R_{ac}$) at $T_c$</td>
                                    <td><span class="val" id="res-rac">0.000</span> <span class="unit">mΩ/m</span></td>
                                </tr>
                                <tr>
                                    <td>Current Density ($J$)</td>
                                    <td><span class="val" id="res-j">0.00</span> <span class="unit">A/mm²</span></td>
                                </tr>
                                <tr>
                                    <td>Skin Effect Factor ($k_s$)</td>
                                    <td><span class="val" id="res-ks">1.00</span></td>
                                </tr>
                                <tr>
                                    <td>Proximity Factor ($k_p$)</td>
                                    <td><span class="val" id="res-kp">1.00</span></td>
                                </tr>
                            </tbody>
                        </table>
                        <div style="margin-top:15px; font-size:0.9rem; color:var(--text);">
                            <i class="fas fa-info-circle info-icon"></i> Calculated for <span id="txt-bars">2</span> bars of <span id="txt-dims">100x10</span> mm (<span id="txt-mat">Cu</span>).
                        </div>
                    </div>

                    <!-- Right Col: Chart -->
                    <div>
                        <h4 style="margin-top: 0; color: var(--primary); margin-bottom: 10px;">Temperature Rise Curve</h4>
                        <div class="chart-container">
                            <canvas id="tempChart"></canvas>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: 30px; border-top: 1px solid var(--border); padding-top: 20px;">Thermal Model Derivation</h4>
                <div id="calculation-details"></div>
                
                <div style="margin-top:30px; display:flex; gap:20px; justify-content:center;">
                     <div class="canvas-wrapper" style="flex:1; max-width:400px;">
                         <canvas id="barVisual"></canvas>
                     </div>
                </div>

                <div class="standard-reference" style="margin-top: 20px; font-style: italic; color: var(--text);">
                     Ampacity based on thermal equilibrium ($Heat_{gen} = Heat_{conv} + Heat_{rad}$). Compliant with DIN 43671 coefficients.
                </div>
            </div>
        </div>

        <!-- EDUCATIONAL CONTENT -->
        <div class="education-section card">
            <div class="card-header" style="margin-bottom:25px;">
                <h2><i class="fas fa-book-reader"></i> Technical Deep Dive: Busbar Physics</h2>
            </div>
            
            <div class="tech-article">
                <!-- TOC -->
                <div class="toc-sticky">
                    <h4>Table of Contents</h4>
                    <ul>
                        <li><a href="#thermal">1. The Thermal Equilibrium</a></li>
                        <li><a href="#skin">2. Skin & Proximity Effects</a></li>
                        <li><a href="#geometry">3. Geometry & Arrangement</a></li>
                        <li><a href="#emissivity">4. The Role of Emissivity</a></li>
                        <li><a href="#standards">5. Applicable Standards</a></li>
                    </ul>
                </div>

                <!-- Content -->
                <div class="article-content">
                    <div id="thermal">
                        <h3>1. The Thermal Equilibrium: Balancing Heat</h3>
                        <p>A busbar's current rating isn't a fixed number defined by a table; it's a thermodynamic limit. Current flow generates heat via Joule heating ($I^2R$). This heat must be dissipated into the surrounding air. The ampacity is the exact current where Heat Generated equals Heat Dissipated.</p>
                        <div class="formula">$$ P_{generated} = P_{convection} + P_{radiation} $$</div>
                        <p>If you push more current than this limit, heat generation exceeds dissipation, and the temperature spirals upward until the insulation melts or bolted joints fail due to thermal expansion.</p>
                    </div>

                    <div id="skin">
                        <h3>2. Skin & Proximity Effects: Why AC is Harder</h3>
                        <p>In DC systems, current flows uniformly through the entire cross-section. In AC (50/60Hz) systems, physics gets messy:</p>
                        <ul>
                            <li><strong>Skin Effect:</strong> Alternating magnetic fields push current to the outer surface. A 10mm thick copper bar has a "dead zone" in the center at 60Hz. This effectively reduces the usable cross-section, increasing resistance ($R_{ac} > R_{dc}$). </li>
                            <li><strong>Proximity Effect:</strong> When bars are close together, their magnetic fields fight, pushing current to the far edges of the assembly. This creates "hot spots" and further reduces capacity.</li>
                        </ul>
                        <p>This calculator uses the <strong>Leher Formula</strong> and standard DIN coefficients to accurately estimate $k_{skin}$ and $k_{prox}$ based on your specific bar dimensions and spacing.</p>
                    </div>

                    <div id="geometry">
                        <h3>3. Geometry & Arrangement: Vertical vs. Horizontal</h3>
                        <p><strong>Vertical Mounting (Edge-to-Edge):</strong> Hot air rises. Vertical bars allow air to flow smoothly up along the wide faces (chimney effect), maximizing convection cooling. This is the preferred orientation for high-current systems.</p>
                        <p><strong>Horizontal Mounting (Flat):</strong> Air gets trapped under the flat face and stagnates on top. This reduces convective cooling efficiency by ~15-20%, requiring larger bars for the same current.</p>
                        <div class="highlight-box">
                            <h4><i class="fas fa-layer-group"></i> Parallel Bars Strategy</h4>
                            <p>Using 2 bars of 100x5 is better than 1 bar of 100x10? <strong>Yes!</strong> It doubles the surface area for cooling. However, adding a 3rd or 4th bar has diminishing returns because the inner bars are shielded from fresh air and radiation by the outer bars. This tool automatically applies the DIN derating factors (1.7x for 2 bars, 2.25x for 3 bars).</p>
                        </div>
                    </div>

                    <div id="emissivity">
                        <h3>4. The Role of Emissivity</h3>
                        <p>Shiny copper looks nice but is terrible at radiating heat ($\epsilon \approx 0.1$). Painting the busbar black (or sleeving it) increases emissivity to $\approx 0.9$, drastically improving radiation cooling. This simple change can boost ampacity by 15-20% without adding a single gram of copper.</p>
                    </div>

                    <div id="standards">
                        <h3>5. Applicable Standards</h3>
                        <ul>
                            <li><strong>DIN 43671:</strong> The global benchmark for busbar sizing. It provides the specific heat transfer coefficients and multi-bar factors used in this tool.</li>
                            <li><strong>IEEE 605:</strong> Guide for Bus Design in Air Insulated Substations. Focuses on solar radiation and outdoor weathering effects.</li>
                            <li><strong>IEC 61439:</strong> Low-voltage switchgear and controlgear assemblies. Defines temperature rise limits (usually 105°C max).</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </main>

        <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <a href="/" class="footer-logo">
                        <img src="logo.png" alt="Design Calculators Logo" loading="lazy" decoding="async">
                        <span class="footer-logo-text">Design Calculators</span>
                    </a>
                    <p class="footer-description">A comprehensive engineering calculator hub based on IEC, IEEE, and
                        global standards.</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn linkedin"
                            aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer"
                            class="social-btn youtube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in&text=Check%20out%20this%20amazing%20engineering%20calculator%20hub!"
                            target="_blank" rel="noopener noreferrer" class="social-btn twitter" aria-label="Twitter"><i
                                class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn facebook"
                            aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn whatsapp"
                            aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="footer-col">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href='/indexele.html'>Electrical Tools</a></li>
                            <li><a href='/indexmech.html'>Mechanical Tools</a></li>
                            <li><a href='/indexinst.html'>Instrumentation Tools</a></li>
                            <li><a href='/about.html'>About Us</a></li>
                            <li><a href='/faq.html'>FAQ</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Learn More</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/@designcalculators" target="_blank"
                                    rel="noopener noreferrer">YouTube Channel</a></li>
                            <li><a href='/contact.html'>Contact Us</a></li>
                            <li><a href='/privacy-policy.html'>Privacy Policy</a></li>
                            <li><a href='/terms-of-service.html'>Terms of Service</a></li>
                            <li><a href='/sitemap2.html'>Sitemap</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Our Network</h4>
                        <ul>
                            <li style="margin-bottom: 12px;">
                                <a href="https://reliabilitytools.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">Reliability Tools</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Reliability
                                    & maintenance engineering calculators.</span>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="https://electrosafe.homes/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">ElectroSafe</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Dedicated
                                    to home electrical safety & protection.</span>
                            </li>
                            <li>
                                <a href="https://knowyourname.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">KnowYourName</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Scientific
                                    name analysis: Phonetics, Ergonomics & Acoustics.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>All calculations are for preliminary engineering design guidance. Final designs must comply with all applicable local and international standards (including but not limited to ASHRAE 90.1, ARI 550/590). Always verify calculations and consult with a licensed professional engineer before implementation or construction.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">Anil Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // --- UTILS ---
        const themeSwitch = document.getElementById('theme-switch');
        if (themeSwitch && localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
            themeSwitch.checked = true;
        }
        if(themeSwitch) {
            themeSwitch.addEventListener('change', function() {
                document.body.classList.toggle('dark-mode');
                localStorage.setItem('theme', this.checked ? 'dark' : 'light');
            });
        }

        function displayMessage(message, type = "info") {
            let messageBox = document.getElementById('message-box');
            if (!messageBox) return;
            messageBox.textContent = message;
            if (type === "error") messageBox.style.backgroundColor = 'var(--danger)';
            else messageBox.style.backgroundColor = 'var(--primary)';
            messageBox.classList.add('show');
            setTimeout(() => messageBox.classList.remove('show'), 4000);
        }

        function loadPreset(key) {
            // Presets
            const s = {
                'cu_lv': {mat:'cu', w:100, t:10, n:2, sp:10, ta:40, tc:85, f:50, env:'indoor', arr:'vert', surf:0.35},
                'al_mv': {mat:'al', w:120, t:12, n:2, sp:12, ta:40, tc:85, f:50, env:'indoor', arr:'vert', surf:0.35},
                'cu_hv': {mat:'cu', w:160, t:10, n:4, sp:10, ta:40, tc:105, f:60, env:'outdoor', arr:'vert', surf:0.9}
            };
            const d = s[key];
            if(d) {
                document.getElementById('mat-type').value = d.mat;
                document.getElementById('bus-w').value = d.w;
                document.getElementById('bus-t').value = d.t;
                document.getElementById('bus-n').value = d.n;
                document.getElementById('bus-space').value = d.sp;
                document.getElementById('temp-amb').value = d.ta;
                document.getElementById('temp-max').value = d.tc;
                document.getElementById('sys-freq').value = d.f;
                document.getElementById('env-type').value = d.env;
                document.getElementById('arr-type').value = d.arr;
                document.getElementById('surf-cond').value = d.surf;
                displayMessage("Scenario Loaded", "success");
            }
        }

        // --- CALCULATION ENGINE ---
        let tempChart = null;

        document.getElementById('calculate-btn').addEventListener('click', function() {
            // 1. Inputs
            const mat = document.getElementById('mat-type').value;
            const w_mm = parseFloat(document.getElementById('bus-w').value);
            const t_mm = parseFloat(document.getElementById('bus-t').value);
            const n = parseFloat(document.getElementById('bus-n').value);
            const s_mm = parseFloat(document.getElementById('bus-space').value);
            
            const Ta = parseFloat(document.getElementById('temp-amb').value);
            const Tc_max = parseFloat(document.getElementById('temp-max').value);
            const f = parseFloat(document.getElementById('sys-freq').value);
            const env = document.getElementById('env-type').value;
            const arr = document.getElementById('arr-type').value;
            const emiss = parseFloat(document.getElementById('surf-cond').value);

            if([w_mm, t_mm, n, s_mm, Tc_max].some(x => x<=0)) return displayMessage("Check inputs. Positive values required.", "error");

            // 2. Physics Constants & Material Props
            // Resistivity at 20C (ohm-mm2/m)
            const rho20 = (mat === 'cu') ? 0.01724 : 0.02826;
            const alpha = (mat === 'cu') ? 0.00393 : 0.00403;
            const density = (mat === 'cu') ? 8.96 : 2.70; // g/cm3

            // Temp Rise
            const dT = Tc_max - Ta;
            if(dT <= 0) return displayMessage("Max Temp must be > Ambient", "error");

            // 3. Resistance Calc (R_dc at Tc)
            const rhoTc = rho20 * (1 + alpha * (Tc_max - 20));
            const Area_mm2 = w_mm * t_mm * n; // Total Cross Section
            // R_dc per meter (ohm/m) = (rho * 1m) / Area_mm2
            const Rdc = rhoTc / (Area_mm2); // Ohm/m

            // 4. AC Factors (Skin & Proximity)
            let k_skin = 1.0;
            let k_prox = 1.0;

            if(f > 0) {
                const rho_SI = rhoTc * 1e-6;
                const delta = 503 * Math.sqrt(rho_SI / f) * 1000; // mm
                
                // Skin Factor approximation for Rectangular bars (Dwight/Leher)
                const k_skin_base = (mat==='cu') ? 1.05 : 1.02; // Base AC adder
                k_skin = 1 + (k_skin_base - 1) * (t_mm/5) * Math.sqrt(f/50);

                // Proximity (Multiple bars)
                if(n > 1) {
                    k_prox = 1 + (0.05 * (n-1) * (w_mm/s_mm) * 0.1); 
                }
            }
            
            const Rac = Rdc * k_skin * k_prox;

            // 5. Heat Dissipation (Watts/m)
            // Effective cooling surface area calculation (DIN 43671 logic)
            const P_single = 2 * (w_mm + t_mm) / 1000;
            let S_eff = P_single;
            if(n > 1) {
                // DIN Factors: 2 bars -> 1.8x area, 3 bars -> 2.4x area
                // This accounts for shielding
                const factor = (n==2)?1.8 : (n==3)?2.4 : 2.8;
                S_eff = (2 * (w_mm + t_mm) / 1000) * factor;
            } else {
                S_eff = 2 * (w_mm + t_mm) / 1000;
            }

            // Radiation (Stefan-Boltzmann)
            const T2_k = Tc_max + 273.15;
            const T1_k = Ta + 273.15;
            const W_rad = 5.67e-8 * emiss * S_eff * (Math.pow(T2_k, 4) - Math.pow(T1_k, 4));

            // Convection
            let K_conv = (arr === 'vert') ? 2.5 : 1.8;
            if(env === 'indoor') K_conv *= 0.75; // Enclosure derating
            
            const W_conv = K_conv * S_eff * Math.pow(dT, 1.25);

            // Total Dissipation Capacity
            const W_total = W_rad + W_conv;

            // 6. Ampacity Calculation
            // I = sqrt( W_total / R_ac )
            const I = Math.sqrt(W_total / Rac);

            // Current Density J
            const J = I / Area_mm2;

            // 7. Outputs
            const set = (id, v) => document.getElementById(id).textContent = v;
            set('res-amp', I.toFixed(0));
            set('res-loss', W_total.toFixed(1));
            set('res-rac', (Rac*1000).toFixed(4));
            set('res-j', J.toFixed(2));
            set('res-ks', k_skin.toFixed(2));
            set('res-kp', k_prox.toFixed(2));
            
            set('txt-bars', n);
            set('txt-dims', `${w_mm}x${t_mm}`);
            set('txt-mat', mat==='cu'?'Copper':'Aluminum');

            // 8. Math Steps
            const math = (t) => `$$${t}$$`;
            let html = `<div class="calculation-step">`;
            html += `<strong>1. Resistance at Operating Temp (${Tc_max}°C):</strong><br>`;
            html += math(`R_{dc,${Tc_max}} = \\frac{\\rho_{20}(1+\\alpha \\Delta T)}{A} = \\frac{${rho20}(1+${alpha}\\times${Tc_max-20})}{${Area_mm2}} = ${(Rdc*1000).toFixed(4)} \\text{ m}\\Omega/m`);
            html += `</div>`;

            html += `<div class="calculation-step">`;
            html += `<strong>2. AC Factors (Skin & Proximity):</strong><br>`;
            html += math(`R_{ac} = R_{dc} \\times k_{skin} \\times k_{prox} = ${Rdc.toFixed(6)} \\times ${k_skin.toFixed(2)} \\times ${k_prox.toFixed(2)} = \\mathbf{${(Rac*1000).toFixed(4)} \\text{ m}\\Omega/m}`);
            html += `</div>`;

            html += `<div class="calculation-step">`;
            html += `<strong>3. Heat Dissipation Balance:</strong><br>`;
            html += math(`W_{rad} = \\sigma \\epsilon S (T_c^4 - T_a^4) = ${W_rad.toFixed(1)} \\text{ W/m}`);
            html += math(`W_{conv} = K_{geometry} S (\\Delta T)^{1.25} = ${W_conv.toFixed(1)} \\text{ W/m}`);
            html += math(`I = \\sqrt{\\frac{W_{rad} + W_{conv}}{R_{ac}}} = \\sqrt{\\frac{${W_total.toFixed(1)}}{${Rac.toFixed(6)}}} = \\mathbf{${I.toFixed(0)} \\text{ A}}`);
            html += `</div>`;

            document.getElementById('calculation-details').innerHTML = html;
            
            // Charts & Visuals
            drawTempChart(I, Rac, S_eff, K_conv, emiss, Ta);
            drawVisual(n, w_mm, t_mm, s_mm, arr);

            // Show
            const resBox = document.getElementById('result-container');
            resBox.classList.remove('hidden');
            if(window.MathJax) window.MathJax.typesetPromise();
            resBox.scrollIntoView({ behavior: 'smooth' });
        });

        function drawTempChart(I_rated, R, S, K, E, Ta) {
            const ctx = document.getElementById('tempChart').getContext('2d');
            if(tempChart) tempChart.destroy();

            const data = [];
            const labels = [];
            
            // Curve: I vs Temp Rise (Delta T from 10 to 80)
            for(let dt=10; dt<=90; dt+=10) {
                const Tc = Ta + dt;
                const T2k = Tc + 273.15;
                const T1k = Ta + 273.15;
                const W_r = 5.67e-8 * E * S * (Math.pow(T2k, 4) - Math.pow(T1k, 4));
                const W_c = K * S * Math.pow(dt, 1.25);
                const W_t = W_r + W_c;
                
                const I = Math.sqrt(W_t / R);
                data.push(I);
                labels.push(dt);
            }

            tempChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Ampacity vs Temp Rise (A)',
                        data: data,
                        borderColor: '#2563EB',
                        backgroundColor: 'rgba(37, 99, 235, 0.1)',
                        fill: true,
                        tension: 0.3
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: {display:true, text:'Temp Rise (°C)'} },
                        y: { title: {display:true, text:'Ampacity (A)'} }
                    }
                }
            });
        }

        function drawVisual(n, w, t, s, orient) {
            const canvas = document.getElementById('barVisual');
            const ctx = canvas.getContext('2d');
            canvas.width = 400; canvas.height = 200;
            ctx.clearRect(0,0,400,200);

            const cx = 200, cy = 100;
            const scale = 1.5; 
            
            ctx.fillStyle = '#F59E0B'; 
            ctx.strokeStyle = '#333';

            if(orient === 'vert') {
                const totalW = n*t + (n-1)*s;
                let startX = cx - (totalW*scale)/2;
                
                for(let i=0; i<n; i++) {
                    ctx.fillRect(startX, cy - (w*scale)/2, t*scale, w*scale);
                    ctx.strokeRect(startX, cy - (w*scale)/2, t*scale, w*scale);
                    startX += (t+s)*scale;
                }
            } else {
                const totalH = n*t + (n-1)*s;
                let startY = cy - (totalH*scale)/2;
                
                for(let i=0; i<n; i++) {
                    ctx.fillRect(cx - (w*scale)/2, startY, w*scale, t*scale);
                    ctx.strokeRect(cx - (w*scale)/2, startY, w*scale, t*scale);
                    startY += (t+s)*scale;
                }
            }
            
            // Convection Arrows
            ctx.strokeStyle = '#3B82F6';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(cx-50, cy+80); ctx.lineTo(cx-50, cy-80);
            ctx.moveTo(cx+50, cy+80); ctx.lineTo(cx+50, cy-80);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(cx-55, cy-70); ctx.lineTo(cx-50, cy-80); ctx.lineTo(cx-45, cy-70);
            ctx.moveTo(cx+45, cy-70); ctx.lineTo(cx+50, cy-80); ctx.lineTo(cx+55, cy-70);
            ctx.stroke();
            
            ctx.fillStyle = '#333';
            ctx.font = '12px Inter';
            ctx.fillText("Airflow", cx-70, cy+90);
        }
    </script>
</body>
</html>
