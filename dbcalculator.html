<!DOCTYPE html>
<html lang="en">

<head>
    <!-- AdSense & Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
        crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>

    <!-- SEO Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Industrial dB Calculator & RF Link Analysis (Gain/Loss)</title>
    <meta name="description"
        content="Professional Decibel (dB) Calculator for Signal Processing and RF Engineering. Convert Voltage/Power Ratios, calculate dBm/dBW/dBu, and analyze RF Link Budgets (FSPL). Features step-by-step 10log/20log derivations and impedance corrections.">
    <meta name="keywords"
        content="db calculator, decibel conversion, dbm to watts, voltage gain calculator, rf path loss calculator, fspl calculator, signal to noise ratio, industrial telemetry, amplifier gain, attenuation calculator">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://designcalculators.co.in/dbcalculator.html" />

    <!-- JSON-LD Schema: Software Application -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Industrial Signal & dB Analyzer",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Web",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "A commercial-grade engineering tool for signal chain analysis. Performs precise decibel conversions, absolute power calculations (dBm, dBW), and Free Space Path Loss analysis for industrial communications.",
      "featureList": "Power/Voltage Ratio to dB, dBm/Watts Converter, RF Link Budget (FSPL), Impedance Correction, Signal Visualizer",
      "author": {
        "@type": "Organization",
        "name": "Design Calculators"
      }
    }
    </script>

    <!-- JSON-LD Schema: FAQ Page -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        { "@type": "Question", "name": "When do I use 10 log vs 20 log?", "acceptedAnswer": { "@type": "Answer", "text": "Use 10 log₁₀(P₂/P₁) for POWER ratios (Watts). Use 20 log₁₀(V₂/V₁) for FIELD quantities like Voltage (Volts) or Current (Amps). The factor of 20 comes from the fact that Power is proportional to Voltage squared ($P = V^2/R$)." } },
        { "@type": "Question", "name": "What is 0 dBm?", "acceptedAnswer": { "@type": "Answer", "text": "0 dBm is an absolute power level referenced to 1 milliwatt (1 mW). Positive values indicate power > 1mW (e.g., 30 dBm = 1W), while negative values indicate power < 1mW (e.g., -30 dBm = 1 microwatt)." } },
        { "@type": "Question", "name": "How does Impedance affect dBV calculations?", "acceptedAnswer": { "@type": "Answer", "text": "dBV is solely a voltage reference (1V). However, if you convert dBV to dBm (Power), impedance (Z) matters critically ($P = V^2/Z$). A 0 dBV signal is +13 dBm in a 50Ω system but only +2.2 dBm in a 600Ω system." } },
        { "@type": "Question", "name": "What is Free Space Path Loss (FSPL)?", "acceptedAnswer": { "@type": "Answer", "text": "FSPL quantifies the loss of signal strength as an electromagnetic wave spreads out in free space. It depends on distance and frequency. Doubling the distance or doubling the frequency results in a 6 dB additional loss." } },
        { "@type": "Question", "name": "Why is 3 dB significant?", "acceptedAnswer": { "@type": "Answer", "text": "A change of 3 dB represents a doubling (or halving) of Power. +3 dB ≈ 2x Power. -3 dB ≈ 0.5x Power. For Voltage, a doubling is 6 dB." } },
        { "@type": "Question", "name": "What is dBi vs dBd in antennas?", "acceptedAnswer": { "@type": "Answer", "text": "dBi is gain referenced to an isotropic radiator (theoretical point source). dBd is gain referenced to a dipole antenna. Typically, dBi = dBd + 2.15. Industrial specs usually use dBi." } },
        { "@type": "Question", "name": "How do I add dB?", "acceptedAnswer": { "@type": "Answer", "text": "You can add dB values directly if they represent gains/losses in a chain (e.g., +10dB Amp - 3dB Cable = +7dB Net). You CANNOT add absolute levels (e.g., 10dBm + 10dBm is NOT 20dBm; it is approx 13dBm because 10mW + 10mW = 20mW)." } },
        { "@type": "Question", "name": "What is the formula for dBW?", "acceptedAnswer": { "@type": "Answer", "text": "dBW is power referenced to 1 Watt. Formula: dBW = 10 log₁₀(Power in Watts). 0 dBW = 30 dBm." } },
        { "@type": "Question", "name": "Does this tool calculate Noise Figure?", "acceptedAnswer": { "@type": "Answer", "text": "This specific tool focuses on Gain, Loss, and Absolute levels. Noise Figure calculations involve thermal noise floors (-174 dBm/Hz) which are covered in our advanced RF suite." } },
        { "@type": "Question", "name": "Why is attenuation expressed as negative dB?", "acceptedAnswer": { "@type": "Answer", "text": "Gain is positive dB ($P_{out} > P_{in}$). Attenuation or Loss is negative dB ($P_{out} < P_{in}$). Sometimes 'Loss' is stated as a positive number (e.g., 'Cable Loss: 3dB'), which mathematically means a -3dB gain." } }
      ]
    }
    </script>

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.3/jspdf.plugin.autotable.min.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

    <!-- MathJax for Formulas -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)'], ['$', '$']],
                displayMath: [['\\[', '\\]'], ['$$', '$$']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <style>
        /* --- CORE THEME (Blue Industrial) --- */
        :root {
            --primary: #1E3A8A;
            /* Dark Blue */
            --secondary: #2563EB;
            /* Bright Blue */
            --accent: #F59E0B;
            /* Amber */
            --success: #10B981;
            --danger: #DC2626;
            --warning: #F59E0B;
            --bg: #F8FAFC;
            --card: #FFFFFF;
            --text: #334155;
            --heading: #0F172A;
            --footer-bg: #0F172A;
            --border: #E2E8F0;
            --grad: linear-gradient(135deg, var(--primary), var(--secondary));
            --grad-dark: linear-gradient(135deg, #0F172A, #1E293B);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --input-bg: #FFFFFF;
        }

        body.dark-mode {
            --primary: #3B82F6;
            --secondary: #60A5FA;
            --bg: #0F172A;
            --card: #1E293B;
            --text: #E2E8F0;
            --heading: #F8FAFC;
            --footer-bg: #020617;
            --border: #334155;
            --accent: #FBBF24;
            --input-bg: #334155;
        }

        * {
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* Header & Nav */
        header {
            background: var(--grad);
            color: white;
            padding: 24px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-container {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: white;
        }

        .logo-text {
            font-size: 1.75rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
            letter-spacing: -0.5px;
        }

        .logo-subtitle {
            font-size: 0.8rem;
            margin: 4px 0 0 0;
            color: #DBEAFE;
            font-weight: 500;
        }

        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.2s;
            opacity: 0.9;
        }

        .nav-links a:hover {
            opacity: 1;
            transform: translateY(-1px);
        }

        /* Theme Toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }

        .switch {
            position: relative;
            width: 52px;
            height: 28px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: .4s;
            border-radius: 34px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: var(--success);
            border-color: var(--success);
        }

        input:checked+.slider:before {
            transform: translateX(24px);
        }

        /* Main Content */
        main {
            padding: 40px 0;
        }

        .card {
            background: var(--card);
            border-radius: 16px;
            padding: 32px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 1px solid var(--border);
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card h2 {
            color: var(--primary);
            border-bottom: 2px solid var(--border);
            padding-bottom: 15px;
            margin-top: 0;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.75rem;
            display: flex;
            align-items: center;
            gap: 12px;
            letter-spacing: -0.5px;
        }

        h3 {
            color: var(--heading);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.4rem;
            margin-top: 25px;
            margin-bottom: 20px;
        }

        h4 {
            color: var(--heading);
            font-size: 1.1rem;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--border);
            padding-bottom: 8px;
        }

        /* Forms */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .form-group {
            margin-bottom: 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--heading);
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background-color: var(--input-bg);
            color: var(--text);
            font-size: 1rem;
            transition: all 0.2s ease;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
        }

        /* Tool Switcher */
        .tool-switcher {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tool-btn {
            background: var(--card);
            border: 2px solid var(--border);
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 700;
            color: var(--text);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tool-btn:hover {
            border-color: var(--secondary);
            transform: translateY(-2px);
        }

        .tool-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
        }

        /* Module Containers */
        .tool-module {
            display: none;
            animation: fadeIn 0.4s ease-out;
        }

        .tool-module.active {
            display: block;
        }

        /* Results Big Display */
        .result-box {
            text-align: center;
            padding: 25px;
            background: var(--card);
            border: 2px solid var(--primary);
            border-radius: 12px;
            margin-top: 30px;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .result-box::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: var(--grad);
        }

        .main-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            font-family: 'Montserrat', sans-serif;
            margin: 10px 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .sub-value {
            font-size: 1.1rem;
            color: var(--text);
            opacity: 0.9;
            font-weight: 500;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Calculation Steps Styling */
        .calc-steps {
            text-align: left;
            margin-top: 25px;
            background: var(--bg);
            padding: 25px;
            border-radius: 8px;
            border-left: 4px solid var(--accent);
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--text);
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.03);
        }

        .calc-steps h4 {
            margin-top: 0;
            color: var(--primary);
            font-family: 'Inter', sans-serif;
            border-bottom: 1px dashed var(--border);
            padding-bottom: 8px;
            margin-bottom: 15px;
        }

        .calc-steps strong {
            color: var(--heading);
        }

        .step-block {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }

        .step-block:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .step-title {
            font-weight: 700;
            color: var(--secondary);
            display: block;
            margin-bottom: 5px;
            font-family: 'Inter', sans-serif;
        }

        /* Visualizer */
        .viz-container {
            height: 250px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 10px;
        }

        canvas {
            max-height: 100%;
            max-width: 100%;
        }

        /* Buttons (Shared) */
        .btn {
            background: var(--grad);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.25);
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(37, 99, 235, 0.35);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--border);
            color: var(--text);
            box-shadow: none;
        }

        .btn-outline:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(37, 99, 235, 0.05);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        /* Message Box */
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 24px;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            z-index: 9999;
            font-weight: 600;
            color: white;
            opacity: 0;
            transition: all 0.3s;
            display: none;
        }

        .message-box.show {
            display: block;
            opacity: 1;
            top: 30px;
        }

        /* Educational Section */
        .education-section {
            padding: 40px;
        }

        .article-content {
            font-family: 'Inter', sans-serif;
            color: var(--text);
        }

        .article-block {
            margin-bottom: 40px;
        }

        .article-block h3 {
            color: var(--primary);
            border-left: 5px solid var(--accent);
            padding-left: 15px;
            margin-bottom: 20px;
            font-size: 1.4rem;
            margin-top: 0;
        }

        .article-block h4 {
            color: var(--heading);
            margin-top: 25px;
            margin-bottom: 15px;
            font-weight: 700;
            font-size: 1.1rem;
            border-bottom: none;
        }

        .article-block p {
            line-height: 1.8;
            margin-bottom: 15px;
            text-align: justify;
        }

        .article-block ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }

        .article-block li {
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .highlight-box {
            background: rgba(37, 99, 235, 0.05);
            border: 1px solid var(--border);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .formula {
            background: var(--bg);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.1rem;
            border: 1px solid var(--border);
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        /* FAQ Accordion */
        .faq-item {
            border-bottom: 1px solid var(--border);
            padding: 15px 0;
        }

        .faq-question {
            font-weight: 700;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--heading);
            transition: color 0.2s;
        }

        .faq-question:hover {
            color: var(--primary);
        }

        .faq-answer {
            display: none;
            margin-top: 10px;
            color: var(--text);
            line-height: 1.7;
            text-align: justify;
        }

        .faq-item.active .faq-answer {
            display: block;
            animation: fadeIn 0.3s;
        }

        .faq-icon {
            transition: transform 0.3s;
        }

        .faq-item.active .faq-icon {
            transform: rotate(180deg);
        }

        /* Results Grid */
        .res-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        @media(max-width:768px) {
            .res-grid {
                grid-template-columns: 1fr;
            }
        }

        .res-item {
            background: var(--bg);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .res-label {
            font-size: 0.85rem;
            color: var(--text);
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .res-val {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--heading);
        }

        /* Footer */
        footer {
            background: var(--grad-dark);
            color: #94A3B8;
            padding: 60px 0 30px 0;
            margin-top: 80px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-col {
            flex: 1;
            min-width: 200px;
        }

        .footer-col h4 {
            color: white;
            margin-bottom: 20px;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .footer-col ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-col li {
            margin-bottom: 12px;
        }

        .footer-col a {
            color: #CBD5E1;
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-col a:hover {
            color: var(--accent);
        }

        .social-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        /* Social Buttons Styling */
        .social-btn {
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            border-radius: 50%;
            font-size: 1.1rem;
            transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .social-btn:hover {
            transform: translateY(-4px);
        }

        .social-btn.linkedin {
            background-color: #0A66C2;
        }

        .social-btn.youtube {
            background-color: #FF0000;
        }

        .social-btn.twitter {
            background-color: #1DA1F2;
        }

        .social-btn.facebook {
            background-color: #1877F2;
        }

        .social-btn.whatsapp {
            background-color: #25D366;
        }

        .footer-disclaimer {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 900px;
            margin: 0 auto;
            font-size: 0.85rem;
            line-height: 1.6;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            font-size: 0.85rem;
        }

        .hidden {
            display: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 20px;
            }

            .nav-links {
                flex-direction: column;
                width: 100%;
                text-align: center;
            }

            .tool-switcher {
                flex-direction: column;
            }
        }
    </style>
    <style>
        /* Core Header Styles */
        .header {
            background: var(--gradient-primary, linear-gradient(135deg, #1E3A8A, #2563EB));
            color: white;
            padding: 10px 0;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1000;
            overflow: visible !important;
        }

        .header .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            position: relative;
        }

        .header .logo-container {
            display: flex !important;
            align-items: center !important;
            gap: 12px !important;
            text-decoration: none;
            color: white;
        }

        .header .logo {
            height: 48px !important;
            width: auto;
            object-fit: contain;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: #ffffff;
            margin-bottom: 2px;
            white-space: nowrap;
            font-family: 'Montserrat', sans-serif;
        }

        .logo-text-group {
            display: flex;
            flex-direction: column;
            justify-content: center;
            line-height: 1.1;
        }

        .logo-subtitle {
            font-size: 0.7rem !important;
            color: rgba(255, 255, 255, 0.85) !important;
            font-weight: 500;
            margin: 0 !important;
            line-height: 1.2;
            max-width: 250px;
            white-space: normal;
        }

        .header .nav-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .header .nav-links {
            display: flex;
            gap: 25px;
            list-style: none;
            margin: 0;
            padding: 0;
            align-items: center;
        }

        .header .nav-links li {
            margin: 0;
            position: relative;
            display: inline-block;
        }

        .header .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            opacity: 0.9;
        }

        .header .nav-links a:hover {
            opacity: 1;
            transform: translateY(-1px);
        }

        .header .theme-toggle {
            margin-left: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px;
            z-index: 1000;
        }

        /* Mega Menu Styles */
        .nav-links .dropbtn {
            cursor: pointer;
            padding: 10px 0;
            display: inline-block;
        }

        .nav-links .dropbtn i {
            font-size: 0.8em;
            margin-left: 4px;
            opacity: 0.7;
            transition: transform 0.3s;
        }

        .nav-links .nav-item:hover .dropbtn i {
            transform: rotate(180deg);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--card-bg, #ffffff);
            width: 600px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            z-index: 2000;
            border-radius: 12px;
            padding: 20px;
            top: 100%;
            margin-top: 5px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease-in-out;
            border-top: 4px solid var(--secondary-color, #2563EB);
        }

        .nav-links .nav-item:hover .dropdown-content {
            display: block;
            opacity: 1;
            visibility: visible;
        }

        .dropdown-content .row {
            display: flex;
            gap: 20px;
        }

        .dropdown-content .column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .dropdown-content a {
            color: var(--text-color, #4B5563) !important;
            padding: 6px 8px;
            text-decoration: none;
            display: block;
            font-size: 0.9rem !important;
            border-radius: 6px;
            transition: background 0.2s, color 0.2s;
            font-weight: 400 !important;
            line-height: 1.4;
        }

        .dropdown-content a:hover {
            background-color: var(--hover-color, #F1F5F9);
            color: var(--primary-color, #1E3A8A) !important;
            transform: translateX(4px);
        }

        .mega-menu-footer {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color, #E2E8F0);
            text-align: center;
        }

        .mega-menu-footer .view-all-btn {
            display: inline-block;
            color: var(--primary-color, #1E3A8A) !important;
            font-weight: 700 !important;
            font-size: 0.95rem !important;
        }

        /* Dark Mode Overrides */
        body.dark-mode .dropdown-content {
            background-color: var(--card-bg, #1E293B);
            border-color: var(--secondary-color, #34D399);
        }

        body.dark-mode .dropdown-content a {
            color: var(--text-color, #CBD5E1) !important;
        }

        body.dark-mode .dropdown-content a:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--primary-color, #10B981) !important;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .mobile-menu-toggle {
                display: block;
            }

            .header .nav-menu {
                display: flex;
            }

            .nav-links {
                position: fixed;
                top: 0;
                left: -100%;
                width: 280px;
                height: 100vh;
                background: var(--gradient-dark, #0F172A);
                flex-direction: column;
                padding: 100px 30px 30px;
                gap: 24px;
                transition: left 0.4s ease-in-out;
                box-shadow: 4px 0 12px rgba(0, 0, 0, 0.3);
                z-index: 999;
                align-items: flex-start;
            }

            .nav-links.active {
                left: 0;
            }

            .nav-links a {
                width: 100%;
                padding: 12px 16px;
                border-radius: 8px;
                background: rgba(255, 255, 255, 0.05);
                display: block;
            }

            .dropdown-content {
                position: static;
                width: 100%;
                box-shadow: none;
                transform: none;
                display: none !important;
                padding: 0 0 0 15px;
                background: transparent;
                border: none;
            }

            .nav-links .nav-item:hover .dropdown-content {
                display: block !important;
                opacity: 1;
                visibility: visible;
            }

            .dropdown-content .row {
                flex-direction: column;
                gap: 0;
            }

            .nav-links .nav-item {
                display: block;
                width: 100%;
            }

            .nav-links .dropbtn {
                width: 100%;
                display: flex;
                justify-content: space-between;
            }

            .header .logo-text {
                font-size: 1.1rem;
            }

            .header .logo {
                height: 40px;
            }
        }
    </style>
    <link rel="stylesheet" href="/styles.css">
    <meta property="og:title" content="Industrial dB Calculator & RF Link Analysis (Gain/Loss)">
    <meta property="og:description" content="Professional Decibel (dB) Calculator for Signal Processing and RF Engineering. Convert Voltage/Power Ratios, calculate dBm/dBW/dBu, and analyze RF Link Budgets (FSPL). Features step-by-step 10log/20log derivations and impedance corrections.">
</head>

<body>
    <div id="message-box" class="message-box"></div>

    <header class="header">
        <div class="header-bg-animation"></div>
        <div class="container">
            <nav class="navbar">
                <a href="/" class="logo-container">
                    <img src="logo.png" alt="Design Calculators Logo" class="logo">
                    <span class="logo-text">Design Calculators</span>
                </a>

                <div class="nav-menu">
                    <button class="mobile-menu-toggle" aria-label="Toggle menu">
                        <i class="fas fa-bars"></i>
                    </button>

                    <ul class="nav-links">
                        <li><a href="/index.html">Home</a></li>
                        
    <li class="dropdown">
        <a href="/indexele.html" class="dropdown-toggle">Electrical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/arcflash.html">Arc Flash Calculator</a><a href="/breaker-sizing.html">Breaker Sizing</a><a href="/cable-thermal-rating.html">Cable Ampacity</a><a href="/comm-cable-loss.html">Comm Cable Loss</a><a href="/earth-conductor-size.html">Earth Conductor Size</a><a href="/generatorsizing.html">Generator Sizing</a><a href="/harmonicsanalyser.html">Harmonics Analyser</a><a href="/insulationresistance.html">Insulation Resistance</a><a href="/logicgate.html">Logic Gates Simulator</a><a href="/motor-starting.html">Motor Starting Current</a><a href="/pcbtrace.html">PCB Trace Width</a><a href="/protection-device.html">Protection Device</a><a href="/resistor.html">Resistor Color Code</a><a href="/solarcable.html">Solar Cable Sizing</a><a href="/systemxrcalculator.html">System X/R Ratio</a><a href="/transmissionline.html">Transmission Line</a><a href="/vfd-selection.html">VFD Selection Tool</a></div><div><a href="/batterylife.html">Battery Life Estimator</a><a href="/busbarampacity.html">Busbar Ampacity</a><a href="/cablepulling.html">Cable Pulling Tension</a><a href="/conduit-fill.html">Conduit Fill Calculator</a><a href="/earthingfaultsimulator.html">Earthing Fault Simulator</a><a href="/grounding.html">Grounding System Design</a><a href="/hvac-sizing.html">HVAC Sizing Calculator</a><a href="/lcresonancecalculator.html">LC Resonance Calculator</a><a href="/maintenance-guide.html">Maintenance Guide</a><a href="/nemaipconvertor.html">NEMA to IP Converter</a><a href="/power-factor.html">Power Factor Correction</a><a href="/relay-coordination.html">Relay Coordination</a><a href="/short-circuit.html">Short Circuit Current</a><a href="/solarpvarray.html">Solar PV Array</a><a href="/transformer-calculator.html">Transformer Calculator</a><a href="/unit-converter.html">Unit Converter</a><a href="/voltage-drop.html">Voltage Drop Calculator</a></div><div><a href="/battery-sizing.html">Battery Sizing (AH)</a><a href="/busbarshortcircuit.html">Busbar Short Circuit</a><a href="/cable-sizing.html">Cable Sizing Calculator</a><a href="/ctsaturation.html">CT Saturation</a><a href="/equipment-relay.html">Equipment Relay Setting</a><a href="/harmonic-distortion.html">Harmonic Distortion</a><a href="/industriallighting.html">Industrial Lighting</a><a href="/lighting-calulator.html">Lighting Calculator</a><a href="/motor-efficiency.html">Motor Efficiency</a><a href="/neutral-earth-fault-current.html">Neutral Earth Fault</a><a href="/powertriangletool.html">Power Triangle</a><a href="/electricalresidentialload.html">Residential Load Calc</a><a href="/skindepth.html">Skin Depth Calculator</a><a href="/symmetricalcomponents.html">Symmetrical Components</a><a href="/transformerinrush.html">Transformer Inrush</a><a href="/ups-sizing.html">UPS Sizing</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexele.html" class="view-all-link">View All Electrical Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexinst.html" class="dropdown-toggle">Instrumentation <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/adc-resolution.html">ADC Resolution</a><a href="/capillarylengthtemperatureerror.html">Capillary Error</a><a href="/cv-kv-valve.html">Cv/Kv Valve Sizing</a><a href="/dp-level.html">DP Level Measurement</a><a href="/hydrostatic-level.html">Hydrostatic Level</a><a href="/instrument-range.html">Instrument Range</a><a href="/loop-impedance.html">Loop Impedance</a><a href="/orifice-plate.html">Orifice Plate Beta</a><a href="/pid-tuning.html">PID Tuning</a><a href="/profibus.html">Profibus Calculator</a><a href="/tempsensorresponse.html">Response Time (Tau)</a><a href="/rtd-lead-comp.html">RTD Lead Wire Comp.</a><a href="/sealfluidzeroshift.html">Seal Fluid Shift</a><a href="/snr-calculator.html">SNR Calculator</a><a href="/thermocoupleextensioncable.html">TC Extension Cable</a><a href="/thermowellwakefreq.html">Thermowell Frequency</a><a href="/pressuretransmitteroverrange.html">Tx Overrange</a><a href="/valvecavitationcalculator.html">Valve Cavitation</a><a href="/vibrationtransmitter.html">Vibration Tx</a><a href="/zoneclassificationhelper.html">Zone Classification</a></div><div><a href="/baud-rate.html">Baud Rate Calculator</a><a href="/gascompressibility.html">Compressibility (Z)</a><a href="/dbcalculator.html">dB Gain/Loss Calc</a><a href="/flowprofiledistortioncalculator.html">Flow Distortion</a><a href="/impulselinefreezing.html">Impulse Freezing</a><a href="/intrinsic-safety.html">Intrinsic Safety Loop</a><a href="/measurement.html">Measurement Uncertainty</a><a href="/ph-temp-comp.html">pH Temp Compensation</a><a href="/plcscantime.html">PLC Scan Time</a><a href="/pressurereliefvalve.html">PRV Sizing (API 520)</a><a href="/reynoldsnumbercal.html">Reynolds Number</a><a href="/rtdselfheating.html">RTD Self-Heating</a><a href="/signal-scaling.html">Signal Scaling</a><a href="/staticheadcal.html">Static Head</a><a href="/temperaturesensorlag.html">Temp Sensor Lag</a><a href="/thermowell-wake.html">Thermowell Wake</a><a href="/ultrasoniclevel.html">Ultrasonic Level</a><a href="/valve-cv.html">Valve Cv Viewer</a><a href="/wetlegdensitycompensation.html">Wet Leg Compensation</a></div><div><a href="/capacitance-level.html">Capacitance Level</a><a href="/controlvalvenoise.html">Control Valve Noise</a><a href="/dp-flow-conversion.html">DP Flow Conversion</a><a href="/hartdevices.html">HART Devices</a><a href="/impulse-pressure-drop.html">Impulse Pressure Drop</a><a href="/junctionbox.html">Junction Box Sizing</a><a href="/orifice-flow.html">Orifice Flow Calculator</a><a href="/pid-symbol-library.html">PID Symbol Library</a><a href="/power-supply-load.html">Power Supply Load</a><a href="/prvsizing.html">Relief Orifice Area</a><a href="/rtdexcitationcurrentselection.html">RTD Excitation</a><a href="/rtd-tc-conversion.html">RTD/TC Conversion</a><a href="/sil.html">SIL Calculator</a><a href="/steamflow.html">Steam Flow</a><a href="/thermocouplecjccalculator.html">Thermocouple CJC</a><a href="/turndown.html">Turndown Ratio</a><a href="/controlvalveauthority.html">Valve Authority</a><a href="/controlvalveleakage.html">Valve Leakage Class</a><a href="/wirelesshart.html">WirelessHART Range</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexinst.html" class="view-all-link">View All Instrumentation Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexmech.html" class="dropdown-toggle">Mechanical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/aircompressorfad.html">Air Compressor FAD</a><a href="/asme-vessel.html">ASME Vessel Design</a><a href="/belt-pulley.html">Belt & Pulley</a><a href="/bolt-torque.html">Bolt Torque</a><a href="/controlvalveactuator.html">Control Valve Actuator</a><a href="/frictionfactortool.html">Darcy Friction Factor</a><a href="/fatigue.html">Fatigue Analysis</a><a href="/fuel-combustion.html">Fuel Combustion</a><a href="/gas.html">Gas Properties</a><a href="/heat-exchanger.html">Heat Exchanger</a><a href="/hydroliccylinder.html">Hydraulic Cylinder</a><a href="/material-compatibility.html">Material Compatibility</a><a href="/nozzle-reinforcement.html">Nozzle Reinforcement</a><a href="/openchannelflow.html">Open Channel Flow</a><a href="/pipescheduletool.html">Pipe Schedule & Stress</a><a href="/pump-head.html">Pump Head</a><a href="/shaft-power-torque.html">Shaft Power & Torque</a><a href="/steam-table.html">Steam Table</a><a href="/vibrationanalysis.html">Vibration Analysis</a></div><div><a href="/air-flow-duct.html">Air Flow Duct Sizing</a><a href="/beam-deflection.html">Beam Deflection</a><a href="/bernoulli-equation.html">Bernoulli Equation</a><a href="/chiller-capacity.html">Chiller Capacity</a><a href="/cooling-tower-sizing.html">Cooling Tower Sizing</a><a href="/darcy-weisbach.html">Darcy-Weisbach</a><a href="/finned-tube-heat-transfer.html">Finned Tube Heat</a><a href="/furnace-heat-duty.html">Furnace Heat Duty</a><a href="/gear-design.html">Gear Design</a><a href="/heat-loss-pipes.html">Heat Loss Pipes</a><a href="/jacketed-vessel-heat-transfer.html">Jacketed Vessel</a><a href="/metalweight.html">Metal Weight Calculator</a><a href="/nptbspthreadcalculator.html">NPT/BSP Threads</a><a href="/overall-heat-transfer.html">Overall Heat Transfer</a><a href="/pipe-stress-flexibility.html">Pipe Stress</a><a href="/pump-power.html">Pump Power</a><a href="/specific-heat-enthalpy.html">Specific Heat</a><a href="/storage-tank-volume.html">Storage Tank Volume</a><a href="/weldingstress.html">Welding Stress</a></div><div><a href="/allowable-stress-safety-factor.html">Allowable Stress</a><a href="/bearinglife.html">Bearing Life Calculator</a><a href="/boiler-efficiency.html">Boiler Efficiency</a><a href="/compressor-power.html">Compressor Power</a><a href="/corrosion-rate.html">Corrosion Rate</a><a href="/fan-laws.html">Fan Laws</a><a href="/foundation.html">Foundation Design</a><a href="/gas-laws.html">Gas Laws</a><a href="/hardness.html">Hardness Converter</a><a href="/conduction-convection-radiation.html">Heat Transfer Modes</a><a href="/machining.html">Machining Calculator</a><a href="/momentofinertia.html">Moment of Inertia</a><a href="/oring.html">O-Ring Sizing</a><a href="/pipe-flow.html">Pipe Flow Calculator</a><a href="/psychrometric.html">Psychrometric Calc</a><a href="/reynolds-number.html">Reynolds Number</a><a href="/spring.html">Spring Design</a><a href="/thermal-expansion.html">Thermal Expansion</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexmech.html" class="view-all-link">View All Mechanical Tools â†’</a>
            </div>
        </div>
    </li>
                        <li><a href="/index.html#articles">Articles</a></li>
                        <li><a href="/sitemap2.html">Site Map</a></li>
                    </ul>

                    <div class="theme-toggle">
                        <i class="fas fa-sun icon"></i>
                        <label class="switch">
                            <input type="checkbox" id="theme-switch">
                            <span class="slider"></span>
                        </label>
                        <i class="fas fa-moon icon"></i>
                    </div>
                </div>
            </nav>
    </header>

    <main class="container">
        <div class="card">
            <h2><i class="fas fa-wave-square"></i> dB Calculator (Gain/Loss) & Link Analysis</h2>
            <div class="tool-description">
                <p>Commercial-grade Signal Processing & RF Tool. Calculate <strong>Gain/Loss (dB)</strong>, Absolute
                    Power <strong>(dBm, dBW)</strong>, and perform <strong>RF Link Budget Analysis (FSPL)</strong>.
                    Features precise 10log vs 20log logic and impedance corrections.</p>
            </div>

            <!-- Tool Switcher -->
            <div class="tool-switcher">
                <button class="tool-btn active" onclick="switchTool('ratio')"><i class="fas fa-percent"></i> Ratio to
                    dB</button>
                <button class="tool-btn" onclick="switchTool('power')"><i class="fas fa-plug"></i> dBm / Watts</button>
                <button class="tool-btn" onclick="switchTool('link')"><i class="fas fa-broadcast-tower"></i> RF Link
                    Budget</button>
            </div>

            <!-- Visualizer -->
            <div class="viz-container">
                <canvas id="dbCanvas"></canvas>
            </div>

            <!-- MODULE 1: RATIO CONVERTER -->
            <div id="mod-ratio" class="tool-module active">
                <div class="form-row">
                    <div class="form-group">
                        <label>Conversion Type</label>
                        <select id="ratio-type" onchange="updateRatioInputs()">
                            <option value="power">Power Ratio (Watts) - 10 log</option>
                            <option value="voltage">Voltage/Current Ratio - 20 log</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Input (Reference) Level</label>
                        <input type="number" id="rat-in" value="1">
                    </div>
                    <div class="form-group">
                        <label>Output Level</label>
                        <input type="number" id="rat-out" value="2">
                    </div>
                </div>
                <div class="button-wrapper">
                    <button type="button" class="btn" onclick="calcRatio()">Calculate dB</button>
                </div>
            </div>

            <!-- MODULE 2: POWER UNITS (dBm/W) -->
            <div id="mod-power" class="tool-module">
                <div class="form-row">
                    <div class="form-group">
                        <label>Convert From</label>
                        <select id="pwr-mode" onchange="updatePowerInputs()">
                            <option value="watts_dbm">Watts/mW -> dBm/dBW</option>
                            <option value="dbm_watts">dBm -> Watts/mW</option>
                            <option value="volts_dbm">Volts (RMS) -> dBm (Z dependent)</option>
                        </select>
                    </div>
                    <div class="form-group" id="grp-impedance" style="display:none;">
                        <label>System Impedance (Ω)</label>
                        <input type="number" id="pwr-z" value="50">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label id="lbl-pwr-in">Input Value</label>
                        <input type="number" id="pwr-val" value="100"> <!-- Default mW -->
                    </div>
                    <div class="form-group" id="grp-unit">
                        <label>Unit</label>
                        <select id="pwr-unit">
                            <option value="mW">Milliwatts (mW)</option>
                            <option value="W">Watts (W)</option>
                        </select>
                    </div>
                </div>
                <div class="button-wrapper">
                    <button type="button" class="btn" onclick="calcPower()">Convert</button>
                </div>
            </div>

            <!-- MODULE 3: RF LINK BUDGET (FSPL) -->
            <div id="mod-link" class="tool-module">
                <div class="form-row">
                    <div class="form-group">
                        <label>Frequency</label>
                        <div style="display:flex; gap:10px;">
                            <input type="number" id="rf-freq" value="2.4">
                            <select id="rf-freq-unit" style="width:100px;">
                                <option value="GHz">GHz</option>
                                <option value="MHz">MHz</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Distance</label>
                        <div style="display:flex; gap:10px;">
                            <input type="number" id="rf-dist" value="5">
                            <select id="rf-dist-unit" style="width:100px;">
                                <option value="km">km</option>
                                <option value="m">meters</option>
                                <option value="mi">miles</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Tx Power (dBm)</label>
                        <input type="number" id="rf-tx" value="20">
                    </div>
                    <div class="form-group">
                        <label>Tx Antenna Gain (dBi)</label>
                        <input type="number" id="rf-tx-gain" value="3">
                    </div>
                    <div class="form-group">
                        <label>Rx Antenna Gain (dBi)</label>
                        <input type="number" id="rf-rx-gain" value="3">
                    </div>
                </div>
                <div class="button-wrapper">
                    <button type="button" class="btn" onclick="calcLink()">Calculate Link Budget</button>
                </div>
            </div>

            <!-- RESULTS -->
            <div class="result-box" id="main-result" style="display:none;">
                <div class="sub-value" id="res-subtitle">Analysis Result</div>
                <div id="res-main" class="main-value">--</div>

                <div class="res-grid">
                    <div class="res-item">
                        <div class="res-label" id="lbl-1">Result 1</div>
                        <div class="res-val" id="val-1">--</div>
                    </div>
                    <div class="res-item">
                        <div class="res-label" id="lbl-2">Result 2</div>
                        <div class="res-val" id="val-2">--</div>
                    </div>
                    <div class="res-item">
                        <div class="res-label" id="lbl-3">Linear Scale</div>
                        <div class="res-val" id="val-3">--</div>
                    </div>
                    <div class="res-item">
                        <div class="res-label" id="lbl-4">Reference</div>
                        <div class="res-val" id="val-4">--</div>
                    </div>
                </div>

                <div class="calc-steps" id="calc-steps-box"></div>
            </div>

            <div class="button-wrapper" style="margin-top:40px;">
                <button type="button" id="pdf-btn" class="btn btn-outline"><i class="fas fa-file-pdf"></i> Download
                    Engineering Report</button>
            </div>
        </div>

        <!-- EDUCATIONAL SECTION -->
        <div class="card education-section" style="margin-top: 40px;">
            <h2><i class="fas fa-book-open"></i> Engineering Guide: Decibels & Signal Analysis</h2>
            <div class="article-content">

                <div class="article-block">
                    <h3>1. The Logic of Logarithms (10log vs 20log)</h3>
                    <p>The Decibel (dB) is a logarithmic unit used to express the ratio of two values. It is essential
                        in engineering because signals span massive dynamic ranges (from nanowatts to megawatts).</p>
                    <ul>
                        <li><strong>Power Rule (10 log):</strong> For quantities representing Power (Watts, Joules), the
                            formula is $dB = 10 \log_{10}(P_2/P_1)$. A factor of 2 in power is approx 3 dB.</li>
                        <li><strong>Field Rule (20 log):</strong> For quantities like Voltage (V) or Current (I), power
                            is proportional to the square ($P \propto V^2$). Therefore, $10 \log(V^2/V_{ref}^2) = 20
                            \log(V/V_{ref})$. A factor of 2 in voltage is approx 6 dB.</li>
                    </ul>
                </div>

                <div class="article-block">
                    <h3>2. Absolute Reference Units</h3>
                    <p>dB by itself is a relative ratio. To measure absolute levels, we use a suffix to denote the
                        reference:</p>
                    <div class="highlight-box">
                        <ul>
                            <li><strong>dBm:</strong> Referenced to 1 milliwatt (1 mW). $0 \text{ dBm} = 1 \text{ mW}$.
                                Used in RF/Audio.</li>
                            <li><strong>dBW:</strong> Referenced to 1 Watt. $0 \text{ dBW} = 1 \text{ Watt} = 30 \text{
                                dBm}$. Used in High Power RF.</li>
                            <li><strong>dBV:</strong> Referenced to 1 Volt RMS. Independent of impedance. Used in Audio.
                            </li>
                            <li><strong>dBu:</strong> Referenced to 0.775V (Voltage across 600Ω dissipating 1mW). Legacy
                                Audio standard.</li>
                        </ul>
                    </div>
                </div>

                <div class="article-block">
                    <h3>3. Free Space Path Loss (FSPL)</h3>
                    <p>In industrial telemetry (SCADA radios, Wi-Fi), signals attenuate as they travel through space.
                        The FSPL formula defines the loss based on distance ($d$) and frequency ($f$):</p>
                    <div class="formula">
                        $$ FSPL(dB) = 20 \log_{10}(d) + 20 \log_{10}(f) + K $$
                    </div>
                    <p>Where $K$ is a constant depending on units (32.44 for km/MHz, 92.45 for km/GHz). Doubling the
                        distance adds 6 dB of loss.</p>
                </div>

                <div class="article-block">
                    <h3>4. Impedance Mismatch in dB Calculations</h3>
                    <p>When converting Voltage to Power (dBm), Impedance ($Z$) is critical. $P = V^2 / Z$. </p>
                    <p>A 1 Volt signal into <strong>50Ω</strong> (RF Standard) produces $1^2 / 50 = 20 \text{ mW} = +13
                        \text{ dBm}$.</p>
                    <p>The same 1 Volt signal into <strong>600Ω</strong> (Audio Standard) produces $1^2 / 600 = 1.66
                        \text{ mW} = +2.2 \text{ dBm}$.</p>
                    <p>Always verify the system impedance before converting dBV to dBm.</p>
                </div>

                <div class="article-block">
                    <h3>5. Frequently Asked Questions (FAQ)</h3>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">1. When do I use 10 log vs 20 log? <i
                                class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer">Use 10 log₁₀(P₂/P₁) for POWER ratios (Watts). Use 20 log₁₀(V₂/V₁) for
                            FIELD quantities like Voltage (Volts) or Current (Amps). The factor of 20 comes from the
                            fact that Power is proportional to Voltage squared ($P = V^2/R$).</div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" onclick="toggleFaq(this)">2. What is 0 dBm? <i
                                class="fas fa-chevron-down faq-icon"></i></div>
                        <div class="faq-answer">0 dBm is an absolute power level referenced to 1 milliwatt (1 mW).
                            Positive values indicate power > 1mW (e.g., 30 dBm = 1W), while negative values indicate
                            power < 1mW (e.g., -30 dBm=1 microwatt).</div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">3. How does Impedance affect dBV
                                calculations? <i class="fas fa-chevron-down faq-icon"></i></div>
                            <div class="faq-answer">dBV is solely a voltage reference (1V). However, if you convert dBV
                                to dBm (Power), impedance (Z) matters critically ($P = V^2/Z$). A 0 dBV signal is +13
                                dBm in a 50Ω system but only +2.2 dBm in a 600Ω system.</div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">4. What is Free Space Path Loss (FSPL)?
                                <i class="fas fa-chevron-down faq-icon"></i>
                            </div>
                            <div class="faq-answer">FSPL quantifies the loss of signal strength as an electromagnetic
                                wave spreads out in free space. It depends on distance and frequency. Doubling the
                                distance or doubling the frequency results in a 6 dB additional loss.</div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">5. Why is 3 dB significant? <i
                                    class="fas fa-chevron-down faq-icon"></i></div>
                            <div class="faq-answer">A change of 3 dB represents a doubling (or halving) of Power. +3 dB
                                ≈ 2x Power. -3 dB ≈ 0.5x Power. For Voltage, a doubling is 6 dB.</div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">6. What is dBi vs dBd in antennas? <i
                                    class="fas fa-chevron-down faq-icon"></i></div>
                            <div class="faq-answer">dBi is gain referenced to an isotropic radiator (theoretical point
                                source). dBd is gain referenced to a dipole antenna. Typically, dBi = dBd + 2.15.
                                Industrial specs usually use dBi.</div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">7. How do I add dB? <i
                                    class="fas fa-chevron-down faq-icon"></i></div>
                            <div class="faq-answer">You can add dB values directly if they represent gains/losses in a
                                chain (e.g., +10dB Amp - 3dB Cable = +7dB Net). You CANNOT add absolute levels (e.g.,
                                10dBm + 10dBm is NOT 20dBm; it is approx 13dBm because 10mW + 10mW = 20mW).</div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">8. What is the formula for dBW? <i
                                    class="fas fa-chevron-down faq-icon"></i></div>
                            <div class="faq-answer">dBW is power referenced to 1 Watt. Formula: dBW = 10 log₁₀(Power in
                                Watts). 0 dBW = 30 dBm.</div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">9. Does this tool calculate Noise
                                Figure? <i class="fas fa-chevron-down faq-icon"></i></div>
                            <div class="faq-answer">This specific tool focuses on Gain, Loss, and Absolute levels. Noise
                                Figure calculations involve thermal noise floors (-174 dBm/Hz) which are covered in our
                                advanced RF suite.</div>
                        </div>

                        <div class="faq-item">
                            <div class="faq-question" onclick="toggleFaq(this)">10. Why is attenuation expressed as
                                negative dB? <i class="fas fa-chevron-down faq-icon"></i></div>
                            <div class="faq-answer">Gain is positive dB ($P_{out} > P_{in}$). Attenuation or Loss is
                                negative dB ($P_{out} < P_{in}$). Sometimes 'Loss' is stated as a positive number
                                    (e.g., 'Cable Loss: 3dB' ), which mathematically means a -3dB gain.</div>
                            </div>

                        </div>
                    </div>
                </div>
    </main>

        <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <a href="/" class="footer-logo">
                        <img src="logo.png" alt="Design Calculators Logo" loading="lazy" decoding="async">
                        <span class="footer-logo-text">Design Calculators</span>
                    </a>
                    <p class="footer-description">A comprehensive engineering calculator hub based on IEC, IEEE, and
                        global standards.</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn linkedin"
                            aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer"
                            class="social-btn youtube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in&text=Check%20out%20this%20amazing%20engineering%20calculator%20hub!"
                            target="_blank" rel="noopener noreferrer" class="social-btn twitter" aria-label="Twitter"><i
                                class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn facebook"
                            aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn whatsapp"
                            aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="footer-col">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href='/indexele.html'>Electrical Tools</a></li>
                            <li><a href='/indexmech.html'>Mechanical Tools</a></li>
                            <li><a href='/indexinst.html'>Instrumentation Tools</a></li>
                            <li><a href='/about.html'>About Us</a></li>
                            <li><a href='/faq.html'>FAQ</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Learn More</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/@designcalculators" target="_blank"
                                    rel="noopener noreferrer">YouTube Channel</a></li>
                            <li><a href='/contact.html'>Contact Us</a></li>
                            <li><a href='/privacy-policy.html'>Privacy Policy</a></li>
                            <li><a href='/terms-of-service.html'>Terms of Service</a></li>
                            <li><a href='/sitemap2.html'>Sitemap</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Our Network</h4>
                        <ul>
                            <li style="margin-bottom: 12px;">
                                <a href="https://reliabilitytools.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">Reliability Tools</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Reliability
                                    & maintenance engineering calculators.</span>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="https://electrosafe.homes/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">ElectroSafe</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Dedicated
                                    to home electrical safety & protection.</span>
                            </li>
                            <li>
                                <a href="https://knowyourname.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">KnowYourName</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Scientific
                                    name analysis: Phonetics, Ergonomics & Acoustics.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>All calculations are for preliminary engineering design guidance. Final designs must comply with all applicable local and international standards (including but not limited to ASHRAE 90.1, ARI 550/590). Always verify calculations and consult with a licensed professional engineer before implementation or construction.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">Anil Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global State
        let lastResult = {};
        let canvas = document.getElementById('dbCanvas');
        let ctx = canvas.getContext('2d');

        // UI Logic
        document.addEventListener('DOMContentLoaded', () => {
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch && localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                themeSwitch.checked = true;
            }
            if (themeSwitch) {
                themeSwitch.addEventListener('change', function () {
                    document.body.classList.toggle('dark-mode');
                    localStorage.setItem('theme', this.checked ? 'dark' : 'light');
                });
            }
            document.getElementById('pdf-btn').addEventListener('click', generatePDF);

            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            // Init default visual
            drawGauge(0, -100, 100, 'dB');
        });

        function switchTool(toolId) {
            document.querySelectorAll('.tool-btn').forEach(b => b.classList.remove('active'));
            event.currentTarget.classList.add('active');
            document.querySelectorAll('.tool-module').forEach(m => m.classList.remove('active'));
            document.getElementById('mod-' + toolId).classList.add('active');
            document.getElementById('main-result').style.display = 'none';
        }

        function toggleFaq(element) {
            const item = element.parentElement;
            item.classList.toggle('active');
        }

        function updateRatioInputs() {
            // Placeholder for UI tweaks if needed when switching ratio type
        }

        function updatePowerInputs() {
            const mode = document.getElementById('pwr-mode').value;
            const impGroup = document.getElementById('grp-impedance');
            const unitGroup = document.getElementById('grp-unit');

            if (mode === 'volts_dbm') {
                impGroup.style.display = 'block';
                unitGroup.style.display = 'none';
                document.getElementById('lbl-pwr-in').innerText = "Voltage (RMS)";
            } else if (mode === 'watts_dbm') {
                impGroup.style.display = 'none';
                unitGroup.style.display = 'block';
                document.getElementById('lbl-pwr-in').innerText = "Power Value";
            } else {
                impGroup.style.display = 'none';
                unitGroup.style.display = 'none';
                document.getElementById('lbl-pwr-in').innerText = "dBm Value";
            }
        }

        function resizeCanvas() {
            const container = document.querySelector('.viz-container');
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
            // Redraw last result if exists
            if (lastResult.val !== undefined) {
                drawGauge(lastResult.val, lastResult.min, lastResult.max, lastResult.unit);
            } else {
                drawGauge(0, -100, 100, 'dB');
            }
        }

        // --- VISUALIZER ---
        function drawGauge(val, min, max, unit) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const w = canvas.width;
            const h = canvas.height;
            const cy = h / 2;
            const pad = 40;

            // Draw Scale Line
            ctx.beginPath();
            ctx.moveTo(pad, cy);
            ctx.lineTo(w - pad, cy);
            ctx.strokeStyle = '#94A3B8';
            ctx.lineWidth = 4;
            ctx.stroke();

            // Draw Ticks
            const range = max - min;
            const step = range / 10;
            ctx.fillStyle = '#64748B';
            ctx.textAlign = 'center';
            ctx.font = '12px Inter';

            for (let i = 0; i <= 10; i++) {
                const tickVal = min + (i * step);
                const x = pad + (i * (w - 2 * pad) / 10);

                ctx.beginPath();
                ctx.moveTo(x, cy - 10);
                ctx.lineTo(x, cy + 10);
                ctx.strokeStyle = '#94A3B8';
                ctx.lineWidth = 2;
                ctx.stroke();

                ctx.fillText(Math.round(tickVal), x, cy + 25);
            }

            // Draw Indicator
            // Clamp val
            let displayVal = Math.max(min, Math.min(max, val));
            const xPos = pad + ((displayVal - min) / range) * (w - 2 * pad);

            ctx.beginPath();
            ctx.arc(xPos, cy, 8, 0, 2 * Math.PI);
            ctx.fillStyle = '#2563EB';
            ctx.fill();

            // Draw Bubble
            ctx.beginPath();
            ctx.roundRect(xPos - 40, cy - 50, 80, 30, 5);
            ctx.fillStyle = '#2563EB';
            ctx.fill();

            ctx.fillStyle = 'white';
            ctx.font = 'bold 14px Inter';
            ctx.fillText(`${val.toFixed(1)} ${unit}`, xPos, cy - 30);
        }

        // --- MATH ENGINE ---

        function calcRatio() {
            const type = document.getElementById('ratio-type').value;
            const input = parseFloat(document.getElementById('rat-in').value);
            const output = parseFloat(document.getElementById('rat-out').value);

            if (input <= 0 || output <= 0) return alert("Values must be positive");

            let factor = (type === 'power') ? 10 : 20;
            const ratio = output / input;
            const db = factor * Math.log10(ratio);

            // Results
            document.getElementById('main-result').style.display = 'block';
            document.getElementById('res-subtitle').innerText = "Gain / Loss Calculation";
            document.getElementById('res-main').innerText = `${db >= 0 ? '+' : ''}${db.toFixed(2)} dB`;

            document.getElementById('lbl-1').innerText = "Ratio (Out/In)";
            document.getElementById('val-1').innerText = `${ratio.toFixed(4)}x`;

            document.getElementById('lbl-2').innerText = "Type";
            document.getElementById('val-2').innerText = type === 'power' ? "Power (10 log)" : "Field (20 log)";

            document.getElementById('lbl-3').innerText = "Input Reference";
            document.getElementById('val-3').innerText = input;

            document.getElementById('lbl-4').innerText = "Output Level";
            document.getElementById('val-4').innerText = output;

            let steps = `<h4>Calculation Details</h4>`;
            steps += `<div class="step-block">
                <span class="step-title">Step 1: Determine Ratio</span>
                Ratio = Output / Input = ${output} / ${input} = <strong>${ratio.toFixed(4)}</strong>
            </div>`;
            steps += `<div class="step-block">
                <span class="step-title">Step 2: Apply Log Formula (${factor} log)</span>
                $dB = ${factor} \\times \\log_{10}(${ratio.toFixed(4)}) = ${factor} \\times ${Math.log10(ratio).toFixed(4)} = \\mathbf{${db.toFixed(2)} \\text{ dB}}$
            </div>`;

            document.getElementById('calc-steps-box').innerHTML = steps;
            if (window.MathJax) window.MathJax.typesetPromise();

            drawGauge(db, -60, 60, 'dB');
            lastResult = { val: db, min: -60, max: 60, unit: 'dB', steps, mode: 'ratio' };
        }

        function calcPower() {
            const mode = document.getElementById('pwr-mode').value;
            let val = parseFloat(document.getElementById('pwr-val').value);
            let resultdBm, resultW, resultdBW, resultV;
            let steps = `<h4>Conversion Breakdown</h4>`;

            if (mode === 'watts_dbm') {
                const unit = document.getElementById('pwr-unit').value;
                let powerMW = (unit === 'W') ? val * 1000 : val;

                if (powerMW <= 0) return alert("Power must be > 0");

                resultdBm = 10 * Math.log10(powerMW);
                resultdBW = resultdBm - 30;
                resultW = powerMW / 1000;

                steps += `<div class="step-block">
                    <span class="step-title">Step 1: Normalize to mW</span>
                    Power = ${powerMW} mW
                </div>`;
                steps += `<div class="step-block">
                    <span class="step-title">Step 2: Calculate dBm</span>
                    $dBm = 10 \\log_{10}(P_{mW}) = 10 \\log_{10}(${powerMW}) = \\mathbf{${resultdBm.toFixed(2)} \\text{ dBm}}$
                </div>`;
                steps += `<div class="step-block">
                    <span class="step-title">Step 3: Calculate dBW</span>
                    $dBW = dBm - 30 = ${resultdBm.toFixed(2)} - 30 = \\mathbf{${resultdBW.toFixed(2)} \\text{ dBW}}$
                </div>`;

            } else if (mode === 'dbm_watts') {
                resultdBm = val;
                let powerMW = Math.pow(10, val / 10);
                resultW = powerMW / 1000;
                resultdBW = val - 30;

                steps += `<div class="step-block">
                    <span class="step-title">Step 1: Convert to mW</span>
                    $P_{mW} = 10^{(dBm/10)} = 10^{(${val}/10)} = \\mathbf{${powerMW.toPrecision(4)} \\text{ mW}}$
                </div>`;
                steps += `<div class="step-block">
                    <span class="step-title">Step 2: Convert to Watts</span>
                    $P_{W} = P_{mW} / 1000 = \\mathbf{${resultW.toPrecision(4)} \\text{ W}}$
                </div>`;

            } else if (mode === 'volts_dbm') {
                const Z = parseFloat(document.getElementById('pwr-z').value);
                if (val <= 0 || Z <= 0) return alert("Invalid inputs");

                let powerW = (val * val) / Z;
                let powerMW = powerW * 1000;
                resultdBm = 10 * Math.log10(powerMW);
                resultW = powerW;
                resultdBW = resultdBm - 30;

                steps += `<div class="step-block">
                    <span class="step-title">Step 1: Calculate Power from Voltage</span>
                    $P = V^2 / Z = ${val}^2 / ${Z} = ${powerW.toPrecision(4)} \\text{ W}$
                </div>`;
                steps += `<div class="step-block">
                    <span class="step-title">Step 2: Convert to dBm</span>
                    $dBm = 10 \\log_{10}(${powerMW.toPrecision(4)}) = \\mathbf{${resultdBm.toFixed(2)} \\text{ dBm}}$
                </div>`;
            }

            document.getElementById('main-result').style.display = 'block';
            document.getElementById('res-subtitle').innerText = "Absolute Power Level";
            document.getElementById('res-main').innerText = `${resultdBm.toFixed(2)} dBm`;

            document.getElementById('lbl-1').innerText = "Watts";
            document.getElementById('val-1').innerText = `${resultW.toPrecision(4)} W`;

            document.getElementById('lbl-2').innerText = "dBW";
            document.getElementById('val-2').innerText = `${resultdBW.toFixed(2)} dBW`;

            document.getElementById('lbl-3').innerText = "Milliwatts";
            document.getElementById('val-3').innerText = `${(resultW * 1000).toPrecision(4)} mW`;

            document.getElementById('lbl-4').innerText = "Voltage (50Ω ref)";
            document.getElementById('val-4').innerText = `${Math.sqrt(resultW * 50).toFixed(3)} V`;

            document.getElementById('calc-steps-box').innerHTML = steps;
            if (window.MathJax) window.MathJax.typesetPromise();

            drawGauge(resultdBm, -100, 60, 'dBm');
            lastResult = { val: resultdBm, min: -100, max: 60, unit: 'dBm', steps, mode: 'power', W: resultW };
        }

        function calcLink() {
            const freq = parseFloat(document.getElementById('rf-freq').value);
            const freqUnit = document.getElementById('rf-freq-unit').value;
            const dist = parseFloat(document.getElementById('rf-dist').value);
            const distUnit = document.getElementById('rf-dist-unit').value;
            const txPwr = parseFloat(document.getElementById('rf-tx').value);
            const txGain = parseFloat(document.getElementById('rf-tx-gain').value);
            const rxGain = parseFloat(document.getElementById('rf-rx-gain').value);

            if (freq <= 0 || dist <= 0) return alert("Invalid Freq/Dist");

            // Normalize to MHz and km
            let f_mhz = (freqUnit === 'GHz') ? freq * 1000 : freq;
            let d_km = dist;
            if (distUnit === 'm') d_km = dist / 1000;
            if (distUnit === 'mi') d_km = dist * 1.60934;

            // FSPL = 20log(d_km) + 20log(f_mhz) + 32.44
            const fspl = 20 * Math.log10(d_km) + 20 * Math.log10(f_mhz) + 32.44;

            // Link Budget: Rx = Tx + Gtx - FSPL + Grx
            const rxPwr = txPwr + txGain - fspl + rxGain;

            document.getElementById('main-result').style.display = 'block';
            document.getElementById('res-subtitle').innerText = "RF Link Budget Result";
            document.getElementById('res-main').innerText = `${rxPwr.toFixed(1)} dBm`;

            document.getElementById('lbl-1').innerText = "Path Loss (FSPL)";
            document.getElementById('val-1').innerText = `${fspl.toFixed(1)} dB`;

            document.getElementById('lbl-2').innerText = "Total Gain (Tx+Rx)";
            document.getElementById('val-2').innerText = `${(txGain + rxGain).toFixed(1)} dBi`;

            document.getElementById('lbl-3').innerText = "EIRP";
            document.getElementById('val-3').innerText = `${(txPwr + txGain).toFixed(1)} dBm`;

            document.getElementById('lbl-4').innerText = "Signal Strength";
            let sigStatus = rxPwr > -70 ? "Excellent" : rxPwr > -90 ? "Good" : rxPwr > -110 ? "Weak" : "No Signal";
            document.getElementById('val-4').innerText = sigStatus;

            let steps = `<h4>Link Budget Analysis</h4>`;
            steps += `<div class="step-block">
                <span class="step-title">Step 1: Calculate Path Loss (FSPL)</span>
                Freq: ${f_mhz} MHz | Dist: ${d_km.toFixed(3)} km<br>
                $FSPL = 20\\log(d) + 20\\log(f) + 32.44$<br>
                $FSPL = 20\\log(${d_km.toFixed(2)}) + 20\\log(${f_mhz}) + 32.44 = \\mathbf{${fspl.toFixed(1)} \\text{ dB}}$
            </div>`;
            steps += `<div class="step-block">
                <span class="step-title">Step 2: Calculate Received Power</span>
                $P_{rx} = P_{tx} + G_{tx} - FSPL + G_{rx}$<br>
                $P_{rx} = ${txPwr} + ${txGain} - ${fspl.toFixed(1)} + ${rxGain} = \\mathbf{${rxPwr.toFixed(1)} \\text{ dBm}}$
            </div>`;

            document.getElementById('calc-steps-box').innerHTML = steps;
            if (window.MathJax) window.MathJax.typesetPromise();

            drawGauge(rxPwr, -120, 0, 'dBm');
            lastResult = { val: rxPwr, min: -120, max: 0, unit: 'dBm', steps, mode: 'link' };
        }

        function generatePDF() {
            if (lastResult.val === undefined) { alert("Calculate first!"); return; }
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            doc.setFontSize(18); doc.setTextColor(30, 58, 138);
            doc.text("Signal Analysis Report", 14, 20);

            doc.setFontSize(12); doc.setTextColor(0);
            doc.text(`Analysis Mode: ${lastResult.mode.toUpperCase()}`, 14, 40);
            doc.text(`Date: ${new Date().toLocaleDateString()}`, 14, 50);

            doc.setDrawColor(30, 58, 138);
            doc.setLineWidth(0.5);
            doc.line(14, 55, 196, 55);

            doc.setFontSize(14);
            doc.text(`Primary Result: ${lastResult.val.toFixed(2)} ${lastResult.unit}`, 14, 65);

            if (lastResult.mode === 'power') {
                doc.setFontSize(12);
                doc.text(`Equivalent Power: ${lastResult.W.toPrecision(4)} Watts`, 14, 75);
            }

            // Add canvas image
            const imgData = canvas.toDataURL("image/png");
            doc.addImage(imgData, 'PNG', 120, 60, 60, 60);

            const stepsText = document.getElementById('calc-steps-box').innerText;
            const split = doc.splitTextToSize(stepsText, 180);
            doc.text(split, 14, 100);

            doc.save('dB_Analysis_Report.pdf');
        }
    </script>
    <script src="/main.js"></script>
</body>

</html>
