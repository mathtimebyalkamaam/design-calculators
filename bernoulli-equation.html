<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bernoulli Equation Solver - Design Calculators - Mechanical</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- MathJax for LaTeX rendering -->
    <script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <script>
        MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']],
                processEscapes: true
            }
        };
    </script>
    <style>
        :root {
            --primary-color: #2196F3;
            --secondary-color: #1976D2;
            --accent-color: #FFC107;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333333;
            --header-bg: #2C3E50;
            --footer-bg: #34495E;
            --border-color: #cccccc;
            --card-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            --hover-color: #e2e6ea;
            --primary-color-rgb: 33, 150, 243;
        }
        body.dark-mode {
            --primary-color: #5DADE2;
            --secondary-color: #2874A6;
            --bg-color: #252D3A;
            --card-bg: #2F3C4C;
            --text-color: #E0E6EB;
            --header-bg: #252D3A;
            --footer-bg: #252D3A;
            --border-color: #4C5C70;
            --card-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            --hover-color: #3A475C;
            --primary-color-rgb: 93, 173, 226;
        }
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at center, var(--bg-color) 0%, rgba(244, 247, 246, 0.8) 100%);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s, background-image 0.3s;
        }
        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-color: var(--header-bg);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative;
        }
        header h1 {
            margin: 0;
            font-size: 2.8em;
            color: var(--primary-color);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        header .subtitle {
            margin: 8px 0 0;
            font-size: 1.1em;
            color: #bdc3c7;
        }
        main {
            padding: 30px 0;
        }
        .tool-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            margin-bottom: 25px;
            transition: transform 0.3s ease-in-out;
        }
        .tool-container:hover {
            transform: translateY(-5px);
        }
        .tool-container h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 12px;
            margin-top: 0;
            margin-bottom: 25px;
            font-size: 2em;
        }
        .tool-description {
            margin-bottom: 25px;
            color: var(--text-color);
            font-size: 1.05em;
        }
        .tool-description ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
            margin-top: 15px;
        }
        .tool-description ul li {
            margin-bottom: 8px;
        }
        .tool-description strong {
            color: var(--primary-color);
        }
        .back-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            margin-bottom: 25px;
            transition: background-color 0.3s, transform 0.2s ease-in-out;
            font-weight: bold;
        }
        .back-button:hover {
            background-color: var(--secondary-color);
            transform: scale(1.03);
        }
        .theme-toggle {
            position: absolute;
            top: 25px;
            right: 25px;
            display: flex;
            align-items: center;
        }
        .theme-toggle .light-icon,
        .theme-toggle .dark-icon {
            color: white;
            margin: 0 8px;
            font-size: 1.3em;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 65px;
            height: 38px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 30px;
            width: 30px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        input:focus + .slider {
            box-shadow: 0 0 1px var(--primary-color);
        }
        input:checked + .slider:before {
            transform: translateX(27px);
        }
        .slider.round {
            border-radius: 38px;
        }
        .slider.round:before {
            border-radius: 50%;
        }
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.2);
            margin-top: 40px;
        }
        footer .disclaimer h3,
        footer .social-share h3 {
            color: var(--primary-color);
            margin-bottom: 12px;
            font-size: 1.3em;
        }
        footer .disclaimer p {
            font-size: 0.95em;
            color: #bdc3c7;
        }
        .social-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .social-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.4em;
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .social-btn:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 15px rgba(0,0,0,0.3);
        }
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.reddit { background-color: #FF4500; }
        .social-btn.email { background-color: #7f8c8d; }
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            margin-top: 25px;
            box-shadow: var(--card-shadow);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 1.05em;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--bg-color);
            color: var(--text-color);
            box-sizing: border-box;
            font-size: 1em;
            transition: border-color 0.3s, box-shadow 0.3s;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.08);
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb), 0.3);
            outline: none;
        }
        .form-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .form-row .form-group {
            flex: 1 1 calc(50% - 10px);
            min-width: 280px;
        }
        @media (max-width: 600px) {
            .form-row .form-group {
                flex: 1 1 100%;
            }
        }
        .calculate-btn {
            background-image: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 18px 25px; /* Increased padding for taller button */
            border-radius: 8px;
            cursor: pointer;
            font-size: 17px;
            font-weight: bold;
            margin-top: 20px;
            transition: background-image 0.3s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .calculate-btn:hover {
            background-image: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        .result-container {
            margin-top: 40px;
            padding: 30px;
            border-radius: 12px;
            background-color: var(--card-bg);
            box-shadow: var(--card-shadow);
            display: block;
            opacity: 0;
            transition: opacity 0.6s ease-out;
            pointer-events: none;
        }
        .result-container.show {
            opacity: 1;
            pointer-events: auto;
        }
        .result-container h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .result-table th, .result-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        .result-table th {
            background-color: var(--hover-color);
            font-weight: bold;
            font-size: 1.1em;
        }
        .result-table tr:last-child td {
            border-bottom: none;
        }
        .standard-reference {
            margin-top: 25px;
            font-style: italic;
            font-size: 0.95rem;
            line-height: 1.5;
            padding: 10px;
            background-color: var(--bg-color);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        .info-icon {
            color: var(--primary-color);
            margin-left: 8px;
            cursor: help;
            font-size: 1em;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85em;
        }
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        #custom-message-box {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 18px 30px;
            border-radius: 10px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            font-size: 1.1em;
        }
        #calculation-details {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            font-size: 0.98em;
        }
        #calculation-details h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        #calculation-details p.formula {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            font-size: 1.2em;
            text-align: center;
            padding: 12px 0;
            background-color: var(--hover-color);
            border-radius: 6px;
            margin: 15px 0;
            overflow-x: auto;
            border: 1px dashed var(--border-color);
        }
        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace;
            background-color: var(--hover-color);
            padding: 8px 12px;
            border-radius: 5px;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        #calculation-details ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
        }
        #calculation-details ul li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Design Calculators - Mechanical</h1>
            <p class="subtitle">Smart Tools for Modern Mechanical Engineers</p>
            <div class="theme-toggle">
                <span class="light-icon"><i class="fas fa-sun"></i></span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
                <span class="dark-icon"><i class="fas fa-moon"></i></span>
            </div>
        </div>
    </header>
    <main class="container">
        <a href="indexMech.html" class="back-button">
            <i class="fas fa-arrow-left"></i> Back to Tools
        </a>
        <div class="tool-container">
            <h2>Bernoulli Equation Solver</h2>
            <div class="tool-description">
                <p>This calculator solves the Bernoulli equation for steady, incompressible, inviscid flow along a streamline. It calculates one unknown parameter at point 2 (\(\text{Pressure } P_2\), \(\text{Velocity } v_2\), or \(\text{Height } h_2\)) given the conditions at point 1 and two known parameters at point 2.</p>
                <p>The Bernoulli equation is: \(\\[ P_1 + \rho g h_1 + \frac{1}{2} \rho v_1^2 = P_2 + \rho g h_2 + \frac{1}{2} \rho v_2^2 \\]\)</p>
                <ul>
                    <li><strong>Pressure (\(P\)):</strong> The fluid pressure at a point (Pa or psf).</li>
                    <li><strong>Velocity (\(v\)):</strong> The fluid velocity at a point (m/s or ft/s).</li>
                    <li><strong>Height (\(h\)):</strong> The elevation above a reference level (m or ft).</li>
                    <li><strong>Density (\(\rho\)):</strong> The fluid density, temperature-dependent (kg/m\(^3\) or lb/ft\(^3\)).</li>
                </ul>
                <p><strong>Note:</strong> This calculator assumes constant density and neglects friction losses. For gases, compressibility effects are simplified. For precise applications, consult relevant fluid dynamics standards.</p>
            </div>
            <div class="calculator-form">
                <form id="bernoulli-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="calculation-type">Calculate: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Choose the parameter to calculate at point 2.</span></span></label>
                            <select id="calculation-type" required>
                                <option value="pressure">Pressure (\(P_2\))</option>
                                <option value="velocity">Velocity (\(v_2\))</option>
                                <option value="height">Height (\(h_2\))</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="unit-system">Unit System: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select Metric (e.g., m/s, Pa, m) or Imperial (e.g., ft/s, psf, ft) units.</span></span></label>
                            <select id="unit-system" required>
                                <option value="metric">Metric (\(\text{m}^3/\text{s}\), \(\text{Pa}\), \(\text{m}\))</option>
                                <option value="imperial">Imperial (\(\text{ft}^3/\text{s}\), \(\text{psf}\), \(\text{ft}\))</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fluid-type">Fluid Type <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select the fluid. Its density will be used. Gas calculations are simplified.</span></span></label>
                            <select id="fluid-type" required>
                                <option value="water">Water</option>
                                <option value="oil">Engine Oil (SAE 30)</option>
                                <option value="gas">Air (Ideal Gas)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="fluid-temperature">Fluid Temperature (℃) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the fluid's operating temperature. Affects density.</span></span></label>
                            <input type="number" id="fluid-temperature" step="0.1" value="20" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="pressure1">Pressure at Point 1 (\(P_1\)) <span class="pressure-unit-label">(\(\text{Pa}\))</span> <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Pressure at the first point in the flow.</span></span></label>
                            <input type="number" id="pressure1" step="0.1" value="101325" required>
                        </div>
                        <div class="form-group">
                            <label for="velocity1">Velocity at Point 1 (\(v_1\)) <span class="velocity-unit-label">(\(\text{m/s}\))</span> <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Velocity at the first point in the flow.</span></span></label>
                            <input type="number" id="velocity1" min="0" step="0.1" value="2" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="height1">Height at Point 1 (\(h_1\)) <span class="height-unit-label">(\(\text{m}\))</span> <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Elevation at the first point relative to a reference level.</span></span></label>
                            <input type="number" id="height1" step="0.1" value="0" required>
                        </div>
                        <div class="form-group" id="pressure2-group">
                            <label for="pressure2">Pressure at Point 2 (\(P_2\)) <span class="pressure-unit-label">(\(\text{Pa}\))</span> <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Pressure at the second point (leave blank if calculating).</span></span></label>
                            <input type="number" id="pressure2" step="0.1" value="101325">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group" id="velocity2-group">
                            <label for="velocity2">Velocity at Point 2 (\(v_2\)) <span class="velocity-unit-label">(\(\text{m/s}\))</span> <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Velocity at the second point (leave blank if calculating).</span></span></label>
                            <input type="number" id="velocity2" min="0" step="0.1" value="1">
                        </div>
                        <div class="form-group" id="height2-group">
                            <label for="height2">Height at Point 2 (\(h_2\)) <span class="height-unit-label">(\(\text{m}\))</span> <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Elevation at the second point (leave blank if calculating).</span></span></label>
                            <input type="number" id="height2" step="0.1" value="1">
                        </div>
                    </div>
                    <button type="button" id="calculate-bernoulli-btn" class="calculate-btn">Calculate</button>
                </form>
            </div>
            <div id="result-container" class="result-container">
                <h3>Calculation Results</h3>
                <div id="calculation-details"></div>
                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body"></tbody>
                </table>
                <div class="standard-reference" id="standard-reference"></div>
            </div>
        </div>
    </main>
    <footer>
        <div class="container">
            <div class="disclaimer">
                <h3>Disclaimer</h3>
                <p>To ensure accuracy and reliability, always verify the results obtained from these tools against the relevant engineering standards and guidelines.</p>
            </div>
            <div class="credit">
                <p>Created by A Sharma</p>
            </div>
            <div class="social-share">
                <h3>Share This Site</h3>
                <div class="social-buttons">
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in&title=Design Calculators - Mechanical" target="_blank" class="social-btn linkedin">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" class="social-btn facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?text=Check out this amazing Design Calculators - Mechanical!&url=https://designcalculators.co.in" target="_blank" class="social-btn twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text=Check out this amazing Design Calculators - Mechanical! https://designcalculators.co.in" target="_blank" class="social-btn whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.reddit.com/submit?url=https://designcalculators.co.in&title=Design Calculators - Mechanical" target="_blank" class="social-btn reddit">
                        <i class="fab fa-reddit"></i>
                    </a>
                    <a href="mailto:?subject=Check out Design Calculators - Mechanical!&body=I found this amazing Bernoulli Equation Solver and other mechanical tools: https://designcalculators.co.in" class="social-btn email">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const calculateBtn = document.getElementById('calculate-bernoulli-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const standardReference = document.getElementById('standard-reference');
            const calculationDetailsDiv = document.getElementById('calculation-details');
            const calculationTypeSelect = document.getElementById('calculation-type');
            const unitSystemSelect = document.getElementById('unit-system');
            const fluidTypeSelect = document.getElementById('fluid-type');
            const fluidTemperatureInput = document.getElementById('fluid-temperature');
            const pressure1Input = document.getElementById('pressure1');
            const velocity1Input = document.getElementById('velocity1');
            const height1Input = document.getElementById('height1');
            const pressure2Group = document.getElementById('pressure2-group');
            const pressure2Input = document.getElementById('pressure2');
            const velocity2Group = document.getElementById('velocity2-group');
            const velocity2Input = document.getElementById('velocity2');
            const height2Group = document.getElementById('height2-group');
            const height2Input = document.getElementById('height2');
            const pressureUnitLabels = document.querySelectorAll('.pressure-unit-label');
            const velocityUnitLabels = document.querySelectorAll('.velocity-unit-label');
            const heightUnitLabels = document.querySelectorAll('.height-unit-label');
            const fluidPropertiesData = {
                'water': {
                    density: [
                        [0, 999.8], [10, 999.7], [20, 998.2], [30, 995.7],
                        [40, 992.2], [50, 988.0], [60, 983.2], [70, 977.8],
                        [80, 971.8], [90, 965.3], [100, 958.4]
                    ]
                },
                'oil': {
                    density: [
                        [20, 880] // Simplified for Engine Oil (SAE 30)
                    ]
                },
                'gas': {
                    density: [
                        [0, 1.293], [10, 1.247], [20, 1.204], [30, 1.164],
                        [40, 1.127], [50, 1.093], [60, 1.060], [70, 1.029],
                        [80, 1.000], [90, 0.972], [100, 0.946]
                    ]
                }
            };
            function interpolateDensity(fluidType, temperature) {
                const data = fluidPropertiesData[fluidType].density;
                if (!data) return null;
                if (data.length === 1) {
                    return data[0][1];
                }
                if (temperature <= data[0][0]) {
                    return data[0][1];
                }
                if (temperature >= data[data.length - 1][0]) {
                    return data[data.length - 1][1];
                }
                for (let i = 0; i < data.length - 1; i++) {
                    const temp1 = data[i][0];
                    const dens1 = data[i][1];
                    const temp2 = data[i + 1][0];
                    const dens2 = data[i + 1][1];
                    if (temperature >= temp1 && temperature <= temp2) {
                        return dens1 + (dens2 - dens1) * (temperature - temp1) / (temp2 - temp1);
                    }
                }
                return data[0][1];
            }
            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    document.body.appendChild(messageBox);
                }
                messageBox.textContent = message;
                if (type === "error") {
                    messageBox.style.backgroundColor = '#dc3545';
                    messageBox.style.color = 'white';
                } else if (type === "warning") {
                    messageBox.style.backgroundColor = '#ffc107';
                    messageBox.style.color = '#333';
                } else {
                    messageBox.style.backgroundColor = '#28a745';
                    messageBox.style.color = 'white';
                }
                messageBox.style.opacity = 1;
                setTimeout(() => {
                    messageBox.style.opacity = 0;
                }, 5000);
            }
            function updateUI() {
                const calcType = calculationTypeSelect.value;
                const unitSystem = unitSystemSelect.value;
                if (unitSystem === 'imperial') {
                    pressureUnitLabels.forEach(label => label.innerHTML = '(\\(\\text{psf}\\))');
                    velocityUnitLabels.forEach(label => label.innerHTML = '(\\(\\text{ft/s}\\))');
                    heightUnitLabels.forEach(label => label.innerHTML = '(\\(\\text{ft}\\))');
                } else {
                    pressureUnitLabels.forEach(label => label.innerHTML = '(\\(\\text{Pa}\\))');
                    velocityUnitLabels.forEach(label => label.innerHTML = '(\\(\\text{m/s}\\))');
                    heightUnitLabels.forEach(label => label.innerHTML = '(\\(\\text{m}\\))');
                }
                pressure2Group.style.display = calcType === 'pressure' ? 'none' : 'block';
                velocity2Group.style.display = calcType === 'velocity' ? 'none' : 'block';
                height2Group.style.display = calcType === 'height' ? 'none' : 'block';
                pressure2Input.required = calcType !== 'pressure';
                velocity2Input.required = calcType !== 'velocity';
                height2Input.required = calcType !== 'height';
            }
            calculationTypeSelect.addEventListener('change', updateUI);
            unitSystemSelect.addEventListener('change', updateUI);
            updateUI();
            calculateBtn.addEventListener('click', function() {
                const calcType = calculationTypeSelect.value;
                const unitSystem = unitSystemSelect.value;
                const fluidType = fluidTypeSelect.value;
                const fluidTemperature = parseFloat(fluidTemperatureInput.value);
                const P1 = parseFloat(pressure1Input.value);
                const v1 = parseFloat(velocity1Input.value);
                const h1 = parseFloat(height1Input.value);
                let P2 = parseFloat(pressure2Input.value);
                let v2 = parseFloat(velocity2Input.value);
                let h2 = parseFloat(height2Input.value);
                if (isNaN(fluidTemperature)) {
                    displayMessage("Please enter a valid number for Fluid Temperature.", "error");
                    return;
                }
                if (isNaN(P1)) {
                    displayMessage("Please enter a valid number for Pressure at Point 1.", "error");
                    return;
                }
                if (isNaN(v1) || v1 < 0) {
                    displayMessage("Please enter a valid non-negative number for Velocity at Point 1.", "error");
                    return;
                }
                if (isNaN(h1)) {
                    displayMessage("Please enter a valid number for Height at Point 1.", "error");
                    return;
                }
                if (calcType === 'pressure' && (isNaN(v2) || v2 < 0 || isNaN(h2))) {
                    displayMessage("Please enter valid numbers for Velocity and Height at Point 2.", "error");
                    return;
                }
                if (calcType === 'velocity' && (isNaN(P2) || isNaN(h2))) {
                    displayMessage("Please enter valid numbers for Pressure and Height at Point 2.", "error");
                    return;
                }
                if (calcType === 'height' && (isNaN(P2) || isNaN(v2) || v2 < 0)) {
                    displayMessage("Please enter valid numbers for Pressure and Velocity at Point 2.", "error");
                    return;
                }
                let rho, g, P1_SI, v1_SI, h1_SI, P2_SI, v2_SI, h2_SI;
                rho = interpolateDensity(fluidType, fluidTemperature);
                if (unitSystem === 'imperial') {
                    g = 32.174; // ft/s^2
                    P1_SI = P1 * 47.88026; // psf to Pa
                    v1_SI = v1 * 0.3048; // ft/s to m/s
                    h1_SI = h1 * 0.3048; // ft to m
                    rho = rho * 16.0185; // kg/m^3 to lb/ft^3
                    if (calcType !== 'pressure') P2_SI = P2 * 47.88026;
                    if (calcType !== 'velocity') v2_SI = v2 * 0.3048;
                    if (calcType !== 'height') h2_SI = h2 * 0.3048;
                    displayMessage("Imperial units are converted to metric for calculations. Results will be converted back.", "info");
                } else {
                    g = 9.81; // m/s^2
                    P1_SI = P1;
                    v1_SI = v1;
                    h1_SI = h1;
                    if (calcType !== 'pressure') P2_SI = P2;
                    if (calcType !== 'velocity') v2_SI = v2;
                    if (calcType !== 'height') h2_SI = h2;
                }
                let calculatedValue, displayValue, displayUnit;
                let calculationHtml = '<h4>Detailed Calculation Steps:</h4>';
                calculationHtml += `<p><strong>1. Input Parameters:</strong></p>`;
                calculationHtml += `<ul>
                    <li>Calculation Type: ${calcType === 'pressure' ? 'Pressure (\\(P_2\\))' : calcType === 'velocity' ? 'Velocity (\\(v_2\\))' : 'Height (\\(h_2\\))'}</li>
                    <li>Unit System: ${unitSystem === 'imperial' ? 'Imperial' : 'Metric'}</li>
                    <li>Fluid Type: ${fluidType.charAt(0).toUpperCase() + fluidType.slice(1)}</li>
                    <li>Fluid Temperature: ${fluidTemperature}℃</li>
                    <li>Fluid Density (\\(\\rho\\)): ${unitSystem === 'imperial' ? (rho / 16.0185).toFixed(3) + ' \\(\\text{kg/m}^3\\) (' + rho.toFixed(3) + ' \\(\\text{lb/ft}^3\\))' : rho.toFixed(3) + ' \\(\\text{kg/m}^3\\)'}</li>
                    <li>Gravitational Acceleration (\\(g\\)): ${g.toFixed(3)} ${unitSystem === 'imperial' ? '\\(\\text{ft/s}^2\\)' : '\\(\\text{m/s}^2\\)'}</li>
                    <li>Pressure at Point 1 (\\(P_1\\)): ${P1} ${unitSystem === 'imperial' ? '\\(\\text{psf}\\)' : '\\(\\text{Pa}\\)'}</li>
                    <li>Velocity at Point 1 (\\(v_1\\)): ${v1} ${unitSystem === 'imperial' ? '\\(\\text{ft/s}\\)' : '\\(\\text{m/s}\\)'}</li>
                    <li>Height at Point 1 (\\(h_1\\)): ${h1} ${unitSystem === 'imperial' ? '\\(\\text{ft}\\)' : '\\(\\text{m}\\)'}</li>
                </ul>`;
                const leftSide = P1_SI + rho * g * h1_SI + 0.5 * rho * Math.pow(v1_SI, 2);
                if (calcType === 'pressure') {
                    P2_SI = leftSide - (rho * g * h2_SI + 0.5 * rho * Math.pow(v2_SI, 2));
                    displayValue = unitSystem === 'imperial' ? (P2_SI / 47.88026).toFixed(2) : P2_SI.toFixed(2);
                    displayUnit = unitSystem === 'imperial' ? '\\(\\text{psf}\\)' : '\\(\\text{Pa}\\)';
                    calculationHtml += `<p><strong>2. Calculate Pressure (\\(P_2\\)):</strong></p>`;
                    calculationHtml += `<p>The Bernoulli equation is used to solve for \\(P_2\\):</p>`;
                    calculationHtml += `<p class="formula">\\[ P_1 + \\rho g h_1 + \\frac{1}{2} \\rho v_1^2 = P_2 + \\rho g h_2 + \\frac{1}{2} \\rho v_2^2 \\]</p>`;
                    calculationHtml += `<p>Rearranged for \\(P_2\\):</p>`;
                    calculationHtml += `<p class="formula">\\[ P_2 = P_1 + \\rho g h_1 + \\frac{1}{2} \\rho v_1^2 - \\rho g h_2 - \\frac{1}{2} \\rho v_2^2 \\]</p>`;
                    calculationHtml += `<p class="calculation-step">
                        \\(P_2\\) = ${P1_SI.toFixed(2)} + (${rho.toFixed(2)} \\times ${g.toFixed(3)} \\times ${h1_SI.toFixed(2)}) + (0.5 \\times ${rho.toFixed(2)} \\times ${v1_SI.toFixed(2)}^2) - (${rho.toFixed(2)} \\times ${g.toFixed(3)} \\times ${h2_SI.toFixed(2)}) - (0.5 \\times ${rho.toFixed(2)} \\times ${v2_SI.toFixed(2)}^2) = ${P2_SI.toFixed(2)} \\(\\text{Pa}\\)
                    </p>`;
                    calculationHtml += `<ul>
                        <li>Velocity at Point 2 (\\(v_2\\)): ${v2} ${unitSystem === 'imperial' ? '\\(\\text{ft/s}\\)' : '\\(\\text{m/s}\\)'}</li>
                        <li>Height at Point 2 (\\(h_2\\)): ${h2} ${unitSystem === 'imperial' ? '\\(\\text{ft}\\)' : '\\(\\text{m}\\)'}</li>
                    </ul>`;
                } else if (calcType === 'velocity') {
                    const rightSide = leftSide - (P2_SI + rho * g * h2_SI);
                    v2_SI = Math.sqrt((2 * rightSide) / rho);
                    if (isNaN(v2_SI) || rightSide < 0) {
                        displayMessage("Invalid input: The calculated velocity results in a negative or imaginary value.", "error");
                        return;
                    }
                    displayValue = unitSystem === 'imperial' ? (v2_SI / 0.3048).toFixed(2) : v2_SI.toFixed(2);
                    displayUnit = unitSystem === 'imperial' ? '\\(\\text{ft/s}\\)' : '\\(\\text{m/s}\\)' ;
                    calculationHtml += `<p><strong>2. Calculate Velocity (\\(v_2\\)):</strong></p>`;
                    calculationHtml += `<p>The Bernoulli equation is used to solve for \\(v_2\\):</p>`;
                    calculationHtml += `<p class="formula">\\[ P_1 + \\rho g h_1 + \\frac{1}{2} \\rho v_1^2 = P_2 + \\rho g h_2 + \\frac{1}{2} \\rho v_2^2 \\]</p>`;
                    calculationHtml += `<p>Rearranged for \\(v_2\\):</p>`;
                    calculationHtml += `<p class="formula">\\[ v_2 = \\sqrt{\\frac{2}{\\rho} \\left( P_1 + \\rho g h_1 + \\frac{1}{2} \\rho v_1^2 - P_2 - \\rho g h_2 \\right)} \\]</p>`;
                    calculationHtml += `<p class="calculation-step">
                        \\(v_2\\) = \\sqrt{\\frac{2}{${rho.toFixed(2)}} \\left( ${P1_SI.toFixed(2)} + (${rho.toFixed(2)} \\times ${g.toFixed(3)} \\times ${h1_SI.toFixed(2)}) + (0.5 \\times ${rho.toFixed(2)} \\times ${v1_SI.toFixed(2)}^2) - ${P2_SI.toFixed(2)} - (${rho.toFixed(2)} \\times ${g.toFixed(3)} \\times ${h2_SI.toFixed(2)}) \\right)} = ${v2_SI.toFixed(2)} \\(\\text{m/s}\\)
                    </p>`;
                    calculationHtml += `<ul>
                        <li>Pressure at Point 2 (\\(P_2\\)): ${P2} ${unitSystem === 'imperial' ? '\\(\\text{psf}\\)' : '\\(\\text{Pa}\\)'}</li>
                        <li>Height at Point 2 (\\(h_2\\)): ${h2} ${unitSystem === 'imperial' ? '\\(\\text{ft}\\)' : '\\(\\text{m}\\)'}</li>
                    </ul>`;
                } else {
                    h2_SI = (leftSide - (P2_SI + 0.5 * rho * Math.pow(v2_SI, 2))) / (rho * g);
                    displayValue = unitSystem === 'imperial' ? (h2_SI / 0.3048).toFixed(2) : h2_SI.toFixed(2);
                    displayUnit = unitSystem === 'imperial' ? '\\(\\text{ft}\\)' : '\\(\\text{m}\\)' ;
                    calculationHtml += `<p><strong>2. Calculate Height (\\(h_2\\)):</strong></p>`;
                    calculationHtml += `<p>The Bernoulli equation is used to solve for \\(h_2\\):</p>`;
                    calculationHtml += `<p class="formula">\\[ P_1 + \\rho g h_1 + \\frac{1}{2} \\rho v_1^2 = P_2 + \\rho g h_2 + \\frac{1}{2} \\rho v_2^2 \\]</p>`;
                    calculationHtml += `<p>Rearranged for \\(h_2\\):</p>`;
                    calculationHtml += `<p class="formula">\\[ h_2 = \\frac{P_1 + \\rho g h_1 + \\frac{1}{2} \\rho v_1^2 - P_2 - \\frac{1}{2} \\rho v_2^2}{\\rho g} \\]</p>`;
                    calculationHtml += `<p class="calculation-step">
                        \\(h_2\\) = \\frac{${P1_SI.toFixed(2)} + (${rho.toFixed(2)} \\times ${g.toFixed(3)} \\times ${h1_SI.toFixed(2)}) + (0.5 \\times ${rho.toFixed(2)} \\times ${v1_SI.toFixed(2)}^2) - ${P2_SI.toFixed(2)} - (0.5 \\times ${rho.toFixed(2)} \\times ${v2_SI.toFixed(2)}^2)}{${rho.toFixed(2)} \\times ${g.toFixed(3)}} = ${h2_SI.toFixed(2)} \\(\\text{m}\\)
                    </p>`;
                    calculationHtml += `<ul>
                        <li>Pressure at Point 2 (\\(P_2\\)): ${P2} ${unitSystem === 'imperial' ? '\\(\\text{psf}\\)' : '\\(\\text{Pa}\\)'}</li>
                        <li>Velocity at Point 2 (\\(v_2\\)): ${v2} ${unitSystem === 'imperial' ? '\\(\\text{ft/s}\\)' : '\\(\\text{m/s}\\)'}</li>
                    </ul>`;
                }
                calculationDetailsDiv.innerHTML = calculationHtml;
                if (window.MathJax) {
                    window.MathJax.typesetPromise([calculationDetailsDiv]);
                }
                resultTableBody.innerHTML = '';
                function addResultRow(parameterHtml, valueHtml) {
                    const row = resultTableBody.insertRow();
                    const paramCell = row.insertCell();
                    const valueCell = row.insertCell();
                    paramCell.innerHTML = parameterHtml;
                    valueCell.innerHTML = valueHtml;
                }
                addResultRow("Calculation Type", calcType === 'pressure' ? 'Pressure (\\(P_2\\))' : calcType === 'velocity' ? 'Velocity (\\(v_2\\))' : 'Height (\\(h_2\\))');
                addResultRow("Unit System", unitSystem === 'imperial' ? 'Imperial' : 'Metric');
                addResultRow("Fluid Type", fluidType.charAt(0).toUpperCase() + fluidType.slice(1));
                addResultRow("Fluid Temperature", `${fluidTemperature}°C`);
                addResultRow("Fluid Density (\\(\\rho\\))", `${unitSystem === 'imperial' ? (rho / 16.0185).toFixed(3) + ' \\(\\text{kg/m}^3\\) (' + rho.toFixed(3) + ' \\(\\text{lb/ft}^3\\))' : rho.toFixed(3) + ' \\(\\text{kg/m}^3\\)'}`);
                addResultRow("Gravitational Acceleration (\\(g\\))", `${g.toFixed(3)} ${unitSystem === 'imperial' ? '\\(\\text{ft/s}^2\\)' : '\\(\\text{m/s}^2\\)'}`);
                addResultRow("Pressure at Point 1 (\\(P_1\\))", `${P1} ${unitSystem === 'imperial' ? '\\(\\text{psf}\\)' : '\\(\\text{Pa}\\)'}`);
                addResultRow("Velocity at Point 1 (\\(v_1\\))", `${v1} ${unitSystem === 'imperial' ? '\\(\\text{ft/s}\\)' : '\\(\\text{m/s}\\)'}`);
                addResultRow("Height at Point 1 (\\(h_1\\))", `${h1} ${unitSystem === 'imperial' ? '\\(\\text{ft}\\)' : '\\(\\text{m}\\)'}`);
                if (calcType !== 'pressure') addResultRow("Pressure at Point 2 (\\(P_2\\))", `${P2} ${unitSystem === 'imperial' ? '\\(\\text{psf}\\)' : '\\(\\text{Pa}\\)'}`);
                if (calcType !== 'velocity') addResultRow("Velocity at Point 2 (\\(v_2\\))", `${v2} ${unitSystem === 'imperial' ? '\\(\\text{ft/s}\\)' : '\\(\\text{m/s}\\)'}`);
                if (calcType !== 'height') addResultRow("Height at Point 2 (\\(h_2\\))", `${h2} ${unitSystem === 'imperial' ? '\\(\\text{ft}\\)' : '\\(\\text{m}\\)'}`);
                addResultRow(`Calculated ${calcType === 'pressure' ? 'Pressure (\\(P_2\\))' : calcType === 'velocity' ? 'Velocity (\\(v_2\\))' : 'Height (\\(h_2\\))'}`, `<strong>${displayValue} ${displayUnit}</strong>`);
                if (window.MathJax) {
                    window.MathJax.typesetPromise([resultTableBody, ...pressureUnitLabels, ...velocityUnitLabels, ...heightUnitLabels]);
                }
                standardReference.innerHTML = "The Bernoulli equation is a fundamental principle in fluid dynamics for steady, incompressible, inviscid flow along a streamline. For detailed applications and limitations, refer to standard fluid mechanics texts such as <strong>White, F. M., 'Fluid Mechanics'</strong> or consult engineering standards for specific flow conditions.";
                resultContainer.style.display = 'block';
                setTimeout(() => {
                    resultContainer.classList.add('show');
                }, 10);
                resultContainer.scrollIntoView({ behavior: 'smooth' });
                displayMessage("Calculation completed successfully!", "info");
            });
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }
                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }
        });
    </script>
</body>
</html>