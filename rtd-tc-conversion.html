<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
     crossorigin="anonymous"></script>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-23Y1V450SR');
</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTD / Thermocouple Conversion Tool - Design Calculators - Instrumentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="icon" href="/favicon.ico" type="image/x-icon">

    <!-- MathJax for LaTeX rendering -->
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <style>
        /* Basic CSS Variables for a consistent theme */
        :root {
            --primary-color: #4CAF50; /* Green */
            --secondary-color: #45a049; /* Darker Green */
            --accent-color: #FFC107; /* Amber */
            --bg-color: #f4f7f6; /* Light Greyish Green */
            --card-bg: #ffffff; /* White */
            --text-color: #333333; /* Dark Grey */
            --header-bg: #2C3E50; /* Dark Blue Grey */
            --footer-bg: #34495E; /* Slightly Lighter Dark Blue Grey */
            --border-color: #cccccc;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --hover-color: #e2e6ea;
            --button-gradient: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            --button-hover-gradient: linear-gradient(45deg, var(--secondary-color), #3b8e3e);
            --reset-button-bg: #FFC107; /* Yellow for reset */
            --reset-button-hover-bg: #E0A800; /* Darker yellow */
            --clear-button-bg: #007bff; /* Blue for clear */
            --clear-button-hover-bg: #0056b3; /* Darker blue */
        }

        /* Dark Mode Variables */
        body.dark-mode {
            --bg-color: #2c3e50;
            --card-bg: #34495e;
            --text-color: #ecf0f1;
            --header-bg: #2c3e50;
            --footer-bg: #2c3e50;
            --border-color: #555555;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            --hover-color: #446688;
            --button-gradient: linear-gradient(45deg, #3b8e3e, #4CAF50);
            --button-hover-gradient: linear-gradient(45deg, #4CAF50, #5cb85c);
            --reset-button-bg: #FFD700; /* Gold/Yellow for dark mode reset */
            --reset-button-hover-bg: #DAA520; /* Darker gold/yellow */
            --clear-button-bg: #17a2b8; /* Cyan for dark mode clear */
            --clear-button-hover-bg: #138496;
        }

        /* General Body Styling */
        body {
            font-family: 'Inter', sans-serif; /* Using Inter as specified */
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, var(--bg-color), #e0e0e0);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--header-bg);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative; /* For theme toggle positioning */
        }

        header h1 {
            margin: 0;
            font-size: 2.5em;
            color: var(--primary-color);
        }

        header .subtitle {
            margin: 5px 0 0;
            font-size: 1em;
            color: #bdc3c7;
        }

        main {
            padding: 20px 0;
        }

        .tool-container {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
            transition: transform 0.3s ease-in-out;
        }

        .tool-container:hover {
            transform: translateY(-5px);
        }

        .tool-container h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-top: 0;
            margin-bottom: 20px;
        }

        .tool-description {
            margin-bottom: 20px;
            color: var(--text-color);
        }

        .back-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border-radius: 4px;
            text-decoration: none;
            margin-bottom: 20px;
            transition: background-color 0.3s, transform 0.3s;
            width: fit-content; 
        }

        .back-button:hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
        }

        /* Theme Toggle */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
        }

        .theme-toggle .light-icon,
        .theme-toggle .dark-icon {
            color: white;
            margin: 0 5px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:focus + .slider {
            box-shadow: 0 0 1px var(--primary-color);
        }

        input:checked + .slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(26px);
            transform: translateX(26px);
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        /* Footer Styling */
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
        }

        footer .disclaimer h3,
        footer .social-share h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        footer .disclaimer p {
            font-size: 0.9em;
            color: #bdc3c7;
        }

        .social-buttons {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .social-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.2em;
            transition: transform 0.3s ease-in-out;
        }

        .social-btn:hover {
            transform: translateY(-3px);
        }

        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.reddit { background-color: #FF4500; }

        /* Styles for Calculator Forms and Results */
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: var(--card-shadow);
        }
        
        .form-section {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 25px; /* Space between sections */
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            opacity: 0; /* Initial state for fade-in animation */
            transform: translateY(10px); /* Initial state for slide-up animation */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }

        .form-section.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        .form-section h3 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px;
            border-bottom: 1px dashed var(--border-color);
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 15px; /* Default margin for form groups */
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--text-color);
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: var(--card-bg); /* Use card-bg for input background */
            color: var(--text-color);
            box-sizing: border-box; /* Ensure padding doesn't increase width */
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Responsive grid */
            gap: 20px; /* Gap between grid items */
            margin-bottom: 0; /* Handled by form-group margin */
        }
        
        .calculate-btn {
            background: var(--button-gradient);
            color: white;
            border: none;
            padding: 12px 30px; /* Increased padding for better appearance */
            border-radius: 25px; /* More rounded */
            cursor: pointer;
            font-size: 1.1em; /* Slightly larger font */
            font-weight: bold;
            margin-top: 25px; /* More space above button */
            transition: background 0.3s ease-in-out, transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            width: auto; /* Allow button to size based on content and padding */
            min-width: 220px; /* Ensure a minimum width for consistency */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); /* More pronounced shadow */
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        
        .calculate-btn:hover {
            background: var(--button-hover-gradient);
            transform: translateY(-5px) scale(1.02); /* Lift and slightly scale */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); /* Deeper shadow on hover */
        }

        .reset-btn {
            background-color: var(--reset-button-bg);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 25px;
            margin-left: 15px; /* Space from calculate button */
            transition: background-color 0.3s ease-in-out, transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            width: auto;
            min-width: 150px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .reset-btn:hover {
            background-color: var(--reset-button-hover-bg);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .clear-results-btn {
            background-color: var(--clear-button-bg);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            margin-top: 15px;
            transition: background-color 0.3s ease-in-out, transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .clear-results-btn:hover {
            background-color: var(--clear-button-hover-bg);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .result-container {
            margin-top: 30px;
            padding: 20px;
            border-radius: 8px;
            background-color: var(--card-bg);
            box-shadow: var(--card-shadow);
            display: none; /* Hidden by default */
            opacity: 0; /* For animation */
            transform: translateY(20px); /* Initial state for animation */
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
        
        .result-container.show {
            opacity: 1;
            transform: translateY(0);
        }

        .result-container h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            border-radius: 8px;
            overflow: hidden; /* Ensures rounded corners apply to table content */
        }
        
        .result-table th, .result-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.3s;
        }
        
        .result-table th {
            background-color: var(--hover-color);
            font-weight: bold;
            color: var(--secondary-color);
        }

        .result-table tr:last-child td {
            border-bottom: none; /* No border for the last row */
        }

        .result-table tbody tr:hover {
            background-color: var(--hover-color); /* Highlight row on hover */
        }
        
        .standard-reference {
            margin-top: 20px;
            font-style: italic;
            font-size: 0.9rem;
            color: var(--text-color);
            padding: 10px;
            border-left: 4px solid var(--primary-color);
            background-color: var(--hover-color);
            border-radius: 4px;
        }
        
        .info-icon {
            color: var(--primary-color);
            margin-left: 5px;
            cursor: help;
            transition: color 0.3s;
        }

        .info-icon:hover {
            color: var(--accent-color);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px; /* Increased padding */
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            transform: translateY(10px); /* Initial state for tooltip animation */
            font-size: 0.85em;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
            transform: translateY(0);
        }

        /* Custom message box style */
        #custom-message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            display: flex; /* Use flex for centering text */
            align-items: center;
            justify-content: center;
            min-width: 250px; /* Ensure it's wide enough */
        }

        /* Styles for calculation details */
        #calculation-details {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px; /* More rounded */
            padding: 20px; /* Increased padding */
            margin-bottom: 25px; /* More space */
            font-size: 0.95em;
            color: var(--text-color);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05); /* Subtle inner shadow */
        }
        #calculation-details h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px; /* More space */
            text-align: center;
            font-size: 1.2em;
        }
        #calculation-details p.formula {
            font-family: 'Times New Roman', serif; /* A font suitable for mathematical formulas */
            font-style: italic;
            font-size: 1.1em;
            text-align: center;
            padding: 12px 10px; /* Increased padding */
            background-color: var(--hover-color);
            border-radius: 6px; /* More rounded */
            margin: 15px 0; /* More space */
            overflow-x: auto; /* Allow horizontal scrolling for long formulas */
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace; /* Monospace for steps */
            background-color: var(--hover-color);
            padding: 8px 15px; /* Increased padding */
            border-radius: 4px; /* More rounded */
            margin-bottom: 8px; /* More space */
            color: var(--text-color);
            white-space: pre-wrap; /* Preserve whitespace and wrap text */
            word-break: break-word; /* Break long words */
        }
        #calculation-details ul {
            list-style-type: disc;
            margin-left: 25px; /* Increased margin */
            padding-left: 0;
            margin-top: 15px;
        }
        #calculation-details ul li {
            margin-bottom: 8px; /* More space */
            color: var(--text-color);
        }

        /* Style for centering the button */
        .button-wrapper {
            display: flex;
            justify-content: center; /* Center the button horizontally */
            width: 100%; /* Ensure it takes full width to center effectively */
            padding-top: 20px; /* Add more spacing above the button */
        }

        /* Animation for input fields on focus */
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.4); /* Green glow, slightly more pronounced */
            outline: none;
            animation: pulse 0.8s infinite alternate;
        }

        @keyframes pulse {
            from {
                box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.4);
            }
            to {
                box-shadow: 0 0 0 8px rgba(76, 175, 80, 0.2); /* Softer pulse */
            }
        }

        /* Specific styles for RTD/TC conversion */
        #rtd-fields, #tc-fields {
            display: none; /* Hidden by default */
            margin-top: 15px;
            border-top: 1px dashed var(--border-color);
            padding-top: 15px;
        }

        #rtd-fields.active, #tc-fields.active {
            display: block;
        }

        .conversion-direction-group {
            display: flex;
            align-items: center;
            justify-content: space-around;
            margin-bottom: 20px;
            background-color: var(--hover-color);
            border-radius: 8px;
            padding: 10px;
        }

        .conversion-direction-group label {
            display: flex;
            align-items: center;
            cursor: pointer;
            font-weight: bold;
            color: var(--text-color);
        }

        .conversion-direction-group input[type="radio"] {
            margin-right: 8px;
            transform: scale(1.2); /* Make radio buttons slightly larger */
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Design Calculators - Instrumentation</h1>
            <p class="subtitle">Smart Tools for Modern Instrumentation Engineers</p>
            <div class="theme-toggle">
                <span class="light-icon"><i class="fas fa-sun"></i></span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
                <span class="dark-icon"><i class="fas fa-moon"></i></span>
            </div>
        </div>
    </header>

    <main class="container">
        <div style="display: flex; justify-content: center; margin-bottom: 20px;">
            <a href="indexInst.html" class="back-button"><i class="fas fa-arrow-left"></i> Back to Tools</a>
        </div>
        
        <div class="tool-container">
            <h2>RTD / Thermocouple Conversion Tool</h2>
            
            <div class="tool-description">
                <p>This comprehensive tool converts resistance (for RTDs) or millivolt signals (for Thermocouples) to temperature, and vice versa. Designed for high precision and reliability, it supports various sensor types and is essential for calibration, troubleshooting, and process control in all industrial sectors worldwide.</p>
            </div>
        
            <div class="calculator-form">
                <form id="rtd-tc-form">
                    <!-- Sensor Type Selection -->
                    <div class="form-section">
                        <h3>Sensor Type and Conversion Direction</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="sensor-type">Select Sensor Type:</label>
                                <select id="sensor-type" required>
                                    <option value="rtd">RTD (Resistance Temperature Detector)</option>
                                    <option value="thermocouple">Thermocouple</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="temp-unit">Select Temperature Unit:</label>
                                <select id="temp-unit" required>
                                    <option value="celsius">Celsius (°C)</option>
                                    <option value="fahrenheit">Fahrenheit (°F)</option>
                                </select>
                            </div>
                        </div>
                        <div class="conversion-direction-group">
                            <label>
                                <input type="radio" name="conversion-direction" value="to-temp" checked> Convert to Temperature
                            </label>
                            <label>
                                <input type="radio" name="conversion-direction" value="to-signal"> Convert to Signal (Resistance/mV)
                            </label>
                        </div>
                    </div>

                    <!-- RTD Specific Inputs -->
                    <div id="rtd-fields" class="form-section">
                        <h3>RTD Parameters</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="rtd-type">RTD Type:</label>
                                <select id="rtd-type" required>
                                    <option value="pt100">Pt100 (IEC 60751)</option>
                                    <option value="pt1000">Pt1000 (IEC 60751)</option>
                                    <!-- Other RTD types can be added here with their specific coefficients/logic -->
                                </select>
                            </div>
                            <div class="form-group" id="rtd-resistance-input-group">
                                <label for="rtd-resistance">Resistance (Ohms): <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the measured resistance from the RTD.</span></span></label>
                                <input type="number" id="rtd-resistance" step="0.001" value="100.000" required>
                            </div>
                            <div class="form-group" id="rtd-temperature-input-group" style="display: none;">
                                <label for="rtd-temperature">Temperature (°C/°F): <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the temperature to convert to RTD resistance.</span></span></label>
                                <input type="number" id="rtd-temperature" step="0.01" value="0.00" required>
                            </div>
                        </div>
                    </div>

                    <!-- Thermocouple Specific Inputs -->
                    <div id="tc-fields" class="form-section">
                        <h3>Thermocouple Parameters</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="tc-type">Thermocouple Type:</label>
                                <select id="tc-type" required>
                                    <option value="type-k">Type K (NiCr-NiAl)</option>
                                    <option value="type-j">Type J (Fe-CuNi)</option>
                                    <option value="type-t">Type T (Cu-CuNi)</option>
                                    <option value="type-e">Type E (NiCr-CuNi)</option>
                                    <option value="type-n">Type N (NiCrSi-NiSi)</option>
                                    <option value="type-r">Type R (Pt-13%Rh/Pt)</option>
                                    <option value="type-s">Type S (Pt-10%Rh/Pt)</option>
                                    <option value="type-b">Type B (Pt-30%Rh/Pt-6%Rh)</option>
                                </select>
                            </div>
                            <div class="form-group" id="tc-millivolt-input-group">
                                <label for="tc-millivolt">Millivolt (mV): <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the measured millivolt signal from the thermocouple.</span></span></label>
                                <input type="number" id="tc-millivolt" step="0.001" value="0.000" required>
                            </div>
                            <div class="form-group" id="tc-temperature-input-group" style="display: none;">
                                <label for="tc-temperature">Temperature (°C/°F): <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the temperature to convert to thermocouple millivolt.</span></span></label>
                                <input type="number" id="tc-temperature" step="0.01" value="0.00" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cold-junction-temp">Cold Junction Temperature (°C): <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The reference junction temperature, typically 0°C if compensated, or the actual ambient temperature at the reference junction. Essential for accurate thermocouple readings.</span></span></label>
                                <input type="number" id="cold-junction-temp" step="0.1" value="0.0" required>
                            </div>
                        </div>
                    </div>

                    <div class="button-wrapper">
                        <button type="button" id="calculate-conversion-btn" class="calculate-btn">Calculate</button>
                        <button type="button" id="reset-form-btn" class="reset-btn"><i class="fas fa-sync-alt"></i> Reset Form</button>
                    </div>
                </form>
            </div>
            
            <div id="result-container" class="result-container">
                <h3>Conversion Results</h3>
                <div id="calculation-details">
                    <!-- Calculation steps will be inserted here -->
                </div>
                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body">
                        <!-- Results will be dynamically inserted here -->
                    </tbody>
                </table>
                <div style="display: flex; justify-content: center; margin-top: 20px;">
                    <button type="button" id="clear-results-btn" class="clear-results-btn"><i class="fas fa-times-circle"></i> Clear Results</button>
                </div>
                <div class="standard-reference" id="standard-reference">
                    <!-- Standard reference text will be inserted here -->
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="disclaimer">
                <h3>Disclaimer</h3>
                <p>To ensure accuracy and reliability, always verify the results obtained from these tools against the relevant engineering standards and guidelines.</p>
            </div>
            <div class="credit">
                <p>Created by A Sharma</p>
            </div>
            <div class="social-share">
                <h3>Share This Site</h3>
                <div class="social-buttons">
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in&title=Design Calculators - Instrumentation" target="_blank" class="social-btn linkedin">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" class="social-btn facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?text=Check out this amazing Design Calculators - Instrumentation!&url=https://designcalculators.co.in" target="_blank" class="social-btn twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text=Check out this amazing Design Calculators - Instrumentation! https://designcalculators.co.in" target="_blank" class="social-btn whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.reddit.com/submit?url=https://designcalculators.co.in&title=Design Calculators - Instrumentation" target="_blank" class="social-btn reddit">
                        <i class="fab fa-reddit"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sensorTypeSelect = document.getElementById('sensor-type');
            const rtdFields = document.getElementById('rtd-fields');
            const tcFields = document.getElementById('tc-fields');
            const conversionDirectionRadios = document.querySelectorAll('input[name="conversion-direction"]');
            const rtdResistanceInputGroup = document.getElementById('rtd-resistance-input-group');
            const rtdTemperatureInputGroup = document.getElementById('rtd-temperature-input-group');
            const tcMillivoltInputGroup = document.getElementById('tc-millivolt-input-group');
            const tcTemperatureInputGroup = document.getElementById('tc-temperature-input-group');
            const calculateConversionBtn = document.getElementById('calculate-conversion-btn');
            const resetFormBtn = document.getElementById('reset-form-btn');
            const clearResultsBtn = document.getElementById('clear-results-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const standardReference = document.getElementById('standard-reference');
            const calculationDetailsDiv = document.getElementById('calculation-details');
            const tempUnitSelect = document.getElementById('temp-unit');

            // Default values for resetting form
            const defaultValues = {
                'sensor-type': 'rtd',
                'temp-unit': 'celsius',
                'rtd-type': 'pt100',
                'rtd-resistance': 100.000,
                'rtd-temperature': 0.00,
                'tc-type': 'type-k',
                'tc-millivolt': 0.000,
                'tc-temperature': 0.00,
                'cold-junction-temp': 0.0
            };

            // RTD Coefficients (IEC 60751 for Pt100/Pt1000)
            const rtdCoefficients = {
                'pt100': { R0: 100, A: 3.9083e-3, B: -5.775e-7, C: -4.183e-12 },
                'pt1000': { R0: 1000, A: 3.9083e-3, B: -5.775e-7, C: -4.183e-12 }
            };

            // Thermocouple Coefficients (NIST ITS-90 Polynomials for common ranges)
            // Note: These are simplified for demonstration. Full NIST tables have multiple ranges and higher order polynomials.
            // Type K (mV to T, C): For E in mV, T in C. Range approx -200 to 1372 C.
            // Source: NIST ITS-90 Type K, Inverse coefficients for Voltage (mV) to Temperature (C)
            const tcCoefficients_mV_to_T = {
                'type-k': {
                    'coeffs': [
                        0, // E^0
                        2.508355e1, // E^1
                        7.860106e-2, // E^2
                        -2.503131e-1, // E^3
                        8.315270e-2, // E^4
                        -1.228034e-2, // E^5
                        9.804036e-4, // E^6
                        -4.418298e-5, // E^7
                        1.057734e-6, // E^8
                        -1.052755e-8 // E^9
                    ],
                    'range': { minE: -5.891, maxE: 54.886, minT: -200, maxT: 1372 } // Approximate range
                },
                // Type K (T to mV, C): For T in C, E in mV. Range approx -200 to 1372 C.
                // Source: NIST ITS-90 Type K, Forward coefficients for Temperature (C) to Voltage (mV)
                'type-k_T_to_mV': {
                    'coeffs': [
                        0, // T^0
                        3.9450122e-2, // T^1
                        2.237353e-5, // T^2
                        -1.020668e-7, // T^3
                        2.521249e-10, // T^4
                        -2.987979e-13, // T^5
                        1.185977e-16 // T^6
                    ],
                    'range': { minT: -200, maxT: 1372, minE: -5.891, maxE: 54.886 } // Approximate range
                },
                // Add other TC types here with their respective coefficients
                // For simplicity, only Type K is fully implemented with coefficients.
                // Other types will show a "Not yet implemented" message.
                'type-j': { 'not_implemented': true, 'range': { minT: -210, maxT: 1200 } },
                'type-t': { 'not_implemented': true, 'range': { minT: -270, maxT: 400 } },
                'type-e': { 'not_implemented': true, 'range': { minT: -270, maxT: 1000 } },
                'type-n': { 'not_implemented': true, 'range': { minT: -270, maxT: 1300 } },
                'type-r': { 'not_implemented': true, 'range': { minT: -50, maxT: 1768 } },
                'type-s': { 'not_implemented': true, 'range': { minT: -50, maxT: 1768 } },
                'type-b': { 'not_implemented': true, 'range': { minT: 0, maxT: 1820 } }
            };

            // Event Listeners
            sensorTypeSelect.addEventListener('change', updateSensorFieldsVisibility);
            conversionDirectionRadios.forEach(radio => radio.addEventListener('change', updateInputFieldsVisibility));
            calculateConversionBtn.addEventListener('click', performConversion);
            resetFormBtn.addEventListener('click', resetForm);
            clearResultsBtn.addEventListener('click', clearResults);
            tempUnitSelect.addEventListener('change', updateTemperatureInputValues);

            // Initial setup
            updateSensorFieldsVisibility();
            updateInputFieldsVisibility(); // Call after sensor fields are visible to set initial input states

            function updateSensorFieldsVisibility() {
                const selectedType = sensorTypeSelect.value;
                if (selectedType === 'rtd') {
                    rtdFields.classList.add('active');
                    tcFields.classList.remove('active');
                } else {
                    tcFields.classList.add('active');
                    rtdFields.classList.remove('active');
                }
                updateInputFieldsVisibility(); // Adjust input fields based on sensor type and conversion direction
                clearResults(); // Clear results when sensor type changes
            }

            function updateInputFieldsVisibility() {
                const selectedSensorType = sensorTypeSelect.value;
                const selectedDirection = document.querySelector('input[name="conversion-direction"]:checked').value;

                if (selectedSensorType === 'rtd') {
                    if (selectedDirection === 'to-temp') {
                        rtdResistanceInputGroup.style.display = 'block';
                        rtdTemperatureInputGroup.style.display = 'none';
                        document.getElementById('rtd-resistance').setAttribute('required', 'required');
                        document.getElementById('rtd-temperature').removeAttribute('required');
                    } else { // to-signal
                        rtdResistanceInputGroup.style.display = 'none';
                        rtdTemperatureInputGroup.style.display = 'block';
                        document.getElementById('rtd-resistance').removeAttribute('required');
                        document.getElementById('rtd-temperature').setAttribute('required', 'required');
                    }
                } else { // thermocouple
                    if (selectedDirection === 'to-temp') {
                        tcMillivoltInputGroup.style.display = 'block';
                        tcTemperatureInputGroup.style.display = 'none';
                        document.getElementById('tc-millivolt').setAttribute('required', 'required');
                        document.getElementById('tc-temperature').removeAttribute('required');
                    } else { // to-signal
                        tcMillivoltInputGroup.style.display = 'none';
                        tcTemperatureInputGroup.style.display = 'block';
                        document.getElementById('tc-millivolt').removeAttribute('required');
                        document.getElementById('tc-temperature').setAttribute('required', 'required');
                    }
                }
                clearResults(); // Clear results when conversion direction changes
            }

            function updateTemperatureInputValues() {
                const currentTempUnit = tempUnitSelect.value;
                const rtdTempInput = document.getElementById('rtd-temperature');
                const tcTempInput = document.getElementById('tc-temperature');
                const coldJunctionTempInput = document.getElementById('cold-junction-temp');

                // Convert RTD Temperature input
                if (rtdTempInput.value !== '') {
                    let tempC = parseFloat(rtdTempInput.value);
                    if (tempUnitSelect.value === 'fahrenheit') {
                        tempC = (tempC - 32) * 5/9;
                    }
                    // Update tooltip
                    const tooltipSpan = document.getElementById('tooltip-rtd-temperature');
                    if (tooltipSpan) {
                         tooltipSpan.innerHTML = `Enter the temperature to convert to RTD resistance. Unit: ${currentTempUnit === 'celsius' ? '°C' : '°F'}.`;
                    }
                }

                // Convert TC Temperature input
                if (tcTempInput.value !== '') {
                    let tempC = parseFloat(tcTempInput.value);
                    if (tempUnitSelect.value === 'fahrenheit') {
                        tempC = (tempC - 32) * 5/9;
                    }
                    // Update tooltip
                    const tooltipSpan = document.getElementById('tooltip-tc-temperature');
                    if (tooltipSpan) {
                         tooltipSpan.innerHTML = `Enter the temperature to convert to thermocouple millivolt. Unit: ${currentTempUnit === 'celsius' ? '°C' : '°F'}.`;
                    }
                }
                // Convert Cold Junction Temperature input (always in Celsius for calculation, but display can be Fahrenheit)
                if (coldJunctionTempInput.value !== '') {
                    const tooltipSpan = document.getElementById('tooltip-cold-junction-temp');
                    if (tooltipSpan) {
                         tooltipSpan.innerHTML = `The reference junction temperature, typically 0°C if compensated, or the actual ambient temperature at the reference junction. Essential for accurate thermocouple readings. (Input always in °C)`;
                    }
                }
            }


            function clearResults() {
                resultContainer.classList.remove('show');
                resultTableBody.innerHTML = '';
                calculationDetailsDiv.innerHTML = '';
                standardReference.innerHTML = '';
                displayMessage("Results cleared.", "info");
            }

            function resetForm() {
                // Reset standard inputs
                for (const id in defaultValues) {
                    const input = document.getElementById(id);
                    if (input) {
                        input.value = defaultValues[id];
                    }
                }
                // Reset radio buttons
                document.querySelector('input[name="conversion-direction"][value="to-temp"]').checked = true;

                // Trigger visibility updates and clear results
                updateSensorFieldsVisibility();
                updateInputFieldsVisibility();
                clearResults();
                displayMessage("Form reset to default values.", "info");
            }

            // Function to display messages (replaces alert())
            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    messageBox.style.cssText = `
                        position: fixed;
                        top: 20px;
                        left: 50%;
                        transform: translateX(-50%);
                        padding: 15px 25px;
                        border-radius: 8px;
                        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
                        z-index: 1000;
                        font-weight: bold;
                        color: white;
                        opacity: 0;
                        transition: opacity 0.5s ease-in-out, transform 0.3s ease-out;
                        display: flex; /* Use flex for centering text */
                        align-items: center;
                        justify-content: center;
                        min-width: 250px; /* Ensure it's wide enough */
                    `;
                    document.body.appendChild(messageBox);
                }

                messageBox.textContent = message;
                if (type === "error") {
                    messageBox.style.backgroundColor = '#dc3545'; /* Red */
                } else if (type === "warning") {
                    messageBox.style.backgroundColor = '#ffc107'; /* Amber */
                    messageBox.style.color = '#333';
                } else {
                    messageBox.style.backgroundColor = '#28a745'; /* Green */
                }
                messageBox.style.opacity = 1;
                messageBox.style.transform = 'translateX(-50%) translateY(0)'; // Bring to position

                // Hide after 5 seconds
                setTimeout(() => {
                    messageBox.style.opacity = 0;
                    messageBox.style.transform = 'translateX(-50%) translateY(-20px)'; // Fade out and move up
                }, 5000);
            }

            // --- RTD Calculation Functions (IEC 60751) ---

            // Temperature to Resistance for RTD
            function rtdTempToResistance(tempC, rtdType) {
                const { R0, A, B, C } = rtdCoefficients[rtdType];
                let Rt;
                if (tempC >= 0) {
                    Rt = R0 * (1 + A * tempC + B * tempC * tempC);
                } else {
                    Rt = R0 * (1 + A * tempC + B * tempC * tempC + C * (tempC - 100) * tempC * tempC * tempC);
                }
                return Rt;
            }

            // Resistance to Temperature for RTD (using numerical solver for negative temps)
            function rtdResistanceToTemp(resistance, rtdType) {
                const { R0, A, B, C } = rtdCoefficients[rtdType];
                let tempC;

                if (resistance >= R0) { // T >= 0°C
                    const discriminant = A * A - 4 * B * (1 - resistance / R0);
                    if (discriminant < 0) {
                        displayMessage("Calculated resistance is out of valid range for positive temperatures.", "error");
                        return NaN;
                    }
                    tempC = (-A + Math.sqrt(discriminant)) / (2 * B);
                } else { // T < 0°C - Use bisection method
                    let low = -200; // Lower bound for temperature
                    let high = 0;   // Upper bound for temperature
                    const tolerance = 1e-6; // Tolerance for temperature (0.000001 C)
                    const maxIterations = 100;

                    let iterations = 0;
                    while (iterations < maxIterations) {
                        tempC = (low + high) / 2;
                        const calculatedRt = rtdTempToResistance(tempC, rtdType);
                        if (Math.abs(calculatedRt - resistance) < tolerance || (high - low) / 2 < tolerance) {
                            break;
                        }
                        if (calculatedRt < resistance) {
                            low = tempC;
                        } else {
                            high = tempC;
                        }
                        iterations++;
                    }
                    if (iterations === maxIterations) {
                        displayMessage("RTD resistance to temperature conversion for negative temperatures did not converge precisely. Result may be an approximation.", "warning");
                    }
                }
                return tempC;
            }

            // --- Thermocouple Calculation Functions (NIST ITS-90 Polynomials) ---

            // Polynomial evaluation function
            function evaluatePolynomial(coeffs, x) {
                let result = 0;
                for (let i = 0; i < coeffs.length; i++) {
                    result += coeffs[i] * Math.pow(x, i);
                }
                return result;
            }

            // Temperature to Millivolt for Thermocouple (Type K only for now)
            function tcTempToMillivolt(tempC, tcType) {
                if (tcCoefficients_mV_to_T[tcType] && tcCoefficients_mV_to_T[tcType].not_implemented) {
                    displayMessage(`Thermocouple type ${tcType} is not yet implemented. Only Type K is supported for now.`, "error");
                    return NaN;
                }
                if (tcType !== 'type-k') {
                    displayMessage(`Thermocouple type ${tcType} is not yet implemented. Only Type K is supported for now.`, "error");
                    return NaN;
                }
                const { coeffs, range } = tcCoefficients_mV_to_T['type-k_T_to_mV'];

                if (tempC < range.minT || tempC > range.maxT) {
                    displayMessage(`Temperature ${tempC}°C is outside the recommended range for Type K (approx. ${range.minT}°C to ${range.maxT}°C). Results may be inaccurate.`, "warning");
                }
                return evaluatePolynomial(coeffs, tempC);
            }

            // Millivolt to Temperature for Thermocouple (Type K only, using bisection method)
            function tcMillivoltToTemp(millivolt, tcType) {
                 if (tcCoefficients_mV_to_T[tcType] && tcCoefficients_mV_to_T[tcType].not_implemented) {
                    displayMessage(`Thermocouple type ${tcType} is not yet implemented. Only Type K is supported for now.`, "error");
                    return NaN;
                }
                if (tcType !== 'type-k') {
                    displayMessage(`Thermocouple type ${tcType} is not yet implemented. Only Type K is supported for now.`, "error");
                    return NaN;
                }
                const { coeffs, range } = tcCoefficients_mV_to_T[tcType];

                let lowT = range.minT;
                let highT = range.maxT;
                const tolerance = 1e-4; // Tolerance for mV (0.0001 mV)
                const maxIterations = 100;

                let iterations = 0;
                let tempC = NaN;

                // Check if the millivolt is within the expected range for the polynomial
                if (millivolt < range.minE || millivolt > range.maxE) {
                     displayMessage(`Millivolt value ${millivolt} mV is outside the typical range for Type K (approx. ${range.minE} mV to ${range.maxE} mV). Results may be inaccurate or indicate a fault.`, "warning");
                     // Still attempt calculation, but warn the user.
                }

                // Bisection method to find temperature
                while (iterations < maxIterations) {
                    const midT = (lowT + highT) / 2;
                    const calculatedmV = tcTempToMillivolt(midT, tcType); // Use the forward function

                    if (Math.abs(calculatedmV - millivolt) < tolerance || (highT - lowT) / 2 < tolerance) {
                        tempC = midT;
                        break;
                    }

                    if (calculatedmV < millivolt) {
                        lowT = midT;
                    } else {
                        highT = midT;
                    }
                    iterations++;
                }

                if (iterations === maxIterations) {
                    displayMessage("Thermocouple millivolt to temperature conversion did not converge precisely. Result may be an approximation.", "warning");
                }
                return tempC;
            }


            function performConversion() {
                clearResults(); // Always clear previous results
                const selectedSensorType = sensorTypeSelect.value;
                const selectedDirection = document.querySelector('input[name="conversion-direction"]:checked').value;
                const tempUnit = tempUnitSelect.value;
                let calculationHtml = '<h4>Detailed Calculation Steps:</h4>';
                let resultValue = NaN;
                let inputVal;
                let outputUnit = '';

                // Helper function to add rows to the result table
                function addResultRow(parameter, value) {
                    const row = resultTableBody.insertRow();
                    const paramCell = row.insertCell();
                    const valueCell = row.insertCell();
                    paramCell.innerHTML = parameter;
                    valueCell.innerHTML = value;
                }

                if (selectedSensorType === 'rtd') {
                    const rtdType = document.getElementById('rtd-type').value;
                    const { R0, A, B, C } = rtdCoefficients[rtdType];

                    if (selectedDirection === 'to-temp') {
                        inputVal = parseFloat(document.getElementById('rtd-resistance').value);
                        if (isNaN(inputVal) || inputVal < 0) {
                            displayMessage("Please enter a valid positive RTD Resistance.", "error");
                            return;
                        }
                        
                        let tempC = rtdResistanceToTemp(inputVal, rtdType);
                        if (isNaN(tempC)) return; // Error handled by rtdResistanceToTemp

                        resultValue = (tempUnit === 'fahrenheit') ? (tempC * 9/5) + 32 : tempC;
                        outputUnit = tempUnit === 'fahrenheit' ? '°F' : '°C';

                        calculationHtml += `<p><strong>Converting Resistance to Temperature for ${rtdType}:</strong></p>`;
                        calculationHtml += `<p>The Callendar-Van Dusen equation (or its inverse) is used to relate RTD resistance to temperature. This equation accounts for the non-linear behavior of platinum resistance over a wide temperature range.</p>`;
                        calculationHtml += `<p class="formula">$$R_T = R_0 [1 + AT + BT^2] \\quad (\\text{for } T \\ge 0^\circ C)$$</p>`;
                        calculationHtml += `<p class="formula">$$R_T = R_0 [1 + AT + BT^2 + C(T-100)T^3] \\quad (\\text{for } T < 0^\circ C)$$</p>`;
                        calculationHtml += `<p class="calculation-step">Input Resistance = ${inputVal.toFixed(3)} Ohms</p>`;
                        calculationHtml += `<p class="calculation-step">RTD Type = ${rtdType.toUpperCase()} (R<sub>0</sub> = ${R0} Ohms)</p>`;
                        calculationHtml += `<p class="calculation-step">Calculated Temperature (Celsius) = ${tempC.toFixed(3)} °C</p>`;
                        if (tempUnit === 'fahrenheit') {
                            calculationHtml += `<p class="calculation-step">Converted Temperature (Fahrenheit) = ${resultValue.toFixed(3)} °F</p>`;
                        }
                        addResultRow("Sensor Type", rtdType.toUpperCase());
                        addResultRow("Input Resistance", `${inputVal.toFixed(3)} Ohms`);
                        addResultRow("<strong>Calculated Temperature</strong>", `<strong>${resultValue.toFixed(3)} ${outputUnit}</strong>`);

                    } else { // to-signal (Temperature to Resistance)
                        inputVal = parseFloat(document.getElementById('rtd-temperature').value);
                        if (isNaN(inputVal)) {
                            displayMessage("Please enter a valid RTD Temperature.", "error");
                            return;
                        }

                        let tempC = (tempUnit === 'fahrenheit') ? (inputVal - 32) * 5/9 : inputVal;
                        
                        let resistance = rtdTempToResistance(tempC, rtdType);
                        if (isNaN(resistance)) return; // Error handled by rtdTempToResistance

                        resultValue = resistance;
                        outputUnit = 'Ohms';

                        calculationHtml += `<p><strong>Converting Temperature to Resistance for ${rtdType}:</strong></p>`;
                        calculationHtml += `<p>The Callendar-Van Dusen equation is used to calculate the RTD resistance at a given temperature, based on its material properties.</p>`;
                        calculationHtml += `<p class="formula">$$R_T = R_0 [1 + AT + BT^2] \\quad (\\text{for } T \\ge 0^\circ C)$$</p>`;
                        calculationHtml += `<p class="formula">$$R_T = R_0 [1 + AT + BT^2 + C(T-100)T^3] \\quad (\\text{for } T < 0^\circ C)$$</p>`;
                        calculationHtml += `<p class="calculation-step">Input Temperature = ${inputVal.toFixed(2)} ${tempUnit === 'fahrenheit' ? '°F' : '°C'}</p>`;
                        calculationHtml += `<p class="calculation-step">Temperature in Celsius = ${tempC.toFixed(2)} °C</p>`;
                        calculationHtml += `<p class="calculation-step">RTD Type = ${rtdType.toUpperCase()} (R<sub>0</sub> = ${R0} Ohms)</p>`;
                        calculationHtml += `<p class="calculation-step">Calculated Resistance = ${resistance.toFixed(3)} Ohms</p>`;
                        addResultRow("Sensor Type", rtdType.toUpperCase());
                        addResultRow(`Input Temperature (${tempUnit === 'fahrenheit' ? '°F' : '°C'})`, `${inputVal.toFixed(2)}`);
                        addResultRow("<strong>Calculated Resistance</strong>", `<strong>${resultValue.toFixed(3)} ${outputUnit}</strong>`);
                    }
                } else { // Thermocouple
                    const tcType = document.getElementById('tc-type').value;
                    const coldJunctionTemp = parseFloat(document.getElementById('cold-junction-temp').value);

                    if (isNaN(coldJunctionTemp)) {
                        displayMessage("Please enter a valid Cold Junction Temperature.", "error");
                        return;
                    }

                    if (tcCoefficients_mV_to_T[tcType] && tcCoefficients_mV_to_T[tcType].not_implemented) {
                        displayMessage(`Thermocouple type ${tcType} is not yet implemented. Only Type K is supported for now.`, "error");
                        return;
                    }

                    if (selectedDirection === 'to-temp') {
                        inputVal = parseFloat(document.getElementById('tc-millivolt').value);
                        if (isNaN(inputVal)) {
                            displayMessage("Please enter a valid Thermocouple Millivolt value.", "error");
                            return;
                        }

                        // Calculate compensated millivolt
                        const coldJunctionmV = tcTempToMillivolt(coldJunctionTemp, tcType);
                        const compensatedmV = inputVal + coldJunctionmV;

                        let tempC = tcMillivoltToTemp(compensatedmV, tcType);
                        if (isNaN(tempC)) return; // Error handled by tcMillivoltToTemp

                        resultValue = (tempUnit === 'fahrenheit') ? (tempC * 9/5) + 32 : tempC;
                        outputUnit = tempUnit === 'fahrenheit' ? '°F' : '°C';

                        calculationHtml += `<p><strong>Converting Millivolt to Temperature for ${tcType}:</strong></p>`;
                        calculationHtml += `<p>Thermocouple voltage is highly dependent on the temperature difference between the measuring junction and the reference (cold) junction. Cold junction compensation is critical for accurate temperature measurement.</p>`;
                        calculationHtml += `<p class="calculation-step">Input Millivolt (measured) = ${inputVal.toFixed(3)} mV</p>`;
                        calculationHtml += `<p class="calculation-step">Cold Junction Temperature = ${coldJunctionTemp.toFixed(1)} °C</p>`;
                        calculationHtml += `<p class="calculation-step">Millivolt equivalent of Cold Junction = ${coldJunctionmV.toFixed(3)} mV</p>`;
                        calculationHtml += `<p class="calculation-step">Compensated Millivolt = Measured mV + Cold Junction mV = ${inputVal.toFixed(3)} + ${coldJunctionmV.toFixed(3)} = ${compensatedmV.toFixed(3)} mV</p>`;
                        calculationHtml += `<p class="calculation-step">Calculated Temperature (Celsius) = ${tempC.toFixed(3)} °C</p>`;
                        if (tempUnit === 'fahrenheit') {
                            calculationHtml += `<p class="calculation-step">Converted Temperature (Fahrenheit) = ${resultValue.toFixed(3)} °F</p>`;
                        }
                        addResultRow("Sensor Type", tcType.toUpperCase());
                        addResultRow("Input Millivolt", `${inputVal.toFixed(3)} mV`);
                        addResultRow("Cold Junction Temp", `${coldJunctionTemp.toFixed(1)} °C`);
                        addResultRow("<strong>Calculated Temperature</strong>", `<strong>${resultValue.toFixed(3)} ${outputUnit}</strong>`);

                    } else { // to-signal (Temperature to Millivolt)
                        inputVal = parseFloat(document.getElementById('tc-temperature').value);
                        if (isNaN(inputVal)) {
                            displayMessage("Please enter a valid Thermocouple Temperature.", "error");
                            return;
                        }

                        let tempC = (tempUnit === 'fahrenheit') ? (inputVal - 32) * 5/9 : inputVal;
                        
                        let millivolt = tcTempToMillivolt(tempC, tcType);
                        if (isNaN(millivolt)) return; // Error handled by tcTempToMillivolt

                        // Account for cold junction if not 0C
                        const coldJunctionTemp = parseFloat(document.getElementById('cold-junction-temp').value);
                        const coldJunctionmV = tcTempToMillivolt(coldJunctionTemp, tcType);
                        const measuredmV = millivolt - coldJunctionmV; // The mV that would be measured if cold junction is not 0C

                        resultValue = measuredmV;
                        outputUnit = 'mV';

                        calculationHtml += `<p><strong>Converting Temperature to Millivolt for ${tcType}:</strong></p>`;
                        calculationHtml += `<p>The conversion from temperature to millivolt involves using polynomial coefficients specific to the thermocouple type. Cold junction compensation adjusts the output to reflect the actual temperature difference.</p>`;
                        calculationHtml += `<p class="calculation-step">Input Temperature = ${inputVal.toFixed(2)} ${tempUnit === 'fahrenheit' ? '°F' : '°C'}</p>`;
                        calculationHtml += `<p class="calculation-step">Temperature in Celsius = ${tempC.toFixed(2)} °C</p>`;
                        calculationHtml += `<p class="calculation-step">Cold Junction Temperature = ${coldJunctionTemp.toFixed(1)} °C</p>`;
                        calculationHtml += `<p class="calculation-step">Millivolt at 0°C Reference (from Input Temp) = ${millivolt.toFixed(3)} mV</p>`;
                        calculationHtml += `<p class="calculation-step">Millivolt equivalent of Cold Junction = ${coldJunctionmV.toFixed(3)} mV</p>`;
                        calculationHtml += `<p class="calculation-step"><strong>Expected Measured Millivolt (with Cold Junction) = ${measuredmV.toFixed(3)} mV</strong></p>`;
                        addResultRow("Sensor Type", tcType.toUpperCase());
                        addResultRow(`Input Temperature (${tempUnit === 'fahrenheit' ? '°F' : '°C'})`, `${inputVal.toFixed(2)}`);
                        addResultRow("Cold Junction Temp", `${coldJunctionTemp.toFixed(1)} °C`);
                        addResultRow("<strong>Calculated Millivolt</strong>", `<strong>${resultValue.toFixed(3)} ${outputUnit}</strong>`);
                    }
                }

                // Display Results and Standards
                calculationDetailsDiv.innerHTML = calculationHtml;
                if (window.MathJax) {
                    window.MathJax.typesetPromise([calculationDetailsDiv]).then(() => {
                        console.log("MathJax typesetting complete.");
                    }).catch((err) => console.error("MathJax typesetting failed", err));
                }

                standardRefText = `
                    <h4>International Standards Compliance:</h4>
                    <p>This tool adheres to the fundamental principles and equations defined by leading international standards for temperature measurement, ensuring its applicability and reliability across diverse industrial applications:</p>
                    <ul>
                        <li><strong>RTDs (Resistance Temperature Detectors):</strong>
                            <ul>
                                <li><strong>IEC 60751 / DIN EN 60751: Industrial platinum resistance thermometers and platinum temperature sensors.</strong> This standard specifies the resistance-temperature characteristics (e.g., Pt100, Pt1000 curves, including the Callendar-Van Dusen equation and coefficients), tolerances, and dimensions for industrial platinum resistance thermometers.</li>
                                <li><strong>ASTM E1137 / E1137M: Standard Specification for Industrial Platinum Resistance Thermometers.</strong> An equivalent standard in the ASTM system, providing specifications for PRTs.</li>
                            </ul>
                        </li>
                        <li><strong>Thermocouples:</strong>
                            <ul>
                                <li><strong>IEC 60584-1: Thermocouples - Part 1: EMF specifications.</strong> This standard defines the electromotive force (EMF) versus temperature relationships for various thermocouple types (e.g., J, K, T, E, N, R, S, B), which are typically represented by high-order polynomial equations or reference tables (like those published by NIST).</li>
                                <li><strong>ASTM E230 / E230M: Standard Specification for Temperature-Electromotive Force (EMF) Tables for Standardized Thermocouples.</strong> Provides standardized EMF vs. temperature tables and polynomial approximations for commonly used thermocouples.</li>
                                <li><strong>NIST ITS-90 Thermocouple Database:</strong> The National Institute of Standards and Technology (NIST) provides comprehensive ITS-90 based thermocouple reference functions and tables, which are the authoritative source for high-accuracy conversions. This tool's calculations are based on these principles.</li>
                            </ul>
                        </li>
                    </ul>
                    <p>This tool provides accurate conversions based on these widely accepted standards. However, for critical applications, always refer to the latest official standards documents, manufacturer's calibration data, and consult with a qualified instrumentation professional.</p>
                `;
                standardReference.innerHTML = standardRefText;

                resultContainer.style.display = 'block';
                setTimeout(() => {
                    resultContainer.classList.add('show');
                    resultContainer.scrollIntoView({ behavior: 'smooth' });
                }, 10);
            }

            // Theme switch logic
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }

                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }

            // Initial fade-in for form sections
            const formSections = document.querySelectorAll('.form-section');
            formSections.forEach((section, index) => {
                setTimeout(() => {
                    section.classList.add('fade-in');
                }, 100 * index); // Staggered fade-in
            });
        });
    </script>
</body>

</html>


