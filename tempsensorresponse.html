<!DOCTYPE html>
<html lang="en">
<head>
    <!-- AdSense & Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>
    
    <!-- SEO Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temperature Sensor Response Time (τ) Calculator - Industrial Grade Analysis</title>
    <meta name="description" content="Professional Temperature Sensor Response Time Calculator. Calculate Time Constant (Tau) using Lumped Capacitance method. Accounts for sheath material, fluid velocity, and thermowell gap resistance.">
    <meta name="keywords" content="temperature response time, time constant tau, RTD calculator, thermocouple response, thermowell lag, lumped capacitance, heat transfer coefficient, biot number, process control">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.3/jspdf.plugin.autotable.min.js"></script>

    <!-- Chart.js for Visuals -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.2.1/dist/chartjs-plugin-annotation.min.js"></script>

    <!-- MathJax for Formulas -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)'], ['$', '$']],
                displayMath: [['\\[', '\\]'], ['$$', '$$']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <style>
        /* --- CORE THEME (Exact Blue Scheme from Symmetrical Components) --- */
        :root {
            --primary: #1E3A8A;
            --secondary: #2563EB;
            --accent: #F59E0B;
            --success: #10B981;
            --danger: #DC2626;
            --warning: #F59E0B;
            --bg: #F8FAFC;
            --card: #FFFFFF;
            --text: #4B5563;
            --heading: #111827;
            --footer-bg: #0F172A;
            --border: #E2E8F0;
            --grad: linear-gradient(135deg, var(--primary), var(--secondary));
            --grad-dark: linear-gradient(135deg, #0F172A, #1E293B);
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode {
            --primary: #10B981;
            --secondary: #34D399;
            --bg: #0F172A;
            --card: #1E293B;
            --text: #CBD5E1;
            --heading: #F1F5F9;
            --footer-bg: #020617;
            --border: #334155;
            --accent: #F59E0B;
        }

        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.7;
            margin: 0;
            padding: 0;
        }

        .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; }

        /* Header & Nav */
        header {
            background: var(--grad);
            color: white;
            padding: 24px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-container {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: white;
        }
        .logo-text {
            font-size: 1.75rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
        }
        .logo-subtitle {
            font-size: 0.8rem;
            margin: 4px 0 0 0;
            color: #E0E7FF;
            opacity: 0.9;
        }
        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        .nav-links a:hover { color: var(--accent); }
        
        /* Theme Toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }
        .switch {
            position: relative;
            width: 56px;
            height: 30px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.2);
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px; width: 22px;
            left: 4px; bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--accent); }
        input:checked + .slider:before { transform: translateX(26px); }

        /* Main Content & Cards */
        main { padding: 40px 0; }
        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }
        .card h2 {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            margin-top: 0;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        h3 {
            color: var(--heading);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            margin-top: 25px;
            margin-bottom: 20px;
        }

        /* Forms */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-group { margin-bottom: 0; }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--heading);
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            background-color: var(--bg);
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }
        body.dark-mode .form-group input:focus { 
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        /* Buttons */
        .btn {
            background: var(--grad);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
            transition: all 0.3s;
            width: 100%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(30, 58, 138, 0.4);
        }
        .btn-outline {
            background: transparent;
            border: 2px solid var(--secondary);
            color: var(--secondary);
            font-size: 0.9rem;
            padding: 8px 16px;
        }
        .btn-outline:hover {
            background: var(--secondary);
            color: white;
        }
        .button-wrapper {
            display: flex;
            justify-content: center;
            width: 100%;
            padding-top: 15px;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        /* Quick Load Buttons */
        .preset-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .preset-btn {
            padding: 8px 12px;
            font-size: 0.85rem;
            border: 1px solid var(--border);
            background: var(--card);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .preset-btn:hover {
            background: var(--bg);
            border-color: var(--secondary);
            color: var(--secondary);
        }

        /* Results Layout */
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }
        @media (max-width: 1024px) {
            .results-grid { grid-template-columns: 1fr; }
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-radius: 8px;
            overflow: hidden;
        }
        .results-table th, .results-table td {
            padding: 14px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        .results-table th {
            background: var(--grad);
            color: white;
            font-weight: 700;
        }
        .results-table tr:nth-child(even) { background-color: var(--bg); }
        .results-table td:first-child {
            font-weight: 600;
            color: var(--heading);
        }
        .highlight { color: var(--success); font-weight: 700; }
        .danger-text { color: var(--danger); font-weight: 700; }

        /* Canvas Container */
        .chart-container {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            position: relative;
            height: 400px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        canvas {
            max-width: 100%;
            max-height: 100%;
        }

        /* Educational Section Styling */
        .insight-card {
            background: linear-gradient(135deg, var(--card), rgba(37,99,235,0.03));
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid var(--secondary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        .insight-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .insight-card h4 {
            color: var(--secondary);
            font-size: 1.3rem;
            margin: 0 0 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Montserrat', sans-serif;
        }
        .insight-card p, .insight-card ul {
            margin: 10px 0;
            line-height: 1.8;
            color: var(--text);
        }
        .insight-card ul { padding-left: 20px; }
        .insight-card li { margin-bottom: 8px; }

        /* Formulas & Steps */
        .formula {
            background: var(--bg);
            border-left: 3px solid var(--accent);
            padding: 15px;
            margin: 12px 0;
            font-size: 1.1rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            color: var(--heading);
        }
        .calculation-step {
            font-family: 'Courier New', monospace;
            background-color: rgba(0,0,0,0.03);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            border-left: 4px solid var(--success);
            font-size: 0.95rem;
            line-height: 1.6;
        }
        body.dark-mode .calculation-step { background-color: rgba(255,255,255,0.05); }

        /* Vector Input Group Styling (Reused) */
        .vector-input-group {
            background: var(--bg);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
            position: relative;
        }
        .vector-input-header {
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Print Styling */
        @media print {
            header, footer, .education-section, .theme-toggle, .button-wrapper, .preset-container { display: none !important; }
            .card { border: none; shadow: none; padding: 0; }
            .container { width: 100%; max-width: 100%; padding: 0; }
            .results-grid { grid-template-columns: 1fr 1fr; }
            .chart-container { height: 300px; page-break-inside: avoid; }
        }

        /* Message Box */
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 28px;
            border-radius: 8px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.25);
            z-index: 10000;
            font-weight: 600;
            color: white;
            opacity: 0;
            transition: all 0.4s;
            display: none;
        }
        .message-box.show { display: block; opacity: 1; top: 30px; }
        .hidden { display: none; }

        /* Tooltip */
        .info-icon { color: var(--secondary); margin-left: 5px; cursor: help; }
        .tooltip { position: relative; display: inline-block; }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: 400;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }

        /* Footer */
        footer {
            background: var(--grad-dark);
            color: #CBD5E1;
            padding: 50px 0 20px 0;
            margin-top: 60px;
        }
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 30px;
        }
        .footer-col { flex: 1; min-width: 200px; }
        .footer-col h4 { color: white; margin-bottom: 15px; font-weight: 700; }
        .footer-col ul { list-style: none; padding: 0; margin: 0; }
        .footer-col a { color: #CBD5E1; text-decoration: none; transition: color 0.3s; }
        .footer-col a:hover { color: var(--accent); }
        .social-buttons { display: flex; gap: 12px; margin-top: 15px; }
        .social-btn {
            width: 40px; height: 40px;
            display: flex; justify-content: center; align-items: center;
            color: white; border-radius: 50%;
            font-size: 1.1rem; transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .social-btn:hover { transform: translateY(-4px); }
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.youtube { background-color: #FF0000; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .footer-disclaimer {
            text-align: center; padding-top: 25px;
            border-top: 1px solid #334155;
            max-width: 800px; margin: 0 auto;
            font-size: 0.9rem;
        }
        .footer-bottom {
            text-align: center; padding-top: 20px;
            font-size: 0.9rem; color: #94A3B8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 0 15px; }
            .navbar { flex-direction: column; gap: 20px; }
            .nav-links { flex-direction: column; gap: 12px; text-align: center; }
            .form-row { grid-template-columns: 1fr; }
            .card { padding: 20px; }
            .footer-content { flex-direction: column; gap: 25px; }
        }
    </style>
</head>
<body>
    <div id="message-box" class="message-box"></div>
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="#" class="logo-container">
                    <span class="logo-text">Design Calculators</span>
                    <p class="logo-subtitle">Inspired by standards such as IEC, IEEE, ISA, ASME, and API.</p>
                </a>
                <ul class="nav-links">
                    <li><a href='/'>Home</a></li>
                    <li><a href="articles">Articles</a></li>
                    <li><a href="indexmech">Mechanical</a></li>
                    <li><a href="indexele">Electrical</a></li>
                    <li><a href="indexinst">Instrumentation</a></li>
                </ul>
                <div class="theme-toggle">
                    <i class="fas fa-sun"></i>
                    <label class="switch">
                        <input type="checkbox" id="theme-switch">
                        <span class="slider"></span>
                    </label>
                    <i class="fas fa-moon"></i>
                </div>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="card">
            <h2><i class="fas fa-temperature-high"></i> Temperature Sensor Response Time Calculator</h2>
            
            <div class="tool-description">
                <p>Calculate the <strong>Time Constant ($\tau$)</strong> and Step Response for industrial temperature sensors (RTD, Thermocouple). This tool uses the <strong>Lumped Capacitance Method</strong>, accounting for sensor mass ($m$), surface area ($A$), specific heat ($C_p$), and convective heat transfer coefficient ($h$). It also evaluates <strong>Thermowell Lag</strong> due to air gap thermal resistance.</p>
            </div>

            <div class="calculator-form">
                <form id="temp-form">
                    <!-- Controls Row -->
                    <div class="form-row" style="align-items: end;">
                        <div class="form-group">
                            <label>Quick Load Scenarios:</label>
                            <div class="preset-container" style="margin-bottom: 0;">
                                <button type="button" class="preset-btn" onclick="loadPreset('tc_fast')"><i class="fas fa-bolt"></i> Exposed TC (Fast)</button>
                                <button type="button" class="preset-btn" onclick="loadPreset('rtd_water')"><i class="fas fa-water"></i> RTD in Water</button>
                                <button type="button" class="preset-btn" onclick="loadPreset('well_air')"><i class="fas fa-wind"></i> RTD + Thermowell (Air)</button>
                            </div>
                        </div>
                    </div>

                    <!-- Sensor Specs -->
                    <h4 style="color: var(--primary); margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 5px;">1. Sensor Specifications</h4>
                    <div class="form-row">
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-microchip"></i> Type</div>
                            <div class="form-group">
                                <label for="sensor-type">Sensor Construction</label>
                                <select id="sensor-type">
                                    <option value="tc_grounded">TC - Grounded Junction</option>
                                    <option value="tc_ungrounded">TC - Ungrounded (Isolated)</option>
                                    <option value="rtd" selected>RTD (Pt100) - Standard</option>
                                </select>
                            </div>
                        </div>
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-layer-group"></i> Material</div>
                            <div class="form-group">
                                <label for="sheath-mat">Sheath Material</label>
                                <select id="sheath-mat">
                                    <option value="ss316" selected>Stainless Steel 316</option>
                                    <option value="inconel">Inconel 600</option>
                                    <option value="brass">Brass (Fast)</option>
                                </select>
                            </div>
                        </div>
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-ruler-horizontal"></i> Dimensions</div>
                            <div class="form-group">
                                <label for="sheath-dia">Sheath Diameter ($d$) [mm]</label>
                                <input type="number" id="sheath-dia" value="6.0" step="0.5">
                            </div>
                        </div>
                    </div>

                    <!-- Process & Thermowell -->
                    <h4 style="color: var(--primary); margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 5px; margin-top: 20px;">2. Process Conditions & Installation</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="medium">Process Medium</label>
                            <select id="medium">
                                <option value="water" selected>Water (Flowing)</option>
                                <option value="oil">Oil (Flowing)</option>
                                <option value="air_flow">Air / Gas (Flowing 10m/s)</option>
                                <option value="air_still">Still Air (Natural Convection)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="velocity">Flow Velocity [m/s] <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Higher velocity increases heat transfer coefficient (h), reducing response time.</span></span></label>
                            <input type="number" id="velocity" value="1.0" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="thermowell">Thermowell Option</label>
                            <select id="thermowell">
                                <option value="none">None (Direct Insertion)</option>
                                <option value="standard">Standard Well (Air Gap)</option>
                                <option value="oil_filled">Well with Oil/Paste Fill</option>
                            </select>
                        </div>
                    </div>

                    <div class="button-wrapper">
                        <button type="button" id="calculate-btn" class="btn"><i class="fas fa-calculator"></i> Calculate Response</button>
                        <button type="button" id="pdf-btn" class="btn btn-outline"><i class="fas fa-file-pdf"></i> Download PDF Report</button>
                    </div>
                </form>
            </div>

            <!-- Results Section -->
            <div id="result-container" class="card hidden" style="margin-top: 40px;">
                <h3><i class="fas fa-poll"></i> Analysis Results</h3>
                
                <div class="results-grid">
                    <!-- Left Col: Table -->
                    <div>
                        <h4 style="margin-top: 0; color: var(--primary); margin-bottom: 15px;">Time Constants</h4>
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Value</th>
                                    <th>Definition</th>
                                </tr>
                            </thead>
                            <tbody id="result-table-body">
                                <!-- Dynamic rows -->
                            </tbody>
                        </table>
                        
                        <div style="margin-top: 20px; background: var(--bg); padding: 15px; border-radius: 6px; border: 1px solid var(--border);">
                            <strong><i class="fas fa-info-circle"></i> Insight:</strong>
                            <div id="interpretation-text" style="margin-top: 5px; font-size: 0.95rem;"></div>
                        </div>
                    </div>

                    <!-- Right Col: Visual Chart -->
                    <div>
                        <h4 style="margin-top: 0; color: var(--primary); margin-bottom: 15px;">Step Response Curve</h4>
                        <div class="chart-container">
                            <canvas id="responseChart"></canvas>
                        </div>
                        <div style="text-align: center; margin-top: 10px; font-size: 0.85rem; color: var(--text);">
                            <span style="color: #1E3A8A;">● Temperature Response</span> &nbsp;
                            <span style="color: #10B981; border-bottom: 2px dashed #10B981;">-- Target (100%)</span>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: 30px; border-top: 1px solid var(--border); padding-top: 20px;">Step-by-Step Engineering Calculation</h4>
                <div id="calculation-details">
                    <!-- Dynamic math steps -->
                </div>

                <div class="standard-reference" style="margin-top: 20px; font-style: italic; color: var(--text);">
                     Estimations based on Lumped Capacitance Model $\tau = \frac{\rho V C_p}{h A}$ and industrial empirical factors.
                </div>
            </div>
        </div>

        <!-- EDUCATIONAL CONTENT SECTION (MASSIVE) -->
        <div class="education-section card">
            <h2><i class="fas fa-lightbulb"></i> Engineering Insights: Thermal Dynamics in Measurement</h2>
            
            <!-- Insight 1: What is Tau? -->
            <div class="insight-card">
                <h4><i class="fas fa-clock"></i> 1. The Time Constant ($\tau$): Physics of Lag</h4>
                <p>In process control, no sensor changes instantaneously. Temperature sensors are physical masses (metal sheath, ceramic powder, wire elements) that must heat up or cool down to match the process temperature. This thermal inertia creates a lag.</p>
                <p>The <strong>Time Constant ($\tau$ or Tau)</strong> is defined as the time required for the sensor to reach <strong>63.2%</strong> of a step change in temperature. It is derived from the solution to the first-order differential equation for heat transfer:</p>
                <div class="formula">
                    $$ T(t) = T_{final} + (T_{start} - T_{final}) e^{-t/\tau} $$
                </div>
                <ul>
                    <li><strong>1$\tau$:</strong> 63.2% of change (Standard definition).</li>
                    <li><strong>3$\tau$:</strong> 95.0% of change (Often considered "Stable" in control loops).</li>
                    <li><strong>5$\tau$:</strong> 99.3% of change (Steady State).</li>
                </ul>
                <p><strong>Why 63.2%?</strong> It comes from $1 - e^{-1} \approx 1 - 0.368 = 0.632$.</p>
                <p><strong>Lumped Capacitance Model:</strong> For sensors where internal conduction is fast compared to external convection (Biot Number < 0.1), the time constant is governed by:</p>
                <div class="formula">$$ \tau = \frac{\rho \cdot V \cdot C_p}{h \cdot A_s} $$</div>
                <p>Where $\rho$ is density, $V$ is volume (mass term), $C_p$ is specific heat capacity (energy storage), $h$ is the heat transfer coefficient (convection), and $A_s$ is the surface area. This formula explains why larger, heavier sensors respond slower, and why high-velocity fluids (high $h$) make sensors respond faster.</p>
            </div>

            <!-- Insight 2: Sensor Construction -->
            <div class="insight-card">
                <h4><i class="fas fa-microchip"></i> 2. Construction Matters: RTD vs. TC</h4>
                <p>The internal construction dictates the base speed:</p>
                <ul>
                    <li><strong>Grounded Thermocouple (Fastest):</strong> The wires are welded directly to the tip of the metal sheath. Heat transfers directly from the process $\rightarrow$ sheath $\rightarrow$ junction. Typical $\tau \approx 0.5 - 2$ seconds.</li>
                    <li><strong>Ungrounded Thermocouple (Medium):</strong> The junction is electrically isolated from the sheath by Magnesium Oxide (MgO) powder. Heat must conduct through the powder. Slower, but immune to electrical noise. Typical $\tau \approx 1.5 - 4$ seconds.</li>
                    <li><strong>RTD (Slowest):</strong> The sensing element (platinum wire or thin film) is fragile and must be packed carefully inside the sheath with ceramic powder or cement. The added mass and internal thermal resistance make it slower. Typical $\tau \approx 3 - 7$ seconds.</li>
                </ul>
            </div>

            <!-- Insight 3: The Thermowell Factor -->
            <div class="insight-card">
                <h4><i class="fas fa-shield-alt"></i> 3. The Thermowell Penalty</h4>
                <p>In most industrial applications, sensors are placed inside a <strong>Thermowell</strong> to allow replacement without draining the tank or pipe. While necessary, a thermowell adds a massive amount of thermal mass and, more importantly, an <strong>Air Gap</strong>.</p>
                <p>Air is a terrible conductor of heat. The small gap between the sensor sheath and the thermowell bore acts as an insulator. Adding a standard thermowell can increase the response time by <strong>2x to 5x</strong>.</p>
                <p><strong>The Fix:</strong> Use a spring-loaded sensor (to ensure tip contact) or add a thermal coupling compound (oil or heat transfer paste) inside the well. This eliminates the air gap and can reduce the lag significantly, as shown in the calculator.</p>
            </div>

            <!-- Insight 4: Flow Velocity & Heat Transfer -->
            <div class="insight-card">
                <h4><i class="fas fa-wind"></i> 4. Flow Velocity & Medium</h4>
                <p>The heat transfer coefficient ($h$) is not constant; it depends on the fluid properties and velocity. A sensor will respond much faster in turbulent water than in stagnant air.</p>
                <ul>
                    <li><strong>Water ($h \approx 1000-5000 W/m^2K$):</strong> Fast response. The limiting factor is usually the internal conduction of the sensor.</li>
                    <li><strong>Air ($h \approx 10-100 W/m^2K$):</strong> Very slow response. The limiting factor is the convection from the air to the sheath surface.</li>
                </ul>
                <p><strong>Rule of Thumb:</strong> $\tau \propto d^{1.5}$. Doubling the diameter of the sheath roughly triples the response time. $\tau \propto v^{-0.5}$. Increasing flow velocity reduces response time, but with diminishing returns.</p>
            </div>
        </div>
    </main>    <!-- FOOTER -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <h4>Design Calculators</h4>
                    <p style="font-size: 0.9rem; line-height: 1.6; margin-bottom: 15px;">If you find this tool helpful, please consider sharing it with your colleagues!</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn linkedin" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer" class="social-btn youtube" title="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn twitter" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn facebook" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource%20https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn whatsapp" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href='/'>Home</a></li>
                        <li><a href="indexele">Electrical</a></li>
                        <li><a href="indexmech">Mechanical</a></li>
                        <li><a href="indexinst">Instrumentation</a></li>                        
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="about">About Us</a></li>
                        <li><a href="contact">Contact</a></li>
                        <li><a href="faq">FAQ</a></li>
                        <li><a href="privacy-policy">Privacy Policy</a></li>
                        <li><a href="terms-of-service">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>More</h4>
                    <ul>
                        <li><a href='/articles'>Articles & Whitepapers</a></li>
                        <li><a href='/sitemap2'>Sitemap</a></li>                        
                    </ul>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>This tool offers general guidance. Results should be reviewed for accuracy and compliance with relevant project standards and regulations before use.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">A Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global State
        let responseChart = null;
        let lastResult = null;

        // Material Properties (Density kg/m3, Specific Heat J/kgK)
        const materials = {
            'ss316': { rho: 8000, cp: 500, name: "SS316" },
            'inconel': { rho: 8470, cp: 444, name: "Inconel 600" },
            'brass': { rho: 8500, cp: 380, name: "Brass" }
        };

        // Medium Properties (Approximate Thermal Conductivity k, Viscosity mu, Prandtl Pr)
        // Used for simplified Nusselt correlation Nu = C * Re^m * Pr^n
        // We will simplify to h estimation for JS: h approx k/D * Nu
        const fluids = {
            'water': { k: 0.6, rho: 1000, mu: 0.001, Pr: 7 },
            'oil': { k: 0.15, rho: 850, mu: 0.03, Pr: 500 }, // Heavy oil
            'air_flow': { k: 0.026, rho: 1.2, mu: 1.8e-5, Pr: 0.7 }
        };

        function loadPreset(type) {
            if (type === 'tc_fast') {
                document.getElementById('sensor-type').value = 'tc_grounded';
                document.getElementById('sheath-dia').value = '3.0';
                document.getElementById('medium').value = 'water';
                document.getElementById('velocity').value = '1.0';
                document.getElementById('thermowell').value = 'none';
            } else if (type === 'rtd_water') {
                document.getElementById('sensor-type').value = 'rtd';
                document.getElementById('sheath-dia').value = '6.0';
                document.getElementById('medium').value = 'water';
                document.getElementById('velocity').value = '1.0';
                document.getElementById('thermowell').value = 'none';
            } else if (type === 'well_air') {
                document.getElementById('sensor-type').value = 'rtd';
                document.getElementById('sheath-dia').value = '6.0';
                document.getElementById('medium').value = 'air_flow';
                document.getElementById('velocity').value = '10.0';
                document.getElementById('thermowell').value = 'standard';
            }
            displayMessage(`${type.toUpperCase()} scenario loaded.`, "success");
        }

        function displayMessage(message, type = "info") {
            let messageBox = document.getElementById('message-box');
            messageBox.textContent = message;
            if (type === "error") messageBox.style.backgroundColor = 'var(--danger)';
            else if (type === "success") messageBox.style.backgroundColor = 'var(--success)';
            else messageBox.style.backgroundColor = 'var(--primary)';
            messageBox.classList.add('show');
            setTimeout(() => messageBox.classList.remove('show'), 4000);
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Theme handling
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch && localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                themeSwitch.checked = true;
            }
            if(themeSwitch) {
                themeSwitch.addEventListener('change', function() {
                    document.body.classList.toggle('dark-mode');
                    localStorage.setItem('theme', this.checked ? 'dark' : 'light');
                });
            }

            document.getElementById('calculate-btn').addEventListener('click', performCalculation);
            document.getElementById('pdf-btn').addEventListener('click', generatePDF);
        });

        function performCalculation() {
            // 1. Get Inputs
            const type = document.getElementById('sensor-type').value;
            const matKey = document.getElementById('sheath-mat').value;
            const d_mm = parseFloat(document.getElementById('sheath-dia').value);
            const medium = document.getElementById('medium').value;
            const vel = parseFloat(document.getElementById('velocity').value);
            const well = document.getElementById('thermowell').value;

            if (isNaN(d_mm) || isNaN(vel) || d_mm <= 0 || vel < 0) {
                displayMessage("Please enter valid positive numbers.", "error");
                return;
            }

            // 2. Physics Engine Calculation
            const mat = materials[matKey];
            const d_m = d_mm / 1000;
            const L_eff = 0.05; // Assume 50mm sensitive length for calculation
            
            // A. Geometric Mass & Area
            // Volume of sheath cylinder (approx hollow with MgO) - simplified to solid equivalent for thermal mass
            // Effective Density for RTD is mix of steel, ceramic, wire.
            // Using Weighted Density: 60% Sheath, 40% MgO
            const rho_eff = mat.rho * 0.6 + 3580 * 0.4; // MgO rho approx 3580
            const cp_eff = mat.cp * 0.6 + 877 * 0.4; // MgO Cp approx 877
            
            const Vol = Math.PI * Math.pow(d_m/2, 2) * L_eff;
            const Mass = rho_eff * Vol;
            const Area = Math.PI * d_m * L_eff; // Surface area for convection (ignore tip for length>>dia)

            // B. Heat Transfer Coefficient (h)
            // Re = rho_fluid * v * D / mu
            let h = 0;
            
            if (medium === 'air_still') {
                h = 15; // Natural convection base
            } else {
                let fKey = (medium === 'air_flow') ? 'air_flow' : medium;
                let fluid = fluids[fKey];
                
                // Reynolds Number
                let Re = (fluid.rho * vel * d_m) / fluid.mu;
                
                // Nusselt Correlation (Hilpert for Cylinder in Cross Flow)
                // Nu = C * Re^m * Pr^(1/3)
                // for 40 < Re < 4000: C=0.683, m=0.466
                // for 4000 < Re < 40000: C=0.193, m=0.618
                let C_const = 0.683; let m_const = 0.466;
                if (Re > 4000) { C_const = 0.193; m_const = 0.618; }
                if (Re < 40) { C_const = 0.911; m_const = 0.385; }
                
                let Nu = C_const * Math.pow(Re, m_const) * Math.pow(fluid.Pr, 0.33);
                h = (Nu * fluid.k) / d_m;
            }

            // C. Base Time Constant (Lumped Capacitance)
            // Tau = (rho * V * Cp) / (h * As) = (Mass * Cp) / (h * Area)
            let tau_calc = (Mass * cp_eff) / (h * Area);

            // Internal Conduction Correction (Biot Number check)
            // If Bi > 0.1, internal resistance matters.
            // k_eff for MgO/Sheath approx 15 W/mK
            const k_sensor = 15; 
            const Bi = (h * (d_m/2)) / k_sensor;
            
            // Correction factor for Internal Resistance
            // Tau_actual approx Tau_lumped * (1 + C * Bi) ??
            // Actually, internal construction sets a floor.
            // Grounded TC: Excellent internal path. Ungrounded/RTD: Internal lag.
            let construction_lag = 0;
            if (type === 'tc_ungrounded') construction_lag = 0.5 * (d_mm/3.0); // empirical s
            if (type === 'rtd') construction_lag = 2.5 * (d_mm/6.0); // RTD has significant internal lag
            
            let tau_sensor = tau_calc + construction_lag;

            // D. Thermowell Adder
            let tau_total = tau_sensor;
            let well_adder = 0;
            
            if (well !== 'none') {
                // Well lag model
                // Gap resistance R_gap = ln(D_out/D_in) / (2*pi*L*k_gap) ... roughly
                // Simplified: Well adds lag proportional to gap size and fill k
                let k_gap = 0.026; // Air
                if (well === 'oil_filled') k_gap = 0.15; // Oil
                
                // Gap h_equivalent = k_gap / gap_width. Assume 0.5mm gap
                let h_gap = k_gap / 0.0005; 
                
                // Well Thermal Mass (Thicker/Heavier than sensor)
                // Assume well adds thermal mass and a resistance layer
                // Empirical adder: T_well = Mass_well*Cp / (h_gap * Area)
                let well_mass_factor = 3.0; // Well is heavier
                let well_adder_calc = (Mass * well_mass_factor * cp_eff) / (h_gap * Area);
                
                well_adder = well_adder_calc;
                
                // External h still applies to the outside of the well!
                // The well itself slows down heat getting to the gap.
                // Total Tau = Tau_external + Tau_well_wall + Tau_gap + Tau_sensor
                // We simplify to Sensor + Well_System
                tau_total += well_adder;
            }

            // Calculation Constants
            const t63 = tau_total;
            const t90 = tau_total * 2.3;
            const t99 = tau_total * 5.0;

            lastResult = { t63, t90, t99, type, d_mm, medium, vel, well, Mass, Area, h, Bi };

            // 4. Render Step-by-Step
            let html = `<h4>Step 1: Physical Properties & Mass</h4>`;
            html += `<div class="calculation-step">`;
            html += `<strong>Effective Density ($\rho_{eff}$):</strong> Weighted average of ${mat.name} & MgO $\\approx ${rho_eff.toFixed(0)} \\text{ kg/m}^3$<br>`;
            html += `<strong>Sensor Mass ($m$):</strong> $\\rho \\cdot V = ${rho_eff.toFixed(0)} \\cdot ${(Vol*1e9).toFixed(1)} \\text{ mm}^3 = ${(Mass*1000).toFixed(2)} \\text{ grams}$<br>`;
            html += `<strong>Surface Area ($A_s$):</strong> $\\pi d L = ${(Area*1e6).toFixed(0)} \\text{ mm}^2$<br>`;
            html += `</div>`;

            html += `<h4>Step 2: Convective Heat Transfer ($h$)</h4>`;
            html += `<div class="calculation-step">`;
            html += `<strong>Medium:</strong> ${medium.toUpperCase()} flowing at ${vel} m/s.<br>`;
            html += `<strong>Calculated $h$:</strong> Based on Nusselt correlation $\\mathbf{h = ${h.toFixed(1)} \\text{ W/m}^2\\text{K}}$<br>`;
            html += `<strong>Biot Number ($Bi$):</strong> $h(r)/k = ${(Bi).toFixed(3)}$. ${Bi>0.1 ? 'Internal conduction limits speed.' : 'External convection limits speed.'}<br>`;
            html += `<p class="formula">$$ \\tau_{surface} = \\frac{m \\cdot C_p}{h \\cdot A_s} = \\frac{${Mass.toFixed(4)} \\cdot ${cp_eff.toFixed(0)}}{${h.toFixed(1)} \\cdot ${Area.toFixed(5)}} = ${(tau_calc).toFixed(2)} \\text{ s} $$</p>`;
            html += `</div>`;

            if (well !== 'none') {
                html += `<h4>Step 3: Thermowell & Internal Lag</h4>`;
                html += `<div class="calculation-step">`;
                html += `<strong>Sensor Internal Lag:</strong> +${construction_lag.toFixed(2)} s (${type})<br>`;
                html += `<strong>Thermowell Gap Resistance:</strong> +${well_adder.toFixed(2)} s (${well})<br>`;
                html += `</div>`;
            } else {
                html += `<h4>Step 3: Internal Construction Lag</h4>`;
                html += `<div class="calculation-step"><strong>Internal Conduction Delay:</strong> +${construction_lag.toFixed(2)} s</div>`;
            }

            html += `<h4>Step 4: Final Response Times</h4>`;
            html += `<div class="calculation-step">`;
            html += `$$ \\tau_{total} = ${t63.toFixed(2)} \\text{ s} $$`;
            html += `$$ t_{90\\%} \\approx 2.3\\tau = ${t90.toFixed(2)} \\text{ s} $$`;
            html += `</div>`;

            document.getElementById('calculation-details').innerHTML = html;

            // 5. Update Table
            const tbody = document.getElementById('result-table-body');
            tbody.innerHTML = '';
            const addRow = (n, v, d, c="") => {
                tbody.innerHTML += `<tr style="${c ? 'color:'+c : ''}"><td><strong>${n}</strong></td><td>${v}</td><td>${d}</td></tr>`;
            };
            addRow("Time Constant (τ)", t63.toFixed(2) + " s", "Time to reach 63.2%", "var(--primary)");
            addRow("Response Time (t90)", t90.toFixed(2) + " s", "Time to reach 90.0%");
            addRow("Steady State (t99)", t99.toFixed(2) + " s", "Time to reach 99.3%");

            const interpEl = document.getElementById('interpretation-text');
            if (t63 > 10) {
                interpEl.innerHTML = `<span style="color:var(--warning); font-weight:bold;">Slow Response.</span> Consider using a grounded junction, removing the thermowell, or using a tapered tip well.`;
            } else if (t63 < 2) {
                interpEl.innerHTML = `<span style="color:var(--success); font-weight:bold;">Fast Response.</span> Excellent for tight control loops.`;
            } else {
                interpEl.innerHTML = `Standard response time for process monitoring.`;
            }

            // 6. Draw Chart
            drawChart(t63);

            // 7. Show
            document.getElementById('result-container').classList.remove('hidden');
            if(window.MathJax) window.MathJax.typesetPromise([document.getElementById('calculation-details')]);
            document.getElementById('result-container').scrollIntoView({ behavior: 'smooth' });
        }

        function drawChart(tau) {
            const ctx = document.getElementById('responseChart').getContext('2d');
            if (responseChart) responseChart.destroy();

            // Generate Data Points (0 to 5 tau)
            const labels = [];
            const data = [];
            const duration = tau * 5;
            const steps = 50;
            
            for (let i = 0; i <= steps; i++) {
                const t = (duration / steps) * i;
                const T = 100 * (1 - Math.exp(-t / tau));
                labels.push(t.toFixed(1));
                data.push(T);
            }

            responseChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '% Change',
                        data: data,
                        borderColor: '#1E3A8A', /* Primary Blue */
                        backgroundColor: 'rgba(37, 99, 235, 0.1)', /* Secondary Blue tint */
                        borderWidth: 2,
                        fill: true,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'Time (seconds)' } },
                        y: { title: { display: true, text: '% of Step Change' }, max: 100 }
                    },
                    plugins: {
                        annotation: {
                            annotations: {
                                line1: {
                                    type: 'line',
                                    yMin: 63.2,
                                    yMax: 63.2,
                                    borderColor: '#10B981',
                                    borderWidth: 1,
                                    borderDash: [5, 5],
                                    label: { content: 'τ (63.2%)', enabled: true }
                                }
                            }
                        }
                    }
                }
            });
        }

        function generatePDF() {
            if (!lastResult) {
                displayMessage("Calculate first.", "error");
                return;
            }
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4');
            let y = 15;

            // Header
            pdf.setFont('helvetica', 'bold');
            pdf.setFontSize(16);
            pdf.setTextColor(30, 58, 138); // Dark Blue
            pdf.text('Sensor Response Time Report', 105, y, { align: 'center' });
            y += 10;

            pdf.setFontSize(10);
            pdf.setTextColor(100);
            pdf.text(`Date: ${new Date().toLocaleString()}`, 105, y, { align: 'center' });
            y += 15;

            // Inputs
            pdf.setFontSize(12);
            pdf.setTextColor(0);
            pdf.text('1. Sensor Configuration', 14, y);
            y += 5;

            const inputData = [
                ['Sensor Type', lastResult.type.toUpperCase()],
                ['Diameter', `${lastResult.d_mm} mm`],
                ['Medium', lastResult.medium.toUpperCase()],
                ['Velocity', `${lastResult.vel} m/s`],
                ['Thermowell', lastResult.well.toUpperCase()]
            ];

            pdf.autoTable({
                startY: y,
                head: [['Parameter', 'Value']],
                body: inputData,
                margin: { left: 14, right: 14 },
                theme: 'grid',
                headStyles: { fillColor: [30, 58, 138] }
            });
            y = pdf.lastAutoTable.finalY + 15;

            // Results
            pdf.text('2. Calculated Response', 14, y);
            y += 5;

            const resData = [
                ['Time Constant (τ)', `${lastResult.t63.toFixed(2)} s`],
                ['t90 (90%)', `${lastResult.t90.toFixed(2)} s`],
                ['t99 (Steady State)', `${lastResult.t99.toFixed(2)} s`],
                ['Heat Transfer (h)', `${lastResult.h.toFixed(1)} W/m2K`]
            ];

            pdf.autoTable({
                startY: y,
                head: [['Metric', 'Result']],
                body: resData,
                margin: { left: 14, right: 14 },
                theme: 'grid',
                headStyles: { fillColor: [30, 58, 138] },
                didParseCell: function(data) {
                    if(data.row.index === 0) {
                        data.cell.styles.fontStyle = 'bold';
                    }
                }
            });

            // Footer
            y = pdf.lastAutoTable.finalY + 20;
            pdf.setFontSize(8);
            pdf.setTextColor(150);
            pdf.text('Estimates based on first-order thermal dynamics models.', 105, y, { align: 'center' });

            pdf.save('Response_Time_Report.pdf');
            displayMessage("PDF Downloaded", "success");
        }

        function displayMessage(message, type = "info") {
            let messageBox = document.getElementById('message-box');
            messageBox.textContent = message;
            if (type === "error") messageBox.style.backgroundColor = 'var(--danger)';
            else if (type === "success") messageBox.style.backgroundColor = 'var(--success)';
            else messageBox.style.backgroundColor = 'var(--primary)';
            messageBox.classList.add('show');
            setTimeout(() => messageBox.classList.remove('show'), 4000);
        }
    </script>
</body>
</html>
