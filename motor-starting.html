<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Motor Starting Current & Torque - Design Calculators - Electrical</title>
    <!-- Updated Meta Tags -->
    <meta name="description" content="Calculate motor starting (inrush) current, starting torque, voltage dip, and acceleration time for DOL, Star-Delta, and VFD methods per IEC/IEEE.">
    <meta name="keywords" content="motor starting calculator, inrush current, starting torque, voltage dip, motor acceleration, dol, star-delta, vfd, iec, nema">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://designcalculators.co.in/motor-starting.html" />
    
    <!-- AdSense & Google Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>
    
    <!-- Fonts and Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- MathJax for formula rendering -->
    <script>
        window.MathJax = {
            tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
            svg: { fontCache: 'global' },
            options: { processHtmlClass: 'math-content', ignoreHtmlClass: 'no-mathjax' }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- PDF Generation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    
    <!-- NEW Standardized CSS -->
    <style>
        :root {
            --primary-color: #1E3A8A;
            --secondary-color: #2563EB;
            --accent-color: #F59E0B;
            --success-color: #10B981;
            --bg-color: #F8FAFC;
            --card-bg: #FFFFFF;
            --text-color: #4B5563;
            --heading-color: #111827;
            --footer-bg: #0F172A;
            --border-color: #E2E8F0;
            --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            --gradient-dark: linear-gradient(135deg, #0F172A, #1E293B);
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --hover-color: #e2e6ea;
            --input-focus-shadow: 0 0 0 3px rgba(30, 58, 138, 0.25);
        }

        body.dark-mode {
            --primary-color: #10B981;
            --secondary-color: #34D399;
            --bg-color: #0F172A;
            --card-bg: #1E293B;
            --text-color: #CBD5E1;
            --heading-color: #F1F5F9;
            --footer-bg: #020617;
            --border-color: #334155;
            --hover-color: #1E293B;
            --input-focus-shadow: 0 0 0 3px rgba(16, 185, 129, 0.5);
        }

        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.8;
            transition: background-color 0.3s, color 0.3s;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 24px;
        }

        /* HEADER */
        .header {
            background: var(--gradient-primary);
            color: white;
            padding: 24px 0;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        /* Updated logo-container for new text */
        .logo-container {
            flex-direction: column;
            align-items: flex-start;
            text-decoration: none;
            color: white;
            gap: 0;
        }
        .logo-text {
            font-size: 1.75rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
        }
        /* New subtitle style */
        .logo-subtitle {
            font-size: 0.8rem;
            line-height: 1.2;
            margin: 4px 0 0 0;
            font-weight: 300;
            max-width: 400px;
            color: #E0E7FF; /* Lighter than white for subtitle */
        }
        
        .nav-links {
            display: flex;
            gap: 24px;
            align-items: center;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        .nav-links a:hover { color: var(--accent-color); }

        /* Theme Toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .theme-toggle .icon {
            color: white;
            font-size: 1.2rem;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 56px;
            height: 30px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.2);
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--accent-color); }
        input:checked + .slider:before { transform: translateX(26px); }

        /* Main Content */
        main { padding: 40px 0; }
        .tool-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
        }
        .tool-container h2 {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 15px;
            margin-top: 0;
            margin-bottom: 25px;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
        }
         .tool-container h3 {
            color: var(--heading-color);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            margin-top: 25px;
            margin-bottom: 20px;
        }
        .tool-description {
            margin-bottom: 25px;
            color: var(--text-color);
            font-size: 1rem;
            line-height: 1.8;
        }
        .tool-description a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }
        .tool-description a:hover {
            text-decoration: underline;
        }

        /* Form Styles */
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            margin-top: 25px;
        }
        .form-group { margin-bottom: 20px; }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--heading-color);
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            background-color: var(--bg-color);
            color: var(--text-color);
            box-sizing: border-box;
            transition: all 0.3s;
            font-size: 1rem;
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: var(--input-focus-shadow);
            outline: none;
        }
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        /* Button Styles */
        .calculate-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 700;
            transition: all 0.3s;
            width: 100%;
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .calculate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(30, 58, 138, 0.4);
        }
        .calculate-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .calculate-btn:disabled {
            background: #9ca3af; /* Grey */
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .calculate-btn .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-left-color: #ffffff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: none; /* Hidden by default */
            margin-left: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Result Styles */
        .result-container {
            margin-top: 40px;
            padding: 30px;
            border-radius: 12px;
            background-color: var(--card-bg);
            box-shadow: var(--card-shadow);
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .result-container.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        .result-container h3 {
            color: var(--primary-color);
            margin-bottom: 25px;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.6rem;
        }

        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-radius: 8px;
            overflow: hidden;
        }
        .result-table th, .result-table td {
            padding: 14px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        .result-table th {
            background: var(--gradient-primary);
            color: white;
            font-weight: 700;
        }
        .result-table tr:nth-child(even) {
            background-color: rgba(0,0,0,0.02);
        }
        .result-table td strong {
            color: var(--heading-color);
        }
        body.dark-mode .result-table td strong {
             color: var(--primary-color);
        }
        
        /* Calculation Details & Standard Ref */
        #calculation-details {
            background-color: var(--bg-color);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            font-size: 0.95rem;
        }
        #calculation-details h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        #calculation-details p.formula {
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            text-align: center;
            padding: 15px;
            background-color: var(--hover-color);
            border-radius: 6px;
            margin: 15px 0;
            overflow-x: auto;
        }
        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace;
            background-color: var(--hover-color);
            padding: 8px 12px;
            border-radius: 4px;
            margin-bottom: 8px;
            line-height: 1.6;
        }
        #calculation-details ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
        }
        #calculation-details ul li {
            margin-bottom: 8px;
            line-height: 1.7;
        }

        .standard-reference {
            margin-top: 25px;
            font-style: italic;
            font-size: 0.95rem;
            padding: 15px;
            background: linear-gradient(135deg, rgba(245,158,11,0.1), rgba(245,158,11,0.05));
            border-left: 4px solid var(--accent-color);
            border-radius: 6px;
            line-height: 1.7;
        }
         .standard-reference a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }
        .standard-reference a:hover {
            text-decoration: underline;
        }
        /* Custom recommendation block style (re-styled from old file) */
        .recommendation-block {
             margin-top: 25px;
            font-size: 0.95rem;
            padding: 15px;
            background-color: var(--bg-color);
            border-left: 4px solid var(--primary-color);
            border-radius: 6px;
            line-height: 1.7;
        }
        .recommendation-block h4 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 10px;
            font-family: 'Montserrat', sans-serif;
        }
        .recommendation-block p {
            margin-bottom: 10px;
        }


        /* Tooltip */
        .info-icon {
            color: var(--primary-color);
            margin-left: 6px;
            cursor: help;
            font-size: 0.9rem;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 280px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1000;
            bottom: 130%;
            left: 50%;
            margin-left: -140px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            line-height: 1.5;
            white-space: normal;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Custom Message Box */
        #custom-message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 28px;
            border-radius: 8px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.25);
            z-index: 10000;
            font-weight: 600;
            color: white;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        #custom-message-box.show { opacity: 1; }

        /* New Content Block Styles */
        .content-block {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
            margin-top: 30px;
        }
        .content-block h2 {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 15px;
            margin-top: 0;
            margin-bottom: 25px;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
        }
        .content-block h3 {
            color: var(--heading-color);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.4rem;
            margin-top: 25px;
            margin-bottom: 15px;
        }
         .content-block h4 {
            color: var(--secondary-color);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.2rem;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        .content-block p, .content-block li {
            font-size: 1rem;
            line-height: 1.8;
            color: var(--text-color);
        }
        .content-block ul, .content-block ol {
            list-style-type: disc;
            margin-left: 20px;
            padding-left: 5px;
            margin-bottom: 15px;
        }
        .content-block ol {
            list-style-type: decimal;
        }
        .content-block li {
            margin-bottom: 10px;
        }
        .content-block strong {
            color: var(--heading-color);
        }
        .content-block code {
            background-color: var(--hover-color);
            padding: 2px 5px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: var(--primary-color);
        }
        body.dark-mode .content-block code {
            color: var(--secondary-color);
        }
        .content-block .formula-block {
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            text-align: center;
            padding: 15px;
            background-color: var(--hover-color);
            border-radius: 6px;
            margin: 20px 0;
            overflow-x: auto;
            border: 1px dashed var(--primary-color);
        }
        .content-block table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-radius: 8px;
            overflow: hidden;
        }
        .content-block th, .content-block td {
            padding: 14px;
            text-align: left;
            border: 1px solid var(--border-color);
        }
        .content-block th {
            background-color: var(--hover-color);
            font-weight: 600;
        }
        
        /* FOOTER */
        footer {
            background: var(--gradient-dark);
            color: #CBD5E1;
            padding: 50px 0 20px 0;
        }
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 30px;
        }
        .footer-col {
            flex: 1;
            min-width: 200px;
        }
        .footer-col h4 {
            font-size: 1.1rem;
            color: white;
            margin-bottom: 15px;
            font-weight: 700;
        }
        .footer-col ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .footer-col ul li { margin-bottom: 10px; }
        .footer-col a {
            color: #CBD5E1;
            text-decoration: none;
            transition: color 0.3s;
            font-size: 0.95rem;
        }
        .footer-col a:hover { color: var(--accent-color); }
        .footer-disclaimer {
            text-align: center;
            margin: 30px auto;
            padding-top: 25px;
            border-top: 1px solid #334155;
            max-width: 800px;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            font-size: 0.9rem;
            color: #94A3B8;
        }
        .creator-name {
            color: var(--secondary-color);
            font-weight: bold;
        }
        .social-buttons {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }
        .social-btn {
            width: 40px;
            height: 40px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            color: white;
            border-radius: 50%;
            text-decoration: none;
            font-size: 1.1rem;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .social-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.youtube { background-color: #FF0000; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.whatsapp { background-color: #25D366; }

        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 0 15px; }
            .navbar { flex-direction: column; gap: 20px; }
            .nav-links { flex-direction: column; gap: 12px; text-align: center; }
            .form-row { grid-template-columns: 1fr; }
            .tool-container, .content-block { padding: 20px; }
            .footer-content { flex-direction: column; gap: 25px; }
            .theme-toggle {
                position: relative;
                top: 0;
                right: 0;
                margin-top: 15px;
            }
            .content-block table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
            .logo-container {
                 align-items: center; 
            }
            .logo-subtitle {
                text-align: center; 
            }
        }
        .hidden { display: none; }
    </style>
    <link rel="stylesheet" href="styles.css">
    <meta property="og:title" content="Advanced Motor Starting Current & Torque - Design Calculators - Electrical">
    <meta property="og:description" content="Calculate motor starting (inrush) current, starting torque, voltage dip, and acceleration time for DOL, Star-Delta, and VFD methods per IEC/IEEE.">
</head>
<body>
    
    <!-- NEW HEADER -->
    <header class="header">
        <div class="header-bg-animation"></div>
        <div class="container">
            <nav class="navbar">
                <a href="/" class="logo-container">
                    <img src="logo.png" alt="Design Calculators Logo" class="logo">
                    <span class="logo-text">Design Calculators</span>
                </a>

                <div class="nav-menu">
                    <button class="mobile-menu-toggle" aria-label="Toggle menu">
                        <i class="fas fa-bars"></i>
                    </button>

                    <ul class="nav-links">
                        <li><a href="/index.html">Home</a></li>
                        
    <li class="dropdown">
        <a href="/indexele.html" class="dropdown-toggle">Electrical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/arcflash.html">Arc Flash Calculator</a><a href="/breaker-sizing.html">Breaker Sizing</a><a href="/cable-thermal-rating.html">Cable Ampacity</a><a href="/comm-cable-loss.html">Comm Cable Loss</a><a href="/earth-conductor-size.html">Earth Conductor Size</a><a href="/generatorsizing.html">Generator Sizing</a><a href="/harmonicsanalyser.html">Harmonics Analyser</a><a href="/insulationresistance.html">Insulation Resistance</a><a href="/logicgate.html">Logic Gates Simulator</a><a href="/motor-starting.html">Motor Starting Current</a><a href="/pcbtrace.html">PCB Trace Width</a><a href="/protection-device.html">Protection Device</a><a href="/resistor.html">Resistor Color Code</a><a href="/solarcable.html">Solar Cable Sizing</a><a href="/systemxrcalculator.html">System X/R Ratio</a><a href="/transmissionline.html">Transmission Line</a><a href="/vfd-selection.html">VFD Selection Tool</a></div><div><a href="/batterylife.html">Battery Life Estimator</a><a href="/busbarampacity.html">Busbar Ampacity</a><a href="/cablepulling.html">Cable Pulling Tension</a><a href="/conduit-fill.html">Conduit Fill Calculator</a><a href="/earthingfaultsimulator.html">Earthing Fault Simulator</a><a href="/grounding.html">Grounding System Design</a><a href="/hvac-sizing.html">HVAC Sizing Calculator</a><a href="/lcresonancecalculator.html">LC Resonance Calculator</a><a href="/maintenance-guide.html">Maintenance Guide</a><a href="/nemaipconvertor.html">NEMA to IP Converter</a><a href="/power-factor.html">Power Factor Correction</a><a href="/relay-coordination.html">Relay Coordination</a><a href="/short-circuit.html">Short Circuit Current</a><a href="/solarpvarray.html">Solar PV Array</a><a href="/transformer-calculator.html">Transformer Calculator</a><a href="/unit-converter.html">Unit Converter</a><a href="/voltage-drop.html">Voltage Drop Calculator</a></div><div><a href="/battery-sizing.html">Battery Sizing (AH)</a><a href="/busbarshortcircuit.html">Busbar Short Circuit</a><a href="/cable-sizing.html">Cable Sizing Calculator</a><a href="/ctsaturation.html">CT Saturation</a><a href="/equipment-relay.html">Equipment Relay Setting</a><a href="/harmonic-distortion.html">Harmonic Distortion</a><a href="/industriallighting.html">Industrial Lighting</a><a href="/lighting-calulator.html">Lighting Calculator</a><a href="/motor-efficiency.html">Motor Efficiency</a><a href="/neutral-earth-fault-current.html">Neutral Earth Fault</a><a href="/powertriangletool.html">Power Triangle</a><a href="/electricalresidentialload.html">Residential Load Calc</a><a href="/skindepth.html">Skin Depth Calculator</a><a href="/symmetricalcomponents.html">Symmetrical Components</a><a href="/transformerinrush.html">Transformer Inrush</a><a href="/ups-sizing.html">UPS Sizing</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexele.html" class="view-all-link">View All Electrical Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexinst.html" class="dropdown-toggle">Instrumentation <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/adc-resolution.html">ADC Resolution</a><a href="/capillarylengthtemperatureerror.html">Capillary Error</a><a href="/cv-kv-valve.html">Cv/Kv Valve Sizing</a><a href="/dp-level.html">DP Level Measurement</a><a href="/hydrostatic-level.html">Hydrostatic Level</a><a href="/instrument-range.html">Instrument Range</a><a href="/loop-impedance.html">Loop Impedance</a><a href="/orifice-plate.html">Orifice Plate Beta</a><a href="/pid-tuning.html">PID Tuning</a><a href="/profibus.html">Profibus Calculator</a><a href="/tempsensorresponse.html">Response Time (Tau)</a><a href="/rtd-lead-comp.html">RTD Lead Wire Comp.</a><a href="/sealfluidzeroshift.html">Seal Fluid Shift</a><a href="/snr-calculator.html">SNR Calculator</a><a href="/thermocoupleextensioncable.html">TC Extension Cable</a><a href="/thermowellwakefreq.html">Thermowell Frequency</a><a href="/pressuretransmitteroverrange.html">Tx Overrange</a><a href="/valvecavitationcalculator.html">Valve Cavitation</a><a href="/vibrationtransmitter.html">Vibration Tx</a><a href="/zoneclassificationhelper.html">Zone Classification</a></div><div><a href="/baud-rate.html">Baud Rate Calculator</a><a href="/gascompressibility.html">Compressibility (Z)</a><a href="/dbcalculator.html">dB Gain/Loss Calc</a><a href="/flowprofiledistortioncalculator.html">Flow Distortion</a><a href="/impulselinefreezing.html">Impulse Freezing</a><a href="/intrinsic-safety.html">Intrinsic Safety Loop</a><a href="/measurement.html">Measurement Uncertainty</a><a href="/ph-temp-comp.html">pH Temp Compensation</a><a href="/plcscantime.html">PLC Scan Time</a><a href="/pressurereliefvalve.html">PRV Sizing (API 520)</a><a href="/reynoldsnumbercal.html">Reynolds Number</a><a href="/rtdselfheating.html">RTD Self-Heating</a><a href="/signal-scaling.html">Signal Scaling</a><a href="/staticheadcal.html">Static Head</a><a href="/temperaturesensorlag.html">Temp Sensor Lag</a><a href="/thermowell-wake.html">Thermowell Wake</a><a href="/ultrasoniclevel.html">Ultrasonic Level</a><a href="/valve-cv.html">Valve Cv Viewer</a><a href="/wetlegdensitycompensation.html">Wet Leg Compensation</a></div><div><a href="/capacitance-level.html">Capacitance Level</a><a href="/controlvalvenoise.html">Control Valve Noise</a><a href="/dp-flow-conversion.html">DP Flow Conversion</a><a href="/hartdevices.html">HART Devices</a><a href="/impulse-pressure-drop.html">Impulse Pressure Drop</a><a href="/junctionbox.html">Junction Box Sizing</a><a href="/orifice-flow.html">Orifice Flow Calculator</a><a href="/pid-symbol-library.html">PID Symbol Library</a><a href="/power-supply-load.html">Power Supply Load</a><a href="/prvsizing.html">Relief Orifice Area</a><a href="/rtdexcitationcurrentselection.html">RTD Excitation</a><a href="/rtd-tc-conversion.html">RTD/TC Conversion</a><a href="/sil.html">SIL Calculator</a><a href="/steamflow.html">Steam Flow</a><a href="/thermocouplecjccalculator.html">Thermocouple CJC</a><a href="/turndown.html">Turndown Ratio</a><a href="/controlvalveauthority.html">Valve Authority</a><a href="/controlvalveleakage.html">Valve Leakage Class</a><a href="/wirelesshart.html">WirelessHART Range</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexinst.html" class="view-all-link">View All Instrumentation Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexmech.html" class="dropdown-toggle">Mechanical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/aircompressorfad.html">Air Compressor FAD</a><a href="/asme-vessel.html">ASME Vessel Design</a><a href="/belt-pulley.html">Belt & Pulley</a><a href="/bolt-torque.html">Bolt Torque</a><a href="/controlvalveactuator.html">Control Valve Actuator</a><a href="/frictionfactortool.html">Darcy Friction Factor</a><a href="/fatigue.html">Fatigue Analysis</a><a href="/fuel-combustion.html">Fuel Combustion</a><a href="/gas.html">Gas Properties</a><a href="/heat-exchanger.html">Heat Exchanger</a><a href="/hydroliccylinder.html">Hydraulic Cylinder</a><a href="/material-compatibility.html">Material Compatibility</a><a href="/nozzle-reinforcement.html">Nozzle Reinforcement</a><a href="/openchannelflow.html">Open Channel Flow</a><a href="/pipescheduletool.html">Pipe Schedule & Stress</a><a href="/pump-head.html">Pump Head</a><a href="/shaft-power-torque.html">Shaft Power & Torque</a><a href="/steam-table.html">Steam Table</a><a href="/vibrationanalysis.html">Vibration Analysis</a></div><div><a href="/air-flow-duct.html">Air Flow Duct Sizing</a><a href="/beam-deflection.html">Beam Deflection</a><a href="/bernoulli-equation.html">Bernoulli Equation</a><a href="/chiller-capacity.html">Chiller Capacity</a><a href="/cooling-tower-sizing.html">Cooling Tower Sizing</a><a href="/darcy-weisbach.html">Darcy-Weisbach</a><a href="/finned-tube-heat-transfer.html">Finned Tube Heat</a><a href="/furnace-heat-duty.html">Furnace Heat Duty</a><a href="/gear-design.html">Gear Design</a><a href="/heat-loss-pipes.html">Heat Loss Pipes</a><a href="/jacketed-vessel-heat-transfer.html">Jacketed Vessel</a><a href="/metalweight.html">Metal Weight Calculator</a><a href="/nptbspthreadcalculator.html">NPT/BSP Threads</a><a href="/overall-heat-transfer.html">Overall Heat Transfer</a><a href="/pipe-stress-flexibility.html">Pipe Stress</a><a href="/pump-power.html">Pump Power</a><a href="/specific-heat-enthalpy.html">Specific Heat</a><a href="/storage-tank-volume.html">Storage Tank Volume</a><a href="/weldingstress.html">Welding Stress</a></div><div><a href="/allowable-stress-safety-factor.html">Allowable Stress</a><a href="/bearinglife.html">Bearing Life Calculator</a><a href="/boiler-efficiency.html">Boiler Efficiency</a><a href="/compressor-power.html">Compressor Power</a><a href="/corrosion-rate.html">Corrosion Rate</a><a href="/fan-laws.html">Fan Laws</a><a href="/foundation.html">Foundation Design</a><a href="/gas-laws.html">Gas Laws</a><a href="/hardness.html">Hardness Converter</a><a href="/conduction-convection-radiation.html">Heat Transfer Modes</a><a href="/machining.html">Machining Calculator</a><a href="/momentofinertia.html">Moment of Inertia</a><a href="/oring.html">O-Ring Sizing</a><a href="/pipe-flow.html">Pipe Flow Calculator</a><a href="/psychrometric.html">Psychrometric Calc</a><a href="/reynolds-number.html">Reynolds Number</a><a href="/spring.html">Spring Design</a><a href="/thermal-expansion.html">Thermal Expansion</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexmech.html" class="view-all-link">View All Mechanical Tools â†’</a>
            </div>
        </div>
    </li>
                        <li><a href="/index.html#articles">Articles</a></li>
                        <li><a href="/sitemap2.html">Site Map</a></li>
                    </ul>

                    <div class="theme-toggle">
                        <i class="fas fa-sun icon"></i>
                        <label class="switch">
                            <input type="checkbox" id="theme-switch">
                            <span class="slider"></span>
                        </label>
                        <i class="fas fa-moon icon"></i>
                    </div>
                </div>
            </nav>
    </header>

    <!-- MAIN CONTENT - Refactored -->
    <main class="container">
        <!-- Back button removed -->
        <div class="tool-container">
            <h2>Advanced Motor Starting Current & Torque Calculator</h2>
            
            <div class="tool-description">
                <p>Calculate motor starting (inrush) current and starting torque for various motor types and starting methods, aligning with IEC and IEEE standard principles. This tool aids in motor protection, voltage dip analysis, and system design.</p>
            </div>
            
            <div class="calculator-form">
                <form id="motor-calculator-form">
                    <h3>1. Motor Nameplate Data</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="motor-power">Motor Power</label>
                            <input type="number" id="motor-power" min="0.1" step="0.1" value="10" required>
                        </div>
                        <div class="form-group">
                            <label for="power-unit">Unit</label>
                            <select id="power-unit" required>
                                <option value="kW">kW</option>
                                <option value="HP">HP</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="rated-voltage">Rated Voltage (V)</label>
                            <input type="number" id="rated-voltage" min="1" step="1" value="400" required>
                        </div>
                        <div class="form-group">
                            <label for="system-frequency">System Frequency (Hz)</label>
                            <select id="system-frequency" required>
                                <option value="50">50 Hz</option>
                                <option value="60">60 Hz</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="phase-type">Phase Type</label>
                            <select id="phase-type" required>
                                <option value="three">Three-Phase</option>
                                <option value="single">Single-Phase</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="motor-poles">Number of Poles <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Even number: 2, 4, 6, 8... Used to determine synchronous speed.</span></span></label>
                            <select id="motor-poles" required>
                                <option value="2">2 Poles</option>
                                <option value="4">4 Poles</option>
                                <option value="6">6 Poles</option>
                                <option value="8">8 Poles</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="rated-current">Rated Current (A) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Motor full load current (FLC). Enter '0' to auto-calculate.</span></span></label>
                            <input type="number" id="rated-current" min="0" step="0.01" value="0">
                        </div>
                        <div class="form-group">
                            <label for="rated-power-factor">Rated Power Factor <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Typical motor power factor (e.g., 0.85 for inductive loads). Must be between 0.1 and 1.0.</span></span></label>
                            <input type="number" id="rated-power-factor" min="0.1" max="1" step="0.01" value="0.85" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="rated-efficiency">Rated Efficiency (%) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Motor efficiency at full load. Must be between 50% and 99%.</span></span></label>
                            <input type="number" id="rated-efficiency" min="50" max="99" step="0.1" value="88" required>
                        </div>
                        <div class="form-group">
                            <label for="motor-standard">Motor Standard</label>
                            <select id="motor-standard" required>
                                <option value="iec">IEC</option>
                                <option value="ieee">IEEE / NEMA</option>
                            </select>
                        </div>
                    </div>

                    <h3>2. Starting Parameters</h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="starting-method">Starting Method</label>
                            <select id="starting-method" required>
                                <option value="dol">Direct On Line (DOL)</option>
                                <option value="star-delta">Star-Delta</option>
                                <option value="soft-starter">Soft Starter</option>
                                <option value="vfd">Variable Frequency Drive (VFD)</option>
                            </select>
                        </div>
                        <div class="form-group hidden" id="reduction-factor-group">
                            <label for="reduction-factor">Inrush Reduction Factor (%) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Percentage reduction in starting current relative to DOL. (e.g., 60 for 60% reduction). Applies to Soft Starter and VFD.</span></span></label>
                            <input type="number" id="reduction-factor" min="0" max="100" step="1" value="60">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="lrc-factor">Locked Rotor Current (LRC) Factor (I_start/I_rated) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Ratio of starting current to rated current (e.g., 6 for DOL). Found on motor nameplate or in motor data sheets (NEMA code letters). Must be >= 1.</span></span></label>
                            <input type="number" id="lrc-factor" min="1" step="0.1" value="6" required>
                        </div>
                        <div class="form-group">
                            <label for="lrt-percent">Locked Rotor Torque (LRT) (% of Rated) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Starting torque as a percentage of rated torque. Found on motor nameplate. (e.g., 180 for 180%). Must be between 10% and 500%.</span></span></label>
                            <input type="number" id="lrt-percent" min="10" max="500" step="1" value="180" required>
                        </div>
                    </div>

                    <h3>3. System & Load Parameters</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="system-short-circuit-kva">System Short Circuit Capacity (kVA) at PCC <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The available short-circuit capacity at the Point of Common Coupling (PCC) where the motor is connected. Used to estimate system impedance and voltage drop.</span></span></label>
                            <input type="number" id="system-short-circuit-kva" min="100" step="100" value="20000" required>
                        </div>
                        <div class="form-group">
                            <label for="rated-speed-rpm">Rated Speed (RPM) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Motor's full load rated speed in revolutions per minute (RPM). Typically found on the motor nameplate. Used for slip and acceleration calculations.</span></span></label>
                            <input type="number" id="rated-speed-rpm" min="1" step="1" value="1455" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="motor-inertia">Motor Rotor Inertia (J_motor) (kg·m²) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The inertia of the motor's rotating elements in $kg \cdot m^2$. Obtain from motor manufacturer data.</span></span></label>
                            <input type="number" id="motor-inertia" min="0.001" step="0.001" value="0.05" required>
                        </div>
                        <div class="form-group">
                            <label for="load-inertia">Driven Load Inertia (J_load) (kg·m²) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The inertia of the mechanical load driven by the motor in $kg \cdot m^2$. Obtain from load manufacturer data or estimate.</span></span></label>
                            <input type="number" id="load-inertia" min="0.001" step="0.001" value="0.1" required>
                        </div>
                    </div>
                    
                    <!-- NEW Button Group -->
                    <div class="form-row" style="gap: 10px; margin-top: 25px;">
                        <button type="button" id="calculate-btn" class="calculate-btn" style="flex: 2;">
                            <i class="fas fa-calculator" style="margin-right: 8px;"></i>Calculate Motor Characteristics
                            <span class="spinner" id="calculate-spinner" style="display:none;"></span>
                        </button>
                        <button type="button" id="reset-calculations-btn" class="calculate-btn" style="flex: 1; background: var(--accent-color); box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);">
                            <i class="fas fa-sync-alt" style="margin-right: 8px;"></i>Reset
                        </button>
                        <button type="button" id="download-pdf-btn" class="calculate-btn" style="flex: 1; background: var(--secondary-color); box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);">
                            <i class="fas fa-file-pdf" style="margin-right: 8px;"></i>Download PDF
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- Result Container -->
            <div id="result-container" class="result-container">
                <h3>Calculation Results</h3>
                <div id="calculation-details" class="math-content">
                    <!-- Calculation steps will be inserted here -->
                </div>
                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body">
                    </tbody>
                </table>
                
                <!-- Refactored Recommendation Block -->
                <div id="recommendation" class="recommendation-block" style="background: var(--bg-color); border-left-color: var(--primary-color);">
                    <h4>Recommendations & Notes</h4>
                    <div id="recommendation-content"></div>
                </div>
                
                <div class="standard-reference" id="standard-reference">
                    Calculations are based on fundamental electrical engineering principles, aligning with common practices found in IEC (International Electrotechnical Commission) and IEEE (Institute of Electrical and Electronics Engineers) standards for induction motors. Always refer to specific motor manufacturer data and applicable local codes.
                </div>
            </div>
        </div>
    </main>

    <!-- NEW CONTENT BLOCK for AdSense -->
    <div class="container">
        <div class="content-block">
            <h2 class="math-content">A Guide to Motor Starting Methods and Their Impact</h2>
            <p>Starting an AC induction motor is one of the most demanding events on an electrical system. Understanding the different starting methods and their consequences is essential for designing a reliable and safe system. This guide explores the key concepts this calculator models.</p>

            <h3>1. The Core Problem: Inrush Current</h3>
            <p>When a motor is at a standstill (locked rotor), its windings act almost like a short circuit to the power supply. The instant it's energized, it draws a massive amount of current known as **Locked Rotor Current (LRC)**, or "inrush current."</p>
            <ul>
                <li><strong>Magnitude:</strong> This current is typically <strong>6 to 8 times</strong> the motor's normal Full Load Current (FLC), or 600-800%. This is what the "LRC Factor" in the calculator represents.</li>
                <li><strong>The Problem:</strong> This huge current draw, even though brief, causes a significant voltage dip across the entire electrical network. This can cause lights to flicker, contactors to drop out, and sensitive electronic equipment (like computers or VFDs) to fault or reset. It also places immense thermal and mechanical stress on the motor and cables.</li>
            </ul>

            <h3>2. Key Performance Metrics</h3>
            <ul>
                <li><strong>Full Load Amps (FLA):</strong> The current the motor draws at its rated power output. This is the baseline for all calculations.</li>
                <li><strong>Locked Rotor Current (LRC):</strong> The inrush current at 0 speed. This determines the required breaker settings and the severity of the voltage dip.</li>
                <li><strong>Locked Rotor Torque (LRT):</strong> The "breakaway" torque the motor can produce at 0 speed. This is critical. The LRT *must* be greater than the load's static friction and breakaway torque, or the motor will stall.</li>
            </ul>

            <h3 class_="math-content">3. Comparing Motor Starting Methods</h3>
            <p>The goal of a starting method is to reduce the inrush current, typically by reducing the voltage applied to the motor. However, there's a critical trade-off: **Torque is proportional to the square of the voltage ($T \propto V^2$).** If you reduce the voltage by 50%, you reduce the starting torque by 75%.</p>

            <h4>Method 1: Direct-On-Line (DOL)</h4>
            <ul>
                <li><strong>How it Works:</strong> The simplest method. A contactor connects the motor directly to the full line voltage.</li>
                <li><strong>Starting Current:</strong> 100% of LRC (e.g., 600-800% of FLA).</li>
                <li><strong>Starting Torque:</strong> 100% of LRT (e.g., 150-200% of rated torque).</li>
                <li><strong>Pros:</strong> Simple, cheapest, provides the highest possible starting torque.</li>
                <li><strong>Cons:</strong> Causes the maximum possible voltage dip and mechanical stress. Only suitable for small motors or very "stiff" (strong) power systems.</li>
            </ul>

            <h4>Method 2: Star-Delta (Wye-Delta)</h4>
            <ul>
                <li><strong>How it Works:</strong> Requires a 6-lead motor. The motor is first connected in a "Star" (Wye) configuration. After it reaches ~80% speed, timers switch it to its normal "Delta" configuration.</li>
                <li><strong>Starting Current:</strong> The line current is reduced to <strong>1/3 (33%)</strong> of the DOL inrush current.</li>
                <li><strong>Starting Torque:</strong> The torque is also reduced to <strong>1/3 (33%)</strong> of the DOL torque.</li>
                <li><strong>Pros:</strong> Simple, cost-effective, and significantly reduces inrush current.</li>
                <li><strong>Cons:</strong> A violent "open transition" current and torque spike can occur during the switch from Star to Delta. The 33% starting torque may not be enough to start high-inertia loads.</li>
            </ul>

            <h4>Method 3: Soft Starter (Solid-State Reduced Voltage)</h4>
            <ul>
                <li><strong>How it Works:</strong> Uses thyristors (SCRs) to "chop" the AC waveform, starting the motor at a low voltage (e.g., 30%) and smoothly ramping it up to 100% over several seconds.</li>
                <li><strong>Starting Current:</strong> Adjustable. Typically set to <strong>300-400%</strong> of FLA. This is what the "Reduction Factor" in the calculator models.</li>
                <li><strong>Starting Torque:</strong> Follows the $T \propto V^2$ rule, so it starts very low and ramps up. For example, a 50% voltage start gives only 25% torque.</li>
                <li><strong>Pros:</strong> Extremely smooth, no-transition start. Eliminates mechanical shock. Highly adjustable.</li>
                <li><strong>Cons:</strong> Poor starting torque for loads that are hard to get moving (e.g., loaded conveyors, high-inertia fans). More expensive than Star-Delta.</li>
            </ul>

            <h4>Method 4: Variable Frequency Drive (VFD)</h4>
            <ul>
                <li><strong>How it Works:</strong> A VFD (or VSD) converts AC to DC, then inverts it back to a "synthetic" AC at any frequency. It starts the motor at a very low frequency (e.g., 5 Hz) and low voltage, keeping the Voltage-to-Frequency (V/Hz) ratio constant.</li>
                <li><strong>Starting Current:</strong> Fully controllable. Can be limited to <strong>100-150%</strong> of FLA, even while producing full torque.</li>
                <li><strong>Starting Torque:</strong> Can provide <strong>100% (or even 150%)</strong> of rated torque from 0 speed.</li>
                <li><strong>Pros:</strong> The best of all worlds. Low starting current *with* high starting torque. Offers full speed control for energy savings.</li>
                <li><strong>Cons:</strong> Most expensive. Can introduce harmonic distortion back into the power system (requires filters).</li>
            </ul>

            <h3>4. Analyzing the Results: Voltage Dip & Acceleration</h3>
            
            <h4>System Short Circuit Capacity (kVA) & Voltage Dip</h4>
            <p>This value represents the "stiffness" or "strength" of your power system. A high value (e.g., 50,000 kVA) means you have a very strong utility or a large transformer, and a starting motor will barely affect it. A low value (e.g., 1,500 kVA) means you have a "soft" system (e.g., a small, dedicated transformer), and the motor's inrush current will cause a severe voltage dip. This calculator estimates this dip. Generally, a dip of <strong>10-15%</strong> at the motor terminals is acceptable, but a dip of >3% at the main bus (PCC) can affect other equipment.</p>

            <h4>Inertia ($J$) and Acceleration Time ($t_{accel}$)</h4>
            <p>Inertia is the resistance to rotational change. The total inertia ($J_{total}$) is the sum of the motor's own rotor inertia and the inertia of the connected load (e.g., a large fan or flywheel). A high-inertia load requires a lot of torque for a long time to get up to speed.</p>
            <p>The calculation is based on the formula $t = (J \times \Delta\omega) / T_{accel}$, where $\Delta\omega$ is the change in speed (from 0 to rated) and $T_{accel}$ is the *average accelerating torque* (the motor's torque minus the load's torque). This calculator provides a simple estimate. A long acceleration time (e.g., >10-15 seconds) can be dangerous, as the motor is drawing high current the entire time and may overheat before it reaches full speed.</p>
        </div>
    </div>

    <!-- NEW FOOTER -->
        <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <a href="/" class="footer-logo">
                        <img src="logo.png" alt="Design Calculators Logo" loading="lazy" decoding="async">
                        <span class="footer-logo-text">Design Calculators</span>
                    </a>
                    <p class="footer-description">A comprehensive engineering calculator hub based on IEC, IEEE, and
                        global standards.</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn linkedin"
                            aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer"
                            class="social-btn youtube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in&text=Check%20out%20this%20amazing%20engineering%20calculator%20hub!"
                            target="_blank" rel="noopener noreferrer" class="social-btn twitter" aria-label="Twitter"><i
                                class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn facebook"
                            aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn whatsapp"
                            aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="footer-col">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href='/indexele.html'>Electrical Tools</a></li>
                            <li><a href='/indexmech.html'>Mechanical Tools</a></li>
                            <li><a href='/indexinst.html'>Instrumentation Tools</a></li>
                            <li><a href='/about.html'>About Us</a></li>
                            <li><a href='/faq.html'>FAQ</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Learn More</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/@designcalculators" target="_blank"
                                    rel="noopener noreferrer">YouTube Channel</a></li>
                            <li><a href='/contact.html'>Contact Us</a></li>
                            <li><a href='/privacy-policy.html'>Privacy Policy</a></li>
                            <li><a href='/terms-of-service.html'>Terms of Service</a></li>
                            <li><a href='/sitemap2.html'>Sitemap</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Our Network</h4>
                        <ul>
                            <li style="margin-bottom: 12px;">
                                <a href="https://reliabilitytools.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">Reliability Tools</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Reliability
                                    & maintenance engineering calculators.</span>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="https://electrosafe.homes/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">ElectroSafe</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Dedicated
                                    to home electrical safety & protection.</span>
                            </li>
                            <li>
                                <a href="https://knowyourname.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">KnowYourName</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Scientific
                                    name analysis: Phonetics, Ergonomics & Acoustics.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>All calculations are for preliminary engineering design guidance. Final designs must comply with all applicable local and international standards (including but not limited to ASHRAE 90.1, ARI 550/590). Always verify calculations and consult with a licensed professional engineer before implementation or construction.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">Anil Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Custom Message Box -->
    <div id="custom-message-box"></div>

    <!-- UPDATED SCRIPT -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get all buttons
            const calculateBtn = document.getElementById('calculate-btn');
            const resetFormBtn = document.getElementById('reset-calculations-btn');
            const downloadPdfBtn = document.getElementById('download-pdf-btn');
            const calculationSpinner = document.getElementById('calculate-spinner');
            
            // Get containers
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const recommendationContent = document.getElementById('recommendation-content');
            const calculationDetailsDiv = document.getElementById('calculation-details');
            
            // Get form inputs
            const startingMethodSelect = document.getElementById('starting-method');
            const reductionFactorGroup = document.getElementById('reduction-factor-group');
            const ratedSpeedInput = document.getElementById('rated-speed-rpm');
            const motorPolesSelect = document.getElementById('motor-poles');
            const systemFrequencySelect = document.getElementById('system-frequency');

            // Default values for resetting form
            const defaultValues = {
                'motor-power': 10,
                'power-unit': 'kW',
                'rated-voltage': 400,
                'system-frequency': '50',
                'phase-type': 'three',
                'motor-poles': '4',
                'rated-current': 0,
                'rated-power-factor': 0.85,
                'rated-efficiency': 88,
                'motor-standard': 'iec',
                'starting-method': 'dol',
                'reduction-factor': 60,
                'lrc-factor': 6,
                'lrt-percent': 180,
                'system-short-circuit-kva': 20000,
                'motor-inertia': 0.05,
                'load-inertia': 0.1
            };

            // --- Custom Message Box Functionality ---
            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                
                messageBox.textContent = message;
                messageBox.style.color = 'white'; // Default
                if (type === "error") {
                    messageBox.style.backgroundColor = '#dc3545'; // Red
                } else if (type === "warning") {
                    messageBox.style.backgroundColor = '#ffc107'; // Yellow
                    messageBox.style.color = '#333';
                } else { // info
                    messageBox.style.backgroundColor = '#28a745'; // Green
                }
                messageBox.classList.add('show');

                // Hide after 5 seconds
                setTimeout(() => {
                    messageBox.classList.remove('show');
                }, 5000);
            }

            // --- Reset & Clear Functions ---
            function clearResults() {
                resultContainer.classList.remove('show');
                resultContainer.style.display = 'none'; // Hide it fully
                // Clear content immediately
                resultTableBody.innerHTML = '';
                calculationDetailsDiv.innerHTML = '';
                recommendationContent.innerHTML = '';
            }

            function resetForm() {
                for (const id in defaultValues) {
                    const input = document.getElementById(id);
                    if (input) input.value = defaultValues[id];
                }
                updateRatedSpeedDefault(); // Recalculate default speed
                startingMethodSelect.dispatchEvent(new Event('change')); // Update UI
                clearResults();
                displayMessage("Form reset to default values.", "info");
            }

            // --- PDF Download Function ---
            function downloadPDF() {
                if (!resultContainer.classList.contains('show')) {
                    displayMessage("Please run a calculation first to generate a report.", "error");
                    return;
                }
                displayMessage("Generating PDF... Please wait.", "info");

                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = pdf.internal.pageSize.getHeight();
                let currentY = 15;

                // Title
                pdf.setFont("helvetica", "bold");
                pdf.setFontSize(18);
                pdf.setTextColor(30, 58, 138); // var(--primary-color)
                pdf.text("Motor Starting Calculation Report", pdfWidth / 2, currentY, { align: 'center' });
                currentY += 7;
                pdf.setFont("helvetica", "normal");
                pdf.setFontSize(10);
                pdf.setTextColor(100, 100, 100);
                pdf.text(`Generated on: ${new Date().toLocaleString()}`, pdfWidth / 2, currentY, { align: 'center' });
                currentY += 15;

                // Use html2canvas to capture the result container
                const pdfTarget = document.getElementById('result-container');

                html2canvas(pdfTarget, {
                    scale: 2, 
                    useCORS: true,
                    onclone: (doc) => {
                        // Force light mode styles for PDF
                        doc.body.classList.remove('dark-mode');
                        doc.querySelectorAll('*').forEach(el => {
                            el.style.color = '#4B5563'; 
                        });
                        doc.querySelectorAll('.result-container, .recommendation-block').forEach(el => {
                            el.style.background = '#FFFFFF';
                            el.style.color = '#4B5563';
                        });
                        doc.querySelectorAll('h3').forEach(el => el.style.color = '#1E3A8A');
                        doc.querySelectorAll('h4').forEach(el => el.style.color = '#2563EB');
                        doc.querySelectorAll('strong').forEach(el => el.style.color = '#111827');
                        doc.querySelectorAll('.result-table th').forEach(el => {
                            el.style.background = '#1E3A8A'; 
                            el.style.color = '#FFFFFF';
                        });
                        doc.querySelectorAll('.result-table tr:nth-child(even)').forEach(el => {
                            el.style.backgroundColor = '#F8FAFC';
                        });
                        if(doc.querySelector('#calculation-details')) {
                            doc.querySelector('#calculation-details').style.background = '#F8FAFC';
                            doc.querySelectorAll('#calculation-details .formula, #calculation-details .calculation-step').forEach(el => {
                                el.style.backgroundColor = '#e2e6ea';
                            });
                        }
                        if(doc.querySelector('.recommendation-block')) {
                            doc.querySelector('.recommendation-block').style.background = '#F8FAFC';
                            doc.querySelector('.recommendation-block').style.borderColor = '#1E3A8A';
                        }
                    }
                }).then(canvas => {
                    const imgData = canvas.toDataURL('image/png');
                    const imgWidth = pdfWidth - 20; // 10mm margin
                    const imgHeight = canvas.height * imgWidth / canvas.width;
                    let heightLeft = imgHeight;
                    let page = 1;

                    pdf.addImage(imgData, 'PNG', 10, currentY, imgWidth, imgHeight);
                    heightLeft -= (pdfHeight - currentY - 20); // 20mm bottom margin

                    while (heightLeft > 0) {
                        pdf.addPage();
                        page++;
                        pdf.addImage(imgData, 'PNG', 10, -(imgHeight * (page-1)) + currentY, imgWidth, imgHeight);
                        heightLeft -= pdfHeight - 20;
                    }
                    
                    // Add footer to all pages
                    const pageCount = pdf.internal.getNumberOfPages();
                    for(let i = 1; i <= pageCount; i++) {
                        pdf.setPage(i);
                        pdf.setFontSize(8);
                        pdf.setTextColor(150, 150, 150);
                        pdf.text(`Page ${i} of ${pageCount} | www.designcalculators.co.in`, pdfWidth / 2, pdfHeight - 10, { align: 'center' });
                    }

                    pdf.save('Motor-Starting-Report.pdf');
                }).catch(err => {
                    displayMessage("Error generating PDF. See console for details.", "error");
                    console.error(err);
                });
            }

            // --- Main Calculation Logic ---
            function updateRatedSpeedDefault() {
                const poles = parseInt(motorPolesSelect.value);
                const freq = parseFloat(systemFrequencySelect.value);
                if (isNaN(poles) || isNaN(freq)) return;
                const synchronousSpeed = (120 * freq) / poles;
                ratedSpeedInput.value = (synchronousSpeed * 0.97).toFixed(0); // 3% slip typical
            }
            motorPolesSelect.addEventListener('change', updateRatedSpeedDefault);
            systemFrequencySelect.addEventListener('change', updateRatedSpeedDefault);
            
            // Toggle visibility of reduction factor
            startingMethodSelect.addEventListener('change', function() {
                if (this.value === 'soft-starter' || this.value === 'vfd') {
                    reductionFactorGroup.classList.remove('hidden');
                } else {
                    reductionFactorGroup.classList.add('hidden');
                }
            });
            
            // ***** ADDED THE MISSING FUNCTION *****
            // Helper function to add a row to the results table
            function addResultRow(parameter, value) {
                const tr = document.createElement('tr');
                const paramCell = document.createElement('td');
                const valueCell = document.createElement('td');
                paramCell.innerHTML = parameter; // Use innerHTML for potential <strong> tags
                valueCell.innerHTML = value;     // Use innerHTML for potential <strong> tags
                tr.appendChild(paramCell);
                tr.appendChild(valueCell);
                resultTableBody.appendChild(tr);
            }
            
            calculateBtn.addEventListener('click', function() {
                calculationSpinner.style.display = 'inline-block';
                calculateBtn.disabled = true;
                resultContainer.classList.remove('show'); // Hide previous results
                
                // Use setTimeout to allow UI to update (show spinner)
                setTimeout(() => {
                    try {
                        // Get input values
                        const motorPower = parseFloat(document.getElementById('motor-power').value);
                        const powerUnit = document.getElementById('power-unit').value;
                        const ratedVoltage = parseFloat(document.getElementById('rated-voltage').value);
                        const systemFrequency = parseFloat(document.getElementById('system-frequency').value);
                        const phaseType = document.getElementById('phase-type').value;
                        const motorPoles = parseInt(document.getElementById('motor-poles').value);
                        let ratedCurrentInput = parseFloat(document.getElementById('rated-current').value);
                        const ratedPowerFactor = parseFloat(document.getElementById('rated-power-factor').value);
                        const ratedEfficiency = parseFloat(document.getElementById('rated-efficiency').value) / 100;
                        const motorStandard = document.getElementById('motor-standard').value;
                        const startingMethod = document.getElementById('starting-method').value;
                        const lrcFactor = parseFloat(document.getElementById('lrc-factor').value);
                        const lrtPercent = parseFloat(document.getElementById('lrt-percent').value);
                        const reductionFactor = parseFloat(document.getElementById('reduction-factor').value) / 100;
                        const systemShortCircuitKVA = parseFloat(document.getElementById('system-short-circuit-kva').value);
                        const ratedSpeedRPM = parseFloat(document.getElementById('rated-speed-rpm').value);
                        const motorInertia = parseFloat(document.getElementById('motor-inertia').value);
                        const loadInertia = parseFloat(document.getElementById('load-inertia').value);

                        // Input validation
                        if (isNaN(motorPower) || motorPower <= 0 ||
                            isNaN(ratedVoltage) || ratedVoltage <= 0 ||
                            isNaN(systemFrequency) || systemFrequency <= 0 ||
                            isNaN(ratedPowerFactor) || ratedPowerFactor <= 0.1 || ratedPowerFactor > 1 ||
                            isNaN(ratedEfficiency) || ratedEfficiency <= 0.50 || ratedEfficiency > 0.99 ||
                            isNaN(lrcFactor) || lrcFactor < 1 ||
                            isNaN(lrtPercent) || lrtPercent < 10 || lrtPercent > 500 ||
                            isNaN(systemShortCircuitKVA) || systemShortCircuitKVA <= 0 ||
                            isNaN(ratedSpeedRPM) || ratedSpeedRPM <= 0 ||
                            isNaN(motorInertia) || motorInertia < 0 ||
                            isNaN(loadInertia) || loadInertia < 0) {
                            throw new Error("Please ensure all input values are valid positive numbers and within specified ranges (e.g., Power Factor 0.1-1, Efficiency 50-99%, LRT 10-500%, Inertia >= 0).");
                        }
                        if ((startingMethod === 'soft-starter' || startingMethod === 'vfd') && (isNaN(reductionFactor) || reductionFactor < 0 || reductionFactor > 1)) {
                            throw new Error("For Soft Starter/VFD, the Inrush Reduction Factor must be between 0 and 100%.");
                        }
                        
                        // --- Clear previous content ---
                        let calculationHtml = '<h4>Detailed Calculation Steps:</h4>';
                        let recommendedNotes = '';
                        resultTableBody.innerHTML = ''; 
                        recommendationContent.innerHTML = ''; 
                        calculationDetailsDiv.innerHTML = ''; 

                        // 1. Convert Motor Power to kW
                        let motorPowerKW = motorPower;
                        if (powerUnit === 'HP') {
                            motorPowerKW = motorPower * 0.7457;
                            calculationHtml += `<p><strong>1. Convert Motor Power:</strong></p>`;
                            calculationHtml += `<p class="formula">$$P_{kW} = P_{HP} \\times 0.7457$$</p>`;
                            calculationHtml += `<p class="calculation-step">$P_{kW} = ${motorPower.toFixed(2)}$ HP $\\times 0.7457 = ${motorPowerKW.toFixed(2)}$ kW</p>`;
                        } else {
                            calculationHtml += `<p><strong>1. Motor Power (kW):</strong> ${motorPowerKW.toFixed(2)} kW</p>`;
                        }
                        
                        // 2. Calculate Synchronous Speed
                        const synchronousSpeed = (120 * systemFrequency) / motorPoles;
                        calculationHtml += `<p><strong>2. Calculate Synchronous Speed:</strong></p>`;
                        calculationHtml += `<p class="formula">$$N_{sync} = \\frac{120 \\times f}{Poles}$$</p>`;
                        calculationHtml += `<p class="calculation-step">$N_{sync} = (120 \\times ${systemFrequency}$ Hz) / ${motorPoles}$ Poles = ${synchronousSpeed.toFixed(0)}$ RPM</p>`;

                        // 3. Calculate Full Load Slip
                        const fullLoadSlip = (synchronousSpeed - ratedSpeedRPM) / synchronousSpeed;
                        const fullLoadSlipPercent = fullLoadSlip * 100;
                        calculationHtml += `<p><strong>3. Calculate Full Load Slip:</strong></p>`;
                        calculationHtml += `<p class="formula">$$s = \\frac{N_{sync} - N_{rated}}{N_{sync}}$$</p>`;
                        calculationHtml += `<p class="calculation-step">$s = (${synchronousSpeed.toFixed(0)}$ RPM - ${ratedSpeedRPM.toFixed(0)}$ RPM) / ${synchronousSpeed.toFixed(0)}$ RPM = ${fullLoadSlip.toFixed(4)}$ (${fullLoadSlipPercent.toFixed(2)}\\%)</p>`;

                        // 4. Calculate Rated Current (if not provided)
                        let calculatedRatedCurrent = ratedCurrentInput;
                        if (ratedCurrentInput === 0) {
                            calculationHtml += `<p><strong>4. Calculate Rated Current (FLC):</strong></p>`;
                            if (phaseType === 'single') {
                                calculatedRatedCurrent = (motorPowerKW * 1000) / (ratedVoltage * ratedPowerFactor * ratedEfficiency);
                                calculationHtml += `<p class="formula">$$I_{rated} = \\frac{P_{kW} \\times 1000}{V_{rated} \\times PF_{rated} \\times \\eta_{rated}}$$</p>`;
                                calculationHtml += `<p class="calculation-step">$I_{rated} = (${motorPowerKW.toFixed(2)}$ kW $\\times 1000) / (${ratedVoltage}$ V $\\times ${ratedPowerFactor.toFixed(2)} \\times ${ratedEfficiency.toFixed(2)}) = ${calculatedRatedCurrent.toFixed(2)}$ A</p>`;
                            } else { // Three-phase
                                calculatedRatedCurrent = (motorPowerKW * 1000) / (Math.sqrt(3) * ratedVoltage * ratedPowerFactor * ratedEfficiency);
                                calculationHtml += `<p class="formula">$$I_{rated} = \\frac{P_{kW} \\times 1000}{\\sqrt{3} \\times V_{rated} \\times PF_{rated} \\times \\eta_{rated}}$$</p>`;
                                calculationHtml += `<p class="calculation-step">$I_{rated} = (${motorPowerKW.toFixed(2)}$ kW $\\times 1000) / (1.732 \\times ${ratedVoltage}$ V $\\times ${ratedPowerFactor.toFixed(2)} \\times ${ratedEfficiency.toFixed(2)}) = ${calculatedRatedCurrent.toFixed(2)}$ A</p>`;
                            }
                        } else {
                            calculationHtml += `<p><strong>4. Rated Current (FLC):</strong> Provided as ${ratedCurrentInput.toFixed(2)} A</p>`;
                        }

                        // 5. Calculate Rated Torque
                        const ratedTorqueNm = (motorPowerKW * 9550) / ratedSpeedRPM;
                        calculationHtml += `<p><strong>5. Calculate Rated Torque:</strong></p>`;
                        calculationHtml += `<p class="formula">$$T_{rated} = \\frac{P_{kW} \\times 9550}{N_{rated}}$$</p>`;
                        calculationHtml += `<p class="calculation-step">$T_{rated} = (${motorPowerKW.toFixed(2)}$ kW $\\times 9550) / ${ratedSpeedRPM.toFixed(0)}$ RPM = ${ratedTorqueNm.toFixed(2)}$ Nm</p>`;
                        
                        // 6. Calculate Starting Current
                        let startingCurrentRMS = 0;
                        let startingCurrentPeak = 0;
                        let startingCurrentNotes = '';
                        const dolEquivalentCurrent = calculatedRatedCurrent * lrcFactor; 

                        calculationHtml += `<p><strong>6. Calculate Starting Current (Inrush):</strong></p>`;
                        switch (startingMethod) {
                            case 'dol':
                                startingCurrentRMS = dolEquivalentCurrent;
                                startingCurrentPeak = startingCurrentRMS * 1.6; // Asymmetry factor
                                calculationHtml += `<p class="formula">$$I_{start, DOL} = I_{rated} \\times LRC_{factor}$$</p>`;
                                startingCurrentNotes = "Direct On Line (DOL) starting results in the highest starting current.";
                                break;
                            case 'star-delta':
                                startingCurrentRMS = dolEquivalentCurrent / 3; // Current in line is 1/3 of DOL
                                startingCurrentPeak = startingCurrentRMS * 1.6; 
                                calculationHtml += `<p class="formula">$$I_{start, Y-\\Delta} \\approx \\frac{I_{rated} \\times LRC_{factor}}{3}$$</p>`;
                                startingCurrentNotes = "Star-Delta starting reduces the line starting current to approximately 1/3rd (33%) of the DOL current.";
                                break;
                            case 'soft-starter':
                            case 'vfd':
                                startingCurrentRMS = calculatedRatedCurrent * lrcFactor * (1 - reductionFactor); // Assuming reduction factor applies to LRC
                                if (startingMethod === 'vfd') {
                                    startingCurrentRMS = calculatedRatedCurrent * 1.5; // VFDs typically limit current to 150% FLA
                                    startingCurrentNotes = `VFD starting current is typically limited to ~150% of FLC, regardless of LRC.`;
                                    calculationHtml += `<p class="formula">$$I_{start, VFD} \\approx I_{rated} \\times 1.5$$</p>`;
                                } else {
                                    // Soft-starter
                                    startingCurrentRMS = dolEquivalentCurrent * (1 - reductionFactor);
                                    startingCurrentNotes = `Soft Starter current is ramped. The initial inrush is approx. ${startingCurrentRMS.toFixed(2)} A.`;
                                    calculationHtml += `<p class="formula">$$I_{start, Soft} = (I_{rated} \\times LRC_{factor}) \\times (1 - \\text{Reduction %})$$</p>`;
                                }
                                startingCurrentPeak = startingCurrentRMS * 1.4; // Less asymmetry
                                break;
                        }
                        calculationHtml += `<p class="calculation-step">$I_{start, RMS} = ${startingCurrentRMS.toFixed(2)}$ A</p>`;
                        
                        // 7. Calculate Starting Torque
                        const startingTorqueDolNm = ratedTorqueNm * (lrtPercent / 100);
                        let actualStartingTorqueDisplay = "";
                        let actualStartingTorqueNotes = '';
                        let startingTorqueForAcceleration = startingTorqueDolNm; // Default for DOL

                        calculationHtml += `<p><strong>7. Calculate Starting Torque:</strong></p>`;
                        calculationHtml += `<p class="formula">$$T_{start, Nameplate} = T_{rated} \\times \\frac{LRT_{\\%}}{100}$$</p>`;
                        calculationHtml += `<p class="calculation-step">$T_{start, Nameplate} = ${ratedTorqueNm.toFixed(2)} \\text{ Nm} \\times ${lrtPercent / 100} = ${startingTorqueDolNm.toFixed(2)} \\text{ Nm}$</p>`;
                        
                        if (startingMethod === 'star-delta') {
                            const actualStartingTorqueNum = startingTorqueDolNm / 3;
                            actualStartingTorqueDisplay = `${actualStartingTorqueNum.toFixed(2)} Nm`;
                            startingTorqueForAcceleration = actualStartingTorqueNum;
                            actualStartingTorqueNotes = "Star-Delta starting reduces starting torque to 1/3rd (33%) of the DOL torque. Ensure this is enough to start the load.";
                            calculationHtml += `<p class="formula">$$T_{start, Y-\\Delta} = \\frac{T_{start, Nameplate}}{3}$$</p>`;
                            calculationHtml += `<p class="calculation-step">Actual $T_{start} = ${startingTorqueDolNm.toFixed(2)} \\text{ Nm} / 3 = ${actualStartingTorqueNum.toFixed(2)} \\text{ Nm}$</p>`;
                        
                        } else if (startingMethod === 'soft-starter') {
                            const actualStartingTorqueNum = startingTorqueDolNm * Math.pow(startingCurrentRMS / dolEquivalentCurrent, 2);
                            startingTorqueForAcceleration = actualStartingTorqueNum;
                            actualStartingTorqueDisplay = `${actualStartingTorqueNum.toFixed(2)} Nm (approx.)`;
                            actualStartingTorqueNotes = "Soft Starter torque is proportional to the square of the current reduction. This low initial torque provides a very smooth start.";
                            calculationHtml += `<p class="formula">$$T_{start, Soft} \\approx T_{start, Nameplate} \\times (\\frac{I_{start, Soft}}{I_{start, DOL}})^2$$</p>`;
                            calculationHtml += `<p class="calculation-step">Actual $T_{start} \\approx ${startingTorqueDolNm.toFixed(2)} \\times (${(startingCurrentRMS / dolEquivalentCurrent).toFixed(2)})^2 = ${actualStartingTorqueNum.toFixed(2)} \\text{ Nm}$</p>`;
                        
                        } else if (startingMethod === 'vfd') {
                            startingTorqueForAcceleration = ratedTorqueNm * 1.5; // Assume VFD is set to 150% torque limit
                            actualStartingTorqueDisplay = `Up to ${startingTorqueForAcceleration.toFixed(2)} Nm (Controllable)`;
                            actualStartingTorqueNotes = "A VFD can provide high torque (e.g., 150% rated torque) at very low current, offering the best starting performance and control.";
                            calculationHtml += `<p class="calculation-step">Actual $T_{start}$ (VFD) is controllable, typically set to 150% of $T_{rated}$.</p>`;

                        } else { // DOL
                            actualStartingTorqueDisplay = `${startingTorqueDolNm.toFixed(2)} Nm`;
                            actualStartingTorqueNotes = "This is the maximum available starting torque (DOL).";
                            calculationHtml += `<p class="calculation-step">Actual $T_{start}$ (DOL) = ${startingTorqueDolNm.toFixed(2)} \\text{ Nm}$</p>`;
                        }
                        
                        // 8. Calculate System Impedance
                        const systemImpedanceOhms = (ratedVoltage * ratedVoltage) / (systemShortCircuitKVA * 1000); // Z = V^2 / S_sc
                        calculationHtml += `<p><strong>8. Calculate System Impedance at PCC:</strong></p>`;
                        calculationHtml += `<p class="formula">$$Z_{sys} = \\frac{V_{rated}^2}{S_{sc}}$$</p>`;
                        calculationHtml += `<p class="calculation-step">$Z_{sys} = (${ratedVoltage}$ V)$^2 / (${systemShortCircuitKVA}$ kVA $\\times 1000) = ${systemImpedanceOhms.toFixed(5)}$ $\\Omega$</p>`;

                        // 9. Calculate Voltage Drop at Motor Terminals
                        const voltageDropVolts = (phaseType === 'three' ? Math.sqrt(3) : 1) * startingCurrentRMS * systemImpedanceOhms;
                        const voltageAtMotor = ratedVoltage - voltageDropVolts;
                        const voltageDropPercent = (voltageDropVolts / ratedVoltage) * 100;
                        calculationHtml += `<p><strong>9. Calculate Voltage Drop at Motor Terminals during start:</strong></p>`;
                        calculationHtml += `<p class="formula">$$\\Delta V = I_{start,RMS} \\times Z_{sys} ${phaseType === 'three' ? '\\times \\sqrt{3}' : ''}$$</p>`;
                        calculationHtml += `<p class="calculation-step">$\\Delta V = ${startingCurrentRMS.toFixed(2)}$ A $\\times ${systemImpedanceOhms.toFixed(5)}$ $\\Omega ${phaseType === 'three' ? '\\times 1.732' : ''} = ${voltageDropVolts.toFixed(2)}$ V</p>`;
                        calculationHtml += `<p class="calculation-step">Voltage at Motor Terminals = ${ratedVoltage}V - ${voltageDropVolts.toFixed(2)}V = ${voltageAtMotor.toFixed(2)}V</p>`;
                        calculationHtml += `<p class="calculation-step"><strong>Voltage Drop % = ${voltageDropPercent.toFixed(2)}%</strong></p>`;
                        
                        // 10. Re-calculate Starting Torque with Voltage Dip
                        const actualStartingTorqueWithDip = startingTorqueForAcceleration * Math.pow(voltageAtMotor / ratedVoltage, 2);
                        calculationHtml += `<p><strong>10. Calculate Actual Starting Torque (with Voltage Dip):</strong></p>`;
                        calculationHtml += `<p>Torque is proportional to the square of the applied voltage. The voltage dip reduces the available starting torque.</p>`;
                        calculationHtml += `<p class="formula">$$T_{actual} = T_{start, method} \\times (\\frac{V_{motor}}{V_{rated}})^2$$</p>`;
                        calculationHtml += `<p class="calculation-step">$T_{actual} = ${startingTorqueForAcceleration.toFixed(2)} \\text{ Nm} \\times (\\frac{${voltageAtMotor.toFixed(2)} \\text{ V}}{${ratedVoltage} \\text{ V}})^2 = ${actualStartingTorqueWithDip.toFixed(2)} \\text{ Nm}$</p>`;

                        // 11. Calculate Total Inertia
                        const totalInertia = motorInertia + loadInertia;
                        calculationHtml += `<p><strong>11. Calculate Total Inertia:</strong></p>`;
                        calculationHtml += `<p class="formula">$$J_{total} = J_{motor} + J_{load}$$</p>`;
                        calculationHtml += `<p class="calculation-step">$J_{total} = ${motorInertia.toFixed(3)} + ${loadInertia.toFixed(3)} = ${totalInertia.toFixed(3)} \\text{ kg} \\cdot \\text{m}^2$</p>`;

                        // 12. Estimate Acceleration Time
                        const ratedSpeedRadPerSec = ratedSpeedRPM * (2 * Math.PI / 60);
                        const averageAcceleratingTorque = actualStartingTorqueWithDip; 
                        
                        let accelerationTimeSeconds = 0;
                        if (averageAcceleratingTorque > 0) {
                            accelerationTimeSeconds = (totalInertia * ratedSpeedRadPerSec) / averageAcceleratingTorque;
                        } else {
                            accelerationTimeSeconds = Infinity; // Will stall
                        }

                        calculationHtml += `<p><strong>12. Estimate Acceleration Time (Simplified):</strong></p>`;
                        calculationHtml += `<p>This is a simplified estimate assuming <strong>zero load torque</strong> and constant accelerating torque. Actual time will be longer.</p>`;
                        calculationHtml += `<p class="formula">$$t_{accel} = \\frac{J_{total} \\times \\omega_{rated}}{T_{accel,avg}}$$</p>`;
                        calculationHtml += `<p class="calculation-step">$\\omega_{rated} = ${ratedSpeedRPM.toFixed(0)}$ RPM $\\times (2\\pi / 60) = ${ratedSpeedRadPerSec.toFixed(2)}$ rad/s</p>`;
                        if (accelerationTimeSeconds !== Infinity) {
                            calculationHtml += `<p class="calculation-step">$t_{accel} = (${totalInertia.toFixed(3)} \\times ${ratedSpeedRadPerSec.toFixed(2)}) / ${averageAcceleratingTorque.toFixed(2)} \\text{ Nm} = ${accelerationTimeSeconds.toFixed(2)} \\text{ s}$</p>`;
                        } else {
                            calculationHtml += `<p class="calculation-step" style="color:red; background-color: #fdd;"><strong>Motor will stall!</strong> Available starting torque (${averageAcceleratingTorque.toFixed(2)} Nm) is zero or negative.</p>`;
                        }

                        // --- Display Results ---
                        addResultRow('Motor Power', `${motorPower.toFixed(2)} ${powerUnit} (${motorPowerKW.toFixed(2)} kW)`);
                        addResultRow('Rated Voltage', `${ratedVoltage} V`);
                        addResultRow('Synchronous Speed', `${synchronousSpeed.toFixed(0)} RPM`);
                        addResultRow('Rated Speed', `${ratedSpeedRPM.toFixed(0)} RPM`);
                        addResultRow('Full Load Slip', `${fullLoadSlipPercent.toFixed(2)}%`);
                        addResultRow('Rated Current (FLC)', `${calculatedRatedCurrent.toFixed(2)} A`);
                        addResultRow('Rated Torque', `${ratedTorqueNm.toFixed(2)} Nm`);
                        addResultRow('---', '---');
                        addResultRow('Starting Method', startingMethod.charAt(0).toUpperCase() + startingMethod.slice(1).replace('-', ' '));
                        addResultRow('Nameplate Starting Torque (DOL)', `${startingTorqueDolNm.toFixed(2)} Nm (${lrtPercent}%)`);
                        addResultRow('Nameplate Starting Current (DOL)', `${dolEquivalentCurrent.toFixed(2)} A (${lrcFactor.toFixed(1)}x FLC)`);
                        addResultRow('---', '---');
                        addResultRow('Method Starting Current (RMS)', `<strong>${startingCurrentRMS.toFixed(2)} A</strong>`);
                        addResultRow('System Voltage Drop at Start', `<strong>${voltageDropPercent.toFixed(2)} %</strong> (${voltageDropVolts.toFixed(2)} V)`);
                        addResultRow('Voltage at Motor Terminals', `<strong>${voltageAtMotor.toFixed(2)} V</strong>`);
                        addResultRow('Actual Starting Torque (with Voltage Dip)', `<strong>${actualStartingTorqueWithDip.toFixed(2)} Nm</strong>`);
                        addResultRow('Total Inertia (Motor + Load)', `${totalInertia.toFixed(3)} kg·m²`);
                        addResultRow('Estimated Acceleration Time', accelerationTimeSeconds !== Infinity ? `<strong>${accelerationTimeSeconds.toFixed(2)} s</strong>` : `<strong style="color:red;">Will Stall!</strong>`);

                        // Generate recommendation/notes
                        recommendedNotes = `<p><strong>Starting Method:</strong> ${startingCurrentNotes}</p>`;
                        recommendedNotes += `<p><strong>Starting Torque:</strong> ${actualStartingTorqueNotes}</p>`;
                        if (voltageDropPercent > 15) {
                            recommendedNotes += `<p style="color:red;"><strong>Warning:</strong> Voltage drop of <strong>${voltageDropPercent.toFixed(2)}%</strong> exceeds the typical 15% limit for motor starting. This can cause other equipment to malfunction and may prevent the motor from starting if torque is insufficient.</p>`;
                        } else if (voltageDropPercent > 10) {
                            recommendedNotes += `<p style="color:var(--accent-color);"><strong>Note:</strong> Voltage drop of <strong>${voltageDropPercent.toFixed(2)}%</strong> is high. Verify that sensitive equipment on this bus can tolerate this dip.</p>`;
                        } else {
                            recommendedNotes += `<p style="color:var(--success-color);">Voltage drop of <strong>${voltageDropPercent.toFixed(2)}%</strong> is within acceptable limits.</p>`;
                        }
                        
                        if (accelerationTimeSeconds === Infinity) {
                             recommendedNotes += `<p style="color:red;"><strong>CRITICAL:</strong> The calculated starting torque (${actualStartingTorqueWithDip.toFixed(2)} Nm) is not positive. The motor <strong>will fail to start (stall)</strong>. You must select a starting method with higher torque or check your load requirements.</p>`;
                        } else if (accelerationTimeSeconds > 10) {
                             recommendedNotes += `<p style="color:var(--accent-color);"><strong>Warning:</strong> Estimated acceleration time of <strong>${accelerationTimeSeconds.toFixed(2)} s</strong> is long. The motor must be rated to withstand this duration of starting current without overheating (check thermal withstand curve).</p>`;
                        }

                        recommendationContent.innerHTML = recommendedNotes;
                        
                        // Render MathJax formulas
                        calculationDetailsDiv.innerHTML = calculationHtml;
                        
                        // --- Show Container ---
                        resultContainer.style.display = 'block';
                        resultContainer.classList.add('show');
                        resultContainer.scrollIntoView({ behavior: 'smooth' });

                        // --- Typeset *after* visible ---
                        if (window.MathJax && typeof window.MathJax.typesetPromise === 'function') {
                            // Use a minimal timeout to ensure DOM is ready
                            setTimeout(() => {
                                window.MathJax.typesetPromise([calculationDetailsDiv]) // FIX: Removed resultContainer from this array
                                    .catch(err => console.error('MathJax Error:', err));
                            }, 50); // 50ms delay to let DOM paint
                        }

                    } catch (error) {
                        displayMessage(error.message, "error");
                    } finally {
                        calculationSpinner.style.display = 'none';
                        calculateBtn.disabled = false;
                    }
                }, 500); // 500ms delay
            });

            // --- Event Listeners for new buttons ---
            resetFormBtn.addEventListener('click', resetForm);
            downloadPdfBtn.addEventListener('click', downloadPDF);

            // --- Theme switch logic ---
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }
                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }
            
            // Initial setup on load
            updateRatedSpeedDefault();
            startingMethodSelect.dispatchEvent(new Event('change'));

        });
    </script>
</body>
</html>

