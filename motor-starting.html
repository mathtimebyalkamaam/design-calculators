<!DOCTYPE html>
<html lang="en">
<head>
                <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-23Y1V450SR');       
</script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Motor Starting Current & Torque - Design Calculators - Electrical</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Tailwind CSS for modern styling -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- MathJax for LaTeX rendering -->
    <script type="text/javascript" id="MathJax-script" async
      src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <style>
        /* Basic CSS Variables for a consistent theme */
        :root {
            --primary-color: #4CAF50; /* Green */
            --secondary-color: #45a049; /* Darker Green */
            --accent-color: #FFC107; /* Amber */
            --bg-color: #f4f7f6; /* Light Greyish Green */
            --card-bg: #ffffff; /* White */
            --text-color: #333333; /* Dark Grey */
            --header-bg: #2C3E50; /* Dark Blue Grey */
            --footer-bg: #34495E; /* Slightly Lighter Dark Blue Grey */
            --border-color: #cccccc;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --hover-color: #e2e6ea;
            --input-focus-border: #4CAF50;
            --button-hover-bg: #45a049;
        }

        /* Dark Mode Variables */
        body.dark-mode {
            --bg-color: #2c3e50;
            --card-bg: #34495e;
            --text-color: #ecf0f1;
            --header-bg: #2c3e50;
            --footer-bg: #2c3e50;
            --border-color: #555555;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            --hover-color: #446688;
            --input-focus-border: #8bc34a; /* Lighter green for dark mode focus */
            --button-hover-bg: #3e8e41; /* Darker green for dark mode button hover */
        }

        /* General Body Styling */
        body {
            font-family: 'Inter', sans-serif; /* Using Inter as specified */
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--header-bg);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative; /* For theme toggle positioning */
        }

        header h1 {
            margin: 0;
            font-size: 2.5em;
            color: var(--primary-color);
        }

        header .subtitle {
            margin: 5px 0 0;
            font-size: 1em;
            color: #bdc3c7;
        }

        main {
            padding: 20px 0;
        }

        .tool-container {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
        }

        .tool-container h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-top: 0;
            margin-bottom: 20px;
        }
        /* Ensure H2 is visible in dark mode */
        body.dark-mode .tool-container h2 {
            color: white; /* Explicitly set to white for visibility */
            border-bottom-color: white;
        }

        .tool-description {
            margin-bottom: 20px;
            color: var(--text-color);
        }

        .back-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border-radius: 4px;
            text-decoration: none;
            margin-bottom: 20px;
            transition: background-color 0.3s, transform 0.1s ease-in-out;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .back-button:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Theme Toggle */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
        }

        .theme-toggle .light-icon,
        .theme-toggle .dark-icon {
            color: white;
            margin: 0 5px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:focus + .slider {
            box-shadow: 0 0 1px var(--primary-color);
        }

        input:checked + .slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(26px);
            transform: translateX(26px);
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        /* Footer Styling */
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
        }

        footer .disclaimer h3,
        footer .social-share h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        footer .disclaimer p {
            font-size: 0.9em;
            color: #bdc3c7;
        }

        .social-buttons {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .social-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.2em;
            transition: transform 0.3s ease-in-out;
        }

        .social-btn:hover {
            transform: translateY(-3px);
        }

        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.reddit { background-color: #FF4500; }

        /* Styles for Calculator Forms and Results */
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: var(--card-shadow);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--text-color); /* Ensure label text is visible */
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: border-color 0.3s, box-shadow 0.3s; /* Add transition for input focus */
        }

        .form-group input:focus, .form-group select:focus {
            border-color: var(--input-focus-border);
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.3); /* Green shadow */
            outline: none;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .form-row .form-group {
            flex: 1 1 200px;
        }
        
        .calculate-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin-top: 10px;
            transition: background-color 0.3s, transform 0.1s ease-in-out;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .calculate-btn:hover {
            background-color: var(--button-hover-bg);
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }

        .calculate-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .result-container {
            margin-top: 30px;
            padding: 20px;
            border-radius: 8px;
            background-color: var(--card-bg);
            box-shadow: var(--card-shadow);
            display: none; /* Hidden by default */
            opacity: 0; /* For fade-in animation */
            transition: opacity 0.5s ease-in-out;
        }
        
        .result-container.show {
            opacity: 1;
        }

        .result-container h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        /* Ensure H3 is visible in dark mode */
        body.dark-mode .result-container h3 {
            color: white; /* Explicitly set to white for visibility */
        }

        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .result-table th, .result-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .result-table th {
            background-color: var(--hover-color);
        }
        
        .standard-reference {
            margin-top: 20px;
            font-style: italic;
            font-size: 0.9rem;
            color: var(--text-color); /* Ensure visibility in dark mode */
        }
        
        .info-icon {
            color: var(--primary-color);
            margin-left: 5px;
            cursor: help;
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px; /* Increased width */
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px; /* Increased padding */
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -125px; /* Half of new width */
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85em; /* Slightly smaller font for tooltips */
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Custom message box style */
        #custom-message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        /* Loading Spinner */
        #loading-spinner {
            display: none; /* Hidden by default */
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid var(--primary-color); /* Green */
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            text-align: center;
            font-size: 14px;
            color: var(--text-color);
            position: relative;
        }

        #loading-spinner::after {
            content: "Calculating...";
            position: absolute;
            left: 50%;
            transform: translateX(-50%) translateY(40px);
            white-space: nowrap;
            color: var(--text-color);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Styles for detailed calculation steps */
        #calculation-details {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 0.95em;
        }

        #calculation-details h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 10px;
        }

        #calculation-details p.formula {
            font-family: 'Times New Roman', serif; /* A font suitable for mathematical formulas */
            font-style: italic;
            font-size: 1.1em;
            text-align: center;
            padding: 10px 0;
            background-color: var(--hover-color);
            border-radius: 4px;
            margin: 10px 0;
            overflow-x: auto; /* Allow horizontal scrolling for long formulas */
        }

        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace; /* Monospace for steps */
            background-color: var(--hover-color);
            padding: 5px 10px;
            border-radius: 3px;
            margin-bottom: 5px;
        }

        #calculation-details ul {
            list-style-type: disc;
            margin-left: 20px;
            padding-left: 0;
        }

        #calculation-details ul li {
            margin-bottom: 5px;
        }

        .section-title {
            font-size: 1.3em;
            font-weight: bold;
            color: var(--primary-color);
            border-bottom: 1px solid var(--primary-color);
            padding-bottom: 8px;
            margin-top: 25px;
            margin-bottom: 20px;
        }

        .recommendation {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background-color: #e6ffe6; /* Very light green for recommendation */
            border: 1px solid #a3d9a3; /* Slightly darker green border */
            color: #006400; /* Dark green text */
        }

        body.dark-mode .recommendation {
            background-color: #1a4f1a; /* Darker green */
            border-color: #4CAF50; /* Primary green border */
            color: #d0ffcc; /* Lighter green text */
        }

        .recommendation h4 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 10px;
        }

        @media (max-width: 600px) {
            .form-row {
                flex-direction: column;
            }

            .form-row .form-group {
                flex: 1 1 100%;
            }

            .tooltip .tooltiptext {
                width: 90vw; /* Adjust width for smaller screens */
                margin-left: -45vw; /* Center tooltip */
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Design Calculators - Electrical</h1>
            <p class="subtitle">Electrical Calculations Made Easy — Learn with Every Step</p>
            <div class="theme-toggle">
                <span class="light-icon"><i class="fas fa-sun"></i></span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch" aria-label="Toggle dark mode">
                    <span class="slider round"></span>
                </label>
                <span class="dark-icon"><i class="fas fa-moon"></i></span>
            </div>
        </div>
    </header>

    <main class="container">
        <a href="indexEle.html" class="back-button"><i class="fas fa-arrow-left"></i> Back to Tools</a>
        
        <div class="tool-container">
            <h2>Advanced Motor Starting Current & Torque Calculator</h2>
            
            <div class="tool-description">
                <p>Calculate motor starting (inrush) current and starting torque for various motor types and starting methods, aligning with IEC and IEEE standard principles. This tool aids in motor protection and system design.</p>
            </div>
        
            <div class="calculator-form">
                <form id="motor-calculator-form">
                    <div class="section-title">1. Motor Nameplate Data</div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="motor-power">Motor Power</label>
                            <input type="number" id="motor-power" min="0.1" step="0.1" value="10" required>
                        </div>
                        <div class="form-group">
                            <label for="power-unit">Unit</label>
                            <select id="power-unit" required>
                                <option value="kW">kW</option>
                                <option value="HP">HP</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="rated-voltage">Rated Voltage (V)</label>
                            <input type="number" id="rated-voltage" min="1" step="1" value="400" required>
                        </div>
                        <div class="form-group">
                            <label for="system-frequency">System Frequency (Hz)</label>
                            <select id="system-frequency" required>
                                <option value="50">50 Hz</option>
                                <option value="60">60 Hz</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="phase-type">Phase Type</label>
                            <select id="phase-type" required>
                                <option value="three">Three-Phase</option>
                                <option value="single">Single-Phase</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="motor-poles">Number of Poles <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Even number: 2, 4, 6, 8... Used to determine synchronous speed.</span></span></label>
                            <select id="motor-poles" required>
                                <option value="2">2 Poles</option>
                                <option value="4">4 Poles</option>
                                <option value="6">6 Poles</option>
                                <option value="8">8 Poles</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="rated-current">Rated Current (A) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Motor full load current (FLC). Enter '0' to auto-calculate.</span></span></label>
                            <input type="number" id="rated-current" min="0" step="0.01" value="0">
                        </div>
                        <div class="form-group">
                            <label for="rated-power-factor">Rated Power Factor <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Typical motor power factor (e.g., 0.85 for inductive loads). Must be between 0.1 and 1.0.</span></span></label>
                            <input type="number" id="rated-power-factor" min="0.1" max="1" step="0.01" value="0.85" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="rated-efficiency">Rated Efficiency (%) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Motor efficiency at full load. Must be between 50% and 99%.</span></span></label>
                            <input type="number" id="rated-efficiency" min="50" max="99" step="0.1" value="88" required>
                        </div>
                        <div class="form-group">
                            <label for="motor-standard">Motor Standard</label>
                            <select id="motor-standard" required>
                                <option value="iec">IEC</option>
                                <option value="ieee">IEEE / NEMA</option>
                            </select>
                        </div>
                    </div>

                    <div class="section-title">2. Starting Parameters</div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="starting-method">Starting Method</label>
                            <select id="starting-method" required>
                                <option value="dol">Direct On Line (DOL)</option>
                                <option value="star-delta">Star-Delta</option>
                                <option value="soft-starter">Soft Starter</option>
                                <option value="vfd">Variable Frequency Drive (VFD)</option>
                            </select>
                        </div>
                        <div class="form-group" id="reduction-factor-group">
                            <label for="reduction-factor">Inrush Reduction Factor (%) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Percentage reduction in starting current relative to DOL. (e.g., 60 for 60% reduction). Applies to Soft Starter and VFD.</span></span></label>
                            <input type="number" id="reduction-factor" min="0" max="100" step="1" value="60">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="lrc-factor">Locked Rotor Current (LRC) Factor (I_start/I_rated) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Ratio of starting current to rated current (e.g., 6 for DOL). Found on motor nameplate or in motor data sheets (NEMA code letters). Must be >= 1.</span></span></label>
                            <input type="number" id="lrc-factor" min="1" step="0.1" value="6" required>
                        </div>
                        <div class="form-group">
                            <label for="lrt-percent">Locked Rotor Torque (LRT) (% of Rated) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Starting torque as a percentage of rated torque. Found on motor nameplate. (e.g., 180 for 180%). Must be between 10% and 500%.</span></span></label>
                            <input type="number" id="lrt-percent" min="10" max="500" step="1" value="180" required>
                        </div>
                    </div>

                    <div class="section-title">3. System & Load Parameters</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="system-short-circuit-kva">System Short Circuit Capacity (kVA) at PCC <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The available short-circuit capacity at the Point of Common Coupling (PCC) where the motor is connected. Used to estimate system impedance and voltage drop.</span></span></label>
                            <input type="number" id="system-short-circuit-kva" min="100" step="100" value="20000" required>
                        </div>
                        <div class="form-group">
                            <label for="rated-speed-rpm">Rated Speed (RPM) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Motor's full load rated speed in revolutions per minute (RPM). Typically found on the motor nameplate. Used for slip and acceleration calculations.</span></span></label>
                            <input type="number" id="rated-speed-rpm" min="1" step="1" value="1455" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="motor-inertia">Motor Rotor Inertia (J_motor) (kg·m²) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The inertia of the motor's rotating elements in $kg \cdot m^2$. Obtain from motor manufacturer data.</span></span></label>
                            <input type="number" id="motor-inertia" min="0.001" step="0.001" value="0.05" required>
                        </div>
                        <div class="form-group">
                            <label for="load-inertia">Driven Load Inertia (J_load) (kg·m²) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The inertia of the mechanical load driven by the motor in $kg \cdot m^2$. Obtain from load manufacturer data or estimate.</span></span></label>
                            <input type="number" id="load-inertia" min="0.001" step="0.001" value="0.1" required>
                        </div>
                    </div>
                    
                    <button type="button" id="calculate-btn" class="calculate-btn">Calculate Motor Characteristics</button>
                    <div id="loading-spinner" class="loading-spinner"></div>
                </form>
            </div>
            
            <div id="result-container" class="result-container">
                <h3>Calculation Results</h3>
                <div id="calculation-details" class="math-content">
                    <!-- Calculation steps will be inserted here -->
                </div>
                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body">
                    </tbody>
                </table>
                
                <div class="recommendation" id="recommendation">
                    <h4>Recommendations & Notes</h4>
                    <div id="recommendation-content"></div>
                </div>
                
                <div class="standard-reference" id="standard-reference">
                    Calculations are based on fundamental electrical engineering principles, aligning with common practices found in IEC (International Electrotechnical Commission) and IEEE (Institute of Electrical and Electronics Engineers) standards for induction motors. Always refer to specific motor manufacturer data and applicable local codes.
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="disclaimer">
                
                <p>Disclaimer: Always verify calculation results against applicable engineering standards and guidelines.</p>
            </div>
            <div class="credit">
                <p>Created by A Sharma</p>
                <p>&copy; 2025 Design Calculators</p>
            </div>
            <div class="social-share">
                <h3>Share This Site</h3>
                <div class="social-buttons">
                    <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://designcalculators.co.in&title=Design Calculators - Electrical" target="_blank" class="social-btn linkedin" aria-label="Share on LinkedIn">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" class="social-btn facebook" aria-label="Share on Facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://x.com/intent/tweet?text=Check out Design Calculators - Electrical!&url=https://designcalculators.co.in" target="_blank" class="social-btn twitter" aria-label="Share on Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text=Check out Design Calculators - Electrical! https://designcalculators.co.in" target="_blank" class="social-btn whatsapp" aria-label="Share on WhatsApp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.reddit.com/submit?url=https://designcalculators.co.in&title=Design Calculators - Electrical" target="_blank" class="social-btn reddit" aria-label="Share on Reddit">
                        <i class="fab fa-reddit"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Custom Message Box -->
    <div id="custom-message-box"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const calculateBtn = document.getElementById('calculate-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const recommendationContent = document.getElementById('recommendation-content');
            const calculationDetailsDiv = document.getElementById('calculation-details');
            const startingMethodSelect = document.getElementById('starting-method');
            const reductionFactorGroup = document.getElementById('reduction-factor-group');
            const loadingSpinner = document.getElementById('loading-spinner');
            const ratedSpeedInput = document.getElementById('rated-speed-rpm');
            const motorPolesSelect = document.getElementById('motor-poles');
            const systemFrequencySelect = document.getElementById('system-frequency');

            // Set default rated speed based on default synchronous speed
            function updateRatedSpeedDefault() {
                const poles = parseInt(motorPolesSelect.value);
                const freq = parseFloat(systemFrequencySelect.value);
                const synchronousSpeed = (120 * freq) / poles;
                ratedSpeedInput.value = (synchronousSpeed * 0.97).toFixed(0); // 3% slip typical
            }
            motorPolesSelect.addEventListener('change', updateRatedSpeedDefault);
            systemFrequencySelect.addEventListener('change', updateRatedSpeedDefault);
            updateRatedSpeedDefault(); // Set initial default

            // Custom message box function (replaces alert)
            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    document.body.appendChild(messageBox);
                }

                messageBox.textContent = message;
                messageBox.style.backgroundColor = type === "error" ? '#dc3545' : type === "warning" ? '#ffc107' : '#28a745';
                messageBox.style.color = type === "warning" ? '#333' : 'white';
                messageBox.style.opacity = 1;

                // Hide after 5 seconds
                setTimeout(() => {
                    messageBox.style.opacity = 0;
                }, 5000);
            }

            // Toggle visibility of reduction factor based on starting method
            startingMethodSelect.addEventListener('change', function() {
                if (this.value === 'soft-starter' || this.value === 'vfd') {
                    reductionFactorGroup.style.display = 'block';
                } else {
                    reductionFactorGroup.style.display = 'none';
                }
            });
            // Initial check for display
            startingMethodSelect.dispatchEvent(new Event('change'));

            calculateBtn.addEventListener('click', function() {
                loadingSpinner.style.display = 'block'; // Show spinner
                resultContainer.classList.remove('show'); // Hide previous results

                // Get input values
                const motorPower = parseFloat(document.getElementById('motor-power').value);
                const powerUnit = document.getElementById('power-unit').value;
                const ratedVoltage = parseFloat(document.getElementById('rated-voltage').value);
                const systemFrequency = parseFloat(document.getElementById('system-frequency').value);
                const phaseType = document.getElementById('phase-type').value;
                const motorPoles = parseInt(document.getElementById('motor-poles').value);
                let ratedCurrentInput = parseFloat(document.getElementById('rated-current').value);
                const ratedPowerFactor = parseFloat(document.getElementById('rated-power-factor').value);
                const ratedEfficiency = parseFloat(document.getElementById('rated-efficiency').value) / 100; // Convert to decimal
                const motorStandard = document.getElementById('motor-standard').value;
                const startingMethod = document.getElementById('starting-method').value;
                const lrcFactor = parseFloat(document.getElementById('lrc-factor').value);
                const lrtPercent = parseFloat(document.getElementById('lrt-percent').value);
                const reductionFactor = parseFloat(document.getElementById('reduction-factor').value) / 100; // Convert to decimal (for soft starter/VFD)
                const systemShortCircuitKVA = parseFloat(document.getElementById('system-short-circuit-kva').value); // New input
                const ratedSpeedRPM = parseFloat(document.getElementById('rated-speed-rpm').value); // New input
                const motorInertia = parseFloat(document.getElementById('motor-inertia').value); // New input
                const loadInertia = parseFloat(document.getElementById('load-inertia').value); // New input

                // Input validation
                if (isNaN(motorPower) || motorPower <= 0 ||
                    isNaN(ratedVoltage) || ratedVoltage <= 0 ||
                    isNaN(systemFrequency) || systemFrequency <= 0 ||
                    isNaN(ratedPowerFactor) || ratedPowerFactor <= 0.1 || ratedPowerFactor > 1 || // PF between 0.1 and 1
                    isNaN(ratedEfficiency) || ratedEfficiency <= 0.50 || ratedEfficiency > 0.99 || // Efficiency between 50% and 99%
                    isNaN(lrcFactor) || lrcFactor < 1 ||
                    isNaN(lrtPercent) || lrtPercent < 10 || lrtPercent > 500 || // LRT between 10% and 500%
                    isNaN(systemShortCircuitKVA) || systemShortCircuitKVA <= 0 ||
                    isNaN(ratedSpeedRPM) || ratedSpeedRPM <= 0 ||
                    isNaN(motorInertia) || motorInertia < 0 ||
                    isNaN(loadInertia) || loadInertia < 0) {
                    displayMessage("Please ensure all input values are valid positive numbers and within specified ranges (e.g., Power Factor 0.1-1, Efficiency 50-99%, LRT 10-500%, Inertia >= 0).", "error");
                    loadingSpinner.style.display = 'none';
                    return;
                }
                if ((startingMethod === 'soft-starter' || startingMethod === 'vfd') && (isNaN(reductionFactor) || reductionFactor < 0 || reductionFactor > 1)) {
                    displayMessage("For Soft Starter/VFD, the Inrush Reduction Factor must be between 0 and 100%.", "error");
                    loadingSpinner.style.display = 'none';
                    return;
                }
                
                let calculationHtml = '<h4>Detailed Calculation Steps:</h4>';
                let recommendedNotes = '';

                // 1. Convert Motor Power to kW
                let motorPowerKW = motorPower;
                if (powerUnit === 'HP') {
                    motorPowerKW = motorPower * 0.7457;
                    calculationHtml += `<p class="calculation-step"><strong>1. Convert Motor Power:</strong></p>`;
                    calculationHtml += `<p class="formula">$$P_{kW} = P_{HP} \\times 0.7457$$</p>`;
                    calculationHtml += `<p class="calculation-step">
                        $P_{kW} = ${motorPower.toFixed(2)}$ HP $\\times 0.7457 = ${motorPowerKW.toFixed(2)}$ kW
                    </p>`;
                } else {
                    calculationHtml += `<p class="calculation-step"><strong>1. Motor Power (kW):</strong> Already in kW: ${motorPowerKW.toFixed(2)} kW</p>`;
                }
                
                // 2. Calculate Synchronous Speed
                const synchronousSpeed = (120 * systemFrequency) / motorPoles;
                calculationHtml += `<p class="calculation-step"><strong>2. Calculate Synchronous Speed:</strong></p>`;
                calculationHtml += `<p class="formula">$$N_{sync} = \\frac{120 \\times f}{Poles}$$</p>`;
                calculationHtml += `<p class="calculation-step">
                    $N_{sync} = (120 \\times ${systemFrequency}$ Hz) / ${motorPoles}$ Poles = ${synchronousSpeed.toFixed(0)}$ RPM
                </p>`;

                // 3. Calculate Full Load Slip
                const fullLoadSlip = (synchronousSpeed - ratedSpeedRPM) / synchronousSpeed;
                const fullLoadSlipPercent = fullLoadSlip * 100;
                calculationHtml += `<p class="calculation-step"><strong>3. Calculate Full Load Slip:</strong></p>`;
                calculationHtml += `<p class="formula">$$s = \\frac{N_{sync} - N_{rated}}{N_{sync}}$$</p>`;
                calculationHtml += `<p class="calculation-step">
                    $s = (${synchronousSpeed.toFixed(0)}$ RPM - ${ratedSpeedRPM.toFixed(0)}$ RPM) / ${synchronousSpeed.toFixed(0)}$ RPM = ${fullLoadSlip.toFixed(4)}$ (${fullLoadSlipPercent.toFixed(2)}\\%)$
                </p>`;


                // 4. Calculate Rated Current (if not provided or if 0)
                let calculatedRatedCurrent = ratedCurrentInput;
                if (ratedCurrentInput === 0) {
                    calculationHtml += `<p class="calculation-step"><strong>4. Calculate Rated Current (FLC):</strong></p>`;
                    if (phaseType === 'single') {
                        calculatedRatedCurrent = (motorPowerKW * 1000) / (ratedVoltage * ratedPowerFactor * ratedEfficiency);
                        calculationHtml += `<p class="formula">$$I_{rated} = \\frac{P_{kW} \\times 1000}{V_{rated} \\times PF_{rated} \\times \\eta_{rated}}$$ (Single Phase)</p>`;
                        calculationHtml += `<p class="calculation-step">
                            $I_{rated} = (${motorPowerKW.toFixed(2)}$ kW $\\times 1000) / (${ratedVoltage}$ V $\\times ${ratedPowerFactor.toFixed(2)} \\times ${ratedEfficiency.toFixed(2)}) = ${calculatedRatedCurrent.toFixed(2)}$ A
                        </p>`;
                    } else { // Three-phase
                        calculatedRatedCurrent = (motorPowerKW * 1000) / (Math.sqrt(3) * ratedVoltage * ratedPowerFactor * ratedEfficiency);
                        calculationHtml += `<p class="formula">$$I_{rated} = \\frac{P_{kW} \\times 1000}{\\sqrt{3} \\times V_{rated} \\times PF_{rated} \\times \\eta_{rated}}$$ (Three Phase)</p>`;
                        calculationHtml += `<p class="calculation-step">
                            $I_{rated} = (${motorPowerKW.toFixed(2)}$ kW $\\times 1000) / (1.732 \\times ${ratedVoltage}$ V $\\times ${ratedPowerFactor.toFixed(2)} \\times ${ratedEfficiency.toFixed(2)}) = ${calculatedRatedCurrent.toFixed(2)}$ A
                        </p>`;
                    }
                } else {
                    calculationHtml += `<p class="calculation-step"><strong>4. Rated Current (FLC):</strong> Provided as ${ratedCurrentInput.toFixed(2)} A (used for calculations).</p>`;
                    calculatedRatedCurrent = ratedCurrentInput;
                }

                // 5. Calculate Rated Torque
                const ratedTorqueNm = (motorPowerKW * 9550) / synchronousSpeed; // Torque in N-m
                calculationHtml += `<p class="calculation-step"><strong>5. Calculate Rated Torque:</strong></p>`;
                calculationHtml += `<p class="formula">$$T_{rated} = \\frac{P_{kW} \\times 9550}{N_{sync}}$$</p>`;
                calculationHtml += `<p class="calculation-step">
                    $T_{rated} = (${motorPowerKW.toFixed(2)}$ kW $\\times 9550) / ${synchronousSpeed.toFixed(0)}$ RPM = ${ratedTorqueNm.toFixed(2)}$ Nm
                </p>`;
                
                // 6. Calculate Starting Current
                let startingCurrentRMS = 0;
                let startingCurrentPeak = 0;
                let startingCurrentNotes = '';
                const dolEquivalentCurrent = calculatedRatedCurrent * lrcFactor; // Base for all methods

                calculationHtml += `<p class="calculation-step"><strong>6. Calculate Starting Current (Inrush):</strong></p>`;
                switch (startingMethod) {
                    case 'dol':
                        startingCurrentRMS = dolEquivalentCurrent;
                        startingCurrentPeak = startingCurrentRMS * 1.6; 
                        calculationHtml += `<p class="formula">$$I_{start, DOL, RMS} = I_{rated} \\times LRC_{factor}$$</p>`;
                        calculationHtml += `<p class="formula">$$I_{peak, DOL} \\approx I_{start, DOL, RMS} \\times 1.6$$ (accounting for asymmetry)</p>`;
                        startingCurrentNotes = "Direct On Line (DOL) starting results in the highest starting current due to direct connection to full voltage, leading to a large inrush.";
                        break;
                    case 'star-delta':
                        startingCurrentRMS = dolEquivalentCurrent / Math.sqrt(3);
                        startingCurrentPeak = startingCurrentRMS * 1.6; 
                        calculationHtml += `<p class="formula">$$I_{start, Star-Delta, RMS} \\approx \\frac{I_{rated} \\times LRC_{factor}}{\\sqrt{3}}$$</p>`;
                        calculationHtml += `<p class="formula">$$I_{peak, Star-Delta} \\approx I_{start, Star-Delta, RMS} \\times 1.6$$</p>`;
                        startingCurrentNotes = "Star-Delta starting reduces the starting current to approximately 1/3rd of DOL current by applying reduced voltage during the start sequence.";
                        break;
                    case 'soft-starter':
                    case 'vfd':
                        startingCurrentRMS = dolEquivalentCurrent * (1 - reductionFactor);
                        startingCurrentPeak = startingCurrentRMS * 1.4; 
                        let methodText = startingMethod === 'soft-starter' ? 'Soft Starter' : 'VFD';
                        startingCurrentNotes = `${methodText} significantly reduces starting current by controlling voltage and/or frequency ramp-up. This provides a smoother start with less mechanical and electrical stress.`;
                        
                        calculationHtml += `<p class="formula">$$I_{start, \\text{${methodText}}, RMS} = (I_{rated} \\times LRC_{factor}) \\times (1 - \\text{Reduction Factor})$$</p>`;
                        calculationHtml += `<p class="formula">$$I_{peak, \\text{${methodText}}} \\approx I_{start, \\text{${methodText}}, RMS} \\times 1.4$$</p>`;
                        break;
                }
                calculationHtml += `<p class="calculation-step">
                    $I_{start, RMS} = ${startingCurrentRMS.toFixed(2)}$ A
                </p>`;
                calculationHtml += `<p class="calculation-step">
                    $I_{start, Peak} = ${startingCurrentPeak.toFixed(2)}$ A
                </p>`;

                // 7. Calculate Starting Torque
                const startingTorqueDolNm = ratedTorqueNm * (lrtPercent / 100);
                let actualStartingTorqueDisplay = "";
                let actualStartingTorqueNotes = '';
                let startingTorqueForAcceleration = startingTorqueDolNm; // Default for DOL

                calculationHtml += `<p class="calculation-step"><strong>7. Calculate Starting Torque:</strong></p>`;
                calculationHtml += `<p class="formula">$$T_{start, Nameplate} = T_{rated} \\times \\frac{LRT_{\\%}}{100}$$</p>`;
                
                if (startingMethod === 'star-delta') {
                    const actualStartingTorqueNum = startingTorqueDolNm / 3;
                    actualStartingTorqueDisplay = `${actualStartingTorqueNum.toFixed(2)} Nm`;
                    startingTorqueForAcceleration = actualStartingTorqueNum;
                    actualStartingTorqueNotes = "Star-Delta starting reduces starting torque to approximately 1/3rd of the DOL starting torque. Ensure this reduced torque is sufficient for the load's requirements.";
                    calculationHtml += `<p class="formula">$$T_{start, Star-Delta} = T_{start, Nameplate} / 3$$</p>`;
                    calculationHtml += `<p class="calculation-step">
                        Actual $T_{start}$ (Star-Delta) = ${startingTorqueDolNm.toFixed(2)}$ Nm / 3 = ${actualStartingTorqueNum.toFixed(2)}$ Nm
                    </p>`;
                } else if (startingMethod === 'soft-starter' || startingMethod === 'vfd') {
                    const methodVoltageReductionFactor = 1 - reductionFactor;
                    const actualStartingTorqueNum = startingTorqueDolNm * Math.pow(methodVoltageReductionFactor, 2); 
                    startingTorqueForAcceleration = actualStartingTorqueNum;
                    actualStartingTorqueDisplay = `Controllable (e.g., ${actualStartingTorqueNum.toFixed(2)} Nm at ${((1-reductionFactor)*100).toFixed(0)}% voltage)`; 
                    actualStartingTorqueNotes = `${startingMethod === 'soft-starter' ? 'Soft Starter' : 'VFD'} allows for controlled ramp-up of torque, which can be adjusted as per application requirements. While the maximum available torque for this setting is shown, the actual starting torque will follow a defined ramp or control curve, significantly reducing mechanical shock. VFDs can provide full rated torque from zero speed.`;
                    
                    calculationHtml += `<p class="formula">$$T_{start, \\text{Controlled}} \\approx T_{start, Nameplate} \\times (1 - \\text{Reduction Factor})^2$$</p>`;
                    calculationHtml += `<p class="calculation-step">
                        Actual $T_{start}$ (Controlled) $\\approx$ ${startingTorqueDolNm.toFixed(2)}$ Nm $\\times (${(1 - reductionFactor).toFixed(2)})^2 = ${actualStartingTorqueNum.toFixed(2)}$ Nm (Example at equivalent voltage reduction)
                    </p>`;
                } else { // DOL
                    actualStartingTorqueDisplay = `${startingTorqueDolNm.toFixed(2)} Nm`;
                    actualStartingTorqueNotes = "This is the maximum available starting torque with Direct On Line (DOL) starting, applying full voltage instantly to the motor terminals.";
                    calculationHtml += `<p class="calculation-step">
                        Actual $T_{start}$ (DOL) = ${startingTorqueDolNm.toFixed(2)}$ Nm
                    </p>`;
                }
                
                // 8. Calculate System Impedance
                const systemImpedanceOhms = (ratedVoltage * ratedVoltage) / (systemShortCircuitKVA * 1000); // Z = V^2 / S_sc
                calculationHtml += `<p class="calculation-step"><strong>8. Calculate System Impedance at PCC:</strong></p>`;
                calculationHtml += `<p class="formula">$$Z_{sys} = \\frac{V_{rated}^2}{S_{sc}}$$</p>`;
                calculationHtml += `<p class="calculation-step">
                    $Z_{sys} = (${ratedVoltage}$ V)$^2 / (${systemShortCircuitKVA}$ kVA $\\times 1000) = ${systemImpedanceOhms.toFixed(5)}$ $\\Omega$
                </p>`;

                // 9. Calculate Voltage Drop at Motor Terminals
                const voltageDropVolts = startingCurrentRMS * systemImpedanceOhms;
                const voltageDropPercent = (voltageDropVolts / ratedVoltage) * 100;
                calculationHtml += `<p class="calculation-step"><strong>9. Calculate Voltage Drop at Motor Terminals during start:</strong></p>`;
                calculationHtml += `<p class="formula">$$\\Delta V_{\\%} = \\frac{I_{start,RMS} \\times Z_{sys}}{V_{rated}} \\times 100\\%$$</p>`;
                calculationHtml += `<p class="calculation-step">
                    $\\Delta V_{\\%} = \\frac{${startingCurrentRMS.toFixed(2)}$ A $\\times ${systemImpedanceOhms.toFixed(5)}$ $\\Omega}{${ratedVoltage}$ V} \\times 100\\% = ${voltageDropPercent.toFixed(2)}\\%$
                </p>`;

                // 10. Calculate Total Inertia
                const totalInertia = motorInertia + loadInertia;
                calculationHtml += `<p class="calculation-step"><strong>10. Calculate Total Inertia:</strong></p>`;
                calculationHtml += `<p class="formula">$$J_{total} = J_{motor} + J_{load}$$</p>`;
                calculationHtml += `<p class="calculation-step">
                    $J_{total} = ${motorInertia.toFixed(3)}$ $(\text{kg} \cdot \text{m}^2)$ + ${loadInertia.toFixed(3)}$ $(\text{kg} \cdot \text{m}^2)$ = ${totalInertia.toFixed(3)}$ $(\text{kg} \cdot \text{m}^2)$
                </p>`;

                // 11. Estimate Acceleration Time
                // Convert rated speed to rad/s
                const ratedSpeedRadPerSec = ratedSpeedRPM * (2 * Math.PI / 60);
                
                // Estimate Average Accelerating Torque
                let averageAcceleratingTorque = 0;
                // For VFD/Soft-starter, we can assume a more controlled torque,
                // for DOL/Star-Delta, it's typically the difference between motor and load torque.
                // For simplification, let's use a percentage of the calculated starting torque for the method.
                // This is a gross simplification as it heavily depends on the load torque vs speed curve.
                // A very simple approximation: 0.75 * starting torque for the method, assuming some load torque.
                if (typeof startingTorqueForAcceleration === 'number') {
                     averageAcceleratingTorque = 0.75 * startingTorqueForAcceleration;
                } else {
                    // For "Controllable" VFD/Soft Starter, can't give a fixed value.
                    // Provide a default that is reasonable for acceleration, perhaps 1.5 times rated torque.
                    averageAcceleratingTorque = 1.5 * ratedTorqueNm; 
                    calculationHtml += `<p class="calculation-step"><em>(For VFD/Soft Starter, average accelerating torque is highly controllable. Using 1.5 times Rated Torque for estimation.)</em></p>`;
                }
                
                let accelerationTimeSeconds = 0;
                if (averageAcceleratingTorque > 0 && ratedSpeedRadPerSec > 0) {
                    accelerationTimeSeconds = (totalInertia * ratedSpeedRadPerSec) / averageAcceleratingTorque;
                } else {
                    accelerationTimeSeconds = Infinity; // Or a very large number if conditions not met
                }

                calculationHtml += `<p class="calculation-step"><strong>11. Estimate Acceleration Time:</strong></p>`;
                calculationHtml += `<p>Acceleration time is highly dependent on the motor's torque-speed curve and the load's torque-speed curve. This is a simplified estimation assuming an average accelerating torque.</p>`;
                calculationHtml += `<p class="formula">$$T_{accel,avg} \\approx 0.75 \\times T_{start, \\text{method}} \\quad \\text{(approximation)}$$</p>`;
                calculationHtml += `<p class="formula">$$t_{accel} = \\frac{J_{total} \\times \\omega_{rated}}{T_{accel,avg}}$$</p>`;
                calculationHtml += `<p class="calculation-step">
                    Average Accelerating Torque $\\approx$ ${averageAcceleratingTorque.toFixed(2)}$ Nm
                </p>`;
                calculationHtml += `<p class="calculation-step">
                    $\\omega_{rated} = ${ratedSpeedRPM.toFixed(0)}$ RPM $\\times (2\\pi / 60) = ${ratedSpeedRadPerSec.toFixed(2)}$ rad/s
                </p>`;
                if (accelerationTimeSeconds !== Infinity) {
                    calculationHtml += `<p class="calculation-step">
                        $t_{accel} = (${totalInertia.toFixed(3)}$ $(\text{kg} \cdot \text{m}^2)$ $\\times$ ${ratedSpeedRadPerSec.toFixed(2)}$ rad/s) / ${averageAcceleratingTorque.toFixed(2)}$ Nm = ${accelerationTimeSeconds.toFixed(2)}$ s
                    </p>`;
                } else {
                    calculationHtml += `<p class="calculation-step">Acceleration time cannot be accurately estimated due to zero or infinite accelerating torque.</p>`;
                }


                // Hide loading spinner and show results with animation
                loadingSpinner.style.display = 'none';
                resultContainer.style.display = 'block';
                resultContainer.classList.add('show'); 
                
                // Clear previous results
                resultTableBody.innerHTML = '';
                
                // Add rows to the results table
                function addResultRow(parameter, value) {
                    const tr = document.createElement('tr');
                    const paramCell = document.createElement('td');
                    const valueCell = document.createElement('td');
                    paramCell.textContent = parameter;
                    valueCell.textContent = value;
                    tr.appendChild(paramCell);
                    tr.appendChild(valueCell);
                    resultTableBody.appendChild(tr);
                }

                addResultRow('Motor Power', `${motorPower.toFixed(2)} ${powerUnit} (${motorPowerKW.toFixed(2)} kW)`);
                addResultRow('Rated Voltage', `${ratedVoltage} V`);
                addResultRow('System Frequency', `${systemFrequency} Hz`);
                addResultRow('Phase Type', phaseType === 'single' ? 'Single-Phase' : 'Three-Phase');
                addResultRow('Number of Poles', `${motorPoles}`);
                addResultRow('Synchronous Speed', `${synchronousSpeed.toFixed(0)} RPM`);
                addResultRow('Rated Speed', `${ratedSpeedRPM.toFixed(0)} RPM`);
                addResultRow('Full Load Slip', `${fullLoadSlipPercent.toFixed(2)}%`);
                addResultRow('Motor Standard', motorStandard.toUpperCase());
                addResultRow('Rated Current (FLC)', `${calculatedRatedCurrent.toFixed(2)} A`);
                addResultRow('Rated Power Factor', ratedPowerFactor.toFixed(2));
                addResultRow('Rated Efficiency', `${(ratedEfficiency * 100).toFixed(1)}%`);
                addResultRow('Starting Method', startingMethod.charAt(0).toUpperCase() + startingMethod.slice(1).replace('-', ' '));
                addResultRow('Locked Rotor Current (LRC) Factor', lrcFactor.toFixed(1));
                addResultRow('Locked Rotor Torque (LRT) (% of Rated)', `${lrtPercent}%`);
                if (startingMethod === 'soft-starter' || startingMethod === 'vfd') {
                    addResultRow('Inrush Reduction Factor', `${(reductionFactor * 100).toFixed(0)}%`);
                }
                addResultRow('Calculated Rated Torque', `${ratedTorqueNm.toFixed(2)} Nm`);
                addResultRow('Calculated Starting Current (RMS)', `${startingCurrentRMS.toFixed(2)} A`);
                addResultRow('Calculated Starting Current (Peak)', `${startingCurrentPeak.toFixed(2)} A`);
                addResultRow('Calculated Starting Torque (with method)', actualStartingTorqueDisplay);
                addResultRow('System Short Circuit Capacity (PCC)', `${systemShortCircuitKVA.toFixed(0)} kVA`);
                addResultRow('Calculated System Impedance', `${systemImpedanceOhms.toPrecision(3)} Ω`);
                addResultRow('Calculated Voltage Drop at Start', `${voltageDropPercent.toFixed(2)}%`);
                addResultRow('Total Inertia (Motor + Load)', `${totalInertia.toFixed(3)} kg·m^2`); // Corrected for plain text
                addResultRow('Estimated Acceleration Time', accelerationTimeSeconds !== Infinity ? `${accelerationTimeSeconds.toFixed(2)} s` : `N/A (check parameters)`);

                // Generate recommendation/notes
                recommendedNotes += `<p><strong>Starting Current Considerations:</strong> ${startingCurrentNotes}</p>`;
                recommendedNotes += `<p><strong>Starting Torque Considerations:</strong> ${actualStartingTorqueNotes}</p>`;
                recommendedNotes += `<p><strong>Voltage Drop Impact:</strong> The calculated voltage drop of ${voltageDropPercent.toFixed(2)}% during starting is important. IEEE 141 (Red Book) and IEC 60034-12 often recommend voltage drop at motor terminals not exceeding 10-15% during starting to ensure proper operation of other equipment on the same bus. Higher voltage drops can lead to flickering lights, malfunction of sensitive electronics, or failure of other motors to start.</p>`;
                recommendedNotes += `<p><strong>Acceleration Time & Thermal Stress:</strong> The estimated acceleration time of ${accelerationTimeSeconds !== Infinity ? accelerationTimeSeconds.toFixed(2) + ' seconds' : 'N/A'} is critical. A prolonged acceleration time can cause the motor to overheat and trip its thermal overload protection, or even damage insulation. Ensure the motor's thermal withstand capability is sufficient for this starting duration. For IEC motors, this relates to the starting time class (e.g., S1 to S10 operation). Mechanically, rapid acceleration (very short time) can cause excessive stress on the motor shaft, coupling, and driven load.</p>`;
                recommendedNotes += `<p><strong>Protection Coordination:</strong> The starting current profile directly affects the setting of upstream protective devices (circuit breakers, fuses). Their time-current characteristics (TCCs) must be coordinated to allow motor starting without nuisance tripping, while still providing adequate short-circuit and overload protection.</p>`;
                recommendedNotes += `<p><strong>Cable & Transformer Sizing:</strong> High starting currents can lead to significant voltage drops and heat generation in supply cables, potentially requiring larger cable cross-sections. Similarly, the impedance and MVA rating of upstream transformers must be sufficient to supply the motor starting current without excessive voltage dip or overheating.</p>`;

                if (motorStandard === 'iec') {
                    recommendedNotes += "<p><strong>IEC Standards:</strong> For IEC motors, starting current is often specified as a multiple of rated current. IEC 60034-12 specifies starting performance for cage induction motors.</p>";
                } else { // ieee / nema
                    recommendedNotes += "<p><strong>IEEE/NEMA Standards:</strong> NEMA code letters (related to LRC factor, not directly used in calculation but on nameplates) define locked rotor current limits. IEEE 112 provides test procedures for induction motors.</p>";
                }

                if (lrcFactor > 6) {
                    recommendedNotes += "<p><strong>High Inrush Warning:</strong> A high Locked Rotor Current (LRC) factor (typically >6) indicates a significant inrush current. Consider implementing reduced voltage starting methods (e.g., Star-Delta, Soft Starter, VFD) to mitigate voltage dips and minimize disturbances to the electrical system and other connected loads.</p>";
                }
                if (lrtPercent < 100) {
                    recommendedNotes += "<p><strong>Low Starting Torque Warning:</strong> If the Locked Rotor Torque is less than 100% of rated torque, ensure it is sufficient to overcome the load's initial inertia and breakaway torque. Insufficient starting torque can lead to prolonged starting times, motor overheating, or failure to start.</p>";
                }
                if (lrtPercent > 300) {
                    recommendedNotes += "<p><strong>High Starting Torque Note:</strong> While high starting torque is generally good for accelerating loads, it can lead to high mechanical stress on the motor and coupled equipment. Consider if this level of torque is necessary or if a smoother start is preferred.</p>";
                }

                recommendationContent.innerHTML = recommendedNotes;
                
                // Render MathJax formulas in detailed calculations
                calculationDetailsDiv.innerHTML = calculationHtml;
                if (window.MathJax) {
                    window.MathJax.typesetPromise([calculationDetailsDiv]).catch(err => console.error('MathJax Error:', err));
                }
                
                // Scroll to results with a smooth animation
                resultContainer.scrollIntoView({ behavior: 'smooth' });
            });

            // Theme switch logic (from provided file)
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }

                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }
        });
    </script>
</body>

</html>
