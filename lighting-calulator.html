<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lighting Load Calculator - Design Calculators - Electrical</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Professional lighting load calculator using the Lumen Method. Calculates required luminaires, lux levels, spacing, and electrical load (W, VA, A) based on IEC and IES standards.">
    <meta name="keywords" content="lighting load calculator, lumen method, lux calculator, coefficient of utilization, light loss factor, luminaire spacing, lighting power density, iec, ies">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://designcalculators.co.in/lighting-calulator.html" />

    <!-- AdSense & Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- MathJax for LaTeX rendering -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)'], ['$', '$']],
                displayMath: [['\\[', '\\]'], ['$$', '$$']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>

    <style>
        /* Base Theme Variables from perfect.txt */
        :root {
            --primary: #1E3A8A; /* Dark Blue */
            --secondary: #2563EB; /* Bright Blue */
            --accent: #F59E0B; /* Amber/Yellow */
            --success: #10B981; /* Green */
            --danger: #DC2626; /* Red */
            --warning: #F59E0B; /* Amber/Yellow */
            --bg: #F8FAFC; /* Light Grey BG */
            --card: #FFFFFF; /* White Card */
            --text: #4B5563; /* Medium Grey Text */
            --heading: #111827; /* Dark Grey/Black Heading */
            --footer-bg: #0F172A; /* Very Dark Blue Footer */
            --border: #E2E8F0; /* Light Grey Border */
            --grad: linear-gradient(135deg, var(--primary), var(--secondary));
            --grad-dark: linear-gradient(135deg, #0F172A, #1E293B);
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);
            --form-row-gap: 25px; /* Added for consistency */
        }

        /* Dark Mode Variables from perfect.txt */
        body.dark-mode {
            --primary: #10B981; /* Green */
            --secondary: #34D399; /* Lighter Green */
            --bg: #0F172A; /* Dark Blue BG */
            --card: #1E293B; /* Lighter Dark Blue Card */
            --text: #CBD5E1; /* Light Grey Text */
            --heading: #F1F5F9; /* White Heading */
            --footer-bg: #020617; /* Black Footer */
            --border: #334155; /* Medium Dark Border */
        }

        /* General Body Styling from perfect.txt */
        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.7;
            margin: 0;
            padding: 0;
            transition: background-color 0.3s, color 0.3s;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .container { 
            max-width: 1280px; 
            margin: 0 auto; 
            padding: 0 24px; 
        }

        /* Header & Nav from perfect.txt */
        header {
            background: var(--grad);
            color: white;
            padding: 24px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-container {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: white;
        }
        .logo-text {
            font-size: 1.75rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
        }
        .logo-subtitle {
            font-size: 0.8rem;
            margin: 4px 0 0 0;
            color: #E0E7FF;
            opacity: 0.9;
        }
        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        .nav-links a:hover { color: var(--accent); }
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .theme-toggle i {
            color: white;
        }
        .switch {
            position: relative;
            width: 56px;
            height: 30px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.2);
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--accent);
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Main Content & Cards from perfect.txt */
        main { 
            padding: 40px 0; 
            flex: 1;
        }
        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }
        .card h2 {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            margin-top: 0;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .card h3 {
            color: var(--heading);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            margin-top: 25px;
            margin-bottom: 20px;
        }
        .card p {
            font-size: 1.05rem;
        }
        
        /* ADAPTED CALCULATOR STYLES */
        .tool-description {
            margin-bottom: 30px;
            color: var(--text);
            font-size: 1.1em;
            text-align: justify;
        }
        .calculator-form {
            background-color: var(--card);
            border-radius: 12px;
            padding: 30px;
            margin-top: 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }
        .form-section {
            background-color: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .form-section.fade-in {
            opacity: 1;
            transform: translateY(0);
        }
        .form-section h3 {
            color: var(--secondary);
            margin-top: 0;
            margin-bottom: 15px;
            border-bottom: 1px dashed var(--border);
            padding-bottom: 10px;
            font-size: 1.4rem;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--heading);
            font-size: 1.05em;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            background-color: var(--bg);
            color: var(--text);
            font-size: 1rem;
            box-sizing: border-box;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }
        body.dark-mode .form-group input:focus {
             box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--form-row-gap);
            margin-bottom: 15px;
        }
        
        /* Button Styles from perfect.txt, adapted */
        .btn {
            background: var(--grad);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(30, 58, 138, 0.4);
        }
        /* Specific styles for this tool's buttons */
        .button-wrapper {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            padding-top: 10px;
        }
        .btn.calculate {
            flex-basis: 220px;
        }
        .btn.reset {
            background: var(--accent);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
            flex-basis: 150px;
        }
        .btn.reset:hover {
            background: #e08e0b;
        }
        .btn.clear {
            background: var(--secondary);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
            padding: 10px 20px;
            font-size: 0.9rem;
            flex-basis: 150px;
            margin-top: 0; /* Align with table */
        }

        /* Result Container */
        .result-container {
            margin-top: 40px;
            padding: 30px;
            border-radius: 12px;
            background-color: var(--card);
            box-shadow: var(--shadow);
            display: none;
            opacity: 0;
            transition: opacity 0.6s ease-out;
            border: 1px solid var(--border);
        }
        .result-container.show {
            display: block;
            opacity: 1;
        }
        .result-container h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.8em;
            text-align: center;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
        }
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            border-radius: 8px;
            overflow: hidden;
        }
        .result-table th, .result-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        .result-table th {
            background: var(--bg);
            font-weight: bold;
            color: var(--primary);
            text-transform: uppercase;
            font-size: 0.95em;
        }
        .result-table tbody tr:nth-child(even) {
            background-color: var(--bg);
        }
        body.dark-mode .result-table tbody tr:nth-child(even) {
            background-color: #2c3e50;
        }
        .result-table tbody tr:hover {
            background-color: #eef2f7;
        }
        body.dark-mode .result-table tbody tr:hover {
            background-color: #334155;
        }
        
        /* Calculation Details */
        #calculation-details {
            background-color: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            font-size: 1.05em;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05);
        }
        #calculation-details h4 {
            color: var(--secondary);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.4em;
            text-align: center;
        }
        #calculation-details p.formula {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            font-size: 1.3em;
            text-align: center;
            padding: 12px 0;
            border-radius: 6px;
            margin: 15px 0;
            overflow-x: auto;
            border: 1px dashed var(--primary);
        }
        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace;
            background-color: var(--card);
            padding: 10px 15px;
            border-radius: 5px;
            margin-bottom: 8px;
            border-left: 4px solid var(--accent);
            overflow-x: auto;
            font-size: 0.95em;
        }
        body.dark-mode #calculation-details p.calculation-step {
            background-color: var(--bg);
        }
        #calculation-details ul {
            list-style-type: disc; /* Kept from original */
            margin-left: 25px;
            padding-left: 0;
            margin-top: 15px;
        }
        #calculation-details ul li {
            margin-bottom: 8px;
        }
        .standard-reference {
            margin-top: 25px;
            font-style: italic;
            font-size: 0.95rem;
            background-color: var(--bg);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            color: var(--text);
        }

        /* Tooltip */
        .info-icon {
            color: var(--primary);
            margin-left: 8px;
            cursor: help;
            font-size: 0.9em;
            transition: transform 0.2s ease-in-out;
        }
        .info-icon:hover {
            transform: scale(1.2);
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 10px;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            font-size: 0.85em;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        
        /* Custom message box */
        #custom-message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 28px;
            border-radius: 8px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.25);
            z-index: 10000;
            font-weight: 600;
            color: white;
            opacity: 0;
            transition: all 0.4s;
            display: none;
        }
        #custom-message-box.show {
            display: block;
            opacity: 1;
            top: 30px;
        }
        
        /* Specific styles for Lighting Load Calculator from original */
        #lighting-guidance-section {
            display: none; /* Hidden by default */
            background-color: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 25px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        #lighting-guidance-section.fade-in {
            opacity: 1;
            transform: translateY(0);
        }
        #lighting-guidance-section h3 {
            color: var(--secondary);
            margin-top: 0;
            margin-bottom: 15px;
            border-bottom: 1px dashed var(--border);
            padding-bottom: 10px;
        }
        #lighting-guidance-section p, #lighting-guidance-section ul {
            font-size: 0.9em;
            color: var(--text);
        }
        #lighting-guidance-section strong {
            color: var(--primary);
        }
        
        /* Educational Section (from perfect.txt) */
        .education-section {
            margin-top: 40px;
        }
        .education-section h2 {
            font-size: 1.8rem;
        }
        .education-section h3 {
            font-size: 1.5rem;
            color: var(--primary);
        }
        .education-section p, .education-section li {
            line-height: 1.8;
            font-size: 1.05rem;
            color: var(--text);
        }
        .education-section ul {
            padding-left: 25px;
            margin-top: 10px;
        }
        .education-section strong {
            color: var(--heading);
        }
        .danger-box {
            background: linear-gradient(135deg, rgba(220,38,38,0.1), rgba(220,38,38,0.05));
            border-left: 5px solid var(--danger);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .danger-box h3 {
            color: var(--danger);
            margin-top: 0;
            font-size: 1.4rem;
        }
        .summary-box {
            background: linear-gradient(135deg, rgba(30,58,138,0.1), rgba(30,58,138,0.05));
            border-left: 5px solid var(--primary);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .summary-box h4 {
            color: var(--primary);
            margin-top: 0;
            font-size: 1.3rem;
        }
        body.dark-mode .summary-box h4 {
            color: var(--secondary);
        }

        /* Footer from perfect.txt */
        footer {
            background: var(--grad-dark);
            color: #CBD5E1;
            padding: 50px 0 20px 0;
            margin-top: 60px;
        }
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 30px;
        }
        .footer-col {
            flex: 1;
            min-width: 200px;
        }
        .footer-col h4 {
            color: white;
            margin-bottom: 15px;
            font-weight: 700;
        }
        .footer-col ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .footer-col li {
            margin-bottom: 8px;
        }
        .footer-col a {
            color: #CBD5E1;
            text-decoration: none;
            transition: color 0.3s;
        }
        .footer-col a:hover {
            color: var(--accent);
        }
        .social-buttons {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }
        .social-btn {
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            border-radius: 50%;
            font-size: 1.1rem;
            transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .social-btn:hover {
            transform: translateY(-4px);
        }
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.youtube { background-color: #FF0000; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.email { background-color: #EA4335; } /* Added email from original */

        .footer-disclaimer {
            text-align: center;
            padding-top: 25px;
            border-top: 1px solid #334155;
            max-width: 800px;
            margin: 0 auto;
            font-size: 0.9rem;
        }
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            font-size: 0.9rem;
            color: #94A3B8;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 0 15px; }
            .navbar { flex-direction: column; gap: 20px; }
            .nav-links { flex-direction: column; gap: 12px; text-align: center; }
            .form-row { grid-template-columns: 1fr; }
            .card { padding: 20px; }
            .footer-content { flex-direction: column; gap: 25px; }
            .button-wrapper { flex-direction: column; }
            .btn.calculate, .btn.reset {
                flex-basis: auto; /* Reset basis for stacking */
                width: 100%;
                margin-left: 0;
            }
        }
    </style>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="custom-message-box"></div>

    <!-- New Header from perfect.txt -->
    <header class="header">
        <div class="header-bg-animation"></div>
        <div class="container">
            <nav class="navbar">
                <a href="/" class="logo-container">
                    <img src="logo.png" alt="Design Calculators Logo" class="logo">
                    <span class="logo-text">Design Calculators</span>
                </a>

                <div class="nav-menu">
                    <button class="mobile-menu-toggle" aria-label="Toggle menu">
                        <i class="fas fa-bars"></i>
                    </button>

                    <ul class="nav-links">
                        <li><a href="/index.html">Home</a></li>
                        
    <li class="dropdown">
        <a href="/indexele.html" class="dropdown-toggle">Electrical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/arcflash.html">Arc Flash Calculator</a><a href="/breaker-sizing.html">Breaker Sizing</a><a href="/cable-thermal-rating.html">Cable Ampacity</a><a href="/comm-cable-loss.html">Comm Cable Loss</a><a href="/earth-conductor-size.html">Earth Conductor Size</a><a href="/generatorsizing.html">Generator Sizing</a><a href="/harmonicsanalyser.html">Harmonics Analyser</a><a href="/insulationresistance.html">Insulation Resistance</a><a href="/logicgate.html">Logic Gates Simulator</a><a href="/motor-starting.html">Motor Starting Current</a><a href="/pcbtrace.html">PCB Trace Width</a><a href="/protection-device.html">Protection Device</a><a href="/resistor.html">Resistor Color Code</a><a href="/solarcable.html">Solar Cable Sizing</a><a href="/systemxrcalculator.html">System X/R Ratio</a><a href="/transmissionline.html">Transmission Line</a><a href="/vfd-selection.html">VFD Selection Tool</a></div><div><a href="/batterylife.html">Battery Life Estimator</a><a href="/busbarampacity.html">Busbar Ampacity</a><a href="/cablepulling.html">Cable Pulling Tension</a><a href="/conduit-fill.html">Conduit Fill Calculator</a><a href="/earthingfaultsimulator.html">Earthing Fault Simulator</a><a href="/grounding.html">Grounding System Design</a><a href="/hvac-sizing.html">HVAC Sizing Calculator</a><a href="/lcresonancecalculator.html">LC Resonance Calculator</a><a href="/maintenance-guide.html">Maintenance Guide</a><a href="/nemaipconvertor.html">NEMA to IP Converter</a><a href="/power-factor.html">Power Factor Correction</a><a href="/relay-coordination.html">Relay Coordination</a><a href="/short-circuit.html">Short Circuit Current</a><a href="/solarpvarray.html">Solar PV Array</a><a href="/transformer-calculator.html">Transformer Calculator</a><a href="/unit-converter.html">Unit Converter</a><a href="/voltage-drop.html">Voltage Drop Calculator</a></div><div><a href="/battery-sizing.html">Battery Sizing (AH)</a><a href="/busbarshortcircuit.html">Busbar Short Circuit</a><a href="/cable-sizing.html">Cable Sizing Calculator</a><a href="/ctsaturation.html">CT Saturation</a><a href="/equipment-relay.html">Equipment Relay Setting</a><a href="/harmonic-distortion.html">Harmonic Distortion</a><a href="/industriallighting.html">Industrial Lighting</a><a href="/lighting-calulator.html">Lighting Calculator</a><a href="/motor-efficiency.html">Motor Efficiency</a><a href="/neutral-earth-fault-current.html">Neutral Earth Fault</a><a href="/powertriangletool.html">Power Triangle</a><a href="/electricalresidentialload.html">Residential Load Calc</a><a href="/skindepth.html">Skin Depth Calculator</a><a href="/symmetricalcomponents.html">Symmetrical Components</a><a href="/transformerinrush.html">Transformer Inrush</a><a href="/ups-sizing.html">UPS Sizing</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexele.html" class="view-all-link">View All Electrical Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexinst.html" class="dropdown-toggle">Instrumentation <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/adc-resolution.html">ADC Resolution</a><a href="/capillarylengthtemperatureerror.html">Capillary Error</a><a href="/cv-kv-valve.html">Cv/Kv Valve Sizing</a><a href="/dp-level.html">DP Level Measurement</a><a href="/hydrostatic-level.html">Hydrostatic Level</a><a href="/instrument-range.html">Instrument Range</a><a href="/loop-impedance.html">Loop Impedance</a><a href="/orifice-plate.html">Orifice Plate Beta</a><a href="/pid-tuning.html">PID Tuning</a><a href="/profibus.html">Profibus Calculator</a><a href="/tempsensorresponse.html">Response Time (Tau)</a><a href="/rtd-lead-comp.html">RTD Lead Wire Comp.</a><a href="/sealfluidzeroshift.html">Seal Fluid Shift</a><a href="/snr-calculator.html">SNR Calculator</a><a href="/thermocoupleextensioncable.html">TC Extension Cable</a><a href="/thermowellwakefreq.html">Thermowell Frequency</a><a href="/pressuretransmitteroverrange.html">Tx Overrange</a><a href="/valvecavitationcalculator.html">Valve Cavitation</a><a href="/vibrationtransmitter.html">Vibration Tx</a><a href="/zoneclassificationhelper.html">Zone Classification</a></div><div><a href="/baud-rate.html">Baud Rate Calculator</a><a href="/gascompressibility.html">Compressibility (Z)</a><a href="/dbcalculator.html">dB Gain/Loss Calc</a><a href="/flowprofiledistortioncalculator.html">Flow Distortion</a><a href="/impulselinefreezing.html">Impulse Freezing</a><a href="/intrinsic-safety.html">Intrinsic Safety Loop</a><a href="/measurement.html">Measurement Uncertainty</a><a href="/ph-temp-comp.html">pH Temp Compensation</a><a href="/plcscantime.html">PLC Scan Time</a><a href="/pressurereliefvalve.html">PRV Sizing (API 520)</a><a href="/reynoldsnumbercal.html">Reynolds Number</a><a href="/rtdselfheating.html">RTD Self-Heating</a><a href="/signal-scaling.html">Signal Scaling</a><a href="/staticheadcal.html">Static Head</a><a href="/temperaturesensorlag.html">Temp Sensor Lag</a><a href="/thermowell-wake.html">Thermowell Wake</a><a href="/ultrasoniclevel.html">Ultrasonic Level</a><a href="/valve-cv.html">Valve Cv Viewer</a><a href="/wetlegdensitycompensation.html">Wet Leg Compensation</a></div><div><a href="/capacitance-level.html">Capacitance Level</a><a href="/controlvalvenoise.html">Control Valve Noise</a><a href="/dp-flow-conversion.html">DP Flow Conversion</a><a href="/hartdevices.html">HART Devices</a><a href="/impulse-pressure-drop.html">Impulse Pressure Drop</a><a href="/junctionbox.html">Junction Box Sizing</a><a href="/orifice-flow.html">Orifice Flow Calculator</a><a href="/pid-symbol-library.html">PID Symbol Library</a><a href="/power-supply-load.html">Power Supply Load</a><a href="/prvsizing.html">Relief Orifice Area</a><a href="/rtdexcitationcurrentselection.html">RTD Excitation</a><a href="/rtd-tc-conversion.html">RTD/TC Conversion</a><a href="/sil.html">SIL Calculator</a><a href="/steamflow.html">Steam Flow</a><a href="/thermocouplecjccalculator.html">Thermocouple CJC</a><a href="/turndown.html">Turndown Ratio</a><a href="/controlvalveauthority.html">Valve Authority</a><a href="/controlvalveleakage.html">Valve Leakage Class</a><a href="/wirelesshart.html">WirelessHART Range</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexinst.html" class="view-all-link">View All Instrumentation Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexmech.html" class="dropdown-toggle">Mechanical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/aircompressorfad.html">Air Compressor FAD</a><a href="/asme-vessel.html">ASME Vessel Design</a><a href="/belt-pulley.html">Belt & Pulley</a><a href="/bolt-torque.html">Bolt Torque</a><a href="/controlvalveactuator.html">Control Valve Actuator</a><a href="/frictionfactortool.html">Darcy Friction Factor</a><a href="/fatigue.html">Fatigue Analysis</a><a href="/fuel-combustion.html">Fuel Combustion</a><a href="/gas.html">Gas Properties</a><a href="/heat-exchanger.html">Heat Exchanger</a><a href="/hydroliccylinder.html">Hydraulic Cylinder</a><a href="/material-compatibility.html">Material Compatibility</a><a href="/nozzle-reinforcement.html">Nozzle Reinforcement</a><a href="/openchannelflow.html">Open Channel Flow</a><a href="/pipescheduletool.html">Pipe Schedule & Stress</a><a href="/pump-head.html">Pump Head</a><a href="/shaft-power-torque.html">Shaft Power & Torque</a><a href="/steam-table.html">Steam Table</a><a href="/vibrationanalysis.html">Vibration Analysis</a></div><div><a href="/air-flow-duct.html">Air Flow Duct Sizing</a><a href="/beam-deflection.html">Beam Deflection</a><a href="/bernoulli-equation.html">Bernoulli Equation</a><a href="/chiller-capacity.html">Chiller Capacity</a><a href="/cooling-tower-sizing.html">Cooling Tower Sizing</a><a href="/darcy-weisbach.html">Darcy-Weisbach</a><a href="/finned-tube-heat-transfer.html">Finned Tube Heat</a><a href="/furnace-heat-duty.html">Furnace Heat Duty</a><a href="/gear-design.html">Gear Design</a><a href="/heat-loss-pipes.html">Heat Loss Pipes</a><a href="/jacketed-vessel-heat-transfer.html">Jacketed Vessel</a><a href="/metalweight.html">Metal Weight Calculator</a><a href="/nptbspthreadcalculator.html">NPT/BSP Threads</a><a href="/overall-heat-transfer.html">Overall Heat Transfer</a><a href="/pipe-stress-flexibility.html">Pipe Stress</a><a href="/pump-power.html">Pump Power</a><a href="/specific-heat-enthalpy.html">Specific Heat</a><a href="/storage-tank-volume.html">Storage Tank Volume</a><a href="/weldingstress.html">Welding Stress</a></div><div><a href="/allowable-stress-safety-factor.html">Allowable Stress</a><a href="/bearinglife.html">Bearing Life Calculator</a><a href="/boiler-efficiency.html">Boiler Efficiency</a><a href="/compressor-power.html">Compressor Power</a><a href="/corrosion-rate.html">Corrosion Rate</a><a href="/fan-laws.html">Fan Laws</a><a href="/foundation.html">Foundation Design</a><a href="/gas-laws.html">Gas Laws</a><a href="/hardness.html">Hardness Converter</a><a href="/conduction-convection-radiation.html">Heat Transfer Modes</a><a href="/machining.html">Machining Calculator</a><a href="/momentofinertia.html">Moment of Inertia</a><a href="/oring.html">O-Ring Sizing</a><a href="/pipe-flow.html">Pipe Flow Calculator</a><a href="/psychrometric.html">Psychrometric Calc</a><a href="/reynolds-number.html">Reynolds Number</a><a href="/spring.html">Spring Design</a><a href="/thermal-expansion.html">Thermal Expansion</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexmech.html" class="view-all-link">View All Mechanical Tools â†’</a>
            </div>
        </div>
    </li>
                        <li><a href="/index.html#articles">Articles</a></li>
                        <li><a href="/sitemap2.html">Site Map</a></li>
                    </ul>

                    <div class="theme-toggle">
                        <i class="fas fa-sun icon"></i>
                        <label class="switch">
                            <input type="checkbox" id="theme-switch">
                            <span class="slider"></span>
                        </label>
                        <i class="fas fa-moon icon"></i>
                    </div>
                </div>
            </nav>
    </header>

    <main class="container">
        <!-- Back button removed as requested -->
                
        <div class="card">
            <h2><i class="fas fa-lightbulb"></i> Lighting Load Calculator</h2>
                        
            <div class="tool-description">
                <p>This calculator assists electrical engineers in determining illumination requirements, luminaire spacing, and estimating lighting circuit loads for various indoor and outdoor spaces. It provides guidance based on common lighting design principles and international standards.</p>
                <p style="font-weight: bold; color: var(--danger);">Disclaimer: This tool provides preliminary calculations for guidance only. Actual lighting design requires detailed photometric analysis, consideration of specific luminaire data, and adherence to local codes and project-specific requirements. Always consult relevant standards and qualified lighting designers or engineers for final designs.</p>
            </div>
                    
            <div class="calculator-form">
                <form id="lighting-calculator-form">
                    <!-- Area Details -->
                    <div class="form-section fade-in">
                        <h3>Area Details</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="area-type">Area Type / Application <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select the type of area or specific lighting application. This influences recommended illuminance levels and relevant inputs.</span></span></label>
                                <select id="area-type" required>
                                    <option value="office_general">Office - General Work Area</option>
                                    <option value="office_drawing">Office - Drawing/CAD Work</option>
                                    <option value="warehouse_storage">Warehouse - General Storage</option>
                                    <option value="warehouse_aisle">Warehouse - Aisle (High Rack)</option>
                                    <option value="industrial_shed_general">Industrial Shed - General</option>
                                    <option value="industrial_shed_fine_work">Industrial Shed - Fine Work</option>
                                    <option value="industrial_laboratory">Industrial - Laboratory</option>
                                    <option value="industrial_workshop">Industrial - Workshop</option>
                                    <option value="industrial_plant_area">Industrial - Plant Area (General)</option>
                                    <option value="retail_store_general">Retail Store - General</option>
                                    <option value="retail_store_display">Retail Store - Display Area</option>
                                    <option value="residential_living_room">Residential - Living Room</option>
                                    <option value="residential_kitchen">Residential - Kitchen</option>
                                    <option value="residential_bedroom">Residential - Bedroom</option>
                                    <option value="outdoor_pathway">Outdoor - Pathway/Walkway</option>
                                    <option value="outdoor_parking">Outdoor - Parking Area</option>
                                    <option value="outdoor_road">Outdoor - Road/Street Lighting</option>
                                    <option value="outdoor_security">Outdoor - Security Lighting (Perimeter)</option>
                                    <option value="fire_station_apparatus_bay">Fire Station - Apparatus Bay</option>
                                    <option value="emergency_exit">Emergency - Exit Route</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="room-length">Area Length (m) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The longest dimension of the area in meters.</span></span></label>
                                <input type="number" id="room-length" step="0.1" min="1" value="10" required>
                            </div>
                            <div class="form-group">
                                <label for="room-width">Area Width (m) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The shortest dimension of the area in meters.</span></span></label>
                                <input type="number" id="room-width" step="0.1" min="1" value="8" required>
                            </div>
                            <div class="form-group" id="room-height-group">
                                <label for="room-height">Room Height (m) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The height from the floor to the ceiling in meters (for indoor areas).</span></span></label>
                                <input type="number" id="room-height" step="0.1" min="2" value="3" required>
                            </div>
                            <div class="form-group" id="mounting-height-group">
                                <label for="mounting-height">Luminaire Mounting Height (m) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The height from the floor (or ground) to the bottom of the luminaire. Crucial for spacing and uniformity.</span></span></label>
                                <input type="number" id="mounting-height" step="0.1" min="1" value="2.7" required>
                            </div>
                            <div class="form-group" id="pole-height-group" style="display: none;">
                                <label for="pole-height">Pole Height (m) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The height of the lighting pole from the ground (for outdoor areas).</span></span></label>
                                <input type="number" id="pole-height" step="0.1" min="3" value="8" required>
                            </div>
                            <div class="form-group">
                                <label for="working-plane-height">Working Plane Height (m) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The height above the floor/ground where the main task is performed (e.g., desk height, ground level for outdoor). Typical: 0.75m - 0.85m for indoor tasks, 0m for outdoor.</span></span></label>
                                <input type="number" id="working-plane-height" step="0.01" min="0" value="0.8" required>
                            </div>
                            <div class="form-group">
                                <label for="light-loss-factor">Light Loss Factor (LLF) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Combines lamp lumen depreciation, luminaire dirt depreciation, and other factors. Accounts for light reduction over time. Typical: 0.65 - 0.85.</span></span></label>
                                <input type="number" id="light-loss-factor" step="0.01" min="0.5" max="1.0" value="0.8" required>
                            </div>
                        </div>
                    </div>
                    <!-- Surface Reflectances (Indoor Only) -->
                    <div class="form-section fade-in" id="reflectance-section">
                        <h3>Surface Reflectances (%) (Indoor Areas)</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ceiling-reflectance">Ceiling Reflectance (%) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Percentage of light reflected by the ceiling surface. Typical: 70-90% for white/light colors.</span></span></label>
                                <input type="number" id="ceiling-reflectance" step="1" min="0" max="100" value="80" required>
                            </div>
                            <div class="form-group">
                                <label for="wall-reflectance">Wall Reflectance (%) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Percentage of light reflected by the wall surfaces. Typical: 50-70% for light colors.</span></span></label>
                                <input type="number" id="wall-reflectance" step="1" min="0" max="100" value="60" required>
                            </div>
                            <div class="form-group">
                                <label for="floor-reflectance">Floor Reflectance (%) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Percentage of light reflected by the floor surface. Typical: 20-30% for medium colors.</span></span></label>
                                <input type="number" id="floor-reflectance" step="1" min="0" max="100" value="20" required>
                            </div>
                        </div>
                    </div>
                    <!-- Illumination Requirements & Luminaire Details -->
                    <div class="form-section fade-in">
                        <h3>Illumination & Luminaire Details</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="required-illuminance">Required Illuminance (Lux) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The average illuminance level required on the working plane. This value is suggested based on Area Type, but can be adjusted.</span></span></label>
                                <input type="number" id="required-illuminance" step="1" min="1" value="500" required>
                            </div>
                            <div class="form-group">
                                <label for="luminaire-type">Luminaire Type <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select a common luminaire type. This influences typical Coefficient of Utilization (CU) values and general application.</span></span></label>
                                <select id="luminaire-type" required>
                                    <option value="led_panel">LED Panel (Recessed/Surface)</option>
                                    <option value="fluorescent_troffer">Fluorescent Troffer (Recessed)</option>
                                    <option value="led_downlight">LED Downlight</option>
                                    <option value="high_bay_led">High Bay LED (Industrial/Warehouse)</option>
                                    <option value="linear_fluorescent">Linear Fluorescent (Suspended)</option>
                                    <option value="outdoor_area_light">Outdoor Area/Street Light</option>
                                    <option value="floodlight">Floodlight (Security/Facade)</option>
                                    <option value="residential_fixture">Residential Fixture (General)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="luminaire-distribution">Luminaire Light Distribution <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Describes how light is spread from the luminaire. Important for uniformity and spacing.</span></span></label>
                                <select id="luminaire-distribution" required>
                                    <option value="general">General/Symmetric</option>
                                    <option value="narrow">Narrow Beam</option>
                                    <option value="wide">Wide Beam</option>
                                    <option value="asymmetric">Asymmetric</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="luminous-flux-per-luminaire">Luminous Flux per Luminaire (lm) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Total light output (lumens) from a single luminaire. Obtain from manufacturer's datasheet.</span></span></label>
                                <input type="number" id="luminous-flux-per-luminaire" step="1" min="1" value="3500" required>
                            </div>
                            <div class="form-group">
                                <label for="wattage-per-luminaire">Wattage per Luminaire (W) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Electrical power consumption of a single luminaire in Watts. Obtain from manufacturer's datasheet.</span></span></label>
                                <input type="number" id="wattage-per-luminaire" step="0.1" min="1" value="30" required>
                            </div>
                            <div class="form-group">
                                <label for="luminaire-power-factor">Luminaire Power Factor (PF) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Electrical power factor of the luminaire. Typical: 0.9 - 0.99 for modern LED drivers.</span></span></label>
                                <input type="number" id="luminaire-power-factor" step="0.01" min="0.5" max="1.0" value="0.95" required>
                            </div>
                        </div>
                    </div>
                    <!-- Electrical System Details -->
                    <div class="form-section fade-in">
                        <h3>Electrical System Details</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="supply-voltage">Supply Voltage (V) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Nominal line-to-neutral or line-to-line voltage of the electrical supply.</span></span></label>
                                <input type="number" id="supply-voltage" step="1" min="100" value="230" required>
                            </div>
                            <div class="form-group">
                                <label for="phase-type">Phase Type <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select single-phase or three-phase supply for load calculation.</span></span></label>
                                <select id="phase-type" required>
                                    <option value="single_phase">Single Phase</option>
                                    <option value="three_phase">Three Phase</option>
                                </select>
                            </div>
                             <div class="form-group">
                                <label for="diversity-factor">Diversity Factor (%) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The ratio of the sum of the maximum demands of the sub-circuits to the maximum demand of the main circuit. Accounts for non-simultaneous use of all lights. Typical: 80-100%.</span></span></label>
                                <input type="number" id="diversity-factor" step="1" min="50" max="100" value="100" required>
                            </div>
                        </div>
                    </div>
                    <div class="button-wrapper">
                        <button type="button" id="calculate-btn" class="btn calculate"><i class="fas fa-calculator"></i> Calculate Load</button>
                        <button type="button" id="reset-form-btn" class="btn reset"><i class="fas fa-sync-alt"></i> Reset Form</button>
                    </div>
                </form>
            </div>
        </div>
                        
        <!-- Results Container -->
        <div id="result-container" class="result-container">
            <h3><i class="fas fa-clipboard-check"></i> Calculated Lighting Parameters</h3>
            <div id="calculation-details">
                <!-- Calculation steps will be inserted here -->
            </div>
            <table class="result-table">
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Calculated Value</th>
                        <th>Unit</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody id="result-table-body">
                    <!-- Results will be dynamically inserted here -->
                </tbody>
            </table>
            <div style="display: flex; justify-content: center; margin-top: 20px;">
                <button type="button" id="clear-results-btn" class="btn clear"><i class="fas fa-times-circle"></i> Clear Results</button>
            </div>
            <div class="standard-reference" id="standard-reference" style="margin-top: 25px;">
                <!-- Standard reference text will be inserted here -->
            </div>
        </div>

        <!-- NEWLY ADDED STATIC EDUCATIONAL SECTION -->
        <div class="card education-section">
            <h2><i class="fas fa-book-reader"></i> Professional Insights: The Science of Lighting Design</h2>
            <p>Professional lighting design is a comprehensive discipline that balances human-centric needs (comfort, safety, aesthetics) with technical requirements (energy efficiency, maintenance, cost). This calculator uses the foundational **Lumen Method** (or Zonal Cavity Method) to provide a robust preliminary estimate for general illumination, which is the first and most critical step in any lighting load calculation.</p>

            <h3>The Lumen Method Explained</h3>
            <p>The goal of the Lumen Method is to determine the total number of luminaires (light fixtures) required to achieve a target average illuminance (brightness, measured in Lux) over a specific area. The core formula is:</p>
            <p style="text-align:center; font-size: 1.2rem; font-family: 'Times New Roman', serif;">
                <em>Total Lumens Required = (Illuminance × Area) / (CU × LLF)</em>
            </p>
            <p>Here is what each component means:</p>
            <ul>
                <li><strong>Illuminance (E, in Lux):</strong> This is your target brightness. It is the amount of light (lumens) falling on a one-square-meter surface. This value is dictated by standards like <strong>ISO 8995-1 / CIE S 008/E</strong> or the <strong>IES Lighting Handbook</strong>, which specify required lux levels for different tasks (e.g., 500 lux for an office, 100 lux for a storage area).</li>
                <li><strong>Area (A, in m²):</strong> The simple floor area of the space you are lighting.</li>
                <li><strong>Coefficient of Utilization (CU):</strong> This is the most complex variable. It represents the efficiency of the lighting system in getting light from the luminaire to the working plane. It is a value between 0 and 1 and depends on:
                    <ul>
                        <li><strong>Luminaire Efficiency & Distribution:</strong> How much light escapes the fixture and in what direction.</li>
                        <li><strong>Room Geometry (Room Cavity Ratio - RCR):</strong> A tall, narrow room (high RCR) is very inefficient, as most light hits the walls. A wide, short room (low RCR) is very efficient, as most light goes directly to the floor.</li>
                        <li><strong>Surface Reflectances:</strong> Bright white ceilings (80% reflectance) and light-colored walls (60-70%) bounce light back to the working plane, *increasing* the CU. Dark surfaces absorb light, lowering the CU and requiring more fixtures for the same brightness.</li>
                    </ul>
                </li>
                <li><strong>Light Loss Factor (LLF):</strong> This is a critical maintenance factor. A brand-new luminaire is brighter than it will be in 3 years. The LLF (a value less than 1, e.g., 0.8) accounts for this depreciation. It ensures your design *still* meets the required 500 lux at the *end* of its maintenance cycle. It includes:
                    <ul>
                        <li><strong>Lamp Lumen Depreciation (LLD):</strong> The gradual fading of the light source over time.</li>
                        <li><strong>Luminaire Dirt Depreciation (LDD):</strong> The accumulation of dust and dirt on the fixture, which blocks light.</li>
                    </ul>
                </li>
            </ul>

            <h3>Beyond Average: Uniformity and Glare</h3>
            <p>A successful design is not just about the *average* lux. Two other factors are critical for comfort and safety:</p>
            <ul>
                <li><strong>Uniformity (Uo):</strong> This is the ratio of minimum illuminance to average illuminance (E_min / E_avg). An office with an average of 500 lux is useless if it has 1000 lux under the lights and 100 lux in the corners. This creates eye strain and shadows. A good uniformity (e.g., Uo > 0.7) ensures the light is spread evenly. This is controlled by the **luminaire spacing (S)** relative to its **mounting height (H)**, known as the **S/H Ratio**.</li>
                <li><strong>Glare (UGR):</strong> Discomfort from a light source being too bright is known as glare. In offices, this is measured by the <strong>Unified Glare Rating (UGR)</strong>. A low UGR (e.g., < 19 for an office) is essential for visual comfort and productivity. This is achieved by selecting low-glare luminaires and placing them correctly.</li>
            </ul>

            <h3>Energy Efficiency & Electrical Load</h3>
            <p>Modern lighting design is heavily regulated by energy codes (like <strong>ASHRAE 90.1</strong>) that limit the amount of power that can be used for lighting. This is measured in **Lighting Power Density (LPD)**, or Watts per square meter (W/m²).</p>
            <p>Once the total number of fixtures is known, the electrical load is calculated:</p>
            <ol>
                <li><strong>Total Real Power (W):</strong> No. of Luminaires × Watts per Luminaire</li>
                <li><strong>Total Apparent Power (VA):</strong> Total Real Power / Luminaire Power Factor</li>
                <li><strong>Total Current (A):</strong> Total Apparent Power / Voltage (or / (Voltage × √3) for 3-phase)</li>
            </ol>
            <p>This final current value is what determines the size of your circuit breakers and cables, completing the design from a visual and electrical perspective.</p>
        </div>
    </main>

    <!-- New Footer from perfect.txt -->
        <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <a href="/" class="footer-logo">
                        <img src="logo.png" alt="Design Calculators Logo" loading="lazy" decoding="async">
                        <span class="footer-logo-text">Design Calculators</span>
                    </a>
                    <p class="footer-description">A comprehensive engineering calculator hub based on IEC, IEEE, and
                        global standards.</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn linkedin"
                            aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer"
                            class="social-btn youtube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in&text=Check%20out%20this%20amazing%20engineering%20calculator%20hub!"
                            target="_blank" rel="noopener noreferrer" class="social-btn twitter" aria-label="Twitter"><i
                                class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn facebook"
                            aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn whatsapp"
                            aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="footer-col">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href='/indexele.html'>Electrical Tools</a></li>
                            <li><a href='/indexmech.html'>Mechanical Tools</a></li>
                            <li><a href='/indexinst.html'>Instrumentation Tools</a></li>
                            <li><a href='/about.html'>About Us</a></li>
                            <li><a href='/faq.html'>FAQ</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Learn More</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/@designcalculators" target="_blank"
                                    rel="noopener noreferrer">YouTube Channel</a></li>
                            <li><a href='/contact.html'>Contact Us</a></li>
                            <li><a href='/privacy-policy.html'>Privacy Policy</a></li>
                            <li><a href='/terms-of-service.html'>Terms of Service</a></li>
                            <li><a href='/sitemap2.html'>Sitemap</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Our Network</h4>
                        <ul>
                            <li style="margin-bottom: 12px;">
                                <a href="https://reliabilitytools.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">Reliability Tools</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Reliability
                                    & maintenance engineering calculators.</span>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="https://electrosafe.homes/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">ElectroSafe</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Dedicated
                                    to home electrical safety & protection.</span>
                            </li>
                            <li>
                                <a href="https://knowyourname.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">KnowYourName</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Scientific
                                    name analysis: Phonetics, Ergonomics & Acoustics.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>All calculations are for preliminary engineering design guidance. Final designs must comply with all applicable local and international standards (including but not limited to ASHRAE 90.1, ARI 550/590). Always verify calculations and consult with a licensed professional engineer before implementation or construction.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">Anil Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>
        
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- UI ELEMENT REFERENCES ---
            const areaTypeInput = document.getElementById('area-type');
            const roomLengthInput = document.getElementById('room-length');
            const roomWidthInput = document.getElementById('room-width');
            const roomHeightInput = document.getElementById('room-height');
            const mountingHeightInput = document.getElementById('mounting-height');
            const poleHeightInput = document.getElementById('pole-height');
            const workingPlaneHeightInput = document.getElementById('working-plane-height');
            const lightLossFactorInput = document.getElementById('light-loss-factor');
            const ceilingReflectanceInput = document.getElementById('ceiling-reflectance');
            const wallReflectanceInput = document.getElementById('wall-reflectance');
            const floorReflectanceInput = document.getElementById('floor-reflectance');
            const requiredIlluminanceInput = document.getElementById('required-illuminance');
            const luminaireTypeInput = document.getElementById('luminaire-type');
            const luminaireDistributionInput = document.getElementById('luminaire-distribution');
            const luminousFluxPerLuminaireInput = document.getElementById('luminous-flux-per-luminaire');
            const wattagePerLuminaireInput = document.getElementById('wattage-per-luminaire');
            const luminairePowerFactorInput = document.getElementById('luminaire-power-factor');
            const supplyVoltageInput = document.getElementById('supply-voltage');
            const phaseTypeInput = document.getElementById('phase-type');
            const diversityFactorInput = document.getElementById('diversity-factor');
            
            const roomHeightGroup = document.getElementById('room-height-group');
            const mountingHeightGroup = document.getElementById('mounting-height-group');
            const poleHeightGroup = document.getElementById('pole-height-group');
            const reflectanceSection = document.getElementById('reflectance-section');
            
            const calculateBtn = document.getElementById('calculate-btn');
            const resetFormBtn = document.getElementById('reset-form-btn');
            const clearResultsBtn = document.getElementById('clear-results-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const standardReference = document.getElementById('standard-reference');
            const calculationDetailsDiv = document.getElementById('calculation-details');
            const emailShareBtn = document.getElementById('email-share-btn'); 

            // --- DEFAULTS & DATABASE ---
            const defaultValues = {
                'area-type': 'office_general',
                'room-length': 10,
                'room-width': 8,
                'room-height': 3,
                'mounting-height': 2.7,
                'pole-height': 8,
                'working-plane-height': 0.8,
                'light-loss-factor': 0.8,
                'ceiling-reflectance': 80,
                'wall-reflectance': 60,
                'floor-reflectance': 20,
                'required-illuminance': 500,
                'luminaire-type': 'led_panel',
                'luminaire-distribution': 'general',
                'luminous-flux-per-luminaire': 3500,
                'wattage-per-luminaire': 30,
                'luminaire-power-factor': 0.95,
                'supply-voltage': 230,
                'phase-type': 'single_phase',
                'diversity-factor': 100
            };

            const recommendedIlluminance = {
                'office_general': 500, 'office_drawing': 750, 'warehouse_storage': 100,
                'warehouse_aisle': 200, 'industrial_shed_general': 200, 'industrial_shed_fine_work': 500,
                'industrial_laboratory': 500, 'industrial_workshop': 300, 'industrial_plant_area': 150,
                'retail_store_general': 300, 'retail_store_display': 750, 'residential_living_room': 150,
                'residential_kitchen': 300, 'residential_bedroom': 100, 'outdoor_pathway': 20,
                'outdoor_parking': 50, 'outdoor_road': 30, 'outdoor_security': 100,
                'fire_station_apparatus_bay': 300, 'emergency_exit': 50
            };
            
            const cuLookupTable = {
                "general": {
                    "H_H_M": [0.80, 0.75, 0.70, 0.65, 0.60, 0.55, 0.50, 0.45, 0.40, 0.35],
                    "H_H_L": [0.78, 0.73, 0.68, 0.63, 0.58, 0.53, 0.48, 0.43, 0.38, 0.33],
                    "H_M_M": [0.75, 0.70, 0.65, 0.60, 0.55, 0.50, 0.45, 0.40, 0.35, 0.30],
                    "H_M_L": [0.73, 0.68, 0.63, 0.58, 0.53, 0.48, 0.43, 0.38, 0.33, 0.28],
                    "M_M_M": [0.70, 0.65, 0.60, 0.55, 0.50, 0.45, 0.40, 0.35, 0.30, 0.25],
                    "M_M_L": [0.68, 0.63, 0.58, 0.53, 0.48, 0.43, 0.38, 0.33, 0.28, 0.23],
                    "L_L_L": [0.60, 0.55, 0.50, 0.45, 0.40, 0.35, 0.30, 0.25, 0.20, 0.15],
                },
                "narrow": {
                    "H_H_M": [0.70, 0.65, 0.60, 0.55, 0.50, 0.45, 0.40, 0.35, 0.30, 0.25],
                    "H_M_M": [0.65, 0.60, 0.55, 0.50, 0.45, 0.40, 0.35, 0.30, 0.25, 0.20],
                    "M_M_M": [0.60, 0.55, 0.50, 0.45, 0.40, 0.35, 0.30, 0.25, 0.20, 0.15],
                    "L_L_L": [0.50, 0.45, 0.40, 0.35, 0.30, 0.25, 0.20, 0.15, 0.10, 0.05],
                },
                "wide": {
                    "H_H_M": [0.82, 0.78, 0.73, 0.68, 0.63, 0.58, 0.53, 0.48, 0.43, 0.38],
                    "H_M_M": [0.77, 0.72, 0.67, 0.62, 0.57, 0.52, 0.47, 0.42, 0.37, 0.32],
                    "M_M_M": [0.72, 0.67, 0.62, 0.57, 0.52, 0.47, 0.42, 0.37, 0.32, 0.27],
                    "L_L_L": [0.62, 0.57, 0.52, 0.47, 0.42, 0.37, 0.32, 0.27, 0.22, 0.17],
                },
                "asymmetric": {
                    "H_H_M": [0.60, 0.55, 0.50, 0.45, 0.40, 0.35, 0.30, 0.25, 0.20, 0.15],
                    "H_M_M": [0.55, 0.50, 0.45, 0.40, 0.35, 0.30, 0.25, 0.20, 0.15, 0.10],
                    "M_M_M": [0.50, 0.45, 0.40, 0.35, 0.30, 0.25, 0.20, 0.15, 0.10, 0.05],
                }
            };

            const typicalUniformityMinAvg = {
                'office_general': 0.7, 'office_drawing': 0.8, 'warehouse_storage': 0.3,
                'warehouse_aisle': 0.4, 'industrial_shed_general': 0.5, 'industrial_shed_fine_work': 0.7,
                'industrial_laboratory': 0.7, 'industrial_workshop': 0.6, 'industrial_plant_area': 0.4,
                'retail_store_general': 0.6, 'retail_store_display': 0.7, 'residential_living_room': 0.4,
                'residential_kitchen': 0.6, 'residential_bedroom': 0.3, 'outdoor_pathway': 0.25,
                'outdoor_parking': 0.3, 'outdoor_road': 0.35, 'outdoor_security': 0.2,
                'fire_station_apparatus_bay': 0.6, 'emergency_exit': 0.2
            };

            // --- HELPER FUNCTIONS ---
            
            function addResultRow(parameter, value, unit, notes = '') {
                const row = resultTableBody.insertRow();
                row.insertCell().innerHTML = parameter;
                row.insertCell().innerHTML = value;
                row.insertCell().innerHTML = unit;
                row.insertCell().innerHTML = notes;
            }

            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    document.body.appendChild(messageBox);
                }
                
                messageBox.textContent = message;
                
                if (type === "error") {
                    messageBox.style.backgroundColor = 'var(--danger)';
                } else if (type === "warning") {
                    messageBox.style.backgroundColor = 'var(--warning)';
                    messageBox.style.color = 'var(--heading)'; // Use dark text on yellow
                } else {
                    messageBox.style.backgroundColor = 'var(--success)';
                    messageBox.style.color = 'white';
                }
                
                messageBox.classList.add('show');

                if (messageBox.timeoutId) {
                    clearTimeout(messageBox.timeoutId);
                }
                messageBox.timeoutId = setTimeout(() => {
                    messageBox.classList.remove('show');
                }, 4000);
            }

            function clearResults() {
                resultContainer.classList.remove('show');
                setTimeout(() => {
                    if (!resultContainer.classList.contains('show')) {
                        resultTableBody.innerHTML = '';
                        calculationDetailsDiv.innerHTML = '';
                        standardReference.innerHTML = '';
                        resultContainer.style.display = 'none';
                    }
                }, 500);
                displayMessage("Results cleared.", "info");
            }

            function resetForm() {
                for (const key in defaultValues) {
                    const element = document.getElementById(key);
                    if (element) {
                        element.value = defaultValues[key];
                    }
                }
                updateInputFieldsVisibility();
                if (resultContainer.classList.contains('show')) {
                    clearResults();
                }
                displayMessage("Form reset to default values.", "info");
            }

            function updateInputFieldsVisibility() {
                const areaType = areaTypeInput.value;
                const isOutdoor = areaType.startsWith('outdoor_') || areaType === 'emergency_exit' || areaType === 'fire_station_apparatus_bay';
                const isResidential = areaType.startsWith('residential_');

                requiredIlluminanceInput.value = recommendedIlluminance[areaType] || 500;

                if (isOutdoor) {
                    roomHeightGroup.style.display = 'none';
                    roomHeightInput.removeAttribute('required');
                    mountingHeightGroup.style.display = 'none';
                    mountingHeightInput.removeAttribute('required');
                    poleHeightGroup.style.display = 'block';
                    poleHeightInput.setAttribute('required', 'true');
                    reflectanceSection.style.display = 'none';
                    ceilingReflectanceInput.removeAttribute('required');
                    wallReflectanceInput.removeAttribute('required');
                    floorReflectanceInput.removeAttribute('required');
                    workingPlaneHeightInput.value = (areaType === 'fire_station_apparatus_bay') ? 0.8 : 0;
                } else {
                    roomHeightGroup.style.display = 'block';
                    roomHeightInput.setAttribute('required', 'true');
                    mountingHeightGroup.style.display = 'block';
                    mountingHeightInput.setAttribute('required', 'true');
                    poleHeightGroup.style.display = 'none';
                    poleHeightInput.removeAttribute('required');
                    reflectanceSection.style.display = 'block';
                    ceilingReflectanceInput.setAttribute('required', 'true');
                    wallReflectanceInput.setAttribute('required', 'true');
                    floorReflectanceInput.setAttribute('required', 'true');
                    workingPlaneHeightInput.value = defaultValues['working-plane-height'];
                }

                const currentLuminaireType = luminaireTypeInput.value;
                luminaireTypeInput.innerHTML = ''; 
                let options = [];
                if (isOutdoor) {
                    options = [
                        { value: 'outdoor_area_light', text: 'Outdoor Area/Street Light' },
                        { value: 'floodlight', text: 'Floodlight (Security/Facade)' },
                        { value: 'high_bay_led', text: 'High Bay LED (High Pole)' },
                        { value: 'residential_fixture', text: 'Residential Fixture (Outdoor)' }
                    ];
                } else if (isResidential) {
                     options = [
                        { value: 'residential_fixture', text: 'Residential Fixture (General)' },
                        { value: 'led_downlight', text: 'LED Downlight' },
                        { value: 'led_panel', text: 'LED Panel (Recessed/Surface)' }
                    ];
                } else {
                    options = [
                        { value: 'led_panel', text: 'LED Panel (Recessed/Surface)' },
                        { value: 'fluorescent_troffer', text: 'Fluorescent Troffer (Recessed)' },
                        { value: 'led_downlight', text: 'LED Downlight' },
                        { value: 'high_bay_led', text: 'High Bay LED (Industrial/Warehouse)' },
                        { value: 'linear_fluorescent', text: 'Linear Fluorescent (Suspended)' }
                    ];
                }
                
                let currentTypeExists = false;
                options.forEach(option => {
                    const opt = document.createElement('option');
                    opt.value = option.value;
                    opt.textContent = option.text;
                    luminaireTypeInput.appendChild(opt);
                    if (option.value === currentLuminaireType) {
                        currentTypeExists = true;
                    }
                });

                if (currentTypeExists) {
                    luminaireTypeInput.value = currentLuminaireType;
                } else {
                    luminaireTypeInput.value = options[0].value; // Set to default for the category
                }
            }

            function getReflectanceCategory(rc, rw, rf) {
                let c = (rc >= 70) ? 'H' : (rc >= 50 ? 'M' : 'L');
                let w = (rw >= 70) ? 'H' : (rw >= 50 ? 'M' : 'L');
                let f = (rf >= 20) ? 'M' : 'L';
                
                // Attempt to find specific match
                let key = `${c}_${w}_${f}`;
                if (cuLookupTable.general[key]) return key;
                
                // Fallback: Try with medium floor
                key = `${c}_${w}_M`;
                if (cuLookupTable.general[key]) return key;
                
                // Fallback: Try with medium wall
                key = `${c}_M_${f}`;
                if (cuLookupTable.general[key]) return key;
                
                // Fallback: Try with medium wall & floor
                key = `${c}_M_M`;
                if (cuLookupTable.general[key]) return key;
                
                // Absolute Fallback
                return "M_M_L";
            }

            function getCoefficientOfUtilization(luminaireType, luminaireDistribution, ceilingReflectance, wallReflectance, floorReflectance, roomCavityRatio, isOutdoor) {
                if (isOutdoor) {
                    const outdoorCU = {
                        'outdoor_area_light': 0.45,
                        'floodlight': 0.35,
                        'high_bay_led': 0.60,
                        'residential_fixture': 0.40
                    };
                    return outdoorCU[luminaireType] || 0.4; // Fallback
                }

                const rcrIndex = Math.min(Math.floor(roomCavityRatio), 9);
                const reflectanceCategory = getReflectanceCategory(ceilingReflectance, wallReflectance, floorReflectance);
                
                let cuValues = cuLookupTable[luminaireDistribution]?.[reflectanceCategory];
                if (!cuValues) {
                    // Fallback if specific distribution or reflectance not found
                    cuValues = cuLookupTable["general"]["M_M_L"]; 
                }
                
                let cu = cuValues[rcrIndex];
                
                // Adjust based on luminaire type
                const typeAdjust = {
                    'led_panel': 1.0, 'fluorescent_troffer': 1.0,
                    'led_downlight': 0.9, 'high_bay_led': 1.05,
                    'linear_fluorescent': 0.98, 'residential_fixture': 0.85
                };
                cu *= (typeAdjust[luminaireType] || 1.0);

                return Math.max(0.1, Math.min(0.9, cu)); // Clamp value
            }

            // --- MAIN CALCULATION FUNCTION ---
            function calculateLightingLoad() {
                try {
                    // Clear previous results
                    resultTableBody.innerHTML = '';
                    calculationDetailsDiv.innerHTML = '';
                    standardReference.innerHTML = '';

                    // 1. Get and Validate Inputs
                    const areaType = areaTypeInput.value;
                    const roomLength = parseFloat(roomLengthInput.value);
                    const roomWidth = parseFloat(roomWidthInput.value);
                    const roomHeight = parseFloat(roomHeightInput.value);
                    const mountingHeight = parseFloat(mountingHeightInput.value);
                    const poleHeight = parseFloat(poleHeightInput.value);
                    const workingPlaneHeight = parseFloat(workingPlaneHeightInput.value);
                    const lightLossFactor = parseFloat(lightLossFactorInput.value);
                    const ceilingReflectance = parseFloat(ceilingReflectanceInput.value);
                    const wallReflectance = parseFloat(wallReflectanceInput.value);
                    const floorReflectance = parseFloat(floorReflectanceInput.value);
                    const requiredIlluminance = parseFloat(requiredIlluminanceInput.value);
                    const luminaireType = luminaireTypeInput.value;
                    const luminaireDistribution = luminaireDistributionInput.value;
                    const luminousFluxPerLuminaire = parseFloat(luminousFluxPerLuminaireInput.value);
                    const wattagePerLuminaire = parseFloat(wattagePerLuminaireInput.value);
                    const luminairePowerFactor = parseFloat(luminairePowerFactorInput.value);
                    const supplyVoltage = parseFloat(supplyVoltageInput.value);
                    const phaseType = phaseTypeInput.value;
                    const diversityFactor = parseFloat(diversityFactorInput.value) / 100;
                    
                    const isOutdoor = areaType.startsWith('outdoor_') || areaType === 'emergency_exit' || areaType === 'fire_station_apparatus_bay';

                    // Detailed Validation
                    if (isNaN(roomLength) || roomLength <= 0) throw new Error("Area Length must be a positive number.");
                    if (isNaN(roomWidth) || roomWidth <= 0) throw new Error("Area Width must be a positive number.");
                    if (!isOutdoor && (isNaN(roomHeight) || roomHeight <= 0)) throw new Error("Room Height must be positive for indoor areas.");
                    if (!isOutdoor && (isNaN(mountingHeight) || mountingHeight <= 0 || mountingHeight >= roomHeight)) throw new Error("Mounting Height must be positive and less than Room Height.");
                    if (isOutdoor && (isNaN(poleHeight) || poleHeight <= 0)) throw new Error("Pole Height must be a positive number.");
                    if (isNaN(workingPlaneHeight) || workingPlaneHeight < 0) throw new Error("Working Plane Height must be non-negative.");
                    if (!isOutdoor && workingPlaneHeight >= mountingHeight) throw new Error("Working Plane Height must be below Luminaire Mounting Height.");
                    if (isOutdoor && workingPlaneHeight >= poleHeight) throw new Error("Working Plane Height must be below Pole Height.");
                    if (isNaN(lightLossFactor) || lightLossFactor < 0.5 || lightLossFactor > 1.0) throw new Error("Light Loss Factor must be between 0.5 and 1.0.");
                    if (isNaN(requiredIlluminance) || requiredIlluminance <= 0) throw new Error("Required Illuminance must be positive.");
                    if (isNaN(luminousFluxPerLuminaire) || luminousFluxPerLuminaire <= 0) throw new Error("Luminous Flux must be positive.");
                    if (isNaN(wattagePerLuminaire) || wattagePerLuminaire <= 0) throw new Error("Wattage must be positive.");
                    if (isNaN(luminairePowerFactor) || luminairePowerFactor < 0.5 || luminairePowerFactor > 1.0) throw new Error("Power Factor must be between 0.5 and 1.0.");
                    if (isNaN(supplyVoltage) || supplyVoltage <= 0) throw new Error("Supply Voltage must be positive.");
                    if (isNaN(diversityFactor) || diversityFactor < 0.5 || diversityFactor > 1.0) throw new Error("Diversity Factor must be between 50% and 100%.");

                    let calculationHtml = '<h4><i class="fas fa-tasks"></i> Detailed Calculation Steps:</h4>';
                    calculationHtml += `<p><strong>1. Input Parameters:</strong></p>`;
                    calculationHtml += `<p class="calculation-step">Area: ${roomLength} m (L) x ${roomWidth} m (W)</p>`;
                    
                    // 2. Calculate Area
                    const area = roomLength * roomWidth;
                    calculationHtml += `<p><strong>2. Area Calculation:</strong></p>`;
                    calculationHtml += `<p class="formula">Area = L × W</p>`;
                    calculationHtml += `<p class="calculation-step">Area = ${roomLength} m × ${roomWidth} m = ${area.toFixed(2)} m²</p>`;

                    // 3. RCR and CU
                    let h_effective, roomCavityRatio = 0, coefficientOfUtilization;
                    if (!isOutdoor) {
                        h_effective = mountingHeight - workingPlaneHeight;
                        if (h_effective <= 0) throw new Error("Effective Mounting Height must be positive.");
                        roomCavityRatio = (5 * h_effective * (roomLength + roomWidth)) / area;
                        calculationHtml += `<p><strong>3. Room Cavity Ratio (RCR) Calculation (Indoor):</strong></p>`;
                        calculationHtml += `<p class="formula">h<sub>eff</sub> = Mounting Height - Working Plane</p>`;
                        calculationHtml += `<p class="calculation-step">h<sub>eff</sub> = ${mountingHeight} m - ${workingPlaneHeight} m = ${h_effective.toFixed(2)} m</p>`;
                        calculationHtml += `<p class="formula">RCR = (5 × h<sub>eff</sub> × (L + W)) / (L × W)</p>`;
                        calculationHtml += `<p class="calculation-step">RCR = (5 × ${h_effective.toFixed(2)} × (${roomLength} + ${roomWidth})) / ${area.toFixed(2)} = ${roomCavityRatio.toFixed(2)}</p>`;
                    } else {
                        h_effective = poleHeight - workingPlaneHeight;
                        if (h_effective <= 0) throw new Error("Effective Mounting Height must be positive.");
                        calculationHtml += `<p><strong>3. Effective Mounting Height (h<sub>eff</sub>) (Outdoor):</strong></p>`;
                        calculationHtml += `<p class="formula">h<sub>eff</sub> = Pole Height - Working Plane</p>`;
                        calculationHtml += `<p class="calculation-step">h<sub>eff</sub> = ${poleHeight} m - ${workingPlaneHeight} m = ${h_effective.toFixed(2)} m</p>`;
                    }

                    coefficientOfUtilization = getCoefficientOfUtilization(luminaireType, luminaireDistribution, ceilingReflectance, wallReflectance, floorReflectance, roomCavityRatio, isOutdoor);
                    calculationHtml += `<p><strong>4. Coefficient of Utilization (CU) Estimation:</strong></p>`;
                    calculationHtml += `<p class="calculation-step">Estimated CU based on inputs: ${coefficientOfUtilization.toFixed(3)}</p>`;

                    // 5. Calculate Total Required Lumens
                    const totalLumensRequired = (requiredIlluminance * area) / (coefficientOfUtilization * lightLossFactor);
                    calculationHtml += `<p><strong>5. Total Lumens Required Calculation:</strong></p>`;
                    calculationHtml += `<p class="formula">Total Lumens = (Illuminance × Area) / (CU × LLF)</p>`;
                    calculationHtml += `<p class="calculation-step">Total Lumens = (${requiredIlluminance} Lux × ${area.toFixed(2)} m²) / (${coefficientOfUtilization.toFixed(3)} × ${lightLossFactor}) = ${totalLumensRequired.toFixed(2)} lm</p>`;

                    // 6. Calculate Number of Luminaires
                    const numberOfLuminaires = Math.ceil(totalLumensRequired / luminousFluxPerLuminaire);
                    calculationHtml += `<p><strong>6. Number of Luminaires Required:</strong></p>`;
                    calculationHtml += `<p class="formula">No. of Luminaires = Ceiling(Total Lumens / Lumens per Luminaire)</p>`;
                    calculationHtml += `<p class="calculation-step">No. of Luminaires = Ceiling(${totalLumensRequired.toFixed(2)} / ${luminousFluxPerLuminaire}) = ${numberOfLuminaires}</p>`;

                    // 7. Calculate Spacing
                    const aspectRatio = roomLength / roomWidth;
                    let numRows = Math.round(Math.sqrt(numberOfLuminaires / aspectRatio));
                    if (numRows === 0) numRows = 1;
                    let numCols = Math.ceil(numberOfLuminaires / numRows);
                    // Re-calculate layout to be more balanced
                    if (numRows * numCols < numberOfLuminaires) {
                         numCols = Math.ceil(numberOfLuminaires / numRows);
                    }
                    const actualNumLuminaires = numRows * numCols;
                    
                    const spacingLength = roomLength / numCols;
                    const spacingWidth = roomWidth / numRows;
                    const spacingToHeightRatioLength = spacingLength / h_effective;
                    const spacingToHeightRatioWidth = spacingWidth / h_effective;

                    calculationHtml += `<p><strong>7. Luminaire Layout & Spacing (Estimated):</strong></p>`;
                    calculationHtml += `<p class="calculation-step">Suggested Layout: ${numRows} Rows × ${numCols} Columns</p>`;
                    calculationHtml += `<p class="calculation-step">Total Luminaires in Layout: ${actualNumLuminaires}</p>`;
                    calculationHtml += `<p class="calculation-step">Spacing (Lengthwise): ${spacingLength.toFixed(2)} m</p>`;
                    calculationHtml += `<p class="calculation-step">Spacing (Widthwise): ${spacingWidth.toFixed(2)} m</p>`;
                    calculationHtml += `<p class="calculation-step">S/H Ratio (Length): ${spacingToHeightRatioLength.toFixed(2)}</p>`;
                    calculationHtml += `<p class="calculation-step">S/H Ratio (Width): ${spacingToHeightRatioWidth.toFixed(2)}</p>`;
                    
                    // 8. Calculate Load
                    const totalLightingLoad_W = actualNumLuminaires * wattagePerLuminaire;
                    const lightingPowerDensity = totalLightingLoad_W / area;
                    calculationHtml += `<p><strong>8. Total Lighting Load & LPD:</strong></p>`;
                    calculationHtml += `<p class="formula">Total Load (W) = Luminaires in Layout × Wattage</p>`;
                    calculationHtml += `<p class="calculation-step">Total Load (W) = ${actualNumLuminaires} × ${wattagePerLuminaire} W = ${totalLightingLoad_W.toFixed(2)} W</p>`;
                    calculationHtml += `<p class="formula">LPD = Total Load / Area</p>`;
                    calculationHtml += `<p class="calculation-step">LPD = ${totalLightingLoad_W.toFixed(2)} W / ${area.toFixed(2)} m² = ${lightingPowerDensity.toFixed(2)} W/m²</p>`;

                    // 9. Calculate Circuit Current
                    let circuitCurrent_A;
                    const totalApparentPower_VA = totalLightingLoad_W / luminairePowerFactor;
                    const diversifiedApparentPower_VA = totalApparentPower_VA * diversityFactor;

                    calculationHtml += `<p><strong>9. Circuit Current (with Diversity):</strong></p>`;
                    calculationHtml += `<p class="formula">VA = Total Load (W) / Power Factor</p>`;
                    calculationHtml += `<p class="calculation-step">Total Apparent Power = ${totalLightingLoad_W.toFixed(2)} W / ${luminairePowerFactor} = ${totalApparentPower_VA.toFixed(2)} VA</p>`;
                    calculationHtml += `<p class="calculation-step">Diversified Apparent Power = ${totalApparentPower_VA.toFixed(2)} VA × ${diversityFactor} = ${diversifiedApparentPower_VA.toFixed(2)} VA</p>`;
                    
                    if (phaseType === 'single_phase') {
                        circuitCurrent_A = diversifiedApparentPower_VA / supplyVoltage;
                        calculationHtml += `<p class="formula">Current = Diversified VA / V<sub>L-N</sub></p>`;
                        calculationHtml += `<p class="calculation-step">Current = ${diversifiedApparentPower_VA.toFixed(2)} VA / ${supplyVoltage} V = ${circuitCurrent_A.toFixed(2)} A</p>`;
                    } else { // three_phase
                        circuitCurrent_A = diversifiedApparentPower_VA / (Math.sqrt(3) * supplyVoltage);
                        calculationHtml += `<p class="formula">Current = Diversified VA / (V<sub>L-L</sub> × √3)</p>`;
                        calculationHtml += `<p class="calculation-step">Current = ${diversifiedApparentPower_VA.toFixed(2)} VA / (${supplyVoltage} V × 1.732) = ${circuitCurrent_A.toFixed(2)} A</p>`;
                    }

                    // 10. Uniformity
                    const uniformityMinAvg = (typicalUniformityMinAvg[areaType] || 0.5).toFixed(2);
                    const estimatedMinIlluminance = requiredIlluminance * uniformityMinAvg;
                    const uniformityMaxMin = (1 / uniformityMinAvg).toFixed(2);
                    
                    calculationHtml += `<p><strong>10. Estimated Uniformity (Based on Area Type):</strong></p>`;
                    calculationHtml += `<p class="calculation-step">Typical Uniformity (Min/Avg): ${uniformityMinAvg}</p>`;
                    calculationHtml += `<p class="calculation-step">Estimated Minimum Illuminance: ${estimatedMinIlluminance.toFixed(2)} Lux</p>`;

                    // Populate results table
                    addResultRow("Area", area.toFixed(2), "m²", `(${roomLength}m L x ${roomWidth}m W)`);
                    if (!isOutdoor) {
                        addResultRow("Room Cavity Ratio (RCR)", roomCavityRatio.toFixed(2), "", `(h_eff: ${h_effective.toFixed(2)}m)`);
                    } else {
                        addResultRow("Effective Mounting Height (h_eff)", h_effective.toFixed(2), "m", `(${poleHeight}m Pole - ${workingPlaneHeight}m WP)`);
                    }
                    addResultRow("Coefficient of Utilization (CU)", coefficientOfUtilization.toFixed(3), "", "Estimated based on RCR and reflectances");
                    addResultRow("Total Lumens Required", totalLumensRequired.toFixed(0), "lm", `To meet ${requiredIlluminance} Lux`);
                    addResultRow("Luminaires Required (Calculated)", (totalLumensRequired / luminousFluxPerLuminaire).toFixed(2), "units", "Theoretical minimum");
                    addResultRow("<strong>Luminaires in Layout</strong>", `<strong>${actualNumLuminaires}</strong>`, "<strong>units</strong>", `(Suggested ${numRows}x${numCols} grid)`);
                    addResultRow("Approx. Spacing (L x W)", `${spacingLength.toFixed(2)}m x ${spacingWidth.toFixed(2)}m`, "", "Center-to-center spacing");
                    addResultRow("Spacing/Height Ratio (S/H)", `${spacingToHeightRatioLength.toFixed(2)} (L) x ${spacingToHeightRatioWidth.toFixed(2)} (W)`, "", `Key uniformity indicator`);
                    addResultRow("<strong>Total Lighting Load (Real)</strong>", `<strong>${totalLightingLoad_W.toFixed(2)}</strong>`, "<strong>W</strong>", `(${actualNumLuminaires} units × ${wattagePerLuminaire} W)`);
                    addResultRow("Lighting Power Density (LPD)", lightingPowerDensity.toFixed(2), "W/m²", "Check against energy codes");
                    addResultRow("Total Apparent Power (VA)", totalApparentPower_VA.toFixed(2), "VA", `(PF: ${luminairePowerFactor})`);
                    addResultRow("Diversified Apparent Power", diversifiedApparentPower_VA.toFixed(2), "VA", `(${diversityFactor * 100}% diversity)`);
                    addResultRow("<strong>Estimated Circuit Current</strong>", `<strong>${circuitCurrent_A.toFixed(2)}</strong>`, "<strong>A</strong>", `(${supplyVoltage}V, ${phaseType.replace('_', '-')})`);
                    addResultRow("Estimated Uniformity (Min/Avg)", uniformityMinAvg, "", "Based on area type");
                    addResultRow("Estimated Minimum Illuminance", estimatedMinIlluminance.toFixed(2), "Lux", "Based on uniformity");

                    // Standard Reference
                    standardReference.innerHTML = `<p><strong>Note:</strong> These calculations are based on the <strong>Lumen Method (Zonal Cavity Method)</strong>, a standard for estimating average illumination. For final design, always use photometric software (e.g., DIALux, Relux) with manufacturer-specific <strong>.IES files</strong> to verify uniformity, glare (UGR), and point-to-point illuminance. Always consult local codes and standards (e.g., <strong>IES Handbook, ISO 8995-1 / EN 12464-1, ASHRAE 90.1</strong>).</p>`;
                    
                    calculationDetailsDiv.innerHTML = calculationHtml;
                    resultContainer.style.display = 'block';
                    setTimeout(() => {
                        resultContainer.classList.add('show');
                        calculationDetailsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 50);
                    displayMessage("Lighting load calculated successfully!", "info");

                } catch (e) {
                    displayMessage(e.message, "error");
                    // Hide results
                    resultContainer.classList.remove('show');
                    setTimeout(() => { resultContainer.style.display = 'none'; }, 500);
                }
            }

            // --- EVENT BINDING ---
            areaTypeInput.addEventListener('change', updateInputFieldsVisibility);
            calculateBtn.addEventListener('click', calculateLightingLoad);
            resetFormBtn.addEventListener('click', resetForm);
            clearResultsBtn.addEventListener('click', clearResults);
            
            emailShareBtn.addEventListener('click', (e) => {
                if (!resultContainer.classList.contains('show')) {
                    e.preventDefault();
                    displayMessage("Please calculate results first to generate a shareable email.", "warning");
                } else {
                    const emailSubject = encodeURIComponent("Lighting Load Calculation Results");
                    const emailBody = encodeURIComponent(
                        `Check out this Lighting Load calculation from Design Calculators (https://designcalculators.co.in):\n\n` +
                        `Area: ${roomLengthInput.value}m x ${roomWidthInput.value}m\n` +
                        `Required Illuminance: ${requiredIlluminanceInput.value} Lux\n` +
                        `Number of Luminaires: ${resultTableBody.querySelector("tr:nth-child(6) td:nth-child(2)").textContent}\n` +
                        `Total Lighting Load: ${resultTableBody.querySelector("tr:nth-child(10) td:nth-child(2)").textContent}\n` +
                        `Estimated Circuit Current: ${resultTableBody.querySelector("tr:nth-child(14) td:nth-child(2)").textContent}\n\n` +
                        `Note: This is a preliminary calculation.`
                    );
                    emailShareBtn.href = `mailto:?subject=${emailSubject}&body=${emailBody}`;
                }
            });

            // --- INITIALIZATION ---
            const formSections = document.querySelectorAll('.form-section');
            formSections.forEach((section, index) => {
                setTimeout(() => {
                    section.classList.add('fade-in');
                }, 100 * index);
            });
            
            const themeSwitch = document.getElementById('theme-switch');
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                themeSwitch.checked = true;
            }
            themeSwitch.addEventListener('change', function() {
                if (this.checked) {
                    document.body.classList.add('dark-mode');
                    localStorage.setItem('theme', 'dark');
                } else {
                    document.body.classList.remove('dark-mode');
                    localStorage.setItem('theme', 'light');
                }
            });

            updateInputFieldsVisibility(); // Set initial form state
        });
    </script>
</body>
</html>

