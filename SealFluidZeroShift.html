<!DOCTYPE html>
<html lang="en">
<head>
    <!-- AdSense & Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>
    
    <!-- SEO Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remote Seal Zero-Shift & Density Calculator - Industrial Grade</title>
    <meta name="description" content="Professional Remote Seal Zero-Shift Calculator. Calculate temperature-induced errors in DP Level transmitters due to capillary fill fluid expansion. Database for DC200, Syltherm, Neobee.">
    <meta name="keywords" content="remote seal calculator, diaphragm seal, zero shift, capillary error, fill fluid expansion, dc200 density, syltherm 800, dp level drift, instrumentation temperature effect">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.3/jspdf.plugin.autotable.min.js"></script>

    <!-- Chart.js for Visuals -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@2.2.1/dist/chartjs-plugin-annotation.min.js"></script>

    <!-- MathJax for Formulas -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)'], ['$', '$']],
                displayMath: [['\\[', '\\]'], ['$$', '$$']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <style>
        /* --- CORE THEME (Blue Industrial - Matching Previous Files) --- */
        :root {
            --primary: #1E3A8A; /* Dark Blue */
            --secondary: #2563EB; /* Bright Blue */
            --accent: #F59E0B; /* Amber */
            --success: #10B981;
            --danger: #DC2626;
            --warning: #F59E0B;
            --bg: #F8FAFC;
            --card: #FFFFFF;
            --text: #4B5563;
            --heading: #111827;
            --footer-bg: #0F172A;
            --border: #E2E8F0;
            --grad: linear-gradient(135deg, var(--primary), var(--secondary));
            --grad-dark: linear-gradient(135deg, #0F172A, #1E293B);
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode {
            --primary: #10B981;
            --secondary: #34D399;
            --bg: #0F172A;
            --card: #1E293B;
            --text: #CBD5E1;
            --heading: #F1F5F9;
            --footer-bg: #020617;
            --border: #334155;
            --accent: #F59E0B;
        }

        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.7;
            margin: 0;
            padding: 0;
        }

        .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; }

        /* Header & Nav */
        header {
            background: var(--grad);
            color: white;
            padding: 24px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-container {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: white;
        }
        .logo-text {
            font-size: 1.75rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
        }
        .logo-subtitle {
            font-size: 0.8rem;
            margin: 4px 0 0 0;
            color: #E0E7FF;
            opacity: 0.9;
        }
        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        .nav-links a:hover { color: var(--accent); }
        
        /* Theme Toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }
        .switch {
            position: relative;
            width: 56px;
            height: 30px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.2);
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px; width: 22px;
            left: 4px; bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--accent); }
        input:checked + .slider:before { transform: translateX(26px); }

        /* Main Content & Cards */
        main { padding: 40px 0; }
        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 1px solid var(--border);
            animation: fadeIn 0.6s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card h2 {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            margin-top: 0;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        h3 {
            color: var(--heading);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            margin-top: 25px;
            margin-bottom: 20px;
        }

        /* Forms */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-group { margin-bottom: 0; }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--heading);
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            background-color: var(--bg);
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }
        body.dark-mode .form-group input:focus { 
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        /* Buttons */
        .btn {
            background: var(--grad);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
            transition: all 0.3s;
            width: 100%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(30, 58, 138, 0.4);
        }
        .btn-outline {
            background: transparent;
            border: 2px solid var(--secondary);
            color: var(--secondary);
            font-size: 0.9rem;
            padding: 8px 16px;
        }
        .btn-outline:hover {
            background: var(--secondary);
            color: white;
        }
        .button-wrapper {
            display: flex;
            justify-content: center;
            width: 100%;
            padding-top: 15px;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        /* Quick Load Buttons */
        .preset-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .preset-btn {
            padding: 8px 12px;
            font-size: 0.85rem;
            border: 1px solid var(--border);
            background: var(--card);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .preset-btn:hover {
            background: var(--bg);
            border-color: var(--secondary);
            color: var(--secondary);
        }

        /* Results Layout */
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }
        @media (max-width: 1024px) {
            .results-grid { grid-template-columns: 1fr; }
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-radius: 8px;
            overflow: hidden;
        }
        .results-table th, .results-table td {
            padding: 14px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        .results-table th {
            background: var(--grad);
            color: white;
            font-weight: 700;
        }
        .results-table tr:nth-child(even) { background-color: var(--bg); }
        .results-table td:first-child {
            font-weight: 600;
            color: var(--heading);
        }
        .highlight { color: var(--success); font-weight: 700; }
        .danger-text { color: var(--danger); font-weight: 700; }

        /* Canvas Container */
        .chart-container {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            position: relative;
            height: 400px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        canvas {
            max-width: 100%;
            max-height: 100%;
        }

        /* Educational Section Styling */
        .insight-card {
            background: linear-gradient(135deg, var(--card), rgba(37,99,235,0.03));
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid var(--secondary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        .insight-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .insight-card h4 {
            color: var(--secondary);
            font-size: 1.3rem;
            margin: 0 0 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Montserrat', sans-serif;
        }
        .insight-card p, .insight-card ul {
            margin: 10px 0;
            line-height: 1.8;
            color: var(--text);
        }
        .insight-card ul { padding-left: 20px; }
        .insight-card li { margin-bottom: 8px; }

        /* Formulas & Steps */
        .formula {
            background: var(--bg);
            border-left: 3px solid var(--accent);
            padding: 15px;
            margin: 12px 0;
            font-size: 1.1rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            color: var(--heading);
        }
        .calculation-step {
            font-family: 'Courier New', monospace;
            background-color: rgba(0,0,0,0.03);
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            border-left: 4px solid var(--success);
            font-size: 0.95rem;
            line-height: 1.6;
        }
        body.dark-mode .calculation-step { background-color: rgba(255,255,255,0.05); }

        /* Vector Input Group Styling (Reused) */
        .vector-input-group {
            background: var(--bg);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
            position: relative;
        }
        .vector-input-header {
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Print Styling */
        @media print {
            header, footer, .education-section, .theme-toggle, .button-wrapper, .preset-container { display: none !important; }
            .card { border: none; shadow: none; padding: 0; }
            .container { width: 100%; max-width: 100%; padding: 0; }
            .results-grid { grid-template-columns: 1fr 1fr; }
            .chart-container { height: 300px; page-break-inside: avoid; }
        }

        /* Message Box */
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 28px;
            border-radius: 8px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.25);
            z-index: 10000;
            font-weight: 600;
            color: white;
            opacity: 0;
            transition: all 0.4s;
            display: none;
        }
        .message-box.show { display: block; opacity: 1; top: 30px; }
        .hidden { display: none; }

        /* Tooltip */
        .info-icon { color: var(--secondary); margin-left: 5px; cursor: help; }
        .tooltip { position: relative; display: inline-block; }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: 400;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }

        /* Footer */
        footer {
            background: var(--grad-dark);
            color: #CBD5E1;
            padding: 50px 0 20px 0;
            margin-top: 60px;
        }
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 30px;
        }
        .footer-col { flex: 1; min-width: 200px; }
        .footer-col h4 { color: white; margin-bottom: 15px; font-weight: 700; }
        .footer-col ul { list-style: none; padding: 0; margin: 0; }
        .footer-col a { color: #CBD5E1; text-decoration: none; transition: color 0.3s; }
        .footer-col a:hover { color: var(--accent); }
        .social-buttons { display: flex; gap: 12px; margin-top: 15px; }
        .social-btn {
            width: 40px; height: 40px;
            display: flex; justify-content: center; align-items: center;
            color: white; border-radius: 50%;
            font-size: 1.1rem; transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .social-btn:hover { transform: translateY(-4px); }
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.youtube { background-color: #FF0000; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .footer-disclaimer {
            text-align: center; padding-top: 25px;
            border-top: 1px solid #334155;
            max-width: 800px; margin: 0 auto;
            font-size: 0.9rem;
        }
        .footer-bottom {
            text-align: center; padding-top: 20px;
            font-size: 0.9rem; color: #94A3B8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 0 15px; }
            .navbar { flex-direction: column; gap: 20px; }
            .nav-links { flex-direction: column; gap: 12px; text-align: center; }
            .form-row { grid-template-columns: 1fr; }
            .card { padding: 20px; }
            .footer-content { flex-direction: column; gap: 25px; }
        }
    </style>
</head>
<body>
    <div id="message-box" class="message-box"></div>
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="#" class="logo-container">
                    <span class="logo-text">Design Calculators</span>
                    <p class="logo-subtitle">Inspired by standards such as IEC, IEEE, ISA, ASME, and API.</p>
                </a>
                <ul class="nav-links">
                    <li><a href='/'>Home</a></li>
                    <li><a href="articles.html">Articles</a></li>
                    <li><a href="indexmech.html">Mechanical</a></li>
                    <li><a href="indexele.html">Electrical</a></li>
                    <li><a href="indexinst.html">Instrumentation</a></li>
                </ul>
                <div class="theme-toggle">
                    <i class="fas fa-sun"></i>
                    <label class="switch">
                        <input type="checkbox" id="theme-switch">
                        <span class="slider"></span>
                    </label>
                    <i class="fas fa-moon"></i>
                </div>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="card">
            <h2><i class="fas fa-link"></i> Seal Fluid Density Zero-Shift Calculator (Remote Seal)</h2>
            
            <div class="tool-description">
                <p>This industrial-grade calculator quantifies the <strong>Zero Shift</strong> error in remote seal (diaphragm seal) systems caused by the thermal expansion of the fill fluid. It compares <strong>Calibration Conditions</strong> vs. <strong>Operating Conditions</strong> to determine the shift in hydrostatic head ($\Delta P$) in the capillary legs, essential for high-precision DP level measurement.</p>
            </div>

            <div class="calculator-form">
                <form id="seal-form">
                    <!-- Controls Row -->
                    <div class="form-row" style="align-items: end;">
                        <div class="form-group">
                            <label>Quick Load Scenarios:</label>
                            <div class="preset-container" style="margin-bottom: 0;">
                                <button type="button" class="preset-btn" onclick="loadPreset('standard')"><i class="fas fa-check-circle"></i> Standard (DC200)</button>
                                <button type="button" class="preset-btn" onclick="loadPreset('high_temp')"><i class="fas fa-fire"></i> High Temp (Syltherm)</button>
                                <button type="button" class="preset-btn" onclick="loadPreset('cold_weather')"><i class="fas fa-snowflake"></i> Winter Cold Snap</button>
                            </div>
                        </div>
                    </div>

                    <!-- Fluid Specs -->
                    <h4 style="color: var(--primary); margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 5px;">1. Fill Fluid Properties</h4>
                    <div class="form-row">
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-flask"></i> Fluid Selection</div>
                            <div class="form-group">
                                <label for="fluid-type">Capillary Fill Fluid</label>
                                <select id="fluid-type" onchange="updateFluidProps()">
                                    <option value="dc200" selected>Silicone DC200 (Standard)</option>
                                    <option value="syltherm">Syltherm 800 (High Temp)</option>
                                    <option value="halocarbon">Halocarbon (Inert/O2)</option>
                                    <option value="neobee">Neobee M-20 (Sanitary)</option>
                                    <option value="custom">Custom</option>
                                </select>
                            </div>
                        </div>
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-atom"></i> Physical Data</div>
                            <div class="form-group">
                                <label for="sg-base">SG @ 25°C</label>
                                <input type="number" id="sg-base" value="0.94" step="0.01">
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="coeff-exp">Expansion Coeff ($\beta$) [1/°C]</label>
                                <input type="number" id="coeff-exp" value="0.00108" step="0.00001">
                            </div>
                        </div>
                    </div>

                    <!-- Geometry & Temp -->
                    <h4 style="color: var(--primary); margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 5px; margin-top: 20px;">2. Installation Geometry & Conditions</h4>
                    <div class="form-row">
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-ruler-vertical"></i> Capillary Height</div>
                            <div class="form-group">
                                <label for="cap-hp">HP Vertical Height [m] <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Vertical drop from HP tap to Transmitter.</span></span></label>
                                <input type="number" id="cap-hp" value="1.0" step="0.1">
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="cap-lp">LP Vertical Height [m] <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Vertical drop from LP tap to Transmitter.</span></span></label>
                                <input type="number" id="cap-lp" value="4.0" step="0.1">
                            </div>
                        </div>
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-thermometer-half"></i> Temperatures</div>
                            <div class="form-group">
                                <label for="temp-cal">Calibration Temp [°C]</label>
                                <input type="number" id="temp-cal" value="25" step="1">
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="temp-amb">Operating Ambient [°C]</label>
                                <input type="number" id="temp-amb" value="45" step="1">
                            </div>
                        </div>
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-tachometer-alt"></i> Scale</div>
                            <div class="form-group">
                                <label for="span">Transmitter Span [mmH2O]</label>
                                <input type="number" id="span" value="3000" step="100">
                            </div>
                        </div>
                    </div>

                    <div class="button-wrapper">
                        <button type="button" id="calculate-btn" class="btn"><i class="fas fa-calculator"></i> Calculate Zero Shift</button>
                        <button type="button" id="pdf-btn" class="btn btn-outline"><i class="fas fa-file-pdf"></i> Download PDF Report</button>
                    </div>
                </form>
            </div>

            <!-- Results Section -->
            <div id="result-container" class="card hidden" style="margin-top: 40px;">
                <h3><i class="fas fa-poll"></i> Compensation Analysis</h3>
                
                <div class="results-grid">
                    <!-- Left Col: Table -->
                    <div>
                        <h4 style="margin-top: 0; color: var(--primary); margin-bottom: 15px;">Shift Data</h4>
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Value</th>
                                    <th>Unit</th>
                                </tr>
                            </thead>
                            <tbody id="result-table-body">
                                <!-- Dynamic rows -->
                            </tbody>
                        </table>
                        
                        <div style="margin-top: 20px; background: var(--bg); padding: 15px; border-radius: 6px; border: 1px solid var(--border);">
                            <strong><i class="fas fa-info-circle"></i> Impact Assessment:</strong>
                            <div id="interpretation-text" style="margin-top: 5px; font-size: 0.95rem;"></div>
                        </div>
                    </div>

                    <!-- Right Col: Visual Chart -->
                    <div>
                        <h4 style="margin-top: 0; color: var(--primary); margin-bottom: 15px;">Shift vs Temperature</h4>
                        <div class="chart-container">
                            <canvas id="shiftChart"></canvas>
                        </div>
                        <div style="text-align: center; margin-top: 10px; font-size: 0.85rem; color: var(--text);">
                            <span style="color: #EF4444;">● Zero Shift Error</span> &nbsp;
                            <span style="color: #3B82F6;">● Operating Point</span>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: 30px; border-top: 1px solid var(--border); padding-top: 20px;">Step-by-Step Engineering Calculation</h4>
                <div id="calculation-details">
                    <!-- Dynamic math steps -->
                </div>

                <div class="standard-reference" style="margin-top: 20px; font-style: italic; color: var(--text);">
                     Based on volumetric thermal expansion physics $\rho = \rho_0 / (1 + \beta \Delta T)$. Hydrostatic head $P = \rho g h$.
                </div>
            </div>
        </div>

        <!-- EDUCATIONAL CONTENT SECTION (MASSIVE) -->
        <div class="education-section card">
            <h2><i class="fas fa-lightbulb"></i> Engineering Insights: The Hidden Errors of Remote Seals</h2>
            
            <!-- Insight 1: Why Seals Drift -->
            <div class="insight-card">
                <h4><i class="fas fa-thermometer-three-quarters"></i> 1. The Physics of Thermal Drift</h4>
                <p>Remote seal systems use a closed volume of oil to transmit pressure. Liquids are generally incompressible, but they <strong>expand significantly with heat</strong>. In a capillary tube, this expansion has two effects:</p>
                <ul>
                    <li><strong>Density Change (Head Effect):</strong> As the fluid warms up, it becomes less dense ($\rho$ decreases). The weight of the vertical column of oil in the capillary decreases, reducing the hydrostatic pressure exerted on the transmitter. This causes a Zero Shift. This calculator focuses on this effect.</li>
                    <li><strong>Volume Expansion (Stiffness Effect):</strong> The expanding oil volume pushes against the diaphragm stiffness. This increases internal pressure. This is minimal in modern low-volume systems but significant in older designs.</li>
                </ul>
                <p>The Density Effect is often dominant in tall towers or distillation columns where capillaries are long (e.g., 10m).</p>
            </div>

            <!-- Insight 2: Balanced vs Unbalanced -->
            <div class="insight-card">
                <h4><i class="fas fa-balance-scale"></i> 2. The Myth of "Balanced" Systems</h4>
                <p>A common design rule is to make both capillary legs the same length to "cancel out" errors. While this works for the Volume/Stiffness effect, it <strong>DOES NOT</strong> cancel out Head Effect errors unless the vertical elevation is also identical.</p>
                <p><strong>Example:</strong>
                <br>HP Leg: 1m drop. LP Leg: 5m drop.
                <br>Even if both capillaries are physically 5m long (coiled up), the <strong>vertical head</strong> is different (1m vs 5m).
                <br>If temp rises, the 5m leg loses 5x more weight than the 1m leg. The DP ($P_H - P_L$) will shift because the LP side gets lighter faster than the HP side.
                <br><strong>Conclusion:</strong> Symmetrical capillaries do NOT eliminate density-based zero shift in level applications.</p>
            </div>

            <!-- Insight 3: Fill Fluid Selection -->
            <div class="insight-card">
                <h4><i class="fas fa-flask"></i> 3. Choosing the Right Fill Fluid</h4>
                <p>The choice of fill fluid is a trade-off between temperature range, response time (viscosity), and expansion.</p>
                <ul>
                    <li><strong>Silicone DC200 (Standard):</strong> Good general purpose. Low viscosity, moderate expansion. Not for oxidizers (Chlorine/Oxygen).</li>
                    <li><strong>Syltherm 800 (High Temp):</strong> Designed for stability at 300°C+. Higher viscosity at ambient temps = slower response time.</li>
                    <li><strong>Halocarbon/Fluorolube:</strong> Inert. Required for Oxygen/Chlorine service to prevent explosion. extremely high density (SG ~1.9) and high cost.</li>
                    <li><strong>Neobee M-20:</strong> Food grade (vegetable based). Used in sanitary/hygienic applications. Limited temp range.</li>
                </ul>
            </div>

            <!-- Insight 4: Vacuum Service -->
            <div class="insight-card">
                <h4><i class="fas fa-compress-arrows-alt"></i> 4. The Vacuum Hazard</h4>
                <p>In vacuum vessels (distillation columns), the weight of the fill fluid in the capillary pulls <strong>outward</strong> on the seal diaphragm. If the transmitter is mounted above the bottom tap, this "pull" combined with the process vacuum can drop the absolute pressure inside the seal below the fluid's vapor pressure.</p>
                <p><strong>Result:</strong> The fill fluid boils (cavitates), forming a bubble. The measurement becomes noisy and eventually fails.
                <br><strong>Rule:</strong> In vacuum service, <strong>always mount the transmitter below the bottom tap</strong> so the hydrostatic head adds positive pressure to the seal.</p>
            </div>
            
            <!-- Insight 5: Mitigation -->
            <div class="insight-card">
                <h4><i class="fas fa-tools"></i> 5. Reducing Zero Shift</h4>
                <p>If the calculated error is too high (>2-3%):</p>
                <ul>
                    <li><strong>Minimize Vertical Run:</strong> Keep capillaries as short and horizontal as possible.</li>
                    <li><strong>Insulate/Trace:</strong> Heat trace the capillaries to maintain a constant temperature (e.g., 40°C) regardless of weather.</li>
                    <li><strong>Electronic DP:</strong> Use two independent pressure transmitters connected digitally (Electronic Remote Seal). This eliminates the capillaries entirely, removing the head error, though it introduces two sensor errors.</li>
                </ul>
            </div>
        </div>
    </main>    <!-- FOOTER -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <h4>Design Calculators</h4>
                    <p style="font-size: 0.9rem; line-height: 1.6; margin-bottom: 15px;">If you find this tool helpful, please consider sharing it with your colleagues!</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn linkedin" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer" class="social-btn youtube" title="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn twitter" title="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn facebook" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource%20https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn whatsapp" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href='/'>Home</a></li>
                        <li><a href="indexele.html">Electrical</a></li>
                        <li><a href="indexmech.html">Mechanical</a></li>
                        <li><a href="indexinst.html">Instrumentation</a></li>                        
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="privacy-policy.html">Privacy Policy</a></li>
                        <li><a href="terms-of-service.html">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>More</h4>
                    <ul>
                        <li><a href='/articles.html'>Articles & Whitepapers</a></li>
                        <li><a href='/sitemap2.html'>Sitemap</a></li>                        
                    </ul>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>This tool offers general guidance. Results should be reviewed for accuracy and compliance with relevant project standards and regulations before use.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">A Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global State
        let shiftChart = null;
        let lastResult = null;

        // Fluid Data (SG @ 25C, Beta 1/C)
        const fluidDB = {
            'dc200': { sg: 0.94, beta: 0.00108, name: 'Silicone DC200' },
            'syltherm': { sg: 0.90, beta: 0.00096, name: 'Syltherm 800' },
            'halocarbon': { sg: 1.85, beta: 0.00120, name: 'Halocarbon 4.2' },
            'neobee': { sg: 0.92, beta: 0.00100, name: 'Neobee M-20' }
        };

        function updateFluidProps() {
            const key = document.getElementById('fluid-type').value;
            if(key !== 'custom') {
                document.getElementById('sg-base').value = fluidDB[key].sg;
                document.getElementById('coeff-exp').value = fluidDB[key].beta;
            }
        }

        function loadPreset(type) {
            if (type === 'standard') {
                document.getElementById('fluid-type').value = 'dc200';
                updateFluidProps();
                document.getElementById('cap-hp').value = '1.0';
                document.getElementById('cap-lp').value = '4.0';
                document.getElementById('temp-cal').value = '25';
                document.getElementById('temp-amb').value = '45';
                document.getElementById('span').value = '3000';
            } else if (type === 'high_temp') {
                document.getElementById('fluid-type').value = 'syltherm';
                updateFluidProps();
                document.getElementById('cap-hp').value = '0.5';
                document.getElementById('cap-lp').value = '5.0';
                document.getElementById('temp-cal').value = '25';
                document.getElementById('temp-amb').value = '55'; // Hot ambient near equipment
                document.getElementById('span').value = '4000';
            } else if (type === 'cold_weather') {
                document.getElementById('fluid-type').value = 'dc200';
                updateFluidProps();
                document.getElementById('cap-hp').value = '2.0';
                document.getElementById('cap-lp').value = '8.0'; // Long legs
                document.getElementById('temp-cal').value = '20';
                document.getElementById('temp-amb').value = '-10'; // Freezing
                document.getElementById('span').value = '6000';
            }
            displayMessage(`${type.toUpperCase()} scenario loaded.`, "success");
        }

        function displayMessage(message, type = "info") {
            let messageBox = document.getElementById('message-box');
            messageBox.textContent = message;
            if (type === "error") messageBox.style.backgroundColor = 'var(--danger)';
            else if (type === "success") messageBox.style.backgroundColor = 'var(--success)';
            else messageBox.style.backgroundColor = 'var(--primary)';
            messageBox.classList.add('show');
            setTimeout(() => messageBox.classList.remove('show'), 4000);
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Theme handling
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch && localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                themeSwitch.checked = true;
            }
            if(themeSwitch) {
                themeSwitch.addEventListener('change', function() {
                    document.body.classList.toggle('dark-mode');
                    localStorage.setItem('theme', this.checked ? 'dark' : 'light');
                });
            }

            document.getElementById('calculate-btn').addEventListener('click', performCalculation);
            document.getElementById('pdf-btn').addEventListener('click', generatePDF);
        });

        function performCalculation() {
            // 1. Get Inputs
            const sg0 = parseFloat(document.getElementById('sg-base').value);
            const beta = parseFloat(document.getElementById('coeff-exp').value);
            const h_hp = parseFloat(document.getElementById('cap-hp').value); // m
            const h_lp = parseFloat(document.getElementById('cap-lp').value); // m
            const t_cal = parseFloat(document.getElementById('temp-cal').value);
            const t_amb = parseFloat(document.getElementById('temp-amb').value);
            const span = parseFloat(document.getElementById('span').value); // mmH2O

            if (isNaN(sg0) || isNaN(beta) || isNaN(h_hp) || isNaN(h_lp) || isNaN(span)) {
                displayMessage("Please enter valid numbers.", "error");
                return;
            }

            // 2. Physics Engine
            
            // Density at Calibration Temp (Reference condition, usually ~25C, SG0 is @25C)
            // If T_cal != 25, we adjust SG0 to T_cal
            const rho_cal = sg0 / (1 + beta * (t_cal - 25)); // SG relative to 25
            
            // Density at Operating/Ambient Temp
            const rho_op = sg0 / (1 + beta * (t_amb - 25));

            // Pressure (Head) Calculation (mmH2O)
            // P = SG * h(mm) -> P = rho * h * 1000 (if rho is SG)
            // Convert h to mm for calculation
            const h_hp_mm = h_hp * 1000;
            const h_lp_mm = h_lp * 1000;

            // Pressure at Cal Temp
            const p_hp_cal = rho_cal * h_hp_mm;
            const p_lp_cal = rho_cal * h_lp_mm;
            const dp_cal = p_hp_cal - p_lp_cal; // The static head bias at calibration time

            // Pressure at Op Temp
            const p_hp_op = rho_op * h_hp_mm;
            const p_lp_op = rho_op * h_lp_mm;
            const dp_op = p_hp_op - p_lp_op; // The static head bias now

            // Zero Shift = Change in DP bias
            // Shift = New_Bias - Old_Bias
            const shift_mm = dp_op - dp_cal;
            
            // Error % of Span
            const error_pct = (shift_mm / span) * 100;

            lastResult = { sg0, beta, h_hp, h_lp, t_cal, t_amb, span, rho_cal, rho_op, dp_cal, dp_op, shift_mm, error_pct };

            // 3. Render Step-by-Step
            let html = `<h4>Step 1: Density Change Calculation</h4>`;
            html += `<div class="calculation-step">`;
            html += `Calculating Specific Gravity change due to thermal expansion ($\\beta=${beta}$).<br>`;
            html += `$$ SG_{cal} = \\frac{SG_{25}}{1 + \\beta(T_{cal}-25)} = \\frac{${sg0}}{1 + ${beta}(${t_cal}-25)} = \\mathbf{${rho_cal.toFixed(4)}} $$<br>`;
            html += `$$ SG_{op} = \\frac{SG_{25}}{1 + \\beta(T_{op}-25)} = \\frac{${sg0}}{1 + ${beta}(${t_amb}-25)} = \\mathbf{${rho_op.toFixed(4)}} $$`;
            html += `</div>`;

            html += `<h4>Step 2: Hydrostatic Head Analysis</h4>`;
            html += `<div class="calculation-step">`;
            html += `<strong>At Calibration (${t_cal}°C):</strong><br>`;
            html += `$$ P_{H} = SG_{cal} \\cdot h_{H} = ${rho_cal.toFixed(4)} \\cdot ${h_hp_mm} = ${p_hp_cal.toFixed(1)} $$<br>`;
            html += `$$ P_{L} = SG_{cal} \\cdot h_{L} = ${rho_cal.toFixed(4)} \\cdot ${h_lp_mm} = ${p_lp_cal.toFixed(1)} $$<br>`;
            html += `$$ Bias_{cal} = P_{H} - P_{L} = \\mathbf{${dp_cal.toFixed(1)} \\text{ mmH}_2\\text{O}} $$<br><br>`;
            
            html += `<strong>At Operating (${t_amb}°C):</strong><br>`;
            html += `$$ Bias_{op} = SG_{op} (h_{H} - h_{L}) = ${rho_op.toFixed(4)} (${h_hp_mm} - ${h_lp_mm}) = \\mathbf{${dp_op.toFixed(1)} \\text{ mmH}_2\\text{O}} $$`;
            html += `</div>`;

            html += `<h4>Step 3: Zero Shift Determination</h4>`;
            html += `<div class="calculation-step">`;
            html += `$$ \\Delta Z = Bias_{op} - Bias_{cal} = ${dp_op.toFixed(1)} - ${dp_cal.toFixed(1)} = \\mathbf{${shift_mm.toFixed(1)} \\text{ mmH}_2\\text{O}} $$<br>`;
            html += `$$ \\text{Error} = \\frac{\\Delta Z}{\\text{Span}} \\times 100 = \\frac{${shift_mm.toFixed(1)}}{${span}} \\times 100 = \\mathbf{${error_pct.toFixed(2)}\\%} $$`;
            html += `</div>`;

            document.getElementById('calculation-details').innerHTML = html;

            // 4. Update Table
            const tbody = document.getElementById('result-table-body');
            tbody.innerHTML = '';
            const addRow = (n, v, u, c="") => {
                tbody.innerHTML += `<tr style="${c ? 'color:'+c : ''}"><td><strong>${n}</strong></td><td>${v}</td><td>${u}</td></tr>`;
            };
            addRow("Zero Shift", shift_mm.toFixed(1), "mmH2O", Math.abs(shift_mm)>50 ? "var(--warning)" : "");
            addRow("Error % Span", error_pct.toFixed(2), "%", Math.abs(error_pct)>1.0 ? "var(--danger)" : "var(--success)");
            addRow("Density Change", ((rho_op-rho_cal)/rho_cal*100).toFixed(2), "%");

            const interpEl = document.getElementById('interpretation-text');
            if (Math.abs(error_pct) > 3.0) {
                interpEl.innerHTML = `<span style="color:var(--danger); font-weight:bold;">CRITICAL DRIFT.</span> The zero point has shifted significantly. Re-zeroing at operating temperature is mandatory.`;
            } else if (Math.abs(error_pct) > 0.5) {
                interpEl.innerHTML = `<span style="color:var(--warning); font-weight:bold;">Moderate Drift.</span> Notable error introduced. Monitor or compensate.`;
            } else {
                interpEl.innerHTML = `<span style="color:var(--success); font-weight:bold;">Stable.</span> Temperature effect is negligible.`;
            }

            // 5. Draw Chart
            drawChart(t_amb, shift_mm);

            // 6. Show
            document.getElementById('result-container').classList.remove('hidden');
            if(window.MathJax) window.MathJax.typesetPromise([document.getElementById('calculation-details')]);
            document.getElementById('result-container').scrollIntoView({ behavior: 'smooth' });
        }

        function drawChart(t_op, shift_now) {
            const ctx = document.getElementById('shiftChart').getContext('2d');
            if (shiftChart) shiftChart.destroy();

            // Generate Curve (-40 to +80C)
            const labels = [];
            const data = [];
            
            // Re-calc constants for plot
            const sg0 = lastResult.sg0;
            const beta = lastResult.beta;
            const t_cal = lastResult.t_cal;
            const net_h = (lastResult.h_hp - lastResult.h_lp) * 1000;
            
            // Cal bias
            const rho_cal = sg0 / (1 + beta * (t_cal - 25));
            const bias_cal = rho_cal * net_h;

            for (let t = -40; t <= 80; t += 5) {
                const rho_t = sg0 / (1 + beta * (t - 25));
                const bias_t = rho_t * net_h;
                const shift = bias_t - bias_cal;
                labels.push(t);
                data.push(shift);
            }

            shiftChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Zero Shift (mmH2O)',
                            data: data,
                            borderColor: '#1E3A8A',
                            backgroundColor: 'rgba(30, 58, 138, 0.1)',
                            borderWidth: 2,
                            pointRadius: 0,
                            fill: true
                        },
                        {
                            label: 'Operating Point',
                            data: [{x: t_op, y: shift_now}], // Approximation for chart logic, usually need index mapping
                            // ChartJS scatter on line needs specific structure, simplifying to just annotation logic visually
                            pointRadius: 6,
                            backgroundColor: '#EF4444',
                            type: 'scatter'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { title: { display: true, text: 'Ambient Temperature (°C)' } },
                        y: { title: { display: true, text: 'Zero Shift (mmH2O)' } }
                    },
                    plugins: {
                        annotation: {
                            annotations: {
                                point1: {
                                    type: 'point',
                                    xValue: labels.findIndex(l => Math.abs(l - t_op) < 2.5), // Approx index
                                    yValue: shift_now,
                                    backgroundColor: '#EF4444',
                                    radius: 6
                                }
                            }
                        }
                    }
                }
            });
        }

        function generatePDF() {
            if (!lastResult) {
                displayMessage("Calculate first.", "error");
                return;
            }
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4');
            let y = 15;

            // Header
            pdf.setFont('helvetica', 'bold');
            pdf.setFontSize(16);
            pdf.setTextColor(30, 58, 138); 
            pdf.text('Remote Seal Zero-Shift Report', 105, y, { align: 'center' });
            y += 10;

            pdf.setFontSize(10);
            pdf.setTextColor(100);
            pdf.text(`Date: ${new Date().toLocaleString()}`, 105, y, { align: 'center' });
            y += 15;

            // Inputs
            pdf.setFontSize(12);
            pdf.setTextColor(0);
            pdf.text('1. System Data', 14, y);
            y += 5;

            const inputData = [
                ['Fill Fluid SG', lastResult.sg0],
                ['Expansion Coeff', lastResult.beta],
                ['HP Capillary Ht', `${lastResult.h_hp} m`],
                ['LP Capillary Ht', `${lastResult.h_lp} m`],
                ['Temp Change', `${lastResult.t_cal}°C -> ${lastResult.t_amb}°C`]
            ];

            pdf.autoTable({
                startY: y,
                head: [['Parameter', 'Value']],
                body: inputData,
                margin: { left: 14, right: 14 },
                theme: 'grid',
                headStyles: { fillColor: [30, 58, 138] }
            });
            y = pdf.lastAutoTable.finalY + 15;

            // Results
            pdf.text('2. Calculated Shift', 14, y);
            y += 5;

            const resData = [
                ['Zero Shift', `${lastResult.shift_mm.toFixed(1)} mmH2O`],
                ['% Span Error', `${lastResult.error_pct.toFixed(2)} %`],
                ['Op. Density', `${lastResult.rho_op.toFixed(4)}`]
            ];

            pdf.autoTable({
                startY: y,
                head: [['Metric', 'Result']],
                body: resData,
                margin: { left: 14, right: 14 },
                theme: 'grid',
                headStyles: { fillColor: [30, 58, 138] },
                didParseCell: function(data) {
                    if(data.row.index === 1) {
                        data.cell.styles.fontStyle = 'bold';
                        data.cell.styles.textColor = Math.abs(lastResult.error_pct) > 1.0 ? [220, 38, 38] : [16, 185, 129];
                    }
                }
            });

            // Footer
            y = pdf.lastAutoTable.finalY + 20;
            pdf.setFontSize(8);
            pdf.setTextColor(150);
            pdf.text('Estimates based on volumetric thermal expansion of fill fluid.', 105, y, { align: 'center' });

            pdf.save('Zero_Shift_Report.pdf');
            displayMessage("PDF Downloaded", "success");
        }

        function displayMessage(message, type = "info") {
            let messageBox = document.getElementById('message-box');
            messageBox.textContent = message;
            if (type === "error") messageBox.style.backgroundColor = 'var(--danger)';
            else if (type === "success") messageBox.style.backgroundColor = 'var(--success)';
            else messageBox.style.backgroundColor = 'var(--primary)';
            messageBox.classList.add('show');
            setTimeout(() => messageBox.classList.remove('show'), 4000);
        }
    </script>
</body>
</html>
