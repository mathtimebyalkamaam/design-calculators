<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cooling Tower Sizing Calculator - Design Calculators - Mechanical</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- MathJax for LaTeX rendering -->
    <script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <script>
        // MathJax configuration to support inline and display LaTeX
        MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']],
                processEscapes: true
            }
        };
    </script>
    <style>
        /* CSS Variables for theming (light and dark mode) */
        :root {
            --primary-color: #2196F3;
            --secondary-color: #1976D2;
            --accent-color: #FFC107;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333333;
            --header-bg: #2C3E50;
            --footer-bg: #34495E;
            --border-color: #cccccc;
            --card-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            --hover-color: #e2e6ea;
            --primary-color-rgb: 33, 150, 243;
            --success-color: #28a745;
            --error-color: #dc3545;
        }
        /* Dark mode overrides */
        body.dark-mode {
            --primary-color: #5DADE2;
            --secondary-color: #2874A6;
            --bg-color: #252D3A;
            --card-bg: #2F3C4C;
            --text-color: #E0E6EB;
            --header-bg: #252D3A;
            --footer-bg: #252D3A;
            --border-color: #4C5C70;
            --card-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            --hover-color: #3A475C;
            --primary-color-rgb: 93, 173, 226;
            --success-color: #4CAF50;
            --error-color: #F44336;
        }
        /* Base body styling */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at center, var(--bg-color) 0%, rgba(244, 247, 246, 0.8) 100%);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s, background-image 0.3s;
        }
        /* Container for content width limitation and centering */
        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }
        /* Header styling */
        header {
            background-color: var(--header-bg);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative;
        }
        header h1 {
            margin: 0;
            font-size: 2.8em;
            color: var(--primary-color);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        header .subtitle {
            margin: 8px 0 0;
            font-size: 1.1em;
            color: #bdc3c7;
        }
        /* Main content area styling */
        main {
            padding: 30px 0;
        }
        /* Tool container styling */
        .tool-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            margin-bottom: 25px;
            transition: transform 0.3s ease-in-out;
        }
        .tool-container:hover {
            transform: translateY(-5px);
        }
        .tool-container h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 12px;
            margin-top: 0;
            margin-bottom: 25px;
            font-size: 2em;
        }
        .tool-description {
            margin-bottom: 25px;
            color: var(--text-color);
            font-size: 1.05em;
        }
        .tool-description ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
            margin-top: 15px;
        }
        .tool-description ul li {
            margin-bottom: 8px;
        }
        .tool-description strong {
            color: var(--primary-color);
        }
        /* Back button styling */
        .back-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            margin-bottom: 25px;
            transition: background-color 0.3s, transform 0.2s ease-in-out;
            font-weight: bold;
        }
        .back-button:hover {
            background-color: var(--secondary-color);
            transform: scale(1.03);
        }
        /* Theme toggle switch styling */
        .theme-toggle {
            position: absolute;
            top: 25px;
            right: 25px;
            display: flex;
            align-items: center;
        }
        .theme-toggle .light-icon,
        .theme-toggle .dark-icon {
            color: white;
            margin: 0 8px;
            font-size: 1.3em;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 65px;
            height: 38px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 30px;
            width: 30px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        input:focus + .slider {
            box-shadow: 0 0 1px var(--primary-color);
        }
        input:checked + .slider:before {
            transform: translateX(27px);
        }
        .slider.round {
            border-radius: 38px;
        }
        .slider.round:before {
            border-radius: 50%;
        }
        /* Footer styling */
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.2);
            margin-top: 40px;
        }
        footer .disclaimer h3,
        footer .social-share h3 {
            color: var(--primary-color);
            margin-bottom: 12px;
            font-size: 1.3em;
        }
        footer .disclaimer p {
            font-size: 0.95em;
            color: #bdc3c7;
        }
        .social-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .social-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.4em;
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .social-btn:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 15px rgba(0,0,0,0.3);
        }
        /* Specific social button colors */
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.reddit { background-color: #FF4500; }
        .social-btn.email { background-color: #7f8c8d; }
        /* Calculator form styling */
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            margin-top: 25px;
            box-shadow: var(--card-shadow);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 1.05em;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--bg-color);
            color: var(--text-color);
            box-sizing: border-box;
            font-size: 1em;
            transition: border-color 0.3s, box-shadow 0.3s;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.08);
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb), 0.3);
            outline: none;
        }
        /* Responsive form row layout */
        .form-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap; /* Allows items to wrap on smaller screens */
        }
        .form-row .form-group {
            flex: 1 1 calc(50% - 10px); /* Two columns, with gap */
            min-width: 280px; /* Minimum width before wrapping */
        }
        /* Media query for single column on small screens */
        @media (max-width: 600px) {
            .form-row .form-group {
                flex: 1 1 100%; /* Single column */
            }
        }
        /* Calculate button styling */
        .calculate-btn {
            background-image: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 18px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 17px;
            font-weight: bold;
            margin-top: 20px;
            transition: background-image 0.3s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 100%; /* Full width button */
        }
        .calculate-btn:hover {
            background-image: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        /* Result container styling */
        .result-container {
            margin-top: 40px;
            padding: 30px;
            border-radius: 12px;
            background-color: var(--card-bg);
            box-shadow: var(--card-shadow);
            display: block; /* Always block, but opacity controls visibility */
            opacity: 0;
            transition: opacity 0.6s ease-out;
            pointer-events: none; /* Prevents interaction when hidden */
        }
        .result-container.show {
            opacity: 1;
            pointer-events: auto; /* Allows interaction when shown */
        }
        .result-container h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        /* Result table styling */
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .result-table th, .result-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        .result-table th {
            background-color: var(--hover-color);
            font-weight: bold;
            font-size: 1.1em;
        }
        .result-table tr:last-child td {
            border-bottom: none;
        }
        /* Standard reference text styling */
        .standard-reference {
            margin-top: 25px;
            font-style: italic;
            font-size: 0.95rem;
            line-height: 1.5;
            padding: 10px;
            background-color: var(--bg-color);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        /* Tooltip styling */
        .info-icon {
            color: var(--primary-color);
            margin-left: 8px;
            cursor: help;
            font-size: 1em;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%; /* Position above the element */
            left: 50%;
            margin-left: -110px; /* Center the tooltip */
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85em;
        }
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%; /* Arrow at the bottom */
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        /* Custom message box for alerts */
        #custom-message-box {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 18px 30px;
            border-radius: 10px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.5s ease-in-out, background-color 0.3s;
            font-size: 1.1em;
        }
        #custom-message-box.info {
            background-color: var(--success-color);
        }
        #custom-message-box.error {
            background-color: var(--error-color);
        }
        #custom-message-box.warning {
            background-color: var(--accent-color);
            color: #333;
        }

        /* Calculation details section styling */
        #calculation-details {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            font-size: 0.98em;
            overflow-x: auto; /* Allow horizontal scrolling for formulas if needed */
        }
        #calculation-details h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        #calculation-details p.formula {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            font-size: 1.2em;
            text-align: center;
            padding: 12px 0;
            background-color: var(--hover-color);
            border-radius: 6px;
            margin: 15px 0;
            border: 1px dashed var(--border-color);
            white-space: nowrap; /* Prevent formula from wrapping */
        }
        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace;
            background-color: var(--hover-color);
            padding: 8px 12px;
            border-radius: 5px;
            margin-bottom: 8px;
            font-size: 0.95em;
            white-space: nowrap; /* Prevent calculation steps from wrapping */
        }
        #calculation-details ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
        }
        #calculation-details ul li {
            margin-bottom: 5px;
        }
        /* Specific styling for required inputs to highlight visually */
        input:required:invalid {
            border-color: var(--error-color);
        }
        input:required:valid {
            border-color: var(--success-color);
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Design Calculators - Mechanical</h1>
            <p class="subtitle">Smart Tools for Modern Mechanical Engineers</p>
            <div class="theme-toggle">
                <span class="light-icon"><i class="fas fa-sun"></i></span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
                <span class="dark-icon"><i class="fas fa-moon"></i></span>
            </div>
        </div>
    </header>

    <main class="container">
        <a href="indexMech.html" class="back-button">
            <i class="fas fa-arrow-left"></i> Back to Tools
        </a>

        <div class="tool-container">
            <h2>Cooling Tower Sizing Calculator</h2>
            <div class="tool-description">
                <p>This calculator estimates the required heat rejection capacity, water circulation rate, and nominal tonnage for a cooling tower based on hot water inlet/outlet temperatures and the process fluid flow rate. It's a simplified tool for preliminary sizing in industrial applications.</p>
                <p><strong>Key Inputs:</strong></p>
                <ul>
                    <li><strong>Heat Load (Optional):</strong> Direct input of heat to be rejected. If provided, flow rate and temperature difference are ignored for heat load calculation.</li>
                    <li><strong>Process Fluid Flow Rate:</strong> Flow rate of the fluid being cooled (usually water).</li>
                    <li><strong>Hot Water Inlet Temperature (HWIT):</strong> Temperature of water entering the cooling tower.</li>
                    <li><strong>Cold Water Outlet Temperature (CWOT):</strong> Desired temperature of water leaving the cooling tower.</li>
                    <li><strong>Wet Bulb Temperature (WBT):</strong> Ambient wet bulb temperature, crucial for cooling tower performance.</li>
                    <li><strong>Specific Heat of Water (\(c_p\)):</strong> Assumed constant (4.186 kJ/kg&#176;C or 1 Btu/lb&#176;F).</li>
                    <li><strong>Density of Water (\(\rho\)):</strong> Assumed constant (1000 kg/m&#179; or 8.34 lb/gal).</li>
                </ul>
                <p><strong>Calculated Outputs:</strong></p>
                <ul>
                    <li><strong>Heat Rejection (\(\dot{Q}\)):</strong> Total heat dissipated by the tower.</li>
                    <li><strong>Water Circulation Rate (\(\dot{m}\) or \(\dot{V}\)):</strong> Required mass or volumetric flow rate of water.</li>
                    <li><strong>Range:</strong> Temperature difference between HWIT and CWOT.</li>
                    <li><strong>Approach:</strong> Temperature difference between CWOT and WBT.</li>
                    <li><strong>Evaporation Loss:</strong> Estimated water loss due to evaporation.</li>
                    <li><strong>Estimated Fan Power:</strong> A very rough estimate of fan energy required.</li>
                    <li><strong>Cooling Tower Capacity (Tons):</strong> Equivalent cooling capacity in Tons of Refrigeration.</li>
                </ul>
            </div>

            <div class="calculator-form">
                <form id="cooling-tower-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="unit-system">Unit System: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select Metric (&#176;C, kW, kg/s) or Imperial (&#176;F, Btu/hr, gpm) units.</span></span></label>
                            <select id="unit-system" required>
                                <option value="metric">Metric (&#176;C, kW, kg/s, m&#179;/hr)</option>
                                <option value="imperial">Imperial (&#176;F, Btu/hr, gpm, Tons)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="input-mode">Input Mode: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Choose to input Heat Load directly, or calculate it from Flow Rate and Temperature Difference.</span></span></label>
                            <select id="input-mode" required>
                                <option value="flow-temp">Flow Rate & Temperature Difference</option>
                                <option value="heat-load">Direct Heat Load Input</option>
                            </select>
                        </div>
                    </div>

                    <div id="flow-temp-inputs">
                        <h3>Process Parameters</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="process-flow-rate">Process Fluid Flow Rate <span class="flow-unit-label">(m&#179;/hr)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Flow rate of water through the process/heat exchanger.</span></span></label>
                                <input type="number" id="process-flow-rate" step="any" value="100" required min="0.01">
                            </div>
                            <div class="form-group">
                                <label for="hot-water-inlet-temp">Hot Water Inlet Temp (HWIT) <span class="temp-unit-label">(&#176;C)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Temperature of water entering the cooling tower.</span></span></label>
                                <input type="number" id="hot-water-inlet-temp" step="any" value="40" required min="0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="cold-water-outlet-temp">Cold Water Outlet Temp (CWOT) <span class="temp-unit-label">(&#176;C)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Desired temperature of water leaving the cooling tower. Must be lower than HWIT.</span></span></label>
                                <input type="number" id="cold-water-outlet-temp" step="any" value="30" required min="0">
                            </div>
                            <div class="form-group">
                                <label for="wet-bulb-temp">Wet Bulb Temperature (WBT) <span class="temp-unit-label">(&#176;C)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Ambient wet bulb temperature. Cold water outlet temperature must be higher than WBT.</span></span></label>
                                <input type="number" id="wet-bulb-temp" step="any" value="25" required min="0">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="specific-heat-water">Specific Heat of Water (<span class="specific-heat-unit-label">kJ/kg&#176;C</span>): <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Specific heat capacity of water. Default values are typical.</span></span></label>
                                <input type="number" id="specific-heat-water" step="any" value="4.186" required min="0.01">
                            </div>
                            <div class="form-group">
                                <label for="density-water">Density of Water (<span class="density-unit-label">kg/m&#179;</span>): <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Density of water at operating conditions. Default values are typical.</span></span></label>
                                <input type="number" id="density-water" step="any" value="1000" required min="0.01">
                            </div>
                        </div>
                    </div>

                    <div id="heat-load-input" style="display: none;">
                        <h3>Direct Heat Load Input</h3>
                        <div class="form-group">
                            <label for="direct-heat-load">Heat Load (\(\dot{Q}\)) <span class="heat-load-unit-label">(kW)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the total heat to be rejected by the cooling tower.</span></span></label>
                            <input type="number" id="direct-heat-load" step="any" value="1163" required min="0.01">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="hot-water-inlet-temp-direct">Hot Water Inlet Temp (HWIT) <span class="temp-unit-label">(&#176;C)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Temperature of water entering the cooling tower (needed for range/approach if heat load is direct).</span></span></label>
                                <input type="number" id="hot-water-inlet-temp-direct" step="any" value="40" min="0">
                            </div>
                            <div class="form-group">
                                <label for="cold-water-outlet-temp-direct">Cold Water Outlet Temp (CWOT) <span class="temp-unit-label">(&#176;C)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Desired temperature of water leaving the cooling tower (needed for range/approach if heat load is direct).</span></span></label>
                                <input type="number" id="cold-water-outlet-temp-direct" step="any" value="30" min="0">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="wet-bulb-temp-direct">Wet Bulb Temperature (WBT) <span class="temp-unit-label">(&#176;C)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Ambient wet bulb temperature (needed for approach if heat load is direct).</span></span></label>
                            <input type="number" id="wet-bulb-temp-direct" step="any" value="25" min="0">
                        </div>
                    </div>

                    <button type="button" id="calculate-cooling-tower-btn" class="calculate-btn">Calculate Sizing</button>
                </form>
            </div>

            <div id="result-container" class="result-container">
                <h3>Calculation Results</h3>
                <div id="calculation-details"></div>
                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body"></tbody>
                </table>
                <div class="standard-reference" id="standard-reference"></div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="disclaimer">
                <h3>Disclaimer</h3>
                <p>This tool provides a simplified, theoretical estimation for cooling tower sizing based on fundamental principles. It does not account for all complex factors involved in real-world cooling tower design and performance (e.g., wet-bulb temperature, fan curves, fill media, site conditions, drift losses). For accurate design and reliable operation, always consult industry standards (like CTI, ASHRAE) and experienced cooling tower manufacturers or qualified mechanical engineers.</p>
            </div>
            <div class="credit">
                <p>Created by A Sharma</p>
            </div>
            <div class="social-share">
                <h3>Share This Site</h3>
                <div class="social-buttons">
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in&title=Design Calculators - Mechanical" target="_blank" class="social-btn linkedin">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" class="social-btn facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?text=Check out this amazing Design Calculators - Mechanical!&url=https://designcalculators.co.in" target="_blank" class="social-btn twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text=Check out this amazing Design Calculators - Mechanical! https://designcalculators.co.in" target="_blank" class="social-btn whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.reddit.com/submit?url=https://designcalculators.co.in&title=Design Calculators - Mechanical" target="_blank" class="social-btn reddit">
                        <i class="fab fa-reddit"></i>
                    </a>
                    <a href="mailto:?subject=Check out Design Calculators - Mechanical!&body=I found this amazing Cooling Tower Sizing Calculator and other mechanical tools: https://designcalculators.co.in" class="social-btn email">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get references to DOM elements
            const calculateBtn = document.getElementById('calculate-cooling-tower-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const standardReference = document.getElementById('standard-reference');
            const calculationDetailsDiv = document.getElementById('calculation-details');

            // Input fields
            const unitSystemSelect = document.getElementById('unit-system');
            const inputModeSelect = document.getElementById('input-mode');

            const flowTempInputsDiv = document.getElementById('flow-temp-inputs');
            const heatLoadInputDiv = document.getElementById('heat-load-input');

            const processFlowRateInput = document.getElementById('process-flow-rate');
            const hotWaterInletTempInput = document.getElementById('hot-water-inlet-temp');
            const coldWaterOutletTempInput = document.getElementById('cold-water-outlet-temp');
            const wetBulbTempInput = document.getElementById('wet-bulb-temp');
            const specificHeatWaterInput = document.getElementById('specific-heat-water');
            const densityWaterInput = document.getElementById('density-water');
            
            const directHeatLoadInput = document.getElementById('direct-heat-load');
            const hotWaterInletTempDirectInput = document.getElementById('hot-water-inlet-temp-direct');
            const coldWaterOutletTempDirectInput = document.getElementById('cold-water-outlet-temp-direct');
            const wetBulbTempDirectInput = document.getElementById('wet-bulb-temp-direct');


            // Unit labels
            const flowUnitLabel = document.querySelector('.flow-unit-label');
            const tempUnitLabels = document.querySelectorAll('.temp-unit-label');
            const specificHeatUnitLabel = document.querySelector('.specific-heat-unit-label');
            const densityUnitLabel = document.querySelector('.density-unit-label');
            const heatLoadUnitLabel = document.querySelector('.heat-load-unit-label');

            /**
             * Displays a custom message box at the top of the screen.
             * @param {string} message - The message to display.
             * @param {string} type - The type of message ('info', 'error', 'warning').
             */
            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    document.body.appendChild(messageBox);
                }
                messageBox.textContent = message;
                messageBox.className = ''; // Clear previous classes
                messageBox.classList.add(type); // Add type class for styling
                messageBox.style.opacity = 1;

                // Hide message after 5 seconds
                setTimeout(() => {
                    messageBox.style.opacity = 0;
                }, 5000);
            }

            /**
             * Updates the unit labels and input values in the UI based on the selected unit system.
             */
            function updateUnitLabelsAndDefaults() {
                const unitSystem = unitSystemSelect.value;

                if (unitSystem === 'metric') {
                    flowUnitLabel.innerHTML = '(m&#179;/hr)';
                    tempUnitLabels.forEach(label => label.innerHTML = '(&#176;C)');
                    specificHeatUnitLabel.innerHTML = '(kJ/kg&#176;C)';
                    densityUnitLabel.innerHTML = '(kg/m&#179;)';
                    heatLoadUnitLabel.innerHTML = '(kW)';

                    // Set metric defaults
                    specificHeatWaterInput.value = "4.186";
                    densityWaterInput.value = "1000";
                    processFlowRateInput.value = "100";
                    hotWaterInletTempInput.value = "40";
                    coldWaterOutletTempInput.value = "30";
                    wetBulbTempInput.value = "25";
                    directHeatLoadInput.value = "1163"; // Example: 100 m3/hr * 1000 kg/m3 * 4.186 kJ/kgC * 10C / 3600 s/hr = 1162.77 kW
                    hotWaterInletTempDirectInput.value = "40";
                    coldWaterOutletTempDirectInput.value = "30";
                    wetBulbTempDirectInput.value = "25";
                } else { // Imperial
                    flowUnitLabel.innerHTML = '(gpm)';
                    tempUnitLabels.forEach(label => label.innerHTML = '(&#176;F)');
                    specificHeatUnitLabel.innerHTML = '(Btu/lb&#176;F)';
                    densityUnitLabel.innerHTML = '(lb/gal)';
                    heatLoadUnitLabel.innerHTML = '(Btu/hr)';

                    // Set imperial defaults
                    specificHeatWaterInput.value = "1";
                    densityWaterInput.value = "8.34"; // lb/gal
                    processFlowRateInput.value = "500";
                    hotWaterInletTempInput.value = "105";
                    coldWaterOutletTempInput.value = "85";
                    wetBulbTempInput.value = "77"; // Approx 25C
                    directHeatLoadInput.value = "500000"; // Example: 500 gpm * 8.34 lb/gal * 1 Btu/lbF * 20F * 60 min/hr = 500400 Btu/hr
                    hotWaterInletTempDirectInput.value = "105";
                    coldWaterOutletTempDirectInput.value = "85";
                    wetBulbTempDirectInput.value = "77";
                }
            }

            /**
             * Toggles visibility of input sections and sets 'required' attributes based on selected input mode.
             */
            function toggleInputModeSections() {
                const selectedMode = inputModeSelect.value;
                if (selectedMode === 'flow-temp') {
                    flowTempInputsDiv.style.display = 'block';
                    heatLoadInputDiv.style.display = 'none';

                    processFlowRateInput.setAttribute('required', 'true');
                    hotWaterInletTempInput.setAttribute('required', 'true');
                    coldWaterOutletTempInput.setAttribute('required', 'true');
                    wetBulbTempInput.setAttribute('required', 'true'); // New required input
                    specificHeatWaterInput.setAttribute('required', 'true');
                    densityWaterInput.setAttribute('required', 'true');
                    
                    directHeatLoadInput.removeAttribute('required');
                    hotWaterInletTempDirectInput.removeAttribute('required');
                    coldWaterOutletTempDirectInput.removeAttribute('required');
                    wetBulbTempDirectInput.removeAttribute('required');

                } else { // heat-load mode
                    flowTempInputsDiv.style.display = 'none';
                    heatLoadInputDiv.style.display = 'block';

                    directHeatLoadInput.setAttribute('required', 'true');
                    hotWaterInletTempDirectInput.setAttribute('required', 'true'); // Required for Range/Approach
                    coldWaterOutletTempDirectInput.setAttribute('required', 'true'); // Required for Range/Approach
                    wetBulbTempDirectInput.setAttribute('required', 'true'); // Required for Approach

                    processFlowRateInput.removeAttribute('required');
                    hotWaterInletTempInput.removeAttribute('required');
                    coldWaterOutletTempInput.removeAttribute('required');
                    wetBulbTempInput.removeAttribute('required');
                    specificHeatWaterInput.removeAttribute('required');
                    densityWaterInput.removeAttribute('required');
                }
            }

            // Event listeners for unit system and input mode changes
            unitSystemSelect.addEventListener('change', updateUnitLabelsAndDefaults);
            inputModeSelect.addEventListener('change', toggleInputModeSections);

            // Initial UI update on load
            updateUnitLabelsAndDefaults();
            toggleInputModeSections();

            /**
             * Adds a row to the result table.
             * @param {string} parameterHtml - The HTML content for the parameter column.
             * @param {string} valueHtml - The HTML content for the value column.
             */
            function addResultRow(parameterHtml, valueHtml) {
                const row = resultTableBody.insertRow();
                const paramCell = row.insertCell();
                const valueCell = row.insertCell();
                paramCell.innerHTML = parameterHtml;
                valueCell.innerHTML = valueHtml;
            }

            // Event listener for the calculate button
            calculateBtn.addEventListener('click', function() {
                // Validate all required fields
                const form = document.getElementById('cooling-tower-form');
                if (!form.checkValidity()) {
                    displayMessage("Please fill in all required fields correctly.", "error");
                    form.reportValidity(); // Show native browser validation messages
                    return;
                }

                const unitSystem = unitSystemSelect.value;
                const inputMode = inputModeSelect.value;

                let heatRejection_kW = 0; // Standardize to kW for internal calculation
                let heatRejection_Btu_hr = 0; // For imperial unit output
                let HWIT, CWOT, WBT;

                let calculationHtml = '<h4>Detailed Calculation Steps:</h4>';

                if (inputMode === 'flow-temp') {
                    const V_dot_input = parseFloat(processFlowRateInput.value);
                    HWIT = parseFloat(hotWaterInletTempInput.value);
                    CWOT = parseFloat(coldWaterOutletTempInput.value);
                    WBT = parseFloat(wetBulbTempInput.value); // New input
                    const c_p = parseFloat(specificHeatWaterInput.value);
                    const rho = parseFloat(densityWaterInput.value);

                    if (HWIT <= CWOT) {
                        displayMessage("Hot Water Inlet Temperature (HWIT) must be greater than Cold Water Outlet Temperature (CWOT).", "error");
                        return;
                    }
                    if (CWOT <= WBT) {
                        displayMessage("Cold Water Outlet Temperature (CWOT) must be greater than Wet Bulb Temperature (WBT).", "error");
                        return;
                    }


                    const deltaT = HWIT - CWOT;

                    calculationHtml += `<p><strong>1. Input Parameters (Flow Rate & Temperature Difference):</strong></p>`;
                    calculationHtml += `<ul>
                        <li>Process Fluid Flow Rate: ${V_dot_input} ${unitSystem === 'metric' ? 'm&#179;/hr' : 'gpm'}</li>
                        <li>Hot Water Inlet Temp (HWIT): ${HWIT} ${unitSystem === 'metric' ? '&#176;C' : '&#176;F'}</li>
                        <li>Cold Water Outlet Temp (CWOT): ${CWOT} ${unitSystem === 'metric' ? '&#176;C' : '&#176;F'}</li>
                        <li>Wet Bulb Temperature (WBT): ${WBT} ${unitSystem === 'metric' ? '&#176;C' : '&#176;F'}</li>
                        <li>Specific Heat of Water (\(c_p\)): ${c_p} ${unitSystem === 'metric' ? 'kJ/kg&#176;C' : 'Btu/lb&#176;F'}</li>
                        <li>Density of Water (\(\rho\)): ${rho} ${unitSystem === 'metric' ? 'kg/m&#179;' : 'lb/gal'}</li>
                    </ul>`;

                    calculationHtml += `<p><strong>2. Calculate Temperature Difference (Range):</strong></p>`;
                    calculationHtml += `<p class="formula">\\[ Range = HWIT - CWOT \\]</p>`;
                    calculationHtml += `<p class="calculation-step">
                        Range = ${HWIT} - ${CWOT} = ${deltaT.toFixed(2)} ${unitSystem === 'metric' ? '&#176;C' : '&#176;F'}
                    </p>`;

                    let m_dot; // Mass flow rate
                    let V_dot; // Volumetric flow rate in consistent units

                    if (unitSystem === 'metric') {
                        // V_dot_input is in m3/hr, convert to m3/s for power calculation
                        V_dot = V_dot_input; // m3/hr
                        m_dot = rho * V_dot_input / 3600; // kg/s
                        heatRejection_kW = m_dot * c_p * deltaT; // kW

                        calculationHtml += `<p><strong>3. Calculate Mass Flow Rate:</strong></p>`;
                        calculationHtml += `<p class="formula">\\[ \\dot{m} = \\rho \\cdot \\dot{V}_{input} / 3600 \\text{ (for m\u00B3/hr to kg/s)} \\]</p>`;
                        calculationHtml += `<p class="calculation-step">
                            \\( \\dot{m} \\) = ${rho} kg/m&#179; \\times ${V_dot_input} m&#179;/hr / 3600 s/hr = ${m_dot.toFixed(3)} kg/s
                        </p>`;

                        calculationHtml += `<p><strong>4. Calculate Heat Rejection:</strong></p>`;
                        calculationHtml += `<p class="formula">\\[ \\dot{Q} = \\dot{m} \\cdot c_p \\cdot Range \\]</p>`;
                        calculationHtml += `<p class="calculation-step">
                            \\( \\dot{Q} \\) = ${m_dot.toFixed(3)} kg/s \\times ${c_p} kJ/kg&#176;C \\times ${deltaT.toFixed(2)} &#176;C = ${heatRejection_kW.toFixed(2)} kW
                        </p>`;

                    } else { // Imperial
                        // V_dot_input is in gpm, convert to lb/hr for power calculation
                        V_dot = V_dot_input; // gpm
                        m_dot = rho * V_dot_input * 60; // lb/hr (since rho is lb/gal and V_dot_input is gal/min, 60 min/hr)
                        heatRejection_Btu_hr = m_dot * c_p * deltaT; // Btu/hr
                        heatRejection_kW = heatRejection_Btu_hr / 3412.14; // Convert Btu/hr to kW

                        calculationHtml += `<p><strong>3. Calculate Mass Flow Rate:</strong></p>`;
                        calculationHtml += `<p class="formula">\\[ \\dot{m} = \\rho \\cdot \\dot{V}_{input} \\cdot 60 \\text{ (for gpm to lb/hr)} \\]</p>`;
                        calculationHtml += `<p class="calculation-step">
                            \\( \\dot{m} \\) = ${rho} lb/gal \\times ${V_dot_input} gpm \\times 60 min/hr = ${m_dot.toFixed(2)} lb/hr
                        </p>`;

                        calculationHtml += `<p><strong>4. Calculate Heat Rejection:</strong></p>`;
                        calculationHtml += `<p class="formula">\\[ \\dot{Q} = \\dot{m} \\cdot c_p \\cdot Range \\]</p>`;
                        calculationHtml += `<p class="calculation-step">
                            \\( \\dot{Q} \\) = ${m_dot.toFixed(2)} lb/hr \\times ${c_p} Btu/lb&#176;F \\times ${deltaT.toFixed(2)} &#176;F = ${heatRejection_Btu_hr.toFixed(2)} Btu/hr
                        </p>`;
                    }

                } else { // inputMode === 'heat-load'
                    const directQ = parseFloat(directHeatLoadInput.value);
                    HWIT = parseFloat(hotWaterInletTempDirectInput.value);
                    CWOT = parseFloat(coldWaterOutletTempDirectInput.value);
                    WBT = parseFloat(wetBulbTempDirectInput.value);

                    if (HWIT <= CWOT) {
                        displayMessage("Hot Water Inlet Temperature (HWIT) must be greater than Cold Water Outlet Temperature (CWOT).", "error");
                        return;
                    }
                    if (CWOT <= WBT) {
                        displayMessage("Cold Water Outlet Temperature (CWOT) must be greater than Wet Bulb Temperature (WBT).", "error");
                        return;
                    }

                    if (unitSystem === 'metric') {
                        heatRejection_kW = directQ;
                    } else {
                        heatRejection_Btu_hr = directQ;
                        heatRejection_kW = directQ / 3412.14; // Convert Btu/hr to kW for internal consistency
                    }

                    calculationHtml += `<p><strong>1. Input Parameters (Direct Heat Load):</strong></p>`;
                    calculationHtml += `<ul>
                        <li>Direct Heat Load (\(\dot{Q}\)): ${directQ} ${unitSystem === 'metric' ? 'kW' : 'Btu/hr'}</li>
                        <li>Hot Water Inlet Temp (HWIT): ${HWIT} ${unitSystem === 'metric' ? '&#176;C' : '&#176;F'}</li>
                        <li>Cold Water Outlet Temp (CWOT): ${CWOT} ${unitSystem === 'metric' ? '&#176;C' : '&#176;F'}</li>
                        <li>Wet Bulb Temperature (WBT): ${WBT} ${unitSystem === 'metric' ? '&#176;C' : '&#176;F'}</li>
                    </ul>`;
                    calculationHtml += `<p>Heat load directly provided.</p>`;
                }

                // Calculate Cooling Tower Tonnage (standard: 1 Ton = 12000 Btu/hr or 3.517 kW)
                const coolingTowerTons = heatRejection_kW / 3.517;

                // Calculate Range and Approach from the determined HWIT, CWOT, WBT
                const range = HWIT - CWOT;
                const approach = CWOT - WBT;

                // Calculate Evaporation Loss (simplified: ~0.00085 kg/s per kW for metric, or ~1 GPM per 10 Tons for Imperial)
                let evaporationLoss;
                let evaporationUnit;
                if (unitSystem === 'metric') {
                    // Rule of thumb: Evaporation ~ 0.0017 m3/hr per 100 kW, or ~0.00047 L/s per kW
                    // Or more precisely based on Range (deltaT) and Heat Rejection
                    // Evaporation (m3/hr) = (kW * 3600) / (Latent Heat of Vaporization * Density)
                    // Assuming Latent Heat of Vaporization is approx 2450 kJ/kg for water at typical cooling tower temps
                    // and density is 1000 kg/m3
                    evaporationLoss = heatRejection_kW * 3600 / (2450 * 1000); // m3/hr
                    evaporationUnit = "m&#179;/hr";
                    
                    calculationHtml += `<p><strong>5. Calculate Evaporation Loss:</strong></p>`;
                    calculationHtml += `<p class="formula">\\[ \\dot{m}_{evap} = \\frac{\\dot{Q}}{h_{fg}} \\text{ (approx, where } h_{fg} \\text{ is latent heat)} \\]</p>`;
                    calculationHtml += `<p class="calculation-step">
                        \\( \\dot{m}_{evap} \\) = ${heatRejection_kW.toFixed(2)} kW \\times 3600 s/hr / (2450 kJ/kg \\times 1000 kg/m&#179;) = ${evaporationLoss.toFixed(3)} m&#179;/hr
                    </p>`;
                } else { // Imperial
                    // Rule of thumb: Evaporation ~ 0.001 GPM per 10000 Btu/hr, or ~ 1 GPM per 10 Tons
                    evaporationLoss = heatRejection_Btu_hr / 1000; // GPM/1000 Btu/hr (very rough)
                    evaporationUnit = "gpm";

                    // More accurate: Evaporation (gpm) = (Btu/hr) / (Latent Heat of Vaporization * 500)
                    // Assuming Latent Heat of Vaporization is approx 1000 Btu/lb
                    evaporationLoss = heatRejection_Btu_hr / (1000 * 500); // GPM (500 is conversion factor for gpm to lb/hr for 1F deltaT)
                    
                    calculationHtml += `<p><strong>5. Calculate Evaporation Loss:</strong></p>`;
                    calculationHtml += `<p class="formula">\\[ \\dot{V}_{evap} = \\frac{\\dot{Q}}{h_{fg} \\cdot 500} \\text{ (approx, where } h_{fg} \\text{ is latent heat)} \\]</p>`;
                    calculationHtml += `<p class="calculation-step">
                        \\( \\dot{V}_{evap} \\) = ${heatRejection_Btu_hr.toFixed(2)} Btu/hr / (1000 Btu/lb \\times 500) = ${evaporationLoss.toFixed(3)} gpm
                    </p>`;
                }

                // Estimated Fan Power (highly simplified rule of thumb)
                // Metric: ~ 2-3 kW per 1000 kW rejected heat (very rough)
                // Imperial: ~ 0.5-1 HP per 100 Tons (very rough)
                let fanPower;
                let fanPowerUnit;
                if (unitSystem === 'metric') {
                    fanPower = heatRejection_kW * 0.0025; // Assuming 0.25% of heat rejection as fan power
                    fanPowerUnit = "kW";
                    calculationHtml += `<p><strong>6. Estimate Fan Power:</strong></p>`;
                    calculationHtml += `<p class="formula">\\[ P_{fan} = \\dot{Q} \\cdot 0.0025 \\text{ (Simplified Estimation)} \\]</p>`;
                    calculationHtml += `<p class="calculation-step">
                        \\( P_{fan} \\) = ${heatRejection_kW.toFixed(2)} kW \\times 0.0025 = ${fanPower.toFixed(2)} kW
                    </p>`;
                } else { // Imperial
                    fanPower = coolingTowerTons * 0.75 / 100; // Assuming 0.75 HP per 100 Tons
                     calculationHtml += `<p><strong>6. Estimate Fan Power:</strong></p>`;
                    calculationHtml += `<p class="formula">\\[ P_{fan} = Tons \\cdot 0.75 / 100 \\text{ (Simplified Estimation)} \\]</p>`;
                    calculationHtml += `<p class="calculation-step">
                        \\( P_{fan} \\) = ${coolingTowerTons.toFixed(2)} Tons \\times 0.75 / 100 = ${fanPower.toFixed(2)} HP
                    </p>`;
                }


                // Prepare results for display
                resultTableBody.innerHTML = ''; // Clear previous results
                calculationDetailsDiv.innerHTML = calculationHtml;

                addResultRow("Unit System", unitSystem === 'imperial' ? 'Imperial' : 'Metric');

                if (unitSystem === 'metric') {
                    addResultRow("Heat Rejection (\\(\\dot{Q}\\))", `<strong>\\( ${heatRejection_kW.toFixed(2)} \\) kW</strong>`);
                    // Recalculate circulation rate accurately based on heat rejection for direct heat input mode
                    const circulationRate_m3_hr = heatRejection_kW * 3600 / (parseFloat(specificHeatWaterInput.value) * parseFloat(densityWaterInput.value) * (HWIT - CWOT));
                    addResultRow("Water Circulation Rate (\\(\\dot{V}\\))", `\\( ${circulationRate_m3_hr.toFixed(2)} \\) m&#179;/hr`);
                    addResultRow("Range", `\\( ${range.toFixed(2)} \\) &#176;C`);
                    addResultRow("Approach", `\\( ${approach.toFixed(2)} \\) &#176;C`);
                    addResultRow("Evaporation Loss", `\\( ${evaporationLoss.toFixed(3)} \\) ${evaporationUnit}`);
                    addResultRow("Estimated Fan Power", `\\( ${fanPower.toFixed(2)} \\) ${fanPowerUnit}`);
                    addResultRow("Cooling Tower Capacity (Tons)", `\\( ${coolingTowerTons.toFixed(2)} \\) Tons`);

                } else { // Imperial
                    addResultRow("Heat Rejection (\\(\\dot{Q}\\))", `<strong>\\( ${heatRejection_Btu_hr.toFixed(2)} \\) Btu/hr</strong>`);
                    // Recalculate circulation rate accurately based on heat rejection for direct heat input mode
                    const circulationRate_gpm = heatRejection_Btu_hr / (parseFloat(specificHeatWaterInput.value) * (HWIT - CWOT) * parseFloat(densityWaterInput.value) * 60); // 60 min/hr
                    addResultRow("Water Circulation Rate (\\(\\dot{V}\\))", `\\( ${circulationRate_gpm.toFixed(2)} \\) gpm`);
                    addResultRow("Range", `\\( ${range.toFixed(2)} \\) &#176;F`);
                    addResultRow("Approach", `\\( ${approach.toFixed(2)} \\) &#176;F`);
                    addResultRow("Evaporation Loss", `\\( ${evaporationLoss.toFixed(3)} \\) ${evaporationUnit}`);
                    addResultRow("Estimated Fan Power", `\\( ${fanPower.toFixed(2)} \\) ${fanPowerUnit}`);
                    addResultRow("Cooling Tower Capacity (Tons)", `\\( ${coolingTowerTons.toFixed(2)} \\) Tons`);
                }

                // Re-render MathJax equations - ensure MathJax is fully loaded
                if (window.MathJax && typeof window.MathJax.typesetPromise === 'function') {
                    window.MathJax.typesetPromise([calculationDetailsDiv, resultTableBody]);
                }

                // Display standard reference
                standardReference.innerHTML = "This tool provides a simplified, theoretical estimation for cooling tower sizing based on fundamental principles. It does not account for all complex factors involved in real-world cooling tower design and performance. For accurate design, always consult industry standards (like CTI, ASHRAE) and experienced professionals.";

                // Show results container
                resultContainer.style.display = 'block';
                setTimeout(() => {
                    resultContainer.classList.add('show');
                }, 10);
                resultContainer.scrollIntoView({ behavior: 'smooth' });

                displayMessage("Cooling Tower Sizing Calculation completed successfully!", "info");
            });

            // Theme switch functionality
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }
                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }
        });
    </script>
</body>
</html>