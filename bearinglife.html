<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Industrial Bearing Life Calculator (ISO 281 Pro) - World Class Edition</title>
<meta name="description" content="A professional, industrial-grade tool for calculating the life of various rolling bearings based on detailed ISO 281 standards, providing comprehensive, step-by-step analysis.">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
<script async src="https://www.googlesyndication.com/pagead/js/adsbygoogle.js?id=G-23Y1V450SR"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-23Y1V450SR');
</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
MathJax = {
tex: {
inlineMath: [['$', '$'], ['\\(', '\\)']]
},
svg: {
fontCache: 'global'
}
};
</script>

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<style>
:root {
--primary-color: #1E3A8A; /* Professional Dark Blue */
--secondary-color: #2563EB; /* Bright Blue */
--accent-color: #F59E0B; /* Warm Amber */
--bg-color: #F8FAFC;
--card-bg: #FFFFFF;
--text-color: #4B5563;
--heading-color: #111827;
--footer-bg: #0F172A;
--border-color: #E2E8F0;
--gradient-primary: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
--gradient-dark: linear-gradient(135deg, #0F172A, #1E293B);
--card-shadow: 0 10px 25px rgba(0, 0, 0, 0.1), 0 5px 10px rgba(0, 0, 0, 0.04);
--hover-color: #eef2ff;
--button-hover-shadow: 0 7px 20px rgba(37, 99, 235, 0.4);
--highlight-bg: rgba(245, 158, 11, 0.15);
--success-color: #10B981;
--fail-color: #EF4444;
}
body.dark-mode {
--primary-color: #10B981;
--secondary-color: #34D399;
--bg-color: #0F172A;
--card-bg: #1E293B;
--text-color: #CBD5E1;
--heading-color: #F1F5F9;
--footer-bg: #020617;
--border-color: #334155;
--highlight-bg: rgba(16, 185, 129, 0.2);
--hover-color: #334155;
--button-hover-shadow: 0 7px 20px rgba(16, 185, 129, 0.3);
}
html { 
scroll-behavior: smooth;
}
body {
font-family: 'Inter', sans-serif;
background-color: var(--bg-color);
color: var(--text-color);
line-height: 1.8;
transition: background-color 0.3s, color 0.3s;
overflow-x: hidden;
margin: 0;
padding: 0;
}
.container { 
max-width: 1280px; 
margin: 0 auto; 
padding: 0 24px; 
}
.content-container {
max-width: 1100px;
margin: 0 auto;
padding: 20px;
}
.header {
background: var(--gradient-primary);
color: white;
padding: 24px 0;
position: relative;
overflow: hidden;
box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.navbar { 
display: flex; 
justify-content: space-between;
align-items: center; 
}
.logo-container { 
display: flex; 
align-items: center; 
gap: 16px; 
text-decoration: none; 
color: white; 
}
.logo-text {
font-size: 1.75rem;
font-weight: 800;
font-family: 'Montserrat', sans-serif;
}
.theme-toggle { 
display: flex; 
align-items: center; 
gap: 12px;
}
.theme-toggle .icon { 
color: white; 
font-size: 1.2rem; 
}
.switch { 
position: relative; 
display: inline-block; 
width: 56px; 
height: 30px;
}
.switch input { 
opacity: 0; 
width: 0; 
height: 0; 
}
.slider { 
position: absolute; 
cursor: pointer; 
top: 0; 
left: 0;
right: 0; 
bottom: 0; 
background-color: rgba(0,0,0,0.2); 
transition: .4s; 
border-radius: 30px; 
}
.slider:before { 
position: absolute; 
content: ""; 
height: 22px; 
width: 22px;
left: 4px; 
bottom: 4px; 
background-color: white; 
transition: .4s; 
border-radius: 50%; 
}
input:checked + .slider { 
background-color: var(--accent-color);
}
input:checked + .slider:before { 
transform: translateX(26px); 
}
main { 
padding: 40px 0; 
}
.tool-container {
background-color: var(--card-bg);
border-radius: 12px;
padding: 30px;
box-shadow: var(--card-shadow);
margin-bottom: 30px;
}
.tool-container h2 {
color: var(--primary-color);
border-bottom: 3px solid var(--primary-color);
padding-bottom: 15px;
margin-top: 0;
margin-bottom: 25px;
font-family: 'Montserrat', sans-serif;
}
.intro-section {
    background-color: var(--hover-color);
    border-radius: 8px;
    padding: 25px;
    margin-bottom: 30px;
    border-left: 5px solid var(--primary-color);
}
.intro-section h3 {
    margin-top: 0;
    color: var(--primary-color);
    font-family: 'Montserrat', sans-serif;
}
.intro-section p {
    color: var(--text-color);
}
.back-button {
display: inline-block;
background-color: var(--primary-color);
color: white;
padding: 12px 20px;
border-radius: 5px;
text-decoration: none;
margin-bottom: 25px;
transition: background-color 0.3s, transform 0.2s;
font-weight: 600;
}
.back-button:hover {
background-color: var(--secondary-color);
transform: translateY(-2px);
}
.calculator-form {
background-color: var(--card-bg);
border-radius: 8px;
padding: 25px;
margin-top: 25px;
box-shadow: 0 4px 15px rgba(0,0,0,0.05);
}
.form-section-header {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--primary-color);
    margin-top: 25px;
    margin-bottom: 15px;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--border-color);
}
.form-group {
margin-bottom: 20px;
}
.form-group label {
display: flex;
align-items: center;
margin-bottom: 8px;
font-weight: 600;
color: var(--heading-color);
}
.form-group input, .form-group select {
width: 100%;
padding: 12px;
border: 1px solid var(--border-color);
border-radius: 5px;
background-color: var(--bg-color);
color: var(--text-color);
box-sizing: border-box;
transition: border-color 0.3s, box-shadow 0.3s;
font-size: 1rem;
}
.form-group input:focus, .form-group select:focus {
border-color: var(--primary-color);
box-shadow: 0 0 8px rgba(30, 58, 138, 0.3);
outline: none;
}
.form-row {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
gap: 20px;
}
.calculate-btn {
background: var(--gradient-primary);
color: white;
border: none;
padding: 15px 25px;
border-radius: 8px;
cursor: pointer;
font-size: 1.2rem;
font-weight: 700;
font-family: 'Montserrat', sans-serif;
margin-top: 25px;
transition: transform 0.2s, box-shadow 0.3s;
position: relative;
overflow: hidden;
width: 100%;
}
.calculate-btn:hover {
transform: translateY(-3px);
box-shadow: var(--button-hover-shadow);
}
.calculate-btn .ripple {
position: absolute;
border-radius: 50%;
background-color: rgba(255, 255, 255, 0.7);
animation: ripple-effect 0.6s linear forwards;
transform: scale(0);
pointer-events: none;
}
@keyframes ripple-effect {
to {
transform: scale(4);
opacity: 0;
}
}
.result-container {
margin-top: 40px;
padding: 25px;
border-radius: 12px;
background-color: var(--card-bg);
box-shadow: var(--card-shadow);
display: none;
opacity: 0;
transform: translateY(30px);
transition: opacity 0.6s ease-out, transform 0.6s ease-out;
}
.result-container.show {
display: block;
opacity: 1;
transform: translateY(0);
}
.result-container h3 {
color: var(--primary-color);
margin-bottom: 25px;
font-family: 'Montserrat', sans-serif;
font-size: 1.8rem;
text-align: center;
}
.calculation-step-container {
margin-bottom: 20px;
border: 1px solid var(--border-color);
border-radius: 8px;
overflow: hidden;
opacity: 0;
animation: fadeInSlideUp 0.5s ease-out forwards;
transition: box-shadow 0.3s;
}
.calculation-step-container:hover {
    box-shadow: 0 5px 15px rgba(0,0,0,0.08);
}
.step-header {
background-color: var(--hover-color);
padding: 15px 20px;
font-weight: 700;
font-size: 1.1rem;
color: var(--heading-color);
border-bottom: 1px solid var(--border-color);
display: flex;
justify-content: space-between;
align-items: center;
}
.step-content {
padding: 20px;
display: block; /* Always show content */
border-top: 1px solid var(--border-color);
}
.step-content p.formula {
font-family: 'Times New Roman', serif;
font-style: italic;
font-size: 1.2em;
text-align: center;
padding: 12px;
background-color: var(--bg-color);
border: 1px solid var(--border-color);
border-radius: 4px;
margin: 15px 0;
overflow-x: auto;
color: var(--text-color);
}
.step-content p.calculation {
font-family: 'Courier New', monospace;
background-color: var(--bg-color);
padding: 10px 15px;
border-radius: 3px;
margin-bottom: 10px;
color: var(--text-color);
word-wrap: break-word;
border-left: 3px solid var(--secondary-color);
}
.step-content .final-result {
font-weight: 700;
color: var(--primary-color);
background: var(--highlight-bg);
padding: 12px;
border-radius: 4px;
text-align: center;
margin-top: 15px;
font-size: 1.1rem;
}
.final-verdict {
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    font-size: 1.5rem;
    font-weight: 700;
    font-family: 'Montserrat', sans-serif;
    margin-top: 20px;
}
.final-verdict.safe {
    background-color: var(--success-color);
    color: white;
}
.final-verdict.fail {
    background-color: var(--fail-color);
    color: white;
}
.recommendations {
margin-top: 30px;
padding: 20px;
border: 2px solid var(--border-color);
border-radius: 8px;
background-color: var(--bg-color);
}
.recommendations h4 {
color: var(--secondary-color);
margin-top: 0;
font-family: 'Montserrat', sans-serif;
}
.recommendations ul {
padding-left: 20px;
}
.recommendations ul li {
margin-bottom: 10px;
}
.info-icon {
color: var(--secondary-color);
margin-left: 8px;
cursor: help;
font-size: 0.9em;
}
.tooltip {
position: relative;
display: inline-block;
}
.tooltip .tooltiptext {
visibility: hidden;
width: 280px;
background-color: #333;
color: #fff;
text-align: center;
border-radius: 6px;
padding: 10px;
position: absolute;
z-index: 10;
bottom: 135%;
left: 50%;
margin-left: -140px;
opacity: 0;
transition: opacity 0.3s;
font-weight: normal;
font-size: 0.9rem;
}
.tooltip:hover .tooltiptext {
visibility: visible;
opacity: 1;
}
#custom-message-box {
position: fixed;
top: 20px;
left: 50%;
transform: translateX(-50%);
padding: 15px 25px;
border-radius: 8px;
box-shadow: 0 4px 10px rgba(0,0,0,0.2);
z-index: 1000;
font-weight: bold;
color: white;
opacity: 0;
visibility: hidden;
transition: opacity 0.5s ease-in-out, visibility 0.5s;
}
#custom-message-box.show {
    opacity: 1;
    visibility: visible;
}
@keyframes fadeInSlideUp {
from {
opacity: 0;
transform: translateY(20px);
}
to {
opacity: 1;
transform: translateY(0);
}
}
footer { 
background: var(--gradient-dark);
color: #CBD5E1;
padding: 80px 0 30px 0; 
}
.footer-grid { 
display: grid; 
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); 
gap: 40px; 
}
.footer-col h4 { 
font-size: 1.2rem;
color: white; 
margin-bottom: 1.5rem; 
font-weight: 700;
}
.footer-col ul { list-style: none; padding: 0; }
.footer-col ul li { margin-bottom: 1rem; }
.footer-col a { color: #CBD5E1; text-decoration: none; transition: color 0.3s; }
.footer-col a:hover { color: var(--accent-color); }
.footer-disclaimer {
text-align: center;
margin: 40px auto;
padding-top: 40px;
border-top: 1px solid #334155;
max-width: 800px;
}
.footer-bottom { 
text-align: center; 
padding-top: 20px; 
font-size: 0.9rem; 
color: #94A3B8;
}
.footer-bottom a {
color: #CBD5E1; 
text-decoration: none; 
transition: color 0.3s;
}
.footer-bottom a:hover {
color: var(--accent-color);
text-decoration: underline;
}
.creator-name { 
color: var(--secondary-color); 
font-weight: bold; 
}
@media (max-width: 768px) {
.navbar { 
flex-direction: column;
gap: 24px; 
}
.form-row {
grid-template-columns: 1fr;
}
.container, .content-container {
padding: 15px;
}
.tool-container {
padding: 20px;
}
}
</style>
</head>
<body>

<header class="header">
<div class="container">
<nav class="navbar">
<a href="/" class="logo-container">
<span class="logo-text"> Design Calculators </span>
</a>
<div class="theme-toggle">
<i class="fas fa-sun icon"></i>
<label class="switch">
<input type="checkbox" id="theme-switch">
<span class="slider"></span>
</label>
<i class="fas fa-moon icon"></i>
</div>
</nav>
</div>
</header>

<main class="content-container">
<a class='back-button' href="/indexmech"><i class="fas fa-arrow-left"></i> Back to Tools</a>
<div class="tool-container">
<h2>Industrial Bearing Life Calculator (ISO 281 Pro)</h2>

<div class="intro-section">
    <h3>The Foundation of Reliable Rotation</h3>
    <p>Rolling bearings are high-precision components that enable smooth, low-friction motion in machinery. They support rotating shafts and minimize energy loss by replacing sliding friction with rolling friction. The reliability of any rotating equipment, from electric motors to automotive wheel hubs, depends directly on the durability of its bearings.</p>
    <h3>The Science of Bearing Longevity</h3>
    <p>Predicting bearing life is crucial for designing reliable and cost-effective machinery. The internationally recognized <strong>ISO 281 standard</strong> provides a robust method for these calculations. The "L10 life" is a key metric, representing the number of revolutions (or hours of operation) that 90% of a group of identical bearings will complete before showing the first signs of fatigue. This calculator extends this to the "adjusted life" (Lna), which incorporates factors for reliability, material quality, and lubrication to provide a much more realistic prediction for real-world industrial applications.</p>
</div>

<div class="calculator-form">
<form id="bearing-life-form">

<div class="form-section-header">Bearing & Load Parameters</div>
<div class="form-row">
    <div class="form-group">
        <label for="bearing-type">Bearing Type</label>
        <select id="bearing-type" required>
            <option value="deepGroove" selected>Deep Groove Ball Bearing</option>
            <option value="angularContact">Angular Contact Ball Bearing</option>
            <option value="cylindricalRoller">Cylindrical Roller Bearing</option>
            <option value="taperedRoller">Tapered Roller Bearing</option>
            <option value="sphericalRoller">Spherical Roller Bearing</option>
        </select>
    </div>
    <div class="form-group">
        <label for="speed">Rotational Speed (RPM) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Operating speed of the bearing's rotating ring.</span></span></label>
        <input type="number" id="speed" value="2500" min="1" step="10" required>
    </div>
</div>
<div class="form-row">
    <div class="form-group">
        <label for="dynamic-load-c">Dynamic Load Rating, C (N) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Found in bearing catalogs. It's the load a bearing can endure for one million revolutions.</span></span></label>
        <input type="number" id="dynamic-load-c" value="35000" min="1" step="100" required>
    </div>
    <div class="form-group">
        <label for="static-load-c0">Static Load Rating, C₀ (N) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Also from catalogs. Used for calculating load factors.</span></span></label>
        <input type="number" id="static-load-c0" value="18000" min="1" step="100" required>
    </div>
</div>
<div class="form-row">
    <div class="form-group">
        <label for="radial-load-fr">Radial Load, Fᵣ (N) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The load acting perpendicular to the shaft's axis.</span></span></label>
        <input type="number" id="radial-load-fr" value="2500" min="0" step="10" required>
    </div>
    <div class="form-group">
        <label for="axial-load-fa">Axial Load, Fₐ (N) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The load acting parallel to the shaft's axis.</span></span></label>
        <input type="number" id="axial-load-fa" value="1200" min="0" step="10" required>
    </div>
</div>

<div class="form-section-header">Life Adjustment Factors (ISO 281)</div>
<div class="form-row">
    <div class="form-group">
        <label for="reliability-factor">Reliability (a₁) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The statistical probability of a bearing reaching its calculated life. 90% is standard.</span></span></label>
        <select id="reliability-factor" required>
            <option value="1.00" selected>90% (L10)</option>
            <option value="0.62">95% (L5)</option>
            <option value="0.53">96% (L4)</option>
            <option value="0.44">97% (L3)</option>
            <option value="0.33">98% (L2)</option>
            <option value="0.21">99% (L1)</option>
        </select>
    </div>
    <div class="form-group">
        <label for="material-factor">Material (a₂) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Accounts for material quality and processing. Standard bearings are 1.0.</span></span></label>
        <select id="material-factor" required>
            <option value="1.0" selected>Standard Steel</option>
            <option value="1.5">Improved Cleanliness Steel</option>
            <option value="3.0">High-Grade Vacuum Remelted</option>
        </select>
    </div>
</div>
<div class="form-row">
     <div class="form-group">
        <label for="lubrication-factor">Lubrication Condition (a₃) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Reflects the effectiveness of the lubrication. Assumes appropriate viscosity.</span></span></label>
        <select id="lubrication-factor" required>
            <option value="1.0" selected>Excellent (Full separation, e.g., oil bath)</option>
            <option value="0.8">Good (Clean, appropriate grease/oil)</option>
            <option value="0.5">Average (Minor contamination)</option>
            <option value="0.2">Poor (Contaminated, incorrect lube)</option>
        </select>
    </div>
</div>

<button type="button" id="calculate-btn" class="calculate-btn">Calculate Bearing Life</button>
</form>
</div>
<div id="result-container" class="result-container">
<h3>ISO 281 Step-by-Step Life Calculation</h3>
<div id="calculation-steps">
<!-- Calculation steps will be dynamically inserted here -->
</div>
<div class="recommendations">
<h4>Applicable Standards & Recommendations</h4>
<div id="recommendations-content">
<!-- Recommendations will be dynamically inserted here -->
</div>
</div>
</div>
</div>
</main>

<footer>
<div class="container">
<div class="footer-grid">
<div class="footer-col">
<h4> Quick Links </h4>
<ul>
<li><a href="/indexele"> Electrical Tools </a></li>
<li><a href="/indexmech"> Mechanical Tools </a></li>
<li><a href="/indexinst"> Instrumentation Tools </a></li>
<li><a href="blog.html"> Blog & Articles </a></li>
</ul>
</div>
<div class="footer-col">
<h4> Legal </h4>
<ul>
<li><a href="/privacy-policy"> Privacy Policy </a></li>
<li><a href="/terms-of-service"> Terms of Service </a></li>
<li><a href="/sitemap2"> Sitemap </a></li>
</ul>
</div>
<div class="footer-col">
<h4> About </h4>
<ul>
<li><a href="/about"> About Us </a></li>
<li><a href="/contact"> Contact Us </a></li>
<li><a href="/faq"> FAQ </a></li>
</ul>
</div>
</div>
<div class="footer-disclaimer">
<h4> Disclaimer </h4>
<p> All tools are for guidance only and should not replace professional engineering judgment. Results must be verified by a qualified professional against project requirements and local codes. </p>
</div>
<div class="footer-bottom">
<p> &copy; 2025 Design Calculators. Created by <span class="creator-name"> A Sharma </span> . All rights reserved. </p>
</div>
</div>
</footer>

<div id="custom-message-box"></div>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const calculateBtn = document.getElementById('calculate-btn');
    const resultContainer = document.getElementById('result-container');
    const calculationStepsDiv = document.getElementById('calculation-steps');
    const recommendationsDiv = document.getElementById('recommendations-content');
    
    calculateBtn.addEventListener('click', (e) => {
        const ripple = document.createElement('span');
        const diameter = Math.max(calculateBtn.clientWidth, calculateBtn.clientHeight);
        ripple.style.width = ripple.style.height = `${diameter}px`;
        ripple.style.left = `${e.clientX - (calculateBtn.getBoundingClientRect().left + diameter / 2)}px`;
        ripple.style.top = `${e.clientY - (calculateBtn.getBoundingClientRect().top + diameter / 2)}px`;
        ripple.classList.add('ripple');
        calculateBtn.appendChild(ripple);
        ripple.addEventListener('animationend', () => ripple.remove());
        if (validateInputs()) {
            performCalculation();
        }
    });

    function validateInputs() {
        let isValid = true;
        document.querySelectorAll('#bearing-life-form [required]').forEach(input => {
            const value = input.value;
            const isNumber = input.type === 'number';
            const parsedValue = isNumber ? parseFloat(value) : 0;

            if (!value || (isNumber && (isNaN(parsedValue) || parsedValue < 0))) {
                 if(isValid) {
                    displayMessage(`Error: "${input.labels[0].textContent.split('(')[0].trim()}" must be a positive value.`, "error");
                    isValid = false;
                }
            }
        });
        return isValid;
    }

    function performCalculation() {
        const inputs = {
            type: document.getElementById('bearing-type').value,
            n: parseFloat(document.getElementById('speed').value),
            C: parseFloat(document.getElementById('dynamic-load-c').value),
            C0: parseFloat(document.getElementById('static-load-c0').value),
            Fr: parseFloat(document.getElementById('radial-load-fr').value),
            Fa: parseFloat(document.getElementById('axial-load-fa').value),
            a1: parseFloat(document.getElementById('reliability-factor').value),
            a2: parseFloat(document.getElementById('material-factor').value),
            a3: parseFloat(document.getElementById('lubrication-factor').value),
        };
        calculationStepsDiv.innerHTML = '';

        // --- Step 1: Calculate Equivalent Dynamic Load (P) ---
        const p = (inputs.type.toLowerCase().includes('ball')) ? 3 : 10/3;
        const { X, Y, P, details } = getEquivalentLoad(inputs);
        addCalculationStep(1, 'Equivalent Dynamic Load (P)', '$$P = X F_r + Y F_a$$', 
            details,
            `P = ${P.toFixed(2)} N`);

        // --- Step 2: Basic Rating Life (L10) ---
        if (P <= 0) {
            displayMessage("Warning: Equivalent load is zero. Cannot calculate life.", "warning");
            return;
        }
        const L10 = Math.pow(inputs.C / P, p);
        const L10h = (1000000 / (inputs.n * 60)) * L10;
        addCalculationStep(2, 'Basic Rating Life (L10)', `$$L_{10} = (C/P)^p$$ <br> $$L_{10h} = \\frac{10^6}{60n} L_{10}$$`,
            `With C=${inputs.C} N, P=${P.toFixed(2)} N, p=${p.toFixed(2)}, n=${inputs.n} RPM`,
            `L₁₀ = ${L10.toFixed(2)} million revolutions<br>L₁₀ₕ = ${L10h.toLocaleString('en-US', {maximumFractionDigits: 0})} hours`);

        // --- Step 3: Adjusted Rating Life (Lna) ---
        const Lna = inputs.a1 * inputs.a2 * inputs.a3 * L10;
        const Lnah = (1000000 / (inputs.n * 60)) * Lna;
         addCalculationStep(3, 'Adjusted Rating Life (Lna)', `$$L_{na} = a_1 a_2 a_3 L_{10}$$`,
            `a₁=${inputs.a1}, a₂=${inputs.a2}, a₃=${inputs.a3}`,
            `Lₙₐ = ${Lna.toFixed(2)} million revolutions`);

        // Final Verdict
        const verdictDiv = document.createElement('div');
        verdictDiv.className = `final-verdict safe`;
        verdictDiv.innerHTML = `<i class="fas fa-clock"></i> Adjusted Life (L<sub>nah</sub>) = ${Lnah.toLocaleString('en-US', {maximumFractionDigits: 0})} hours`;
        calculationStepsDiv.appendChild(verdictDiv);

        if (window.MathJax) {
            window.MathJax.typesetPromise([calculationStepsDiv]);
        }
        resultContainer.classList.add('show');
        setTimeout(() => resultContainer.scrollIntoView({ behavior: 'smooth', block: 'start' }), 300);
        
        recommendationsDiv.innerHTML = `<ul>
            <li><strong>ISO 281:2007:</strong> This is the primary standard for calculating the life of rolling bearings. This calculator is based on its principles.</li>
            <li><strong>Life Expectancy:</strong> An adjusted life of <strong>${Lnah.toLocaleString('en-US', {maximumFractionDigits: 0})} hours</strong> is predicted. For reference, general industrial machinery often requires 20,000 to 40,000 hours, while critical applications may require over 100,000 hours.</li>
            <li><strong>Lubrication is Key:</strong> The 'a₃' factor significantly impacts life. Ensuring clean, correct lubrication is one of the most effective ways to maximize bearing lifespan.</li>
            <li><strong>Static Load Check:</strong> Ensure the maximum static load on the bearing does not exceed its Static Load Rating (C₀) to prevent permanent deformation (brinelling).</li>
        </ul>`;
    }
    
    function getEquivalentLoad(inputs) {
        const { type, C0, Fr, Fa } = inputs;
        let X = 1, Y = 0, e = 0, P = 0;
        let details = '';

        if (Fr <= 0 && Fa > 0) { // Pure axial load
             P = Fa;
             details = 'Load is purely axial. P = Fₐ.';
             return { X:0, Y:1, P, details};
        }
        if (Fa <= 0 && Fr > 0) { // Pure radial load
            P = Fr;
            details = 'Load is purely radial. P = Fᵣ.';
            return { X:1, Y:0, P, details};
        }
         if (Fa <= 0 && Fr <= 0) {
            return { X:1, Y:0, P:0, details: "No load applied." };
        }

        const fa_c0_ratio = Fa / C0;
        const fa_fr_ratio = Fa / Fr;
        details += `Ratio Fₐ/C₀ = ${fa_c0_ratio.toFixed(3)}<br>Ratio Fₐ/Fᵣ = ${fa_fr_ratio.toFixed(3)}<br>`;

        switch (type) {
            case 'deepGroove':
                // Simplified table lookup for 'e' based on Fa/C0
                if (fa_c0_ratio <= 0.014) e = 0.19;
                else if (fa_c0_ratio <= 0.028) e = 0.22;
                else if (fa_c0_ratio <= 0.056) e = 0.26;
                else if (fa_c0_ratio <= 0.11) e = 0.30;
                else if (fa_c0_ratio <= 0.28) e = 0.38;
                else e = 0.44;
                
                details += `Calculation factor e = ${e.toFixed(3)}.<br>`;
                
                if (fa_fr_ratio <= e) {
                    X = 1; Y = 0;
                    details += `Since Fₐ/Fᵣ ≤ e, factors are X=1, Y=0.`;
                } else {
                    X = 0.56; Y = 1.99 - (0.13 * fa_c0_ratio); // Y is interpolated
                    details += `Since Fₐ/Fᵣ > e, factors are X=${X}, Y=${Y.toFixed(3)}.`;
                }
                break;
            case 'angularContact':
            case 'taperedRoller':
                e = 0.4; // Approximation for 40 deg contact angle
                details += `Assuming standard contact angle, calculation factor e ≈ ${e}.<br>`;
                if (fa_fr_ratio <= e) {
                    X = 1; Y = 0;
                    details += `Since Fₐ/Fᵣ ≤ e, factors are X=1, Y=0.`;
                } else {
                    X = 0.4; Y = 0.4 / Math.tan(40 * Math.PI / 180); // Y based on contact angle
                    details += `Since Fₐ/Fᵣ > e, factors are X=${X}, Y=${Y.toFixed(3)}.`;
                }
                break;
            case 'cylindricalRoller':
            case 'sphericalRoller':
                 e = 0.3; // Typical value for roller bearings
                 details += `For roller bearings, calculation factor e ≈ ${e}.<br>`;
                if (fa_fr_ratio <= e) {
                    X = 1; Y = 2.3; // Approximate values
                    details += `Since Fₐ/Fᵣ ≤ e, factors are X=${X}, Y=${Y.toFixed(3)}.`;
                } else {
                    X = 0.67; Y = 3.4; // Approximate values
                    details += `Since Fₐ/Fᵣ > e, factors are X=${X}, Y=${Y.toFixed(3)}.`;
                }
                break;
        }
        
        P = X * Fr + Y * Fa;
        return { X, Y, P, details };
    }

    function addCalculationStep(step, title, formula, calculation, result) {
        const stepContainer = document.createElement('div');
        stepContainer.className = 'calculation-step-container';
        let content = `<div class="step-header"><span>Step ${step}: ${title}</span></div>
                       <div class="step-content">`;
        if (formula) content += `<p class="formula">${formula}</p>`;
        if (calculation) content += `<p class="calculation">${calculation.replace(/\n/g, '<br>')}</p>`;
        if (result) content += `<p class="final-result">${result}</p>`;
        content += `</div>`;
        stepContainer.innerHTML = content;
        calculationStepsDiv.appendChild(stepContainer);
    }

    function displayMessage(message, type = "error") {
        const messageBox = document.getElementById('custom-message-box');
        messageBox.textContent = message;
        messageBox.className = 'show';
        if (type === "error") messageBox.style.backgroundColor = 'var(--fail-color)';
        else if (type === "warning") {
            messageBox.style.backgroundColor = 'var(--accent-color)';
            messageBox.style.color = '#333';
        } else messageBox.style.backgroundColor = 'var(--success-color)';
        setTimeout(() => { messageBox.classList.remove('show'); }, 5000);
    }
});

document.addEventListener('DOMContentLoaded', () => {
    const themeSwitch = document.getElementById('theme-switch');
    const body = document.body;
    const currentTheme = localStorage.getItem('theme');
    if (currentTheme) {
        body.classList.add(currentTheme);
        if (currentTheme === 'dark-mode') themeSwitch.checked = true;
    }
    themeSwitch.addEventListener('change', () => {
        if (themeSwitch.checked) {
            body.classList.add('dark-mode');
            localStorage.setItem('theme', 'dark-mode');
        } else {
            body.classList.remove('dark-mode');
            localStorage.setItem('theme', 'light-mode');
        }
    });
});
</script>
</body>
</html>
