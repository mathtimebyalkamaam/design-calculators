<!DOCTYPE html>
<html lang="en">
<head>
    <!-- AdSense & Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>
    
    <!-- SEO Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fan Laws Performance Calculator - Industrial Grade</title>
    <meta name="description" content="Professional Fan Laws Calculator. Predict Flow, Static Pressure, and Brake Horsepower changes based on RPM, Diameter, and Density adjustments. Features Motor Load Analysis, Tip Speed Safety Check, and PDF Reporting.">
    <meta name="keywords" content="fan laws calculator, affinity laws, fan rpm calculator, hvac calculator, static pressure, brake horsepower, air density correction, impeller diameter, tip speed calculator, engineering tool">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://designcalculators.co.in/fan-laws.html" />

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.3/jspdf.plugin.autotable.min.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- MathJax for Formulas -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)'], ['$', '$']],
                displayMath: [['\\[', '\\]'], ['$$', '$$']]
            },
            svg: { fontCache: 'global' }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Favicon Links -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <style>
        /* --- CORE THEME (Blue Industrial) --- */
        :root {
            --primary: #1E3A8A; /* Dark Blue */
            --secondary: #2563EB; /* Bright Blue */
            --accent: #F59E0B; /* Amber */
            --success: #10B981;
            --danger: #DC2626;
            --warning: #F59E0B;
            --bg: #F8FAFC;
            --card: #FFFFFF;
            --text: #4B5563;
            --heading: #111827;
            --footer-bg: #0F172A;
            --border: #E2E8F0;
            --grad: linear-gradient(135deg, var(--primary), var(--secondary));
            --grad-dark: linear-gradient(135deg, #0F172A, #1E293B);
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode {
            --primary: #10B981;
            --secondary: #34D399;
            --bg: #0F172A;
            --card: #1E293B;
            --text: #CBD5E1;
            --heading: #F1F5F9;
            --footer-bg: #020617;
            --border: #334155;
            --accent: #F59E0B;
        }

        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.7;
            margin: 0;
            padding: 0;
        }

        .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; }

        /* Header & Nav */
        header {
            background: var(--grad);
            color: white;
            padding: 24px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-container {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: white;
        }
        .logo-text {
            font-size: 1.75rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
        }
        .logo-subtitle {
            font-size: 0.8rem;
            margin: 4px 0 0 0;
            color: #E0E7FF;
            opacity: 0.9;
        }
        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        .nav-links a:hover { color: var(--accent); }
        
        /* Theme Toggle */
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
            color: white;
        }
        .switch {
            position: relative;
            width: 56px;
            height: 30px;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0,0,0,0.2);
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px; width: 22px;
            left: 4px; bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--accent); }
        input:checked + .slider:before { transform: translateX(26px); }

        /* Main Content & Cards */
        main { padding: 40px 0; }
        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 1px solid var(--border);
            animation: fadeIn 0.6s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card h2 {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            margin-top: 0;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        h3 {
            color: var(--heading);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            margin-top: 25px;
            margin-bottom: 20px;
        }

        /* Forms */
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-group { margin-bottom: 0; }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--heading);
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            background-color: var(--bg);
            color: var(--text);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }
        body.dark-mode .form-group input:focus { 
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        /* Buttons */
        .btn {
            background: var(--grad);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
            transition: all 0.3s;
            width: 100%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(30, 58, 138, 0.4);
        }
        .btn-outline {
            background: transparent;
            border: 2px solid var(--secondary);
            color: var(--secondary);
            font-size: 0.9rem;
            padding: 8px 16px;
        }
        .btn-outline:hover {
            background: var(--secondary);
            color: white;
        }
        .button-wrapper {
            display: flex;
            justify-content: center;
            width: 100%;
            padding-top: 15px;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        /* Quick Load Buttons */
        .preset-container {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        .preset-btn {
            padding: 8px 12px;
            font-size: 0.85rem;
            border: 1px solid var(--border);
            background: var(--card);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .preset-btn:hover {
            background: var(--bg);
            border-color: var(--secondary);
            color: var(--secondary);
        }

        /* Results Layout */
        .results-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            align-items: start;
        }
        @media (max-width: 1024px) {
            .results-grid { grid-template-columns: 1fr; }
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-radius: 8px;
            overflow: hidden;
        }
        .results-table th, .results-table td {
            padding: 14px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        .results-table th {
            background: var(--grad);
            color: white;
            font-weight: 700;
        }
        .results-table tr:nth-child(even) { background-color: var(--bg); }
        .results-table td:first-child {
            font-weight: 600;
            color: var(--heading);
        }
        .highlight { color: var(--success); font-weight: 700; }
        .danger-text { color: var(--danger); font-weight: 700; }
        .warning-text { color: var(--warning); font-weight: 700; }

        /* Calculation Steps Styling */
        .calculation-step {
            font-family: 'Courier New', monospace;
            background-color: rgba(37, 99, 235, 0.05); /* Light Blue Tint */
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary);
            font-size: 0.95rem;
            line-height: 1.6;
        }
        body.dark-mode .calculation-step { background-color: rgba(37, 99, 235, 0.1); }
        
        .calculation-step h4 {
            color: var(--primary);
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 1.1rem;
            border-bottom: 1px dashed var(--border);
            padding-bottom: 5px;
        }

        /* Chart Container */
        .chart-container {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            position: relative;
            height: 350px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        canvas {
            max-width: 100%;
            max-height: 100%;
        }

        /* Educational Section Styling */
        .insight-card {
            background: linear-gradient(135deg, var(--card), rgba(37,99,235,0.03));
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid var(--secondary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        .insight-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .insight-card h4 {
            color: var(--secondary);
            font-size: 1.3rem;
            margin: 0 0 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Montserrat', sans-serif;
        }
        .insight-card p, .insight-card ul {
            margin: 10px 0;
            line-height: 1.8;
            color: var(--text);
        }
        .insight-card ul { padding-left: 20px; }
        .insight-card li { margin-bottom: 8px; }

        /* Formulas & Steps */
        .formula {
            background: var(--bg);
            border-left: 3px solid var(--accent);
            padding: 15px;
            margin: 12px 0;
            font-size: 1.1rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            color: var(--heading);
        }

        /* Vector Input Group Styling */
        .vector-input-group {
            background: var(--bg);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
            position: relative;
        }
        .vector-input-header {
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .input-group-append {
            display: flex;
            align-items: center;
        }
        .input-group-append input {
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            border-right: 0;
        }
        .unit-label {
            background: var(--border);
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 0 6px 6px 0;
            font-weight: 600;
            color: var(--text);
            font-size: 0.9rem;
            min-width: 60px;
            text-align: center;
        }

        /* Print Styling */
        @media print {
            header, footer, .education-section, .theme-toggle, .button-wrapper, .preset-container { display: none !important; }
            .card { border: none; shadow: none; padding: 0; }
            .container { width: 100%; max-width: 100%; padding: 0; }
            .results-grid { grid-template-columns: 1fr 1fr; }
            .chart-container { height: 300px; page-break-inside: avoid; }
        }

        /* Message Box */
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 28px;
            border-radius: 8px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.25);
            z-index: 10000;
            font-weight: 600;
            color: white;
            opacity: 0;
            transition: all 0.4s;
            display: none;
        }
        .message-box.show { display: block; opacity: 1; top: 30px; }
        .hidden { display: none; }

        /* Tooltip */
        .info-icon { color: var(--secondary); margin-left: 5px; cursor: help; }
        .tooltip { position: relative; display: inline-block; }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            font-weight: 400;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }

        /* Footer */
        footer {
            background: var(--grad-dark);
            color: #CBD5E1;
            padding: 50px 0 20px 0;
            margin-top: 60px;
        }
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 30px;
        }
        .footer-col { flex: 1; min-width: 200px; }
        .footer-col h4 { color: white; margin-bottom: 15px; font-weight: 700; }
        .footer-col ul { list-style: none; padding: 0; margin: 0; }
        .footer-col a { color: #CBD5E1; text-decoration: none; transition: color 0.3s; }
        .footer-col a:hover { color: var(--accent); }
        .social-buttons { display: flex; gap: 12px; margin-top: 15px; }
        .social-btn {
            width: 40px; height: 40px;
            display: flex; justify-content: center; align-items: center;
            color: white; border-radius: 50%;
            font-size: 1.1rem; transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .social-btn:hover { transform: translateY(-4px); }
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.youtube { background-color: #FF0000; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .footer-disclaimer {
            text-align: center; padding-top: 25px;
            border-top: 1px solid #334155;
            max-width: 800px; margin: 0 auto;
            font-size: 0.9rem;
        }
        .footer-bottom {
            text-align: center; padding-top: 20px;
            font-size: 0.9rem; color: #94A3B8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 0 15px; }
            .navbar { flex-direction: column; gap: 20px; }
            .nav-links { flex-direction: column; gap: 12px; text-align: center; }
            .form-row { grid-template-columns: 1fr; }
            .card { padding: 20px; }
            .footer-content { flex-direction: column; gap: 25px; }
        }
    </style>
</head>
<body>
    <div id="message-box" class="message-box"></div>
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="#" class="logo-container">
                    <span class="logo-text">Design Calculators</span>
                    <p class="logo-subtitle">Inspired by standards such as IEC, IEEE, ISA, ASME, and API.</p>
                </a>
                <ul class="nav-links">
                    <li><a href='/'>Home</a></li>
                    <li><a href='/articles.html'>Articles</a></li>
                    <li><a href='/indexmech.html'>Mechanical</a></li>
                    <li><a href='/indexele.html'>Electrical</a></li>
                    <li><a href='/indexinst.html'>Instrumentation</a></li>
                </ul>
                <div class="theme-toggle">
                    <i class="fas fa-sun"></i>
                    <label class="switch">
                        <input type="checkbox" id="theme-switch">
                        <span class="slider"></span>
                    </label>
                    <i class="fas fa-moon"></i>
                </div>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="card">
            <h2><i class="fas fa-fan"></i> Fan Laws Performance Calculator</h2>
            
            <div class="tool-description">
                <p>This industrial-grade calculator applies the standard <strong>Fan Affinity Laws</strong> to predict changes in performance when modifying fan speed (RPM), impeller diameter, or air density. It features exhaustive step-by-step physics validation, Tip Speed Safety Analysis, and Motor Overload Protection warnings.</p>
            </div>

            <div class="calculator-form">
                <form id="fan-form">
                    <!-- Controls Row -->
                    <div class="form-row" style="align-items: end;">
                        <div class="form-group">
                            <label>Quick Load Scenarios:</label>
                            <div class="preset-container" style="margin-bottom: 0;">
                                <button type="button" class="preset-btn" onclick="loadPreset('speedup')"><i class="fas fa-tachometer-alt"></i> Speed Up (10%)</button>
                                <button type="button" class="preset-btn" onclick="loadPreset('altitude')"><i class="fas fa-mountain"></i> High Altitude</button>
                                <button type="button" class="preset-btn" onclick="loadPreset('retrofit')"><i class="fas fa-tools"></i> Large Impeller</button>
                            </div>
                        </div>
                    </div>

                    <!-- 1. Configuration -->
                    <h4 style="color: var(--primary); margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 5px;">1. System Configuration</h4>
                    <div class="form-row">
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-cog"></i> Setup</div>
                            <div class="form-group">
                                <label for="unitSystem">Unit System</label>
                                <select id="unitSystem" onchange="updateUnits()">
                                    <option value="imperial" selected>Imperial (CFM, in.wg, BHP)</option>
                                    <option value="metric">Metric (m³/hr, Pa, kW)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 2. Baseline Performance -->
                    <h4 style="color: var(--primary); margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 5px; margin-top: 20px;">2. Baseline Performance (Original)</h4>
                    <div class="form-row">
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-chart-line"></i> Current Operating Point</div>
                            <div class="form-group">
                                <label for="flow1">Flow Rate (Q1)</label>
                                <div class="input-group-append">
                                    <input type="number" id="flow1" step="1" value="10000" placeholder="Flow">
                                    <div class="unit-label" id="lbl-flow">CFM</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="press1">Static Pressure (SP1)</label>
                                <div class="input-group-append">
                                    <input type="number" id="press1" step="0.1" value="2.5" placeholder="Pressure">
                                    <div class="unit-label" id="lbl-press">in.wg</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="power1">Power (P1)</label>
                                <div class="input-group-append">
                                    <input type="number" id="power1" step="0.1" value="5.0" placeholder="Power">
                                    <div class="unit-label" id="lbl-power">BHP</div>
                                </div>
                            </div>
                        </div>
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-sliders-h"></i> Current Parameters</div>
                            <div class="form-group">
                                <label for="rpm1">Fan Speed (N1)</label>
                                <div class="input-group-append">
                                    <input type="number" id="rpm1" step="1" value="1750" placeholder="RPM">
                                    <div class="unit-label">RPM</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="dia1">Impeller Diameter (D1)</label>
                                <div class="input-group-append">
                                    <input type="number" id="dia1" step="0.1" value="24" placeholder="Diameter">
                                    <div class="unit-label" id="lbl-dia">in</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="den1">Air Density (ρ1)</label>
                                <div class="input-group-append">
                                    <input type="number" id="den1" step="0.001" value="0.075" placeholder="Density">
                                    <div class="unit-label" id="lbl-den">lb/ft³</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3. New Conditions -->
                    <h4 style="color: var(--primary); margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 5px; margin-top: 20px;">3. Target Conditions (New)</h4>
                    <p style="font-size: 0.9rem; color: var(--text); margin-bottom: 15px;">Modify any parameter below to calculate the new performance. Unchanged fields will default to original values.</p>
                    <div class="form-row">
                        <div class="vector-input-group">
                            <div class="vector-input-header"><i class="fas fa-edit"></i> Proposed Changes</div>
                            <div class="form-group">
                                <label for="rpm2">New Speed (N2)</label>
                                <div class="input-group-append">
                                    <input type="number" id="rpm2" step="1" value="1925" placeholder="New RPM">
                                    <div class="unit-label">RPM</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="dia2">New Diameter (D2)</label>
                                <div class="input-group-append">
                                    <input type="number" id="dia2" step="0.1" value="24" placeholder="New Diameter">
                                    <div class="unit-label" id="lbl-dia2">in</div>
                                </div>
                            </div>
                            <div class="form-group" style="margin-top:10px;">
                                <label for="den2">New Density (ρ2)</label>
                                <div class="input-group-append">
                                    <input type="number" id="den2" step="0.001" value="0.075" placeholder="New Density">
                                    <div class="unit-label" id="lbl-den2">lb/ft³</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="button-wrapper">
                        <button type="button" id="calculate-btn" class="btn"><i class="fas fa-calculator"></i> Calculate Performance</button>
                        <button type="button" id="pdf-btn" class="btn btn-outline"><i class="fas fa-file-pdf"></i> Download Report</button>
                    </div>
                </form>
            </div>

            <!-- Results Section -->
            <div id="result-container" class="card hidden" style="margin-top: 40px;">
                <h3><i class="fas fa-poll"></i> Performance Analysis</h3>
                
                <div class="results-grid">
                    <!-- Left Col: Table -->
                    <div>
                        <h4 style="margin-top: 0; color: var(--primary); margin-bottom: 15px;">Predicted Output</h4>
                        <table class="results-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>New Value</th>
                                    <th>Change</th>
                                </tr>
                            </thead>
                            <tbody id="result-table-body">
                                <!-- Dynamic rows -->
                            </tbody>
                        </table>
                        
                        <div style="margin-top: 20px; background: var(--bg); padding: 15px; border-radius: 6px; border: 1px solid var(--border);">
                            <strong><i class="fas fa-exclamation-circle"></i> Engineering Note:</strong>
                            <div id="interpretation-text" style="margin-top: 5px; font-size: 0.95rem;"></div>
                        </div>
                    </div>

                    <!-- Right Col: Visual Chart -->
                    <div>
                        <h4 style="margin-top: 0; color: var(--primary); margin-bottom: 15px;">Power Impact Visualizer</h4>
                        <div class="chart-container">
                            <canvas id="fanChart"></canvas>
                        </div>
                        <div style="text-align: center; margin-top: 10px; font-size: 0.85rem; color: var(--text);">
                            <span style="color: #10B981;">● Flow</span> &nbsp;
                            <span style="color: #3B82F6;">● Pressure</span> &nbsp;
                            <span style="color: #EF4444;">● Power (Cubic!)</span>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: 30px; border-top: 1px solid var(--border); padding-top: 20px;">Detailed Calculation Steps (Physics Validation)</h4>
                <div id="calculation-details">
                    <!-- Dynamic math steps -->
                </div>

                <div class="standard-reference" style="margin-top: 20px; font-style: italic; color: var(--text);">
                     Calculations based on standard Fan Affinity Laws. Assumes constant efficiency point on the fan curve. 
                     $Power_2 = Power_1 \times (N_2/N_1)^3 \times (D_2/D_1)^5 \times (\rho_2/\rho_1)$.
                </div>
            </div>
        </div>

        <!-- EDUCATIONAL CONTENT SECTION -->
        <div class="education-section card">
            <h2><i class="fas fa-lightbulb"></i> Engineering Insights: Fan Laws</h2>
            
            <!-- Insight 1: The Cubic Law -->
            <div class="insight-card">
                <h4><i class="fas fa-bolt"></i> 1. The "Cubic Law" of Power</h4>
                <p>The most critical takeaway from the Fan Laws is the relationship between Speed and Power. While Flow increases linearly with speed, Power increases by the <strong>cube</strong> of the speed ratio.</p>
                <div class="formula">$$ \frac{P_2}{P_1} = \left(\frac{N_2}{N_1}\right)^3 $$</div>
                <p><strong>Example:</strong> Increasing fan speed by just 10% (1.1x) increases power consumption by 33% ($1.1^3 = 1.33$). Doubling the speed requires 8x the power. Always verify motor capacity before speeding up a fan!</p>
            </div>

            <!-- Insight 2: Density Effects -->
            <div class="insight-card">
                <h4><i class="fas fa-cloud"></i> 2. Density & Altitude Effects</h4>
                <p>Fan Laws also account for air density ($\rho$). Fans are constant volume machines, but mass flow and power vary linearly with density.</p>
                <ul>
                    <li><strong>High Altitude:</strong> Air is less dense. A fan moves the same CFM, but generates less Pressure and uses less Power.</li>
                    <li><strong>High Temperature:</strong> Hot air is less dense. Similar effect to altitude.</li>
                    <li><strong>Cold Start:</strong> Cold air is dense. A fan sized for hot operation may overload the motor during a cold startup (winter).</li>
                </ul>
            </div>

            <!-- Insight 3: Diameter Changes -->
            <div class="insight-card">
                <h4><i class="fas fa-expand-arrows-alt"></i> 3. Impeller Diameter Changes</h4>
                <p>Changing the wheel diameter (trimming or replacing) has a drastic effect. Power varies with the <strong>5th power</strong> of the diameter ratio.</p>
                <div class="formula">$$ \frac{P_2}{P_1} = \left(\frac{D_2}{D_1}\right)^5 $$</div>
                <p>Even a small increase in diameter can catastrophically overload a drive system.</p>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-col">
                    <h4>Design Calculators</h4>
                    <p style="font-size: 0.9rem; line-height: 1.6; margin-bottom: 15px;">Empowering engineers with precision tools for complex analysis. If you find this tool helpful, please consider sharing it with your colleagues!</p>
                    <div class="social-buttons">
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn linkedin"><i class="fab fa-linkedin-in"></i></a>
<a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer" class="social-btn youtube"><i class="fab fa-youtube"></i></a>
<a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn twitter"><i class="fab fa-twitter"></i></a>
<a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn facebook"><i class="fab fa-facebook-f"></i></a>
<a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in" target="_blank" rel="noopener noreferrer" class="social-btn whatsapp"><i class="fab fa-whatsapp"></i></a>
</div>
                </div>
                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href='/'>Home</a></li>
                        <li><a href='/indexele.html'>Electrical</a></li>
                        <li><a href='/indexmech.html'>Mechanical</a></li>
                        <li><a href='/indexinst.html'>Instrumentation</a></li>        
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="about">About Us</a></li>
                        <li><a href="contact">Contact</a></li>
                        <li><a href="faq">FAQ</a></li>
                        <li><a href="privacy-policy">Privacy Policy</a></li>
                        <li><a href="terms-of-service">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>More</h4>
                    <ul>
                        <li><a href='/articles.html'>Articles & Whitepapers</a></li>
                        <li><a href='/sitemap2.html'>Sitemap</a></li>
                
                    </ul>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>All calculations are for preliminary engineering design guidance. Final designs must comply with all applicable local and international standards (including but not limited to AMCA 210, ASHRAE Handbook). Always verify calculations and consult with a licensed professional engineer before implementation.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">A Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Global State
        let lastResult = null;
        let fanChart = null;

        const units = {
            imperial: { flow: 'CFM', press: 'in.wg', power: 'BHP', dia: 'in', den: 'lb/ft³', vel: 'ft/min' },
            metric: { flow: 'm³/hr', press: 'Pa', power: 'kW', dia: 'mm', den: 'kg/m³', vel: 'm/s' }
        };

        function updateUnits() {
            const sys = document.getElementById('unitSystem').value;
            document.getElementById('lbl-flow').textContent = units[sys].flow;
            document.getElementById('lbl-press').textContent = units[sys].press;
            document.getElementById('lbl-power').textContent = units[sys].power;
            document.getElementById('lbl-dia').textContent = units[sys].dia;
            document.getElementById('lbl-dia2').textContent = units[sys].dia;
            document.getElementById('lbl-den').textContent = units[sys].den;
            document.getElementById('lbl-den2').textContent = units[sys].den;
            
            // Adjust defaults if switching
            if (sys === 'metric') {
                if(document.getElementById('flow1').value == '10000') document.getElementById('flow1').value = '17000';
                if(document.getElementById('press1').value == '2.5') document.getElementById('press1').value = '625';
                if(document.getElementById('power1').value == '5.0') document.getElementById('power1').value = '3.7';
                if(document.getElementById('dia1').value == '24') document.getElementById('dia1').value = '600';
                if(document.getElementById('dia2').value == '24') document.getElementById('dia2').value = '600';
                if(document.getElementById('den1').value == '0.075') document.getElementById('den1').value = '1.2';
                if(document.getElementById('den2').value == '0.075') document.getElementById('den2').value = '1.2';
            } else {
                if(document.getElementById('flow1').value == '17000') document.getElementById('flow1').value = '10000';
                if(document.getElementById('press1').value == '625') document.getElementById('press1').value = '2.5';
                if(document.getElementById('power1').value == '3.7') document.getElementById('power1').value = '5.0';
                if(document.getElementById('dia1').value == '600') document.getElementById('dia1').value = '24';
                if(document.getElementById('dia2').value == '600') document.getElementById('dia2').value = '24';
                if(document.getElementById('den1').value == '1.2') document.getElementById('den1').value = '0.075';
                if(document.getElementById('den2').value == '1.2') document.getElementById('den2').value = '0.075';
            }
        }

        function displayMessage(message, type = "info") {
            let messageBox = document.getElementById('message-box');
            messageBox.textContent = message;
            if (type === "error") messageBox.style.backgroundColor = 'var(--danger)';
            else if (type === "success") messageBox.style.backgroundColor = 'var(--success)';
            else messageBox.style.backgroundColor = 'var(--primary)';
            messageBox.classList.add('show');
            setTimeout(() => messageBox.classList.remove('show'), 4000);
        }

        function loadPreset(type) {
            const sys = document.getElementById('unitSystem').value;
            // Base values
            document.getElementById('rpm1').value = 1750;
            document.getElementById('rpm2').value = 1750;
            
            if (sys === 'imperial') {
                document.getElementById('flow1').value = 10000;
                document.getElementById('press1').value = 2.5;
                document.getElementById('power1').value = 5.0;
                document.getElementById('dia1').value = 24;
                document.getElementById('dia2').value = 24;
                document.getElementById('den1').value = 0.075;
                document.getElementById('den2').value = 0.075;
            } else {
                document.getElementById('flow1').value = 17000;
                document.getElementById('press1').value = 625;
                document.getElementById('power1').value = 3.7;
                document.getElementById('dia1').value = 600;
                document.getElementById('dia2').value = 600;
                document.getElementById('den1').value = 1.2;
                document.getElementById('den2').value = 1.2;
            }

            if (type === 'speedup') {
                document.getElementById('rpm2').value = Math.round(1750 * 1.10); // 10% increase
            } else if (type === 'altitude') {
                // High altitude density drop
                document.getElementById('den2').value = sys === 'imperial' ? 0.060 : 0.96;
            } else if (type === 'retrofit') {
                // Larger impeller
                const d1 = parseFloat(document.getElementById('dia1').value);
                document.getElementById('dia2').value = d1 * 1.05; // 5% larger
            }
            displayMessage(`${type.toUpperCase()} scenario loaded.`, "success");
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Theme setup
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch && localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                themeSwitch.checked = true;
            }
            if(themeSwitch) {
                themeSwitch.addEventListener('change', function() {
                    document.body.classList.toggle('dark-mode');
                    localStorage.setItem('theme', this.checked ? 'dark' : 'light');
                });
            }

            document.getElementById('calculate-btn').addEventListener('click', performCalculation);
            document.getElementById('pdf-btn').addEventListener('click', generatePDF);
            updateUnits(); // Init
        });

        function performCalculation() {
            // 1. Get Inputs
            const Q1 = parseFloat(document.getElementById('flow1').value);
            const P1 = parseFloat(document.getElementById('press1').value); // SP1
            const HP1 = parseFloat(document.getElementById('power1').value);
            
            const N1 = parseFloat(document.getElementById('rpm1').value);
            const D1 = parseFloat(document.getElementById('dia1').value);
            const Rho1 = parseFloat(document.getElementById('den1').value);
            
            const N2 = parseFloat(document.getElementById('rpm2').value);
            const D2 = parseFloat(document.getElementById('dia2').value);
            const Rho2 = parseFloat(document.getElementById('den2').value);
            
            const sys = document.getElementById('unitSystem').value;
            const u = units[sys];

            if ([Q1, P1, HP1, N1, D1, Rho1, N2, D2, Rho2].some(v => isNaN(v) || v <= 0)) {
                displayMessage("Please enter valid positive numbers for all fields.", "error");
                return;
            }

            // 2. Ratios
            const rN = N2 / N1;
            const rD = D2 / D1;
            const rRho = Rho2 / Rho1;

            // 3. Calculation (Combined Laws)
            const Q2 = Q1 * rN * Math.pow(rD, 3);
            const P2 = P1 * Math.pow(rN, 2) * Math.pow(rD, 2) * rRho;
            const HP2 = HP1 * Math.pow(rN, 3) * Math.pow(rD, 5) * rRho;

            // 4. Efficiency Calculation (Hydraulic vs Brake)
            // Hydraulic Power (Watts) = P(Pa) * Q(m3/s)
            // Imperial Hydraulic Power (HP) = Q(CFM) * P(in.wg) / 6356
            let hydPower1, efficiency;
            if (sys === 'imperial') {
                hydPower1 = (Q1 * P1) / 6356;
                efficiency = (hydPower1 / HP1) * 100;
            } else {
                hydPower1 = (Q1 / 3600) * P1; // m3/hr -> m3/s
                efficiency = (hydPower1 / (HP1 * 1000)) * 100; // kW -> W
            }

            // 5. Tip Speed Calculation
            // TS = PI * Dia * RPM
            let ts1, ts2;
            if (sys === 'imperial') {
                // Dia in inches -> ft/min
                ts1 = (Math.PI * (D1/12) * N1);
                ts2 = (Math.PI * (D2/12) * N2);
            } else {
                // Dia in mm -> m/s
                ts1 = (Math.PI * (D1/1000) * N1) / 60;
                ts2 = (Math.PI * (D2/1000) * N2) / 60;
            }

            // 6. Percent Changes
            const pctQ = ((Q2 - Q1) / Q1) * 100;
            const pctP = ((P2 - P1) / P1) * 100;
            const pctHP = ((HP2 - HP1) / HP1) * 100;

            lastResult = { Q1, P1, HP1, N1, D1, Rho1, N2, D2, Rho2, Q2, P2, HP2, pctQ, pctP, pctHP, sys, u, efficiency, ts1, ts2 };

            // 7. Detailed Steps Display
            let html = `<h4>Detailed Engineering Analysis</h4>`;
            
            // Step A: Ratios
            html += `<div class="calculation-step">`;
            html += `<strong>Step 1: Calculate Scaling Ratios</strong><br>`;
            html += `Speed Ratio ($R_{speed}$) = $N_2 / N_1 = ${N2} / ${N1} = ${rN.toFixed(4)}$<br>`;
            html += `Diameter Ratio ($R_{dia}$) = $D_2 / D_1 = ${D2} / ${D1} = ${rD.toFixed(4)}$<br>`;
            html += `Density Ratio ($R_{den}$) = $\\rho_2 / \\rho_1 = ${Rho2} / ${Rho1} = ${rRho.toFixed(4)}$`;
            html += `</div>`;

            // Step B: Flow
            html += `<div class="calculation-step">`;
            html += `<strong>Step 2: Flow Rate Prediction (Linear Law)</strong><br>`;
            html += `$$ Q_2 = Q_1 \\times (R_{speed}) \\times (R_{dia})^3 $$<br>`;
            html += `$$ Q_2 = ${Q1} \\times ${rN.toFixed(4)} \\times (${rD.toFixed(4)})^3 $$<br>`;
            html += `$$ Q_2 = \\mathbf{${Q2.toFixed(0)} \\text{ ${u.flow}}} $$`;
            html += `</div>`;

            // Step C: Pressure
            html += `<div class="calculation-step">`;
            html += `<strong>Step 3: Static Pressure Prediction (Square Law)</strong><br>`;
            html += `$$ SP_2 = SP_1 \\times (R_{speed})^2 \\times (R_{dia})^2 \\times R_{den} $$<br>`;
            html += `$$ SP_2 = ${P1} \\times (${rN.toFixed(4)})^2 \\times (${rD.toFixed(4)})^2 \\times ${rRho.toFixed(4)} $$<br>`;
            html += `$$ SP_2 = \\mathbf{${P2.toFixed(2)} \\text{ ${u.press}}} $$`;
            html += `</div>`;

            // Step D: Power
            html += `<div class="calculation-step">`;
            html += `<strong>Step 4: Power Requirement (Cubic Law)</strong><br>`;
            html += `$$ P_{wr2} = P_{wr1} \\times (R_{speed})^3 \\times (R_{dia})^5 \\times R_{den} $$<br>`;
            html += `$$ P_{wr2} = ${HP1} \\times (${rN.toFixed(4)})^3 \\times (${rD.toFixed(4)})^5 \\times ${rRho.toFixed(4)} $$<br>`;
            html += `$$ P_{wr2} = \\mathbf{${HP2.toFixed(2)} \\text{ ${u.power}}} $$`;
            html += `</div>`;

            // Step E: Tip Speed
            html += `<div class="calculation-step">`;
            html += `<strong>Step 5: Tip Speed & Efficiency Check</strong><br>`;
            html += `Calculated Fan Efficiency: $\\mathbf{${efficiency.toFixed(1)}\\%}$ (assumed constant)<br>`;
            html += `New Tip Speed: $\\mathbf{${ts2.toFixed(0)} \\text{ ${u.vel}}}$ (Prev: ${ts1.toFixed(0)})<br>`;
            if (sys === 'imperial' && ts2 > 15000) html += `<span style="color:var(--danger)">WARNING: High tip speed! Verify impeller class rating.</span>`;
            if (sys === 'metric' && ts2 > 76) html += `<span style="color:var(--danger)">WARNING: High tip speed (>76 m/s)! Verify impeller class rating.</span>`;
            html += `</div>`;

            document.getElementById('calculation-details').innerHTML = html;

            // 8. Table Update
            const tbody = document.getElementById('result-table-body');
            tbody.innerHTML = '';
            
            const addRow = (lbl, v, pct, unit, warn=false) => {
                const color = pct > 0 ? "var(--success)" : (pct < 0 ? "#EAB308" : "inherit");
                const style = warn ? "color: var(--danger); font-weight:bold;" : "";
                const arrow = pct > 0 ? "↑" : (pct < 0 ? "↓" : "-");
                tbody.innerHTML += `<tr>
                    <td><strong>${lbl}</strong></td>
                    <td style="${style}">${v} ${unit}</td>
                    <td style="color:${color}">${arrow} ${Math.abs(pct).toFixed(1)}%</td>
                </tr>`;
            };

            addRow("Flow Rate", Q2.toFixed(0), pctQ, u.flow);
            addRow("Static Pressure", P2.toFixed(2), pctP, u.press);
            const danger = pctHP > 20; // 20% power increase is dangerous
            addRow("Power Requirement", HP2.toFixed(2), pctHP, u.power, danger);
            addRow("Tip Speed", ts2.toFixed(0), ((ts2-ts1)/ts1)*100, u.vel);

            // 9. Interpretation
            const interp = document.getElementById('interpretation-text');
            if (pctHP > 25) {
                interp.innerHTML = `<span style="color:var(--danger)">CRITICAL WARNING:</span> Power has increased by ${pctHP.toFixed(1)}%. Ensure motor, VFD, and wiring are rated for this load. This exceeds typical safety margins.`;
            } else if (pctHP > 10) {
                interp.innerHTML = `<span style="color:var(--warning)">Caution:</span> Power increased by ${pctHP.toFixed(1)}%. Verify motor nameplate amps (FLA) to avoid tripping.`;
            } else if (pctHP < 0) {
                interp.innerHTML = `<span style="color:var(--success)">Efficiency Gain:</span> Power requirement reduced. Check if new flow/pressure meets system needs.`;
            } else {
                interp.innerHTML = `Performance is stable. Minimal change in power requirement.`;
            }

            // 10. Chart Update
            updateChart(pctQ, pctP, pctHP);

            // Show
            document.getElementById('result-container').classList.remove('hidden');
            if(window.MathJax) window.MathJax.typesetPromise([document.getElementById('calculation-details')]);
            document.getElementById('result-container').scrollIntoView({ behavior: 'smooth' });
        }

        function updateChart(q, p, hp) {
            const ctx = document.getElementById('fanChart').getContext('2d');
            if (fanChart) fanChart.destroy();

            fanChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Flow', 'Pressure', 'Power'],
                    datasets: [{
                        label: '% Change',
                        data: [q, p, hp],
                        backgroundColor: [
                            'rgba(16, 185, 129, 0.7)', // Green
                            'rgba(59, 130, 246, 0.7)', // Blue
                            'rgba(239, 68, 68, 0.7)'   // Red
                        ],
                        borderColor: [
                            '#10B981', '#3B82F6', '#EF4444'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: { display: true, text: 'Percent Change from Baseline' }
                    },
                    scales: {
                        y: { 
                            beginAtZero: true,
                            title: { display: true, text: '% Change' }
                        }
                    }
                }
            });
        }

        function generatePDF() {
            if (!lastResult) {
                displayMessage("Calculate first.", "error");
                return;
            }
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4');
            const r = lastResult;
            let y = 15;

            // Header
            pdf.setFont('helvetica', 'bold');
            pdf.setFontSize(16);
            pdf.setTextColor(30, 58, 138); 
            pdf.text('Fan Performance Analysis Report', 105, y, { align: 'center' });
            y += 10;

            pdf.setFontSize(10);
            pdf.setTextColor(100);
            pdf.text(`Date: ${new Date().toLocaleString()}`, 105, y, { align: 'center' });
            y += 15;

            // Inputs
            pdf.setFontSize(12);
            pdf.setTextColor(0);
            pdf.text('1. Design Parameters', 14, y);
            y += 5;

            const inputData = [
                ['Parameter', 'Baseline', 'New Condition'],
                ['Speed (RPM)', r.N1, r.N2],
                ['Diameter', `${r.D1} ${r.u.dia}`, `${r.D2} ${r.u.dia}`],
                ['Density', `${r.Rho1} ${r.u.den}`, `${r.Rho2} ${r.u.den}`]
            ];

            pdf.autoTable({
                startY: y,
                head: [['Parameter', 'Baseline', 'New Condition']],
                body: inputData.slice(1),
                margin: { left: 14, right: 14 },
                theme: 'grid',
                headStyles: { fillColor: [30, 58, 138] }
            });
            y = pdf.lastAutoTable.finalY + 15;

            // Results
            pdf.text('2. Performance Predictions', 14, y);
            y += 5;

            const resData = [
                ['Flow Rate', `${r.Q1} ${r.u.flow}`, `${r.Q2.toFixed(0)} ${r.u.flow}`, `${r.pctQ.toFixed(1)}%`],
                ['Static Pressure', `${r.P1} ${r.u.press}`, `${r.P2.toFixed(2)} ${r.u.press}`, `${r.pctP.toFixed(1)}%`],
                ['Power', `${r.HP1} ${r.u.power}`, `${r.HP2.toFixed(2)} ${r.u.power}`, `${r.pctHP.toFixed(1)}%`],
                ['Tip Speed', `${r.ts1.toFixed(0)} ${r.u.vel}`, `${r.ts2.toFixed(0)} ${r.u.vel}`, '-']
            ];

            pdf.autoTable({
                startY: y,
                head: [['Metric', 'Original', 'New', '% Change']],
                body: resData,
                margin: { left: 14, right: 14 },
                theme: 'grid',
                headStyles: { fillColor: [30, 58, 138] },
                didParseCell: function(data) {
                    if(data.row.index === 2) { // Highlight Power
                        data.cell.styles.fontStyle = 'bold';
                        data.cell.styles.textColor = [220, 38, 38];
                    }
                }
            });
            
            y = pdf.lastAutoTable.finalY + 15;
            pdf.setFontSize(10);
            pdf.setTextColor(100);
            pdf.text("Note: Predictions assume system curve remains constant and fan operates on same curve.", 14, y);

            pdf.save('Fan_Performance_Report.pdf');
            displayMessage("PDF Downloaded", "success");
        }
    </script>
</body>
</html>

