<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTD Wiring Lead Compensation Calculator - Design Calculators - Instrumentation</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="Professional calculator for RTD 2, 3, and 4-wire lead resistance compensation. Calculate true temperature by removing lead wire error.">
    <meta name="keywords" content="rtd wiring, 2-wire, 3-wire, 4-wire, lead resistance, compensation, pt100, pt1000, callendar-van dusen, iec 60751">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://designcalculators.co.in/rtd-lead-comp.html" />
    <!-- AdSense & Analytics -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- MathJax for Formulas -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)'], ['$', '$']],
                displayMath: [['\\[', '\\]'], ['$$', '$$']]
            },
            svg: { fontCache: 'global' },
            options: {
                processHtmlClass: 'math-content', // Process elements with this class
                ignoreHtmlClass: 'no-mathjax'     // Ignore elements with this class
            }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <!-- PDF Generation (Not used by this tool, but part of header) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.3/jspdf.plugin.autotable.min.js"></script>
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    
    <style>
        /* Base Styles from new header */
        :root {
            --primary: #1E3A8A;
            --secondary: #2563EB;
            --accent: #F59E0B;
            --success: #10B981;
            --danger: #DC2626;
            --warning: #F59E0B;
            --bg: #F8FAFC;
            --card: #FFFFFF;
            --text: #4B5563;
            --heading: #111827;
            --footer-bg: #0F172A;
            --border: #E2E8F0;
            --grad: linear-gradient(135deg, var(--primary), var(--secondary));
            --grad-dark: linear-gradient(135deg, #0F172A, #1E293B);
            --shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode {
            --primary: #10B981;
            --secondary: #34D399;
            --bg: #0F172A;
            --card: #1E293B;
            --text: #CBD5E1;
            --heading: #F1F5F9;
            --footer-bg: #020617;
            --border: #334155;
        }

        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.7;
            margin: 0;
            padding: 0;
        }

        .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; }

        /* Header & Nav */
        header {
            background: var(--grad);
            color: white;
            padding: 24px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo-container {
            display: flex;
            flex-direction: column;
            text-decoration: none;
            color: white;
        }
        .logo-text {
            font-size: 1.75rem;
            font-weight: 800;
            font-family: 'Montserrat', sans-serif;
        }
        .logo-subtitle {
            font-size: 0.8rem;
            margin: 4px 0 0 0;
            color: #E0E7FF;
            opacity: 0.9;
        }
        .nav-links {
            display: flex;
            gap: 24px;
            list-style: none;
            margin: 0;
            padding: 0;
        }
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }
        .nav-links a:hover { color: var(--accent); }
        .theme-toggle {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .switch {
            position: relative;
            width: 56px;
            height: 30px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.2);
            transition: .4s;
            border-radius: 30px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: var(--accent);
        }
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        /* Main Content & Cards */
        main { padding: 40px 0; }
        .card {
            background: var(--card);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }
        /* Applied to the tool container */
        .tool-container {
            background: var(--card);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }
        .tool-description {
            margin-bottom: 20px;
            color: var(--text);
            font-size: 1.05rem;
        }
        h2 {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            margin-top: 0;
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        h3 {
            color: var(--heading);
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            margin-top: 25px;
            margin-bottom: 20px;
        }
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--heading);
        }
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            background-color: var(--bg);
            color: var(--text);
            font-size: 1rem;
        }
        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }
        body.dark-mode .form-group input:focus {
             box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        .calculator-form {
            background-color: var(--card);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
         .form-section {
            background-color: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 25px; /* Space between sections */
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            opacity: 0; /* Initial state for fade-in animation */
            transform: translateY(10px); /* Initial state for slide-up animation */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }
        .form-section.fade-in {
            opacity: 1;
            transform: translateY(0);
        }
        .form-section h3 {
            color: var(--secondary);
            margin-top: 0;
            margin-bottom: 15px;
            border-bottom: 1px dashed var(--border);
            padding-bottom: 10px;
        }
        .btn {
            background: var(--grad);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 700;
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.3);
            transition: all 0.3s;
            width: 100%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(30, 58, 138, 0.4);
        }
        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .btn-group .btn {
            flex: 1;
            min-width: 150px;
        }
        .btn.secondary {
            background: var(--secondary);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }
        .btn.accent {
            background: var(--accent);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }
        

        /* CALCULATION STEPS DISPLAY */
        .steps-container {
            display: none;
            margin-top: 30px;
        }
        .steps-container.active {
            display: block;
        }
        .step-card {
            background: var(--card);
            border-radius: 12px;
            padding: 25px 30px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            animation: slideIn 0.6s ease-out;
            transition: all 0.3s;
            margin-bottom: 25px; /* Spacing between cards */
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .step-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        .step-card h4 {
            color: var(--primary);
            margin: 0 0 20px 0;
            font-size: 1.4rem;
            font-family: 'Montserrat', sans-serif;
            display: flex;
            align-items: center;
        }
        .step-card .number {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-weight: 700;
            margin-right: 15px;
            font-size: 1.3rem;
            flex-shrink: 0;
        }
        .step-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            align-items: start;
        }
        @media (max-width: 768px) {
            .step-content {
                grid-template-columns: 1fr;
            }
        }
        .step-content .formula-block {
            background: var(--bg);
            border-radius: 8px;
            padding: 20px;
            font-size: 1rem;
            border: 1px solid var(--border);
        }
        .step-content .formula-block p {
            margin-top: 0;
        }
        .step-content .formula {
            background: var(--bg);
            border-left: 3px solid var(--accent);
            padding: 15px;
            margin: 12px 0;
            font-size: 1rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        .step-value {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--success);
            margin: 10px 0;
            line-height: 1.2;
        }
        .step-unit {
            font-size: 1rem;
            color: var(--text);
            opacity: 0.8;
            font-weight: 500;
            margin-left: 5px;
        }
        .step-explanation {
            font-size: 1.05rem;
            line-height: 1.8;
        }

        /* Results */
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border-radius: 8px;
            overflow: hidden;
        }
        .results-table th,
        .results-table td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        .results-table th {
            background: var(--grad);
            color: white;
            font-weight: 700;
        }
        .results-table tr:nth-child(even) {
            background-color: var(--bg);
        }
        .results-table td:first-child {
            font-weight: 600;
            color: var(--heading);
        }
        .results-table .highlight {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--success);
        }
        .results-table .warning {
            font-weight: 700;
            color: var(--warning);
        }
         .results-table .error {
            font-weight: 700;
            color: var(--danger);
        }

        /* Educational Section */
        .education-section {
            margin-top: 60px;
        }
        .insight-card {
            background: linear-gradient(135deg, var(--card), rgba(37,99,235,0.03));
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid var(--secondary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        .insight-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .insight-card h4 {
            color: var(--secondary);
            font-size: 1.3rem;
            margin: 0 0 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .insight-card h4 i {
            font-size: 1.5rem;
        }
        .insight-card p {
            margin: 10px 0;
            line-height: 1.8;
        }
        .insight-card ol,
        .insight-card ul {
            padding-left: 20px;
            margin: 10px 0;
        }
        .insight-card li {
            margin-bottom: 10px;
        }
        .stat-highlight {
            display: inline-block;
            background: var(--accent);
            color: #333;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 700;
            margin: 0 4px;
        }
        .danger-box {
            background: linear-gradient(135deg, rgba(220,38,38,0.1), rgba(220,38,38,0.05));
            border-left: 5px solid var(--danger);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .danger-box h4 {
            color: var(--danger);
            margin-top: 0;
        }
        .success-box {
            background: linear-gradient(135deg, rgba(16,185,129,0.1), rgba(16,185,129,0.05));
            border-left: 5px solid var(--success);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .success-box h4 {
            color: var(--success);
            margin-top: 0;
        }

        /* Message Box */
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 28px;
            border-radius: 8px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.25);
            z-index: 10000;
            font-weight: 600;
            color: white;
            opacity: 0;
            transition: all 0.4s;
            display: none;
        }
        .message-box.show {
            display: block;
            opacity: 1;
            top: 30px;
        }

        /* Footer */
        footer {
            background: var(--grad-dark);
            color: #CBD5E1;
            padding: 50px 0 20px 0;
            margin-top: 60px;
        }
        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
            margin-bottom: 30px;
        }
        .footer-col {
            flex: 1;
            min-width: 200px;
        }
        .footer-col h4 {
            color: white;
            margin-bottom: 15px;
            font-weight: 700;
        }
        .footer-col ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .footer-col a {
            color: #CBD5E1;
            text-decoration: none;
            transition: color 0.3s;
        }
        .footer-col a:hover {
            color: var(--accent);
        }
        .social-buttons {
            display: flex;
            gap: 12px;
            margin-top: 15px;
        }
        .social-btn {
            width: 40px;
            height: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            border-radius: 50%;
            font-size: 1.1rem;
            transition: transform 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .social-btn:hover {
            transform: translateY(-4px);
        }
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.youtube { background-color: #FF0000; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .footer-disclaimer {
            text-align: center;
            padding-top: 25px;
            border-top: 1px solid #334155;
            max-width: 800px;
            margin: 0 auto;
            font-size: 0.9rem;
        }
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            font-size: 0.9rem;
            color: #94A3B8;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 0 15px; }
            .navbar { flex-direction: column; gap: 20px; }
            .nav-links { flex-direction: column; gap: 12px; text-align: center; }
            .form-row { grid-template-columns: 1fr; }
            .card { padding: 20px; }
            .footer-content { flex-direction: column; gap: 25px; }
            .btn-group { flex-direction: column; }
        }
        .hidden { display: none; }
        
        /* Tooltip */
        .info-icon {
            color: var(--primary);
            margin-left: 5px;
            cursor: help;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px; /* Adjusted width */
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px; /* Increased padding */
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            margin-left: -125px; /* Half of width */
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            transform: translateY(10px);
            font-family: 'Inter', sans-serif; /* Professional font */
            font-size: 0.85rem; /* Slightly smaller font size */
            line-height: 1.4; /* Better readability */
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
            transform: translateY(0);
        }

        /* ----- From Old File: Specific RTD Styles ----- */
        
        /* Status Display (for RTD) */
        .status-display {
            font-weight: bold;
            font-size: 1.1em;
            margin-top: 15px;
            padding: 10px 20px;
            border-radius: 5px;
            transition: background-color 0.5s, color 0.5s;
            text-align: center;
            width: 100%;
        }
        .status-display.compensated {
            background-color: var(--success);
            color: white;
        }
        .status-display.uncompensated-error {
            background-color: var(--warning);
            color: #333;
        }
        .status-display.high-error {
            background-color: var(--danger);
            color: white;
        }
        .status-display.ideal {
            background-color: var(--primary); /* Use primary color for ideal */
            color: white;
        }

        /* Practical Recommendations Section */
        #practical-recommendations {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            background-color: var(--bg);
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            color: var(--text);
            border: 1px solid var(--border);
        }
        #practical-recommendations h4 {
            color: var(--secondary);
            margin-top: 0;
            margin-bottom: 15px;
            border-bottom: 1px dashed var(--border);
            padding-bottom: 10px;
        }
        #practical-recommendations ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
        }
        #practical-recommendations ul li {
            margin-bottom: 8px;
        }
        
    </style>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="math-content"> <!-- Added math-content class to body for MathJax processing -->
    <div id="message-box" class="message-box"></div>

    <header class="header">
        <div class="header-bg-animation"></div>
        <div class="container">
            <nav class="navbar">
                <a href="/" class="logo-container">
                    <img src="logo.png" alt="Design Calculators Logo" class="logo">
                    <span class="logo-text">Design Calculators</span>
                </a>

                <div class="nav-menu">
                    <button class="mobile-menu-toggle" aria-label="Toggle menu">
                        <i class="fas fa-bars"></i>
                    </button>

                    <ul class="nav-links">
                        <li><a href="/index.html">Home</a></li>
                        
    <li class="dropdown">
        <a href="/indexele.html" class="dropdown-toggle">Electrical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/arcflash.html">Arc Flash Calculator</a><a href="/breaker-sizing.html">Breaker Sizing</a><a href="/cable-thermal-rating.html">Cable Ampacity</a><a href="/comm-cable-loss.html">Comm Cable Loss</a><a href="/earth-conductor-size.html">Earth Conductor Size</a><a href="/generatorsizing.html">Generator Sizing</a><a href="/harmonicsanalyser.html">Harmonics Analyser</a><a href="/insulationresistance.html">Insulation Resistance</a><a href="/logicgate.html">Logic Gates Simulator</a><a href="/motor-starting.html">Motor Starting Current</a><a href="/pcbtrace.html">PCB Trace Width</a><a href="/protection-device.html">Protection Device</a><a href="/resistor.html">Resistor Color Code</a><a href="/solarcable.html">Solar Cable Sizing</a><a href="/systemxrcalculator.html">System X/R Ratio</a><a href="/transmissionline.html">Transmission Line</a><a href="/vfd-selection.html">VFD Selection Tool</a></div><div><a href="/batterylife.html">Battery Life Estimator</a><a href="/busbarampacity.html">Busbar Ampacity</a><a href="/cablepulling.html">Cable Pulling Tension</a><a href="/conduit-fill.html">Conduit Fill Calculator</a><a href="/earthingfaultsimulator.html">Earthing Fault Simulator</a><a href="/grounding.html">Grounding System Design</a><a href="/hvac-sizing.html">HVAC Sizing Calculator</a><a href="/lcresonancecalculator.html">LC Resonance Calculator</a><a href="/maintenance-guide.html">Maintenance Guide</a><a href="/nemaipconvertor.html">NEMA to IP Converter</a><a href="/power-factor.html">Power Factor Correction</a><a href="/relay-coordination.html">Relay Coordination</a><a href="/short-circuit.html">Short Circuit Current</a><a href="/solarpvarray.html">Solar PV Array</a><a href="/transformer-calculator.html">Transformer Calculator</a><a href="/unit-converter.html">Unit Converter</a><a href="/voltage-drop.html">Voltage Drop Calculator</a></div><div><a href="/battery-sizing.html">Battery Sizing (AH)</a><a href="/busbarshortcircuit.html">Busbar Short Circuit</a><a href="/cable-sizing.html">Cable Sizing Calculator</a><a href="/ctsaturation.html">CT Saturation</a><a href="/equipment-relay.html">Equipment Relay Setting</a><a href="/harmonic-distortion.html">Harmonic Distortion</a><a href="/industriallighting.html">Industrial Lighting</a><a href="/lighting-calulator.html">Lighting Calculator</a><a href="/motor-efficiency.html">Motor Efficiency</a><a href="/neutral-earth-fault-current.html">Neutral Earth Fault</a><a href="/powertriangletool.html">Power Triangle</a><a href="/electricalresidentialload.html">Residential Load Calc</a><a href="/skindepth.html">Skin Depth Calculator</a><a href="/symmetricalcomponents.html">Symmetrical Components</a><a href="/transformerinrush.html">Transformer Inrush</a><a href="/ups-sizing.html">UPS Sizing</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexele.html" class="view-all-link">View All Electrical Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexinst.html" class="dropdown-toggle">Instrumentation <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/adc-resolution.html">ADC Resolution</a><a href="/capillarylengthtemperatureerror.html">Capillary Error</a><a href="/cv-kv-valve.html">Cv/Kv Valve Sizing</a><a href="/dp-level.html">DP Level Measurement</a><a href="/hydrostatic-level.html">Hydrostatic Level</a><a href="/instrument-range.html">Instrument Range</a><a href="/loop-impedance.html">Loop Impedance</a><a href="/orifice-plate.html">Orifice Plate Beta</a><a href="/pid-tuning.html">PID Tuning</a><a href="/profibus.html">Profibus Calculator</a><a href="/tempsensorresponse.html">Response Time (Tau)</a><a href="/rtd-lead-comp.html">RTD Lead Wire Comp.</a><a href="/sealfluidzeroshift.html">Seal Fluid Shift</a><a href="/snr-calculator.html">SNR Calculator</a><a href="/thermocoupleextensioncable.html">TC Extension Cable</a><a href="/thermowellwakefreq.html">Thermowell Frequency</a><a href="/pressuretransmitteroverrange.html">Tx Overrange</a><a href="/valvecavitationcalculator.html">Valve Cavitation</a><a href="/vibrationtransmitter.html">Vibration Tx</a><a href="/zoneclassificationhelper.html">Zone Classification</a></div><div><a href="/baud-rate.html">Baud Rate Calculator</a><a href="/gascompressibility.html">Compressibility (Z)</a><a href="/dbcalculator.html">dB Gain/Loss Calc</a><a href="/flowprofiledistortioncalculator.html">Flow Distortion</a><a href="/impulselinefreezing.html">Impulse Freezing</a><a href="/intrinsic-safety.html">Intrinsic Safety Loop</a><a href="/measurement.html">Measurement Uncertainty</a><a href="/ph-temp-comp.html">pH Temp Compensation</a><a href="/plcscantime.html">PLC Scan Time</a><a href="/pressurereliefvalve.html">PRV Sizing (API 520)</a><a href="/reynoldsnumbercal.html">Reynolds Number</a><a href="/rtdselfheating.html">RTD Self-Heating</a><a href="/signal-scaling.html">Signal Scaling</a><a href="/staticheadcal.html">Static Head</a><a href="/temperaturesensorlag.html">Temp Sensor Lag</a><a href="/thermowell-wake.html">Thermowell Wake</a><a href="/ultrasoniclevel.html">Ultrasonic Level</a><a href="/valve-cv.html">Valve Cv Viewer</a><a href="/wetlegdensitycompensation.html">Wet Leg Compensation</a></div><div><a href="/capacitance-level.html">Capacitance Level</a><a href="/controlvalvenoise.html">Control Valve Noise</a><a href="/dp-flow-conversion.html">DP Flow Conversion</a><a href="/hartdevices.html">HART Devices</a><a href="/impulse-pressure-drop.html">Impulse Pressure Drop</a><a href="/junctionbox.html">Junction Box Sizing</a><a href="/orifice-flow.html">Orifice Flow Calculator</a><a href="/pid-symbol-library.html">PID Symbol Library</a><a href="/power-supply-load.html">Power Supply Load</a><a href="/prvsizing.html">Relief Orifice Area</a><a href="/rtdexcitationcurrentselection.html">RTD Excitation</a><a href="/rtd-tc-conversion.html">RTD/TC Conversion</a><a href="/sil.html">SIL Calculator</a><a href="/steamflow.html">Steam Flow</a><a href="/thermocouplecjccalculator.html">Thermocouple CJC</a><a href="/turndown.html">Turndown Ratio</a><a href="/controlvalveauthority.html">Valve Authority</a><a href="/controlvalveleakage.html">Valve Leakage Class</a><a href="/wirelesshart.html">WirelessHART Range</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexinst.html" class="view-all-link">View All Instrumentation Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexmech.html" class="dropdown-toggle">Mechanical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/aircompressorfad.html">Air Compressor FAD</a><a href="/asme-vessel.html">ASME Vessel Design</a><a href="/belt-pulley.html">Belt & Pulley</a><a href="/bolt-torque.html">Bolt Torque</a><a href="/controlvalveactuator.html">Control Valve Actuator</a><a href="/frictionfactortool.html">Darcy Friction Factor</a><a href="/fatigue.html">Fatigue Analysis</a><a href="/fuel-combustion.html">Fuel Combustion</a><a href="/gas.html">Gas Properties</a><a href="/heat-exchanger.html">Heat Exchanger</a><a href="/hydroliccylinder.html">Hydraulic Cylinder</a><a href="/material-compatibility.html">Material Compatibility</a><a href="/nozzle-reinforcement.html">Nozzle Reinforcement</a><a href="/openchannelflow.html">Open Channel Flow</a><a href="/pipescheduletool.html">Pipe Schedule & Stress</a><a href="/pump-head.html">Pump Head</a><a href="/shaft-power-torque.html">Shaft Power & Torque</a><a href="/steam-table.html">Steam Table</a><a href="/vibrationanalysis.html">Vibration Analysis</a></div><div><a href="/air-flow-duct.html">Air Flow Duct Sizing</a><a href="/beam-deflection.html">Beam Deflection</a><a href="/bernoulli-equation.html">Bernoulli Equation</a><a href="/chiller-capacity.html">Chiller Capacity</a><a href="/cooling-tower-sizing.html">Cooling Tower Sizing</a><a href="/darcy-weisbach.html">Darcy-Weisbach</a><a href="/finned-tube-heat-transfer.html">Finned Tube Heat</a><a href="/furnace-heat-duty.html">Furnace Heat Duty</a><a href="/gear-design.html">Gear Design</a><a href="/heat-loss-pipes.html">Heat Loss Pipes</a><a href="/jacketed-vessel-heat-transfer.html">Jacketed Vessel</a><a href="/metalweight.html">Metal Weight Calculator</a><a href="/nptbspthreadcalculator.html">NPT/BSP Threads</a><a href="/overall-heat-transfer.html">Overall Heat Transfer</a><a href="/pipe-stress-flexibility.html">Pipe Stress</a><a href="/pump-power.html">Pump Power</a><a href="/specific-heat-enthalpy.html">Specific Heat</a><a href="/storage-tank-volume.html">Storage Tank Volume</a><a href="/weldingstress.html">Welding Stress</a></div><div><a href="/allowable-stress-safety-factor.html">Allowable Stress</a><a href="/bearinglife.html">Bearing Life Calculator</a><a href="/boiler-efficiency.html">Boiler Efficiency</a><a href="/compressor-power.html">Compressor Power</a><a href="/corrosion-rate.html">Corrosion Rate</a><a href="/fan-laws.html">Fan Laws</a><a href="/foundation.html">Foundation Design</a><a href="/gas-laws.html">Gas Laws</a><a href="/hardness.html">Hardness Converter</a><a href="/conduction-convection-radiation.html">Heat Transfer Modes</a><a href="/machining.html">Machining Calculator</a><a href="/momentofinertia.html">Moment of Inertia</a><a href="/oring.html">O-Ring Sizing</a><a href="/pipe-flow.html">Pipe Flow Calculator</a><a href="/psychrometric.html">Psychrometric Calc</a><a href="/reynolds-number.html">Reynolds Number</a><a href="/spring.html">Spring Design</a><a href="/thermal-expansion.html">Thermal Expansion</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexmech.html" class="view-all-link">View All Mechanical Tools â†’</a>
            </div>
        </div>
    </li>
                        <li><a href="/index.html#articles">Articles</a></li>
                        <li><a href="/sitemap2.html">Site Map</a></li>
                    </ul>

                    <div class="theme-toggle">
                        <i class="fas fa-sun icon"></i>
                        <label class="switch">
                            <input type="checkbox" id="theme-switch">
                            <span class="slider"></span>
                        </label>
                        <i class="fas fa-moon icon"></i>
                    </div>
                </div>
            </nav>
    </header>

    <main class="container">
                
        <div class="tool-container">
            <h2><i class="fas fa-ruler-combined"></i> RTD Wiring Lead Compensation Calculator</h2>
                        
            <div class="tool-description">
                <p>This calculator determines the true temperature measured by a Resistance Temperature Detector (RTD) by compensating for the resistance of the lead wires. It supports 2-wire, 3-wire, and 4-wire RTD configurations, providing accurate temperature readings crucial for industrial process control and monitoring.</p>
            </div>
                    
            <div class="calculator-form">
                <form id="rtd-calculator-form">
                    <!-- RTD Parameters -->
                    <div class="form-section">
                        <h3>RTD & Wiring Parameters</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="rtd-type">RTD Type <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select the type of RTD (e.g., Pt100, Pt1000). Affects R0 and alpha.</span></span></label>
                                <select id="rtd-type" required>
                                    <option value="Pt100">Pt100 (IEC 60751)</option>
                                    <option value="Pt1000">Pt1000 (IEC 60751)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="wiring-config">Wiring Configuration <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Choose the RTD wiring configuration (2, 3, or 4-wire).</span></span></label>
                                <select id="wiring-config" required>
                                    <option value="4-wire">4-Wire</option> <!-- Changed default to 4-wire -->
                                    <option value="3-wire">3-Wire</option>
                                    <option value="2-wire">2-Wire</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="measured-resistance">Measured Resistance ($R_{measured}$) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The resistance reading from your RTD measurement device (Ohms).</span></span></label>
                                <input type="number" id="measured-resistance" step="any" value="103.90" required> <!-- Adjusted for 4-wire default -->
                            </div>
                        </div>
                    </div>

                    <!-- Lead Wire Parameters (Conditional) -->
                    <div class="form-section" id="lead-wire-section">
                        <h3>Lead Wire Parameters</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="lead-resistance-per-meter">Lead Resistance per Meter <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Resistance of a single lead wire per meter (Ohms/meter). Typical for copper wire.</span></span></label>
                                <input type="number" id="lead-resistance-per-meter" step="any" value="0.017" required>
                            </div>
                            <div class="form-group">
                                <label for="lead-wire-length">Lead Wire Length (One Way) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The length of a single lead wire from RTD to instrument (meters).</span></span></label>
                                <input type="number" id="lead-wire-length" step="any" value="10" required>
                            </div>
                            <div class="form-group" id="measured-lead-resistance-group" style="display: none;">
                                <label for="measured-lead-resistance">Measured Lead Resistance ($R_{lead\_measured}$) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">For 3-wire, the resistance measured between the excitation and compensation lead.</span></span></label>
                                <input type="number" id="measured-lead-resistance" step="any" value="0.17" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="btn-group" style="margin-top: 25px;">
                        <button type="button" id="calculate-btn" class="btn"><i class="fas fa-calculator"></i> Calculate True Temperature</button>
                        <button type="button" id="reset-form-btn" class="btn accent"><i class="fas fa-sync-alt"></i> Reset Form</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- NEW Step-by-Step Results Container -->
        <div id="steps-container" class="steps-container math-content">
            <!-- Step cards will be dynamically inserted here -->
        </div>

        <!-- Updated Results Section -->
        <div id="results-section" class="card hidden">
            <h3><i class="fas fa-clipboard-check"></i> Calculation Summary</h3>
            
            <p class="status-display" id="compensation-status-display">Compensation Status: N/A</p>

            <table class="results-table">
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody id="result-table-body">
                    <!-- Results will be dynamically inserted here -->
                </tbody>
            </table>

            <div id="practical-recommendations" style="display: none;">
                <h4><i class="fas fa-tools"></i> Practical Considerations & Recommendations</h4>
                <ul id="recommendations-list">
                    <!-- Recommendations will be dynamically inserted here -->
                </ul>
            </div>

            <div class="btn-group" style="justify-content: center; margin-top: 20px;">
                <button type="button" id="clear-results-btn" class="btn accent"><i class="fas fa-times-circle"></i> Clear Results</button>
            </div>

            <div class="insight-card" id="standard-reference" style="margin-top: 30px;">
                 <h4><i class="fas fa-book"></i> Applicable Standards and Guidelines</h4>
                 <p>Accurate RTD measurements are critical in industrial applications. Key standards and considerations include:</p>
                    <ul>
                        <li><strong>IEC 60751: Industrial platinum resistance thermometers.</strong> This is the primary standard defining the resistance-temperature characteristics of Pt100 and Pt1000 RTDs, including their reference resistance at 0°C ($R_0$) and temperature coefficients (A, B, C) used in the Callendar-Van Dusen equation.</li>
                        <li><strong>ASTM E1137: Standard Guide for Industrial Platinum Resistance Thermometers.</strong> Provides guidance on the use and calibration of industrial platinum resistance thermometers.</li>
                        <li><strong>Wiring Practices:</strong> Proper wiring (3-wire or 4-wire) is crucial for lead wire compensation. Adherence to best practices for cable routing, shielding, and grounding minimizes external noise and ensures compensation effectiveness.</li>
                        <li><strong>Calibration and Traceability:</strong> Regular calibration of RTDs and associated measurement instruments is essential to maintain accuracy. Calibration should be traceable to national or international standards (e.g., NIST).</li>
                    </ul>
            </div>
        </div>

        <!-- NEW Educational Section on RTD Wiring -->
        <div id="education-section" class="education-section card">
            <h2><i class="fas fa-project-diagram"></i> The "Why" of RTD Wiring: 2, 3, and 4-Wire Explained</h2>
            
            <div class="tool-description">
                <p>A Resistance Temperature Detector (RTD) is just a very precise resistor ($R_{RTD}$). The problem is that it's useless without connecting wires ($R_{LEAD}$) to read it. But these copper wires *also* have resistance, especially over long distances. This lead resistance adds to the RTD's resistance, making the controller think the temperature is much higher than it really is.</p>
                <p>The entire purpose of 3-wire and 4-wire configurations is to *compensate* for, or *cancel out*, the error caused by this unwanted lead wire resistance. This calculator demonstrates the massive difference between these methods.</p>
                
            </div>

            <div class="danger-box">
                <h4><i class="fas fa-times-circle"></i> 2-Wire RTD: The Inaccurate Method</h4>
                <p>This is the simplest but least accurate method, only suitable for short distances where accuracy is not important (e.g., basic on/off control).</p>
                <ul>
                    <li><strong>How it Works:</strong> A transmitter sends a current ($I$) through two lead wires and the RTD element, all in a single series loop. It measures the total voltage drop ($V_{total}$) across this entire loop.</li>
                    <li><strong>The Math:</strong> $R_{measured} = V_{total} / I = (R_{LEAD1} + R_{RTD} + R_{LEAD2})$</li>
                    <li><strong>The Problem:</strong> The transmitter has no way to tell the difference between $R_{RTD}$ and the resistance of the two lead wires. If your RTD is 100 Ohms and each wire is 1 Ohm, the transmitter reads 102 Ohms. For a Pt100, that's an error of over <strong>+5°C!</strong> This calculator attempts to compensate by *subtracting* a *calculated* lead resistance, but this is a guess at best.</li>
                </ul>
            </div>

            <div class="insight-card">
                <h4><i class="fas fa-balance-scale"></i> 3-Wire RTD: The Common Industrial Standard</h4>
                <p>This is the most common configuration in industrial plants. It offers a very good compromise between accuracy and cabling cost (one fewer wire than 4-wire).</p>
                <ul>
                    <li><strong>How it Works:</strong> It uses a Wheatstone bridge-style circuit. The controller uses two of the wires to measure the resistance of the RTD *plus* two leads ($R_{LEAD1} + R_{RTD} + R_{LEAD2}$). It then uses a *third* wire (the compensation loop) to measure the resistance of *just one* of the leads ($R_{LEAD3}$).</li>
                    <li><strong>The Math:</strong> The controller measures $R_{A} = R_{LEAD1} + R_{RTD}$ and $R_{B} = R_{LEAD2}$. It *assumes* all lead wires are identical ($R_{LEAD1} = R_{LEAD2} = R_{LEAD3}$).</li>
                    <li><strong>The "Magic":</strong> By measuring the resistance of the compensation loop ($R_{LEAD3}$), it knows the resistance of $R_{LEAD1}$ and $R_{LEAD2}$ and can subtract them from the total measurement. The result is just $R_{RTD}$.</li>
                    <li><strong>The Weakness:</strong> This method *only* works if all three wires are the exact same material, gauge, and length, and are at the same ambient temperature. If one wire is damaged, corroded, or a different type, the "balance" is broken and errors will be introduced.</li>
                </ul>
            </div>
            
            <div class="success-box">
                <h4><i class="fas fa-check-circle"></i> 4-Wire RTD: The Laboratory & High-Accuracy Standard</h4>
                <p>This is the most accurate method possible. It completely eliminates all lead wire resistance error, regardless of wire length or condition. It is the standard for calibration labs and critical process measurements.</p>
                <ul>
                    <li><strong>How it Works (Kelvin Measurement):</strong> It separates the current and voltage measurement functions.
                        <br>1. Two wires (e.g., Red/White) carry a precise, constant current ($I$) *through* the RTD.
                        <br>2. The *other two* wires (e.g., Black/Green) are connected to a high-impedance voltmeter *directly across* the RTD element itself.</li>
                    <li><strong>The "Magic":</strong> The voltmeter has extremely high resistance, so (virtually) zero current flows through the two *measurement* wires. According to Ohm's Law ($V=IR$), if $I = 0$, the voltage drop across these measurement wires is also zero, *regardless* of their resistance.</li>
                    <li><strong>The Math:</strong> The controller measures the *true* voltage drop ($V$) directly at the RTD and knows the precise current ($I$) it is supplying.
                    <br>$R_{true} = V_{measured} / I_{source}$
                    <br>The resistance of *all four* lead wires is completely irrelevant to the final calculation.</li>
                    <li><strong>The Result:</strong> Perfect compensation, every time. This is why 4-wire is the default in this calculator—it represents the "true" resistance.</li>
                </ul>
            </div>

        </div>

    </main>

    <!-- FOOTER -->
        <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <a href="/" class="footer-logo">
                        <img src="logo.png" alt="Design Calculators Logo" loading="lazy" decoding="async">
                        <span class="footer-logo-text">Design Calculators</span>
                    </a>
                    <p class="footer-description">A comprehensive engineering calculator hub based on IEC, IEEE, and
                        global standards.</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn linkedin"
                            aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer"
                            class="social-btn youtube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in&text=Check%20out%20this%20amazing%20engineering%20calculator%20hub!"
                            target="_blank" rel="noopener noreferrer" class="social-btn twitter" aria-label="Twitter"><i
                                class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn facebook"
                            aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn whatsapp"
                            aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="footer-col">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href='/indexele.html'>Electrical Tools</a></li>
                            <li><a href='/indexmech.html'>Mechanical Tools</a></li>
                            <li><a href='/indexinst.html'>Instrumentation Tools</a></li>
                            <li><a href='/about.html'>About Us</a></li>
                            <li><a href='/faq.html'>FAQ</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Learn More</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/@designcalculators" target="_blank"
                                    rel="noopener noreferrer">YouTube Channel</a></li>
                            <li><a href='/contact.html'>Contact Us</a></li>
                            <li><a href='/privacy-policy.html'>Privacy Policy</a></li>
                            <li><a href='/terms-of-service.html'>Terms of Service</a></li>
                            <li><a href='/sitemap2.html'>Sitemap</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Our Network</h4>
                        <ul>
                            <li style="margin-bottom: 12px;">
                                <a href="https://reliabilitytools.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">Reliability Tools</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Reliability
                                    & maintenance engineering calculators.</span>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="https://electrosafe.homes/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">ElectroSafe</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Dedicated
                                    to home electrical safety & protection.</span>
                            </li>
                            <li>
                                <a href="https://knowyourname.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">KnowYourName</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Scientific
                                    name analysis: Phonetics, Ergonomics & Acoustics.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>All calculations are for preliminary engineering design guidance. Final designs must comply with all applicable local and international standards (including but not limited to ASHRAE 90.1, ARI 550/590). Always verify calculations and consult with a licensed professional engineer before implementation or construction.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">Anil Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Elements ---
            const rtdTypeSelect = document.getElementById('rtd-type');
            const wiringConfigSelect = document.getElementById('wiring-config');
            const measuredResistanceInput = document.getElementById('measured-resistance');
            const leadResistancePerMeterInput = document.getElementById('lead-resistance-per-meter');
            const leadWireLengthInput = document.getElementById('lead-wire-length');
            const measuredLeadResistanceGroup = document.getElementById('measured-lead-resistance-group');
            const measuredLeadResistanceInput = document.getElementById('measured-lead-resistance');

            const leadWireSection = document.getElementById('lead-wire-section');
            const practicalRecommendationsDiv = document.getElementById('practical-recommendations');
            const recommendationsList = document.getElementById('recommendations-list');

            const calculateBtn = document.getElementById('calculate-btn');
            const resetFormBtn = document.getElementById('reset-form-btn');
            const clearResultsBtn = document.getElementById('clear-results-btn');
            
            const resultsSection = document.getElementById('results-section');
            const stepsContainer = document.getElementById('steps-container');
            const resultTableBody = document.getElementById('result-table-body');
            const compensationStatusDisplay = document.getElementById('compensation-status-display');
            
            const messageBox = document.getElementById('message-box');
            const standardReferenceDiv = document.getElementById('standard-reference');
            const themeSwitch = document.getElementById('theme-switch');

            // RTD Constants (IEC 60751 for Pt100 and Pt1000)
            const rtdConstants = {
                'Pt100': {
                    R0: 100.0,
                    A: 3.9083e-3,
                    B: -5.775e-7,
                    C: -4.183e-12 // For T < 0°C
                },
                'Pt1000': {
                    R0: 1000.0,
                    A: 3.9083e-3,
                    B: -5.775e-7,
                    C: -4.183e-12 // For T < 0°C
                }
            };

            // Default values for resetting form
            const defaultValues = {
                'rtd-type': 'Pt100',
                'wiring-config': '4-wire', // Changed default to 4-wire
                'measured-resistance': 103.90, // Approx 10°C for Pt100
                'lead-resistance-per-meter': 0.017,
                'lead-wire-length': 10,
                'measured-lead-resistance': 0.17 // For 3-wire default
            };

            // --- Standard showMessage function ---
            function showMessage(msg, type = 'success') {
                messageBox.textContent = msg;
                if (type === 'error') {
                    messageBox.style.backgroundColor = 'var(--danger)';
                } else if (type === 'warning') {
                     messageBox.style.backgroundColor = 'var(--warning)';
                     messageBox.style.color = '#333';
                } else {
                    messageBox.style.backgroundColor = 'var(--success)';
                    messageBox.style.color = 'white';
                }
                messageBox.classList.add('show');
                setTimeout(() => messageBox.classList.remove('show'), 4000);
            }

            // --- Helper: Add row to summary table ---
            function addResultRow(parameter, value, statusClass = '') {
                const row = resultTableBody.insertRow();
                const paramCell = row.insertCell();
                const valueCell = row.insertCell();
                paramCell.innerHTML = parameter;
                valueCell.innerHTML = value;
                if (statusClass) {
                    valueCell.classList.add(statusClass);
                }
            }

            // --- Helper: Clear all results ---
            function clearResults() {
                resultsSection.classList.add('hidden');
                stepsContainer.innerHTML = '';
                stepsContainer.classList.remove('active');
                resultTableBody.innerHTML = '';
                compensationStatusDisplay.textContent = 'Compensation Status: N/A';
                compensationStatusDisplay.className = 'status-display';
                practicalRecommendationsDiv.style.display = 'none';
                recommendationsList.innerHTML = '';
                
                showMessage("Results cleared.", "success");
            }

            // --- Helper: Reset form ---
            function resetForm() {
                for (const key in defaultValues) {
                    const input = document.getElementById(key);
                    if (input) {
                        input.value = defaultValues[key];
                    }
                }
                updateLeadWireSectionVisibility(); // Reset visibility
                clearResults();
                showMessage("Form reset to default values.", "success");
            }

            // --- Helper: Update Impedance Visibility ---
            function updateLeadWireSectionVisibility() {
                const config = wiringConfigSelect.value;
                if (config === '4-wire') {
                    leadWireSection.style.display = 'none';
                } else {
                    leadWireSection.style.display = 'block';
                    if (config === '2-wire') {
                        leadResistancePerMeterInput.closest('.form-group').style.display = 'block';
                        leadWireLengthInput.closest('.form-group').style.display = 'block';
                        measuredLeadResistanceGroup.style.display = 'none';
                    } else { // 3-wire
                        leadResistancePerMeterInput.closest('.form-group').style.display = 'none';
                        leadWireLengthInput.closest('.form-group').style.display = 'none';
                        measuredLeadResistanceGroup.style.display = 'block';
                    }
                }
            }

            // --- Helper: Calculate Temperature from Resistance ---
            // This function now returns an object { temperature, stepsHtml }
            function calculateTemperature(R_T, R0, A, B, C) {
                let temperature;
                let stepsHtml = '';

                if (R_T >= R0) { // T >= 0°C
                    // Solve quadratic equation: B*T^2 + A*T + (1 - R_T/R0) = 0
                    const c_val = (1 - R_T / R0);
                    const discriminant = (A * A) - (4 * B * c_val);

                    if (discriminant < 0) {
                        throw new Error(`Invalid resistance ${R_T.toFixed(4)} &Omega;. Results in a non-real temperature.`);
                    }
                    temperature = (-A + Math.sqrt(discriminant)) / (2 * B);
                    stepsHtml += `<p>Using formula for T &ge; 0°C:</p>`;
                    stepsHtml += `<p class="formula">$$T = \frac{-A + \sqrt{A^2 - 4B(1 - R_T/R_0)}}{2B}$$</p>`;
                    stepsHtml += `<p class="formula">T = (-${A.toExponential(4)} + &radic;(...)) / (2 * ${B.toExponential(4)})</p>`;

                } else { // T < 0°C
                    // Newton-Raphson for T < 0°C
                    let T_guess = -50; // Initial guess
                    const maxIterations = 100;
                    const tolerance = 1e-6;

                    for (let i = 0; i < maxIterations; i++) {
                        const f_T = R0 * (1 + A * T_guess + B * T_guess * T_guess + C * (T_guess - 100) * T_guess * T_guess * T_guess) - R_T;
                        const f_prime_T = R0 * (A + 2 * B * T_guess + C * (4 * T_guess * T_guess * T_guess - 300 * T_guess * T_guess));
                        
                        if (Math.abs(f_prime_T) < 1e-10) { break; } // Avoid division by zero
                        const T_next = T_guess - (f_T / f_prime_T);
                        if (Math.abs(T_next - T_guess) < tolerance) {
                            temperature = T_next;
                            break;
                        }
                        T_guess = T_next;
                    }
                    if (temperature === undefined) {
                        throw new Error(`Numerical solver for T < 0°C did not converge for R = ${R_T.toFixed(4)} &Omega;.`);
                    }
                    stepsHtml += `<p>Using formula for T < 0°C (Callendar-Van Dusen):</p>`;
                    stepsHtml += `<p class="formula">$$R_T = R_0 [1 + AT + BT^2 + C(T-100)T^3]$$</p>`;
                    stepsHtml += `<p>Solving iteratively (Newton-Raphson) for T...</p>`;
                }
                return { temperature, stepsHtml };
            }

            // --- Event Listeners ---
            wiringConfigSelect.addEventListener('change', updateLeadWireSectionVisibility);
            calculateBtn.addEventListener('click', calculateCompensation);
            resetFormBtn.addEventListener('click', resetForm);
            clearResultsBtn.addEventListener('click', clearResults);

            // --- Main Calculation Function ---
            function calculateCompensation() {
                // Clear previous results
                resultsSection.classList.add('hidden');
                stepsContainer.innerHTML = '';
                stepsContainer.classList.remove('active');
                resultTableBody.innerHTML = '';

                try {
                    // --- 1. Get All Inputs ---
                    const rtdType = rtdTypeSelect.value;
                    const wiringConfig = wiringConfigSelect.value;
                    const measuredResistance = parseFloat(measuredResistanceInput.value);
                    const leadResistancePerMeter = parseFloat(leadResistancePerMeterInput.value);
                    const leadWireLength = parseFloat(leadWireLengthInput.value);
                    const measuredLeadResistance = parseFloat(measuredLeadResistanceInput.value);

                    const constants = rtdConstants[rtdType];
                    const { R0, A, B, C } = constants;
                    
                    let stepsHtml = '';
                    let trueRTDResistance, totalLeadResistance, leadResistanceError;
                    
                    // --- 2. Input Validation ---
                    if (isNaN(measuredResistance) || measuredResistance <= 0) {
                        throw new Error('Measured Resistance must be a positive numerical value.');
                    }
                    
                    // Check RTD resistance range
                    const R_at_minus_200C = R0 * (1 + A * -200 + B * (-200)**2 + C * (-200 - 100) * (-200)**3);
                    if (measuredResistance < R_at_minus_200C * 0.9) { // Give 10% buffer
                        showMessage(`Measured Resistance (${measuredResistance.toFixed(4)} &Omega;) is below the typical -200°C value for ${rtdType} (approx ${R_at_minus_200C.toFixed(2)} &Omega;). Please check inputs.`, 'warning');
                    }

                    // --- 3. Calculations & Step Card Generation ---

                    // Step 1: Input Parameters
                    stepsHtml += `<div class="step-card">
                        <h4><span class="number">1</span>Input Parameters</h4>
                        <div class="step-content">
                            <div class="step-explanation">
                                <strong>RTD Type:</strong> ${rtdType} ($R_0$ = ${R0} &Omega;)<br>
                                <strong>Wiring Config:</strong> ${wiringConfig}<br>
                                <strong>Measured Resistance ($R_{measured}$):</strong> ${measuredResistance.toFixed(4)} &Omega;
                            </div>
                            <div class="step-explanation">
                                <p>The goal is to find the <strong>True RTD Resistance ($R_{true}$)</strong> by compensating for the lead wire resistance ($R_{lead}$).</p>
                            </div>
                        </div>
                    </div>`;

                    // Step 2: Determine Lead Wire Compensation
                    stepsHtml += `<div class="step-card">
                        <h4><span class="number">2</span>Determine Lead Wire Compensation</h4>
                        <div class="step-content">`;
                    
                    if (wiringConfig === '2-wire') {
                        if (isNaN(leadResistancePerMeter) || leadResistancePerMeter < 0 || isNaN(leadWireLength) || leadWireLength < 0) {
                            throw new Error('Lead Resistance per Meter and Lead Wire Length must be non-negative values for 2-wire setup.');
                        }
                        totalLeadResistance = leadResistancePerMeter * leadWireLength; // Resistance of ONE lead
                        leadResistanceError = 2 * totalLeadResistance; // 2-wire adds error from TWO leads
                        trueRTDResistance = measuredResistance - leadResistanceError;
                        
                        stepsHtml += `<div class="step-explanation">
                                        <p>For a <strong>2-wire</strong> setup, the resistance of *both* lead wires is measured.</p>
                                        <p class="formula">$R_{lead_1} = ${leadResistancePerMeter.toFixed(4)} \Omega/m \times ${leadWireLength.toFixed(2)} m = ${totalLeadResistance.toFixed(4)} \Omega$</p>
                                        <p class="formula">$R_{compensation} = 2 \times R_{lead_1} = ${leadResistanceError.toFixed(4)} \Omega$</p>
                                    </div>
                                    <div class="step-explanation">
                                        <p><strong>True RTD Resistance ($R_{true}$):</strong></p>
                                        <p class="formula">$R_{true} = R_{measured} - R_{compensation}$</p>
                                        <p class="formula">$R_{true} = ${measuredResistance.toFixed(4)} - ${leadResistanceError.toFixed(4)}$</p>
                                        <div class="step-value" style="color:var(--heading); font-size: 1.5rem;">${trueRTDResistance.toFixed(4)}<span class="step-unit">&Omega;</span></div>
                                    </div>`;

                    } else if (wiringConfig === '3-wire') {
                        if (isNaN(measuredLeadResistance) || measuredLeadResistance < 0) {
                            throw new Error('Measured Lead Resistance must be a non-negative value for 3-wire setup.');
                        }
                        leadResistanceError = measuredLeadResistance; // 3-wire compensation subtracts one lead
                        trueRTDResistance = measuredResistance - leadResistanceError;
                        totalLeadResistance = measuredLeadResistance; // For summary table
                        
                        stepsHtml += `<div class="step-explanation">
                                        <p>For a <strong>3-wire</strong> setup, the transmitter measures one lead wire's resistance via the compensation loop.</p>
                                        <p class="formula">$R_{compensation} = R_{lead\_measured}$</p>
                                        <p class="formula">$R_{compensation} = ${leadResistanceError.toFixed(4)} \Omega$</p>
                                    </div>
                                    <div class="step-explanation">
                                        <p><strong>True RTD Resistance ($R_{true}$):</strong></p>
                                        <p class="formula">$R_{true} = R_{measured} - R_{compensation}$</p>
                                        <p class="formula">$R_{true} = ${measuredResistance.toFixed(4)} - ${leadResistanceError.toFixed(4)}$</p>
                                        <div class="step-value" style="color:var(--heading); font-size: 1.5rem;">${trueRTDResistance.toFixed(4)}<span class="step-unit">&Omega;</span></div>
                                    </div>`;

                    } else { // 4-wire
                        leadResistanceError = 0;
                        totalLeadResistance = 0; // For summary table
                        trueRTDResistance = measuredResistance;
                        
                        stepsHtml += `<div class="step-explanation">
                                        <p>For a <strong>4-wire</strong> setup, lead wire resistance is <strong>inherently canceled</strong> by the Kelvin measurement method.</p>
                                        <p class="formula">$R_{compensation} = 0 \Omega$</p>
                                    </div>
                                    <div class="step-explanation">
                                        <p><strong>True RTD Resistance ($R_{true}$):</strong></p>
                                        <p class="formula">$R_{true} = R_{measured}$</p>
                                        <p class="formula">$R_{true} = ${measuredResistance.toFixed(4)} \Omega$</p>
                                        <div class="step-value" style="color:var(--heading); font-size: 1.5rem;">${trueRTDResistance.toFixed(4)}<span class="step-unit">&Omega;</span></div>
                                    </div>`;
                    }
                    stepsHtml += `</div></div>`; // Close step-content and step-card

                    if (trueRTDResistance < 0) {
                        throw new Error('Calculated True RTD Resistance is negative. Check your inputs.');
                    }

                    // Step 3: Calculate Uncompensated Temperature
                    let uncompResult = calculateTemperature(measuredResistance, R0, A, B, C);
                    let uncompensatedTemperature = uncompResult.temperature;
                    stepsHtml += `<div class="step-card math-content">
                        <h4><span class="number">3</span>Uncompensated Temperature (T<sub>uncompensated</sub>)</h4>
                        <div class="step-content">
                            <div class="step-explanation">
                                <p>This is the temperature your system *thinks* it has, based on $R_{measured}$ (<strong>${measuredResistance.toFixed(4)} &Omega;</strong>) without compensation.</p>
                                ${uncompResult.stepsHtml}
                            </div>
                            <div>
                                <p><strong>Uncompensated Temp:</strong></p>
                                <div class="step-value" style="color:var(--danger);">${uncompensatedTemperature.toFixed(3)}<span class="step-unit">°C</span></div>
                            </div>
                        </div>
                    </div>`;
                    
                    // Step 4: Calculate Compensated Temperature
                    let compResult = calculateTemperature(trueRTDResistance, R0, A, B, C);
                    let compensatedTemperature = compResult.temperature;
                    stepsHtml += `<div class="step-card math-content">
                        <h4><span class="number">4</span>Compensated Temperature (T<sub>compensated</sub>)</h4>
                        <div class="step-content">
                            <div class="step-explanation">
                                <p>This is the <strong>true</strong> temperature, based on $R_{true}$ (<strong>${trueRTDResistance.toFixed(4)} &Omega;</strong>) after compensation.</p>
                                ${compResult.stepsHtml}
                            </div>
                            <div>
                                <p><strong>True (Compensated) Temp:</strong></p>
                                <div class="step-value">${compensatedTemperature.toFixed(3)}<span class="step-unit">°C</span></div>
                            </div>
                        </div>
                    </div>`;
                    
                    // Step 5: Calculate Error
                    let temperatureError = uncompensatedTemperature - compensatedTemperature;
                    stepsHtml += `<div class="step-card math-content">
                        <h4><span class="number">5</span>Final Temperature Error</h4>
                        <div class="step-content">
                            <div class="step-explanation">
                                <p>This is the error introduced by the lead wires, which has now been calculated and corrected for.</p>
                                <p class="formula">$$Error = T_{uncompensated} - T_{compensated}$$</p>
                                <p class="formula">Error = ${uncompensatedTemperature.toFixed(3)}°C - ${compensatedTemperature.toFixed(3)}°C</p>
                            </div>
                            <div>
                                <p><strong>Calculated Error:</strong></p>
                                <div class="step-value" style="color:var(--warning);">${temperatureError.toFixed(3)}<span class="step-unit">°C</span></div>
                            </div>
                        </div>
                    </div>`;
                    
                    // --- 4. Populate DOM ---
                    stepsContainer.innerHTML = stepsHtml;
                    stepsContainer.classList.add('active');

                    // Populate Summary Table
                    addResultRow("RTD Type", rtdType);
                    addResultRow("Wiring Configuration", wiringConfig);
                    addResultRow("Measured Resistance ($R_{measured}$)", `${measuredResistance.toFixed(4)} &Omega;`);
                    addResultRow("Lead Resistance Error ($R_{compensation}$)", `${leadResistanceError.toFixed(4)} &Omega;`);
                    addResultRow("<strong>True RTD Resistance ($R_{true}$)</strong>", `<strong>${trueRTDResistance.toFixed(4)} &Omega;</strong>`);
                    addResultRow("Uncompensated Temperature", `${uncompensatedTemperature.toFixed(3)} °C`);
                    addResultRow("<strong>Compensated (True) Temperature</strong>", `<strong>${compensatedTemperature.toFixed(3)} °C</strong>`, 'highlight');
                    addResultRow("<strong>Temperature Error</strong>", `<strong>${temperatureError.toFixed(3)} °C</strong>`, 'warning');

                    // Update Status Display and Recommendations
                    let statusText = 'Compensation Status: ';
                    let statusClass = 'status-display ';
                    let recommendations = [];

                    if (wiringConfig === '4-wire') {
                        statusText += 'Ideal Compensation (4-Wire)';
                        statusClass += 'ideal';
                        recommendations.push("The 4-wire configuration provides the most accurate temperature measurement by inherently eliminating lead wire resistance effects. This is the recommended standard for high-precision industrial applications.");
                        recommendations.push("Ensure all four wires are properly connected and maintained, and that the measurement instrument supports 4-wire configuration for optimal performance.");
                    } else if (wiringConfig === '3-wire') {
                        statusText += 'Effective Compensation (3-Wire)';
                        statusClass += 'compensated';
                        recommendations.push("The 3-wire compensation method is effective for most industrial applications, as it uses a measured lead resistance to cancel out errors.");
                        recommendations.push("<strong>Crucial:</strong> This method *assumes* all three lead wires have identical resistance. If wires are mismatched (different length, gauge, or material), errors will be introduced.");
                        recommendations.push("Regularly verify the integrity and consistency of lead wire connections to maintain accuracy.");
                    } else { // 2-wire
                        if (Math.abs(temperatureError) < 0.5) {
                            statusText += '2-Wire Compensation Applied (Error Prone)';
                            statusClass += 'uncompensated-error';
                        } else {
                            statusText += 'High Error (2-Wire - Not Recommended)';
                            statusClass += 'high-error';
                        }
                        recommendations.push("The 2-wire configuration is highly susceptible to lead wire resistance errors, as compensation relies on a *calculated* lead resistance, which itself can change with ambient temperature.");
                        recommendations.push("<strong>Recommendation:</strong> Only use 2-wire for very short distances and non-critical applications. Minimize lead wire length and use the largest practical wire gauge (thickest wire) to reduce the error.");
                        recommendations.push("<strong>Strongly consider upgrading to a 3-wire or 4-wire configuration</strong> for improved accuracy and reliability in industrial environments.");
                    }
                    
                    recommendationsList.innerHTML = '';
                    recommendations.forEach(rec => {
                        const li = document.createElement('li');
                        li.textContent = rec;
                        recommendationsList.appendChild(li);
                    });
                    practicalRecommendationsDiv.style.display = 'block';

                    compensationStatusDisplay.textContent = statusText;
                    compensationStatusDisplay.className = statusClass;
                    
                    // Update standard reference div (it's inside the results section now)
                    standardReferenceDiv.innerHTML = `
                        <h4><i class="fas fa-book"></i> Applicable Standards and Guidelines</h4>
                        <p>Accurate RTD measurements are critical in industrial applications. Key standards and considerations include:</p>
                        <ul>
                            <li><strong>IEC 60751: Industrial platinum resistance thermometers.</strong> This is the primary standard defining the resistance-temperature characteristics of Pt100 and Pt1000 RTDs, including their reference resistance at 0°C ($R_0$) and temperature coefficients (A, B, C) used in the Callendar-Van Dusen equation.</li>
                            <li><strong>ASTM E1137: Standard Guide for Industrial Platinum Resistance Thermometers.</strong> Provides guidance on the use and calibration of industrial platinum resistance thermometers.</li>
                            <li><strong>Wiring Practices:</strong> Proper wiring (3-wire or 4-wire) is crucial for lead wire compensation. Adherence to best practices for cable routing, shielding, and grounding minimizes external noise and ensures compensation effectiveness.</li>
                            <li><strong>Calibration and Traceability:</strong> Regular calibration of RTDs and associated measurement instruments is essential to maintain accuracy. Calibration should be traceable to national or international standards (e.g., NIST).</li>
                        </ul>`;
                    
                    // Show results
                    resultsSection.classList.remove('hidden');
                    
                    // Typeset MathJax
                    if (window.MathJax && typeof window.MathJax.typesetPromise === 'function') {
                        setTimeout(() => {
                            window.MathJax.typesetPromise([stepsContainer, resultsSection]);
                        }, 50); 
                    }

                    setTimeout(() => {
                        stepsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 100);
                    
                    showMessage('Calculation successful!', 'success');

                } catch (error) {
                    showMessage('An error occurred: ' + error.message, 'error');
                    console.error('RTD Calculation Error:', error);
                }
            }
            
            // --- Initial Page Load ---
            updateLeadWireSectionVisibility(); // Set initial visibility

            // Initial fade-in for form sections
            const formSections = document.querySelectorAll('.form-section');
            formSections.forEach((section, index) => {
                setTimeout(() => {
                    section.classList.add('fade-in');
                }, 100 * index); // Staggered fade-in
            });

            // --- Theme switch logic ---
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }
                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }
        });
    </script>
</body>
</html>

