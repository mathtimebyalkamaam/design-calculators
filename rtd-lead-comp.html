<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script> <!-- Placeholder for G-tag ID -->
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX'); // Placeholder for G-tag ID
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTD Wiring Lead Compensation Calculator - Design Calculators - Instrumentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Basic CSS Variables for a consistent theme (RTD - Green) */
        :root {
            --primary-color: #28A745; /* Green */
            --secondary-color: #1E7E34; /* Darker Green */
            --accent-color: #FFC107; /* Amber (for warnings/accents) */
            --bg-color: #e6f2ed; /* Light Greenish Grey */
            --card-bg: #ffffff; /* White */
            --text-color: #333333; /* Dark Grey */
            --header-bg: #2C3E50; /* Dark Blue Grey (for contrast) */
            --footer-bg: #34495E; /* Slightly Lighter Dark Blue Grey */
            --border-color: #cccccc;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --hover-color: #d9ead3; /* Lighter green for hover */
            --button-gradient: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            --button-hover-gradient: linear-gradient(45deg, var(--secondary-color), #176B2F);
            --reset-button-bg: #6c757d; /* Grey for reset */
            --reset-button-hover-bg: #5a6268; /* Darker grey */
            --clear-button-bg: #FFC107; /* Amber for clear */
            --clear-button-hover-bg: #E0A800; /* Darker amber */
            --ok-color: #28a745; /* Green for OK status */
            --error-color: #dc3545; /* Red for error status */
            --warning-color: #ffc107; /* Amber for warnings */
        }

        /* Dark Mode Variables */
        body.dark-mode {
            --bg-color: #2c3e50;
            --card-bg: #34495e;
            --text-color: #ecf0f1;
            --header-bg: #2c3e50;
            --footer-bg: #2c3e50;
            --border-color: #555555;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            --hover-color: #446688;
            --button-gradient: linear-gradient(45deg, #1E7E34, #28A745);
            --button-hover-gradient: linear-gradient(45deg, #28A745, #34B850);
            --reset-button-bg: #5a6268; /* Darker grey for dark mode reset */
            --reset-button-hover-bg: #495057;
            --clear-button-bg: #DAA520; /* Darker amber for dark mode clear */
            --clear-button-hover-bg: #B8860B;
            --ok-color: #5cb85c;
            --error-color: #e74c3c;
            --warning-color: #DAA520;
        }

        /* General Body Styling */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, var(--bg-color), #d0d2d6);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--header-bg);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative;
        }

        header h1 {
            margin: 0;
            font-size: 2.5em;
            color: var(--primary-color);
        }

        header .subtitle {
            margin: 5px 0 0;
            font-size: 1em;
            color: #bdc3c7;
        }

        main {
            padding: 20px 0;
        }

        .tool-container {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
            transition: transform 0.3s ease-in-out;
        }

        .tool-container:hover {
            transform: translateY(-5px);
        }

        .tool-container h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-top: 0;
            margin-bottom: 20px;
        }

        .tool-description {
            margin-bottom: 20px;
            color: var(--text-color);
        }

        .back-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border-radius: 4px;
            text-decoration: none;
            margin-bottom: 20px;
            transition: background-color 0.3s, transform 0.3s;
            width: fit-content;
        }

        .back-button:hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
        }

        /* Theme Toggle */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
        }

        .theme-toggle .light-icon,
        .theme-toggle .dark-icon {
            color: white;
            margin: 0 5px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:focus + .slider {
            box-shadow: 0 0 1px var(--primary-color);
        }

        input:checked + .slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(26px);
            transform: translateX(26px);
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        /* Footer Styling */
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
        }

        footer .disclaimer h3,
        footer .social-share h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        footer .disclaimer p {
            font-size: 0.9em;
            color: #bdc3c7;
        }

        .social-buttons {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .social-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.2em;
            transition: transform 0.3s ease-in-out;
        }

        .social-btn:hover {
            transform: translateY(-3px);
        }

        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.reddit { background-color: #FF4500; }

        /* Styles for Calculator Forms and Results */
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: var(--card-shadow);
        }
        
        .form-section {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 25px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }

        .form-section.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        .form-section h3 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px;
            border-bottom: 1px dashed var(--border-color);
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--text-color);
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: var(--card-bg);
            color: var(--text-color);
            box-sizing: border-box;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 0;
        }
        
        .calculate-btn {
            background: var(--button-gradient);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 25px;
            transition: background 0.3s ease-in-out, transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            width: auto;
            min-width: 220px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        
        .calculate-btn:hover {
            background: var(--button-hover-gradient);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .reset-btn {
            background-color: var(--reset-button-bg);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 25px;
            margin-left: 15px;
            transition: background-color 0.3s ease-in-out, transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            width: auto;
            min-width: 150px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .reset-btn:hover {
            background-color: var(--reset-button-hover-bg);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .clear-results-btn {
            background-color: var(--clear-button-bg);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            margin-top: 15px;
            transition: background-color 0.3s ease-in-out, transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .clear-results-btn:hover {
            background-color: var(--clear-button-hover-bg);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .result-container {
            margin-top: 30px;
            padding: 20px;
            border-radius: 8px;
            background-color: var(--card-bg);
            box-shadow: var(--card-shadow);
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
        
        .result-container.show {
            opacity: 1;
            transform: translateY(0);
        }

        .result-container h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .result-table th, .result-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.3s;
        }
        
        .result-table th {
            background-color: var(--hover-color);
            font-weight: bold;
            color: var(--secondary-color);
        }

        .result-table tr:last-child td {
            border-bottom: none;
        }

        .result-table tbody tr:hover {
            background-color: var(--hover-color);
        }
        
        .standard-reference {
            margin-top: 20px;
            font-style: italic;
            font-size: 0.9rem;
            color: var(--text-color);
            padding: 10px;
            border-left: 4px solid var(--primary-color);
            background-color: var(--hover-color);
            border-radius: 4px;
        }
        
        .info-icon {
            color: var(--primary-color);
            margin-left: 5px;
            cursor: help;
            transition: color 0.3s;
        }

        .info-icon:hover {
            color: var(--accent-color);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            transform: translateY(10px);
            font-size: 0.85em;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
            transform: translateY(0);
        }

        /* Custom message box style */
        #custom-message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 250px;
        }

        /* Styles for calculation details */
        #calculation-details {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            font-size: 0.95em;
            color: var(--text-color);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }
        #calculation-details h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.2em;
        }
        #calculation-details p.formula {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            font-size: 1.1em;
            text-align: center;
            padding: 12px 10px;
            background-color: var(--hover-color);
            border-radius: 6px;
            margin: 15px 0;
            overflow-x: auto;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace;
            background-color: var(--hover-color);
            padding: 8px 15px;
            border-radius: 4px;
            margin-bottom: 8px;
            color: var(--text-color);
            white-space: pre-wrap;
            word-break: break-word;
        }
        #calculation-details ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
            margin-top: 15px;
        }
        #calculation-details ul li {
            margin-bottom: 8px;
            color: var(--text-color);
        }

        /* Style for centering the button */
        .button-wrapper {
            display: flex;
            justify-content: center;
            width: 100%;
            padding-top: 20px;
        }

        /* Animation for input fields on focus */
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(40, 167, 69, 0.4); /* Green glow */
            outline: none;
            animation: pulse 0.8s infinite alternate;
        }

        @keyframes pulse {
            from {
                box-shadow: 0 0 0 4px rgba(40, 167, 69, 0.4);
            }
            to {
                box-shadow: 0 0 0 8px rgba(40, 167, 69, 0.2);
            }
        }

        /* Status Display (for RTD) */
        .status-display {
            font-weight: bold;
            font-size: 1.1em;
            margin-top: 15px;
            padding: 10px 20px;
            border-radius: 5px;
            transition: background-color 0.5s, color 0.5s;
            text-align: center;
            width: 100%;
        }
        .status-display.compensated {
            background-color: var(--ok-color);
            color: white;
        }
        .status-display.uncompensated-error {
            background-color: var(--warning-color);
            color: var(--text-color);
        }
        .status-display.high-error {
            background-color: var(--error-color);
            color: white;
        }
        .status-display.ideal {
            background-color: var(--primary-color); /* Use primary color for ideal */
            color: white;
        }

        /* Practical Recommendations Section */
        #practical-recommendations {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            background-color: var(--bg-color);
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            color: var(--text-color);
            border: 1px solid var(--border-color);
        }
        #practical-recommendations h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px;
            border-bottom: 1px dashed var(--border-color);
            padding-bottom: 10px;
        }
        #practical-recommendations ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
        }
        #practical-recommendations ul li {
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Design Calculators - Instrumentation</h1>
            <p class="subtitle">Smart Tools for Modern Instrumentation Engineers</p>
            <div class="theme-toggle">
                <span class="light-icon"><i class="fas fa-sun"></i></span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
                <span class="dark-icon"><i class="fas fa-moon"></i></span>
            </div>
        </div>
    </header>

    <main class="container">
        <div style="display: flex; justify-content: center; margin-bottom: 20px;">
            <a href="indexInst.html" class="back-button"><i class="fas fa-arrow-left"></i> Back to Tools</a>
        </div>
        
        <div class="tool-container">
            <h2>RTD Wiring Lead Compensation Calculator</h2>
            
            <div class="tool-description">
                <p>This calculator determines the true temperature measured by a Resistance Temperature Detector (RTD) by compensating for the resistance of the lead wires. It supports 2-wire, 3-wire, and 4-wire RTD configurations, providing accurate temperature readings crucial for industrial process control and monitoring.</p>
            </div>
        
            <div class="calculator-form">
                <form id="rtd-calculator-form">
                    <!-- RTD Parameters -->
                    <div class="form-section">
                        <h3>RTD & Wiring Parameters</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="rtd-type">RTD Type <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select the type of RTD (e.g., Pt100, Pt1000). Affects R0 and alpha.</span></span></label>
                                <select id="rtd-type" required>
                                    <option value="Pt100">Pt100 (IEC 60751)</option>
                                    <option value="Pt1000">Pt1000 (IEC 60751)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="wiring-config">Wiring Configuration <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Choose the RTD wiring configuration (2, 3, or 4-wire).</span></span></label>
                                <select id="wiring-config" required>
                                    <option value="4-wire">4-Wire</option> <!-- Changed default to 4-wire -->
                                    <option value="3-wire">3-Wire</option>
                                    <option value="2-wire">2-Wire</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="measured-resistance">Measured Resistance (R<sub>measured</sub>) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The resistance reading from your RTD measurement device (Ohms).</span></span></label>
                                <input type="number" id="measured-resistance" step="any" value="103.90" required> <!-- Adjusted for 4-wire default -->
                            </div>
                        </div>
                    </div>

                    <!-- Lead Wire Parameters (Conditional) -->
                    <div class="form-section" id="lead-wire-section">
                        <h3>Lead Wire Parameters</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="lead-resistance-per-meter">Lead Resistance per Meter <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Resistance of a single lead wire per meter (Ohms/meter). Typical for copper wire.</span></span></label>
                                <input type="number" id="lead-resistance-per-meter" step="any" value="0.017" required>
                            </div>
                            <div class="form-group">
                                <label for="lead-wire-length">Lead Wire Length (One Way) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The length of a single lead wire from RTD to instrument (meters).</span></span></label>
                                <input type="number" id="lead-wire-length" step="any" value="10" required>
                            </div>
                            <div class="form-group" id="measured-lead-resistance-group" style="display: none;">
                                <label for="measured-lead-resistance">Measured Lead Resistance (R<sub>lead_measured</sub>) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">For 3-wire, the resistance measured between the excitation and compensation lead.</span></span></label>
                                <input type="number" id="measured-lead-resistance" step="any" value="0.17" required>
                            </div>
                        </div>
                    </div>

                    <div class="button-wrapper">
                        <button type="button" id="calculate-btn" class="calculate-btn">Calculate True Temperature</button>
                        <button type="button" id="reset-form-btn" class="reset-btn"><i class="fas fa-sync-alt"></i> Reset Form</button>
                    </div>
                </form>
            </div>

            <div id="result-container" class="result-container">
                <h3>Calculation Results</h3>
                <p class="status-display" id="compensation-status-display">Compensation Status: N/A</p>

                <div id="calculation-details">
                    <h4>Step-by-Step Calculation</h4>
                    <p class="formula" id="rtd-formula">
                        <!-- Formula will be dynamically inserted here -->
                    </p>
                    <div id="steps-list">
                        <!-- Calculation steps will be inserted here -->
                    </div>
                </div>

                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body">
                        <!-- Results will be dynamically inserted here -->
                    </tbody>
                </table>

                <div id="practical-recommendations" style="display: none;">
                    <h4>Practical Considerations & Recommendations</h4>
                    <ul id="recommendations-list">
                        <!-- Recommendations will be dynamically inserted here -->
                    </ul>
                </div>

                <div style="display: flex; justify-content: center; margin-top: 20px;">
                    <button type="button" id="clear-results-btn" class="clear-results-btn"><i class="fas fa-times-circle"></i> Clear Results</button>
                </div>
                <div class="standard-reference" id="standard-reference">
                    <p><strong>Applicable Standards and Guidelines:</strong> Accurate RTD measurements are critical in industrial applications. Key standards and considerations include:</p>
                    <ul>
                        <li><strong>IEC 60751: Industrial platinum resistance thermometers and platinum temperature sensors.</strong> This is the primary standard defining the resistance-temperature characteristics of Pt100 and Pt1000 RTDs, including their reference resistance at 0°C (R0) and temperature coefficients (A, B, C).</li>
                        <li><strong>ASTM E1137: Standard Guide for Industrial Platinum Resistance Thermometers.</strong> Provides guidance on the use and calibration of industrial platinum resistance thermometers.</li>
                        <li><strong>Wiring Practices:</strong> Proper wiring (3-wire or 4-wire) is crucial for lead wire compensation. Adherence to best practices for cable routing, shielding, and grounding minimizes external noise and ensures compensation effectiveness.</li>
                        <li><strong>Calibration and Traceability:</strong> Regular calibration of RTDs and associated measurement instruments is essential to maintain accuracy. Calibration should be traceable to national or international standards (e.g., NIST).</li>
                        <li><strong>Temperature Coefficients:</strong> The Callendar-Van Dusen equation parameters (A, B, C) are standardized for specific RTD types (e.g., IEC 60751 for Pt100/Pt1000). Ensure the correct coefficients are used.</li>
                    </ul>
                    <p>This tool provides compensation for lead wire resistance. For critical applications, always consider the total error budget, including sensor accuracy, instrument accuracy, and environmental factors.</p>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="disclaimer">
                <h3>Disclaimer</h3>
                <p>To ensure accuracy and reliability, always verify the results obtained from these tools against the relevant engineering standards and guidelines.</p>
            </div>
            <div class="credit">
                <p>Created by A Sharma</p>
            </div>
            <div class="social-share">
                <h3>Share This Site</h3>
                <div class="social-buttons">
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in&title=Design Calculators - Instrumentation" target="_blank" class="social-btn linkedin">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" class="social-btn facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?text=Check out this amazing Design Calculators - Instrumentation!&url=https://designcalculators.co.in" target="_blank" class="social-btn twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text=Check out this amazing Design Calculators - Instrumentation! https://designcalculators.co.in" target="_blank" class="social-btn whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.reddit.com/submit?url=https://designcalculators.co.in&title=Design Calculators - Instrumentation" target="_blank" class="social-btn reddit">
                        <i class="fab fa-reddit"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Input elements
            const rtdTypeSelect = document.getElementById('rtd-type');
            const wiringConfigSelect = document.getElementById('wiring-config');
            const measuredResistanceInput = document.getElementById('measured-resistance');
            const leadResistancePerMeterInput = document.getElementById('lead-resistance-per-meter');
            const leadWireLengthInput = document.getElementById('lead-wire-length');
            const measuredLeadResistanceGroup = document.getElementById('measured-lead-resistance-group');
            const measuredLeadResistanceInput = document.getElementById('measured-lead-resistance');

            // Sections
            const leadWireSection = document.getElementById('lead-wire-section');
            const practicalRecommendationsDiv = document.getElementById('practical-recommendations');
            const recommendationsList = document.getElementById('recommendations-list');

            // Buttons and result containers
            const calculateBtn = document.getElementById('calculate-btn');
            const resetFormBtn = document.getElementById('reset-form-btn');
            const clearResultsBtn = document.getElementById('clear-results-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const compensationStatusDisplay = document.getElementById('compensation-status-display');
            const calculationDetailsDiv = document.getElementById('calculation-details');
            const rtdFormula = document.getElementById('rtd-formula');
            const stepsList = document.getElementById('steps-list');

            // RTD Constants (IEC 60751 for Pt100 and Pt1000)
            const rtdConstants = {
                'Pt100': {
                    R0: 100.0,
                    A: 3.9083e-3,
                    B: -5.775e-7,
                    C: -4.183e-12 // For T < 0°C
                },
                'Pt1000': {
                    R0: 1000.0,
                    A: 3.9083e-3,
                    B: -5.775e-7,
                    C: -4.183e-12 // For T < 0°C
                }
            };

            // Default values for resetting form
            const defaultValues = {
                'rtd-type': 'Pt100',
                'wiring-config': '4-wire', // Changed default to 4-wire
                'measured-resistance': 103.90, // Adjusted for 4-wire default (approx 10C for Pt100)
                'lead-resistance-per-meter': 0.017,
                'lead-wire-length': 10,
                'measured-lead-resistance': 0.17 // For 3-wire default
            };

            // Function to display custom messages
            function showCustomMessage(message, type = 'info') {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    document.body.appendChild(messageBox);
                }
                messageBox.textContent = message;
                messageBox.className = ''; // Clear previous classes
                messageBox.classList.add(type); // Add type for styling (e.g., 'error', 'success', 'info')

                if (type === 'error') {
                    messageBox.style.backgroundColor = '#dc3545'; // Red
                } else if (type === 'success') {
                    messageBox.style.backgroundColor = '#28a745'; // Green
                } else {
                    messageBox.style.backgroundColor = '#28A745'; // Green (default info)
                }

                messageBox.style.opacity = '1';
                messageBox.style.transform = 'translateX(-50%) translateY(0)'; // Slide down animation

                setTimeout(() => {
                    messageBox.style.opacity = '0';
                    messageBox.style.transform = 'translateX(-50%) translateY(-20px)'; // Slide up animation
                }, 3000);
            }

            // Function to update visibility of lead wire sections based on wiring config
            function updateLeadWireSectionVisibility() {
                const config = wiringConfigSelect.value;
                if (config === '2-wire') {
                    leadResistancePerMeterInput.closest('.form-group').style.display = 'block';
                    leadWireLengthInput.closest('.form-group').style.display = 'block';
                    measuredLeadResistanceGroup.style.display = 'none';
                    measuredLeadResistanceInput.value = defaultValues['measured-lead-resistance']; // Clear value
                } else if (config === '3-wire') {
                    leadResistancePerMeterInput.closest('.form-group').style.display = 'none'; // Hide calculated lead resistance
                    leadWireLengthInput.closest('.form-group').style.display = 'none'; // Hide calculated lead resistance
                    measuredLeadResistanceGroup.style.display = 'block'; // Show measured lead resistance
                    leadResistancePerMeterInput.value = defaultValues['lead-resistance-per-meter']; // Clear value
                    leadWireLengthInput.value = defaultValues['lead-wire-length']; // Clear value
                } else { // 4-wire
                    leadWireSection.style.display = 'none'; // Hide entire lead wire section
                    leadResistancePerMeterInput.value = defaultValues['lead-resistance-per-meter']; // Clear value
                    leadWireLengthInput.value = defaultValues['lead-wire-length']; // Clear value
                    measuredLeadResistanceInput.value = defaultValues['measured-lead-resistance']; // Clear value
                }
            }

            // Function to calculate temperature from resistance using Callendar-Van Dusen equation
            // This function now returns the temperature and an array of its internal calculation steps
            function calculateTemperatureDetails(R_T, R0, A, B, C, currentStepPrefix) {
                let temperature;
                let internalSteps = [];
                let formula = '';

                if (R_T >= R0) { // T >= 0°C
                    formula = `R<sub>T</sub> = R<sub>0</sub> [1 + A T + B T<sup>2</sup>]`;
                    // Solve quadratic equation: B*T^2 + A*T + (1 - R_T/R0) = 0
                    const c_val = (1 - R_T / R0);
                    const discriminant = (A * A) - (4 * B * c_val);

                    if (discriminant < 0) {
                        throw new Error("Invalid resistance value for positive temperature range.");
                    }
                    temperature = (-A + Math.sqrt(discriminant)) / (2 * B);
                    internalSteps.push(`${currentStepPrefix}.1. Formula for T &ge; 0°C: ${formula}`);
                    internalSteps.push(`${currentStepPrefix}.2. Solving quadratic equation for T:`);
                    internalSteps.push(`&nbsp;&nbsp;&nbsp;T = (-A + &radic;(A<sup>2</sup> - 4B(1 - R<sub>T</sub>/R<sub>0</sub>))) / (2B)`);
                    internalSteps.push(`&nbsp;&nbsp;&nbsp;T = (-${A.toExponential(4)} + &radic;((${A.toExponential(4)})<sup>2</sup> - 4 * (${B.toExponential(4)}) * (1 - ${R_T.toFixed(4)}/${R0.toFixed(1)}))) / (2 * (${B.toExponential(4)}))`);
                    internalSteps.push(`&nbsp;&nbsp;&nbsp;Result: ${temperature.toFixed(3)} °C`);

                } else { // T < 0°C
                    formula = `R<sub>T</sub> = R<sub>0</sub> [1 + A T + B T<sup>2</sup> + C (T - 100) T<sup>3</sup>]`;
                    // Newton-Raphson for T < 0°C
                    // f(T) = R0 * (1 + A*T + B*T^2 + C*(T-100)*T^3) - R_T = 0
                    // f'(T) = R0 * (A + 2*B*T + C*(4*T^3 - 300*T^2))
                    let T_guess = -50; // Initial guess for negative temperature
                    const maxIterations = 100;
                    const tolerance = 1e-6; // 0.000001 °C

                    for (let i = 0; i < maxIterations; i++) {
                        const f_T = R0 * (1 + A * T_guess + B * T_guess * T_guess + C * (T_guess - 100) * T_guess * T_guess * T_guess) - R_T;
                        const f_prime_T = R0 * (A + 2 * B * T_guess + C * (4 * T_guess * T_guess * T_guess - 300 * T_guess * T_guess));
                        
                        if (Math.abs(f_prime_T) < 1e-10) { // Avoid division by zero
                            break;
                        }
                        const T_next = T_guess - (f_T / f_prime_T);
                        if (Math.abs(T_next - T_guess) < tolerance) {
                            temperature = T_next;
                            break;
                        }
                        T_guess = T_next;
                    }
                    if (temperature === undefined) {
                        throw new Error("Numerical solver for negative temperature did not converge or resistance is out of range.");
                    }
                    internalSteps.push(`${currentStepPrefix}.1. Formula for T < 0°C: ${formula}`);
                    internalSteps.push(`${currentStepPrefix}.2. Solving iteratively (Newton-Raphson method) for T.`);
                    internalSteps.push(`&nbsp;&nbsp;&nbsp;Initial guess: ${T_guess.toFixed(0)} °C`);
                    internalSteps.push(`&nbsp;&nbsp;&nbsp;Result: ${temperature.toFixed(3)} °C`);
                }
                return { temperature, internalSteps, formula };
            }


            // Initial call to set visibility based on default/saved value
            updateLeadWireSectionVisibility();

            // Event listeners for changes
            wiringConfigSelect.addEventListener('change', updateLeadWireSectionVisibility);

            // Calculation Logic
            calculateBtn.addEventListener('click', function() {
                resultTableBody.innerHTML = ''; // Clear previous results
                stepsList.innerHTML = ''; // Clear previous steps
                recommendationsList.innerHTML = ''; // Clear previous recommendations
                practicalRecommendationsDiv.style.display = 'none'; // Hide recommendations initially
                compensationStatusDisplay.textContent = 'Compensation Status: Calculating...';
                compensationStatusDisplay.className = 'status-display'; // Reset class

                const rtdType = rtdTypeSelect.value;
                const wiringConfig = wiringConfigSelect.value;
                const measuredResistance = parseFloat(measuredResistanceInput.value);
                const leadResistancePerMeter = parseFloat(leadResistancePerMeterInput.value);
                const leadWireLength = parseFloat(leadWireLengthInput.value);
                const measuredLeadResistance = parseFloat(measuredLeadResistanceInput.value);

                const constants = rtdConstants[rtdType];
                const R0 = constants.R0;
                const A = constants.A;
                const B = constants.B;
                const C = constants.C;

                let calculationSteps = [];
                let currentMainStep = 1; // Counter for main steps
                let trueRTDResistance, uncompensatedTemperature, compensatedTemperature, temperatureError;
                let totalLeadResistance = 0; // This will be the resistance of one lead wire

                // Input Validation
                if (isNaN(measuredResistance) || measuredResistance <= 0) {
                    showCustomMessage('Measured Resistance must be a positive numerical value.', 'error');
                    resultContainer.style.display = 'none';
                    resultContainer.classList.remove('show');
                    return;
                }
                // Check if measured resistance is within a reasonable range for the RTD type
                // Approx. range for Pt100/Pt1000: -200°C to 850°C
                // Calculate resistance at -200C and 850C using Callendar-Van Dusen
                const R_at_minus_200C = R0 * (1 + A * -200 + B * (-200)**2 + C * (-200 - 100) * (-200)**3);
                const R_at_850C = R0 * (1 + A * 850 + B * 850**2); // C term is 0 for T >= 0

                if (measuredResistance < R_at_minus_200C || measuredResistance > R_at_850C) {
                    showCustomMessage(`Measured Resistance (${measuredResistance.toFixed(4)} &#x2126;) is outside the typical operating range for ${rtdType} (-200°C to 850°C). Results may be inaccurate.`, 'warning');
                }


                calculationSteps.push(`<strong>${currentMainStep++}. Input Parameters:</strong>`);
                calculationSteps.push(`RTD Type: ${rtdType} (R<sub>0</sub> = ${R0} &#x2126;)`);
                calculationSteps.push(`Wiring Configuration: ${wiringConfig}`);
                calculationSteps.push(`Measured Resistance (R<sub>measured</sub>): ${measuredResistance.toFixed(4)} &#x2126;`);

                // Step 2: Calculate/Determine Lead Wire Resistance (R_lead) based on wiring
                calculationSteps.push(`<strong>${currentMainStep++}. Determine Lead Wire Resistance (R<sub>lead</sub>) for Compensation:</strong>`);
                try {
                    if (wiringConfig === '2-wire') {
                        if (isNaN(leadResistancePerMeter) || leadResistancePerMeter < 0 || isNaN(leadWireLength) || leadWireLength < 0) {
                            showCustomMessage('Lead Resistance per Meter and Lead Wire Length must be non-negative numerical values for 2-wire configuration.', 'error');
                            resultContainer.style.display = 'none';
                            resultContainer.classList.remove('show');
                            return;
                        }
                        totalLeadResistance = leadResistancePerMeter * leadWireLength;
                        trueRTDResistance = measuredResistance - (2 * totalLeadResistance);
                        calculationSteps.push(`&nbsp;&nbsp;&nbsp;Lead Resistance per Meter: ${leadResistancePerMeter.toFixed(4)} &#x2126;/m`);
                        calculationSteps.push(`&nbsp;&nbsp;&nbsp;Lead Wire Length (One Way): ${leadWireLength.toFixed(2)} m`);
                        calculationSteps.push(`&nbsp;&nbsp;&nbsp;Calculated Total Lead Resistance (one way, R<sub>lead</sub>): R<sub>lead</sub> = ${leadResistancePerMeter.toFixed(4)} &#x2126;/m * ${leadWireLength.toFixed(2)} m = ${totalLeadResistance.toFixed(4)} &#x2126;`);
                        calculationSteps.push(`&nbsp;&nbsp;&nbsp;For 2-wire, compensation subtracts the resistance of both lead wires (2 * R<sub>lead</sub>).`);
                    } else if (wiringConfig === '3-wire') {
                        if (isNaN(measuredLeadResistance) || measuredLeadResistance < 0) {
                            showCustomMessage('Measured Lead Resistance must be a non-negative numerical value for 3-wire configuration.', 'error');
                            resultContainer.style.display = 'none';
                            resultContainer.classList.remove('show');
                            return;
                        }
                        totalLeadResistance = measuredLeadResistance; // In 3-wire, this is the resistance of one lead wire.
                        trueRTDResistance = measuredResistance - totalLeadResistance;
                        calculationSteps.push(`&nbsp;&nbsp;&nbsp;Measured Lead Resistance (R<sub>lead_measured</sub>): ${measuredLeadResistance.toFixed(4)} &#x2126;`);
                        calculationSteps.push(`&nbsp;&nbsp;&nbsp;For 3-wire, compensation subtracts the measured lead resistance (R<sub>lead_measured</sub>) assuming balanced leads.`);
                    } else { // 4-wire
                        totalLeadResistance = 0; // 4-wire inherently compensates
                        trueRTDResistance = measuredResistance;
                        calculationSteps.push(`&nbsp;&nbsp;&nbsp;For 4-wire, lead resistance is inherently compensated by the measurement method, effectively making R<sub>lead</sub> = 0 &#x2126; for resistance correction.`);
                    }

                    if (trueRTDResistance < 0) {
                        showCustomMessage('Calculated true RTD resistance is negative. This indicates an issue with inputs (e.g., measured resistance too low, or lead resistance too high). Please check values or wiring configuration.', 'error');
                        resultContainer.style.display = 'none';
                        resultContainer.classList.remove('show');
                        return;
                    }
                    calculationSteps.push(`<strong>${currentMainStep++}. Calculate True RTD Resistance (R<sub>true</sub>):</strong>`);
                    calculationSteps.push(`&nbsp;&nbsp;&nbsp;R<sub>true</sub> = R<sub>measured</sub> - R<sub>lead_compensation</sub> = ${measuredResistance.toFixed(4)} &#x2126; - ${totalLeadResistance.toFixed(4)} &#x2126; = ${trueRTDResistance.toFixed(4)} &#x2126;`);

                    // Step 4: Calculate Compensated Temperature
                    calculationSteps.push(`<strong>${currentMainStep}. Calculate Compensated Temperature (T<sub>compensated</sub>):</strong>`);
                    const compensatedResult = calculateTemperatureDetails(trueRTDResistance, R0, A, B, C, `${currentMainStep}`);
                    compensatedTemperature = compensatedResult.temperature;
                    rtdFormula.innerHTML = compensatedResult.formula; // Display formula for compensated temp
                    compensatedResult.internalSteps.forEach(step => calculationSteps.push(step));
                    currentMainStep++;
                    
                    // Step 5: Calculate Uncompensated Temperature (for comparison)
                    calculationSteps.push(`<strong>${currentMainStep}. Calculate Uncompensated Temperature (T<sub>uncompensated</sub>):</strong>`);
                    const uncompensatedResult = calculateTemperatureDetails(measuredResistance, R0, A, B, C, `${currentMainStep}`);
                    uncompensatedTemperature = uncompensatedResult.temperature;
                    uncompensatedResult.internalSteps.forEach(step => calculationSteps.push(step));
                    currentMainStep++;

                    // Step 6: Calculate Temperature Error
                    calculationSteps.push(`<strong>${currentMainStep++}. Calculate Temperature Error due to Lead Resistance:</strong>`);
                    temperatureError = compensatedTemperature - uncompensatedTemperature;
                    calculationSteps.push(`&nbsp;&nbsp;&nbsp;Temperature Error = T<sub>compensated</sub> - T<sub>uncompensated</sub> = ${compensatedTemperature.toFixed(3)} °C - ${uncompensatedTemperature.toFixed(3)} °C = ${temperatureError.toFixed(3)} °C`);

                    // Display Results
                    const results = [
                        { param: 'RTD Type', value: rtdType },
                        { param: 'Wiring Configuration', value: wiringConfig },
                        { param: 'Measured Resistance (R<sub>measured</sub>)', value: `${measuredResistance.toFixed(4)} &#x2126;` },
                        { param: 'Total Lead Resistance (one way, R<sub>lead</sub>)', value: `${totalLeadResistance.toFixed(4)} &#x2126;` },
                        { param: '<strong>True RTD Resistance (R<sub>true</sub>)</strong>', value: `<strong>${trueRTDResistance.toFixed(4)} &#x2126;</strong>` },
                        { param: '<strong>Compensated Temperature (T<sub>compensated</sub>)</strong>', value: `<strong>${compensatedTemperature.toFixed(3)} °C</strong>` },
                        { param: 'Uncompensated Temperature (T<sub>uncompensated</sub>)', value: `${uncompensatedTemperature.toFixed(3)} °C` },
                        { param: '<strong>Temperature Error</strong>', value: `<strong>${temperatureError.toFixed(3)} °C</strong>` }
                    ];

                    results.forEach(res => {
                        const row = resultTableBody.insertRow();
                        const paramCell = row.insertCell(0);
                        const valueCell = row.insertCell(1);
                        paramCell.innerHTML = res.param;
                        valueCell.innerHTML = res.value;
                    });

                    // Populate step-by-step calculations
                    stepsList.innerHTML = '';
                    calculationSteps.forEach(step => {
                        const p = document.createElement('p');
                        p.className = 'calculation-step';
                        p.innerHTML = step;
                        stepsList.appendChild(p);
                    });

                    // Update Status Display and Recommendations
                    let statusText = 'Compensation Status: ';
                    let statusClass = 'status-display ';
                    let recommendations = [];

                    if (wiringConfig === '4-wire') {
                        statusText += 'Ideal Compensation (4-Wire)';
                        statusClass += 'ideal';
                        recommendations.push("The 4-wire configuration provides the most accurate temperature measurement by inherently eliminating lead wire resistance effects. This is the recommended standard for high-precision industrial applications.");
                        recommendations.push("Ensure all four wires are properly connected and maintained, and that the measurement instrument supports 4-wire configuration for optimal performance.");
                    } else if (wiringConfig === '3-wire') {
                        if (Math.abs(temperatureError) < 0.1) { // Example threshold for small error
                            statusText += 'Effective Compensation (3-Wire)';
                            statusClass += 'compensated';
                            recommendations.push("The 3-wire compensation method is effective for most industrial applications, as it uses a measured lead resistance to cancel out errors.");
                            recommendations.push("Crucially, ensure that the lead wires have identical resistance characteristics (e.g., same gauge, material, and length) for accurate compensation. Mismatched wires will introduce errors.");
                            recommendations.push("Regularly verify the integrity and consistency of lead wire connections to maintain accuracy.");
                        } else {
                            statusText += 'Compensation with Noticeable Error (3-Wire)';
                            statusClass += 'uncompensated-error';
                            recommendations.push("While 3-wire compensation is applied, a noticeable temperature error still exists. This strongly suggests unequal lead resistances or other measurement issues.");
                            recommendations.push("<strong>Action Required:</strong> Verify the quality and consistency of your lead wires. Consider using a matched set or upgrading to a 4-wire configuration for higher accuracy, especially in critical applications.");
                            recommendations.push("Re-measure the lead resistance carefully, ensuring no external factors (e.g., poor connections, temperature gradients along leads) are influencing the reading.");
                        }
                    } else { // 2-wire
                        if (Math.abs(temperatureError) < 0.5) { // Example threshold for acceptable 2-wire error
                            statusText += '2-Wire Compensation Applied (Potential Significant Error)';
                            statusClass += 'uncompensated-error';
                            recommendations.push("The 2-wire configuration is highly susceptible to lead wire resistance errors, as compensation relies on an estimated or calculated lead resistance, which can vary with temperature.");
                            recommendations.push("<strong>Recommendation:</strong> Minimize lead wire length and use the largest practical wire gauge to reduce inherent lead resistance. Only use 2-wire for very short distances and applications where high accuracy is not critical (e.g., basic indication).");
                            recommendations.push("Consider upgrading to a 3-wire or 4-wire configuration for improved accuracy and reliability in industrial environments.");
                        } else {
                            statusText += 'High Error (2-Wire - Not Recommended for Accuracy)';
                            statusClass += 'high-error';
                            recommendations.push("The 2-wire configuration with significant lead resistance is introducing large errors, making the temperature measurement unreliable. This setup is not recommended for accurate or critical industrial measurements.");
                            recommendations.push("<strong>Immediate Action:</strong> Upgrade to a 3-wire or, ideally, a 4-wire RTD system to eliminate or significantly reduce lead resistance errors.");
                            recommendations.push("If upgrading is not immediately possible, drastically reduce lead wire length and use very thick gauge wires. Recalculate with new lead resistance values and assess the remaining error.");
                        }
                    }

                    recommendationsList.innerHTML = '';
                    recommendations.forEach(rec => {
                        const li = document.createElement('li');
                        li.textContent = rec;
                        recommendationsList.appendChild(li);
                    });
                    practicalRecommendationsDiv.style.display = 'block'; // Show recommendations

                    compensationStatusDisplay.textContent = statusText;
                    compensationStatusDisplay.className = statusClass;

                    resultContainer.style.display = 'block';
                    // Trigger fade-in animation
                    setTimeout(() => {
                        resultContainer.classList.add('show');
                        showCustomMessage('Calculation successful!', 'success');
                    }, 100);

                } catch (error) {
                    showCustomMessage('An error occurred during calculation: ' + error.message, 'error');
                    console.error('RTD Calculation Error:', error);
                    resultContainer.style.display = 'none';
                    resultContainer.classList.remove('show');
                }
            });

            // Reset Form Logic
            resetFormBtn.addEventListener('click', function() {
                for (const key in defaultValues) {
                    const input = document.getElementById(key);
                    if (input) {
                        input.value = defaultValues[key];
                    }
                }
                updateLeadWireSectionVisibility(); // Reset visibility after form reset
                showCustomMessage('Form reset to default values.', 'info');
            });

            // Clear Results Logic
            clearResultsBtn.addEventListener('click', function() {
                resultContainer.classList.remove('show');
                setTimeout(() => {
                    resultContainer.style.display = 'none';
                    resultTableBody.innerHTML = '';
                    stepsList.innerHTML = '';
                    rtdFormula.innerHTML = '';
                    recommendationsList.innerHTML = '';
                    practicalRecommendationsDiv.style.display = 'none';
                    compensationStatusDisplay.textContent = 'Compensation Status: N/A';
                    compensationStatusDisplay.className = 'status-display';
                }, 500); // Wait for fade-out transition
                showCustomMessage('Results cleared.', 'info');
            });

            // Initial fade-in for form sections
            const formSections = document.querySelectorAll('.form-section');
            formSections.forEach((section, index) => {
                setTimeout(() => {
                    section.classList.add('fade-in');
                }, 100 * index); // Staggered fade-in
            });

            // Theme switch logic
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }

                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }
        });
    </script>
</body>
</html>
