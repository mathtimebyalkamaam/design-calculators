<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overall Heat Transfer Coefficient Calculator - Design Calculators</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- MathJax for LaTeX rendering -->
    <script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="icon" href="/favicon.ico" type="image/x-icon">

    <script>
        MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']],
                processEscapes: true
            }
        };
    </script>
    <style>
        :root {
            --primary-color: #2196F3;
            --secondary-color: #1976D2;
            --accent-color: #FFC107;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333333;
            --header-bg: #2C3E50;
            --footer-bg: #34495E;
            --border-color: #cccccc;
            --card-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            --hover-color: #e2e6ea;
            --primary-color-rgb: 33, 150, 243;
        }
        body.dark-mode {
            --primary-color: #5DADE2;
            --secondary-color: #2874A6;
            --bg-color: #252D3A;
            --card-bg: #2F3C4C;
            --text-color: #E0E6EB;
            --header-bg: #252D3A;
            --footer-bg: #252D3A;
            --border-color: #4C5C70;
            --card-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            --hover-color: #3A475C;
            --primary-color-rgb: 93, 173, 226;
        }
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at center, var(--bg-color) 0%, rgba(244, 247, 246, 0.8) 100%);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s, background-image 0.3s;
        }
        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-color: var(--header-bg);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative;
        }
        header h1 {
            margin: 0;
            font-size: 2.8em;
            color: var(--primary-color);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        header .subtitle {
            margin: 8px 0 0;
            font-size: 1.1em;
            color: #bdc3c7;
        }
        main {
            padding: 30px 0;
        }
        .tool-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            margin-bottom: 25px;
            transition: transform 0.3s ease-in-out;
        }
        .tool-container:hover {
            transform: translateY(-5px);
        }
        .tool-container h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 12px;
            margin-top: 0;
            margin-bottom: 25px;
            font-size: 2em;
        }
        .tool-description {
            margin-bottom: 25px;
            color: var(--text-color);
            font-size: 1.05em;
        }
        .tool-description ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
            margin-top: 15px;
        }
        .tool-description ul li {
            margin-bottom: 8px;
        }
        .tool-description strong {
            color: var(--primary-color);
        }
        .back-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            margin-bottom: 25px;
            transition: background-color 0.3s, transform 0.2s ease-in-out;
            font-weight: bold;
        }
        .back-button:hover {
            background-color: var(--secondary-color);
            transform: scale(1.03);
        }
        .theme-toggle {
            position: absolute;
            top: 25px;
            right: 25px;
            display: flex;
            align-items: center;
        }
        .theme-toggle .light-icon,
        .theme-toggle .dark-icon {
            color: white;
            margin: 0 8px;
            font-size: 1.3em;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 65px;
            height: 38px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 30px;
            width: 30px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        input:focus + .slider {
            box-shadow: 0 0 1px var(--primary-color);
        }
        input:checked + .slider:before {
            transform: translateX(27px);
        }
        .slider.round {
            border-radius: 38px;
        }
        .slider.round:before {
            border-radius: 50%;
        }
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.2);
            margin-top: 40px;
        }
        footer .disclaimer h3,
        footer .social-share h3 {
            color: var(--primary-color);
            margin-bottom: 12px;
            font-size: 1.3em;
        }
        footer .disclaimer p {
            font-size: 0.95em;
            color: #bdc3c7;
        }
        .social-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .social-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.4em;
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .social-btn:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 15px rgba(0,0,0,0.3);
        }
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.reddit { background-color: #FF4500; }
        .social-btn.email { background-color: #7f8c8d; }
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            margin-top: 25px;
            box-shadow: var(--card-shadow);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 1.05em;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--bg-color);
            color: var(--text-color);
            box-sizing: border-box;
            font-size: 1em;
            transition: border-color 0.3s, box-shadow 0.3s;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.08);
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb), 0.3);
            outline: none;
        }
        .form-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .form-row .form-group {
            flex: 1 1 calc(50% - 10px);
            min-width: 280px;
        }
        @media (max-width: 600px) {
            .form-row .form-group {
                flex: 1 1 100%;
            }
        }
        .calculate-btn {
            background-image: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 18px 25px; /* Increased padding for taller button */
            border-radius: 8px;
            cursor: pointer;
            font-size: 17px;
            font-weight: bold;
            margin-top: 20px;
            transition: background-image 0.3s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .calculate-btn:hover {
            background-image: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        .result-container {
            margin-top: 40px;
            padding: 30px;
            border-radius: 12px;
            background-color: var(--card-bg);
            box-shadow: var(--card-shadow);
            display: block;
            opacity: 0;
            transition: opacity 0.6s ease-out;
            pointer-events: none;
        }
        .result-container.show {
            opacity: 1;
            pointer-events: auto;
        }
        .result-container h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .result-table th, .result-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        .result-table th {
            background-color: var(--hover-color);
            font-weight: bold;
            font-size: 1.1em;
        }
        .result-table tr:last-child td {
            border-bottom: none;
        }
        .standard-reference {
            margin-top: 25px;
            font-style: italic;
            font-size: 0.95rem;
            line-height: 1.5;
            padding: 10px;
            background-color: var(--bg-color);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        .info-icon {
            color: var(--primary-color);
            margin-left: 8px;
            cursor: help;
            font-size: 1em;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85em;
        }
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        #custom-message-box {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 18px 30px;
            border-radius: 10px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            font-size: 1.1em;
        }
        #calculation-details {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            font-size: 0.98em;
        }
        #calculation-details h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        #calculation-details p.formula {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            font-size: 1.2em;
            text-align: center;
            padding: 12px 0;
            background-color: var(--hover-color);
            border-radius: 6px;
            margin: 15px 0;
            overflow-x: auto;
            border: 1px dashed var(--border-color);
        }
        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace;
            background-color: var(--hover-color);
            padding: 8px 12px;
            border-radius: 5px;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        #calculation-details ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
        }
        #calculation-details ul li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Design Calculators - Mechanical</h1>
            <p class="subtitle">Smart Tools for Modern Mechanical Engineers</p>
            <div class="theme-toggle">
                <span class="light-icon"><i class="fas fa-sun"></i></span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
                <span class="dark-icon"><i class="fas fa-moon"></i></span>
            </div>
        </div>
    </header>
    <main class="container">
        <a href="indexMech.html" class="back-button">
            <i class="fas fa-arrow-left"></i> Back to Tools
        </a>
        <div class="tool-container">
            <h2>Overall Heat Transfer Coefficient (U-value) Calculator</h2>
            <div class="tool-description">
                <p>This calculator determines the overall heat transfer coefficient (U-value) for a flat wall (e.g., a plate or a flat section of a heat exchanger). The U-value quantifies the rate of heat transfer through a composite barrier per unit area per unit temperature difference.</p>
                <p>It considers the convection coefficients on both sides of the wall, the thermal conductivity of the wall material, its thickness, and fouling resistances (if applicable).</p>
                <ul>
                    <li><strong>Overall Heat Transfer Coefficient (\(U\)):</strong> Represents the overall thermal transmittance. A higher U-value means greater heat transfer.</li>
                    <li><strong>Fouling Factors (\(R_f\)):</strong> Account for thermal resistance due to deposition of impurities on heat transfer surfaces, reducing efficiency.</li>
                </ul>
                <p><strong>Note:</strong> This calculator provides a simplified U-value for a flat wall. For complex geometries (e.g., cylindrical pipes, multi-layer walls) or specific fluid applications, refer to specialized heat transfer literature and industry standards like <strong>TEMA (Tubular Exchanger Manufacturers Association)</strong> for fouling factors, <strong>ASHRAE</strong> for building applications, or comprehensive heat transfer textbooks (e.g., Incropera, Holman).</p>
            </div>
            <div class="calculator-form">
                <form id="u-value-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="unit-system">Unit System: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select Metric (e.g., m, W/mK, W/m²°C) or Imperial (e.g., ft, BTU/h ft°F, BTU/h ft²°F) units.</span></span></label>
                            <select id="unit-system" required>
                                <option value="metric">Metric (\(\text{m}\), \(\text{W/mK}\), \(\text{W/m}^2\text{°C}\))</option>
                                <option value="imperial">Imperial (\(\text{ft}\), \(\text{BTU/h ft°F}\), \(\text{BTU/h ft}^2\text{°F}\))</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="hi">Inner Convection Coefficient (\(h_i\)) <span class="convection-unit-label">(\(\text{W/m}^2\text{°C}\))</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Heat transfer coefficient for the fluid inside the wall/pipe.</span></span></label>
                            <input type="number" id="hi" step="0.1" value="500" min="0.1" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ho">Outer Convection Coefficient (\(h_o\)) <span class="convection-unit-label">(\(\text{W/m}^2\text{°C}\))</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Heat transfer coefficient for the fluid outside the wall/pipe.</span></span></label>
                            <input type="number" id="ho" step="0.1" value="50" min="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="k_wall">Wall Material Thermal Conductivity (\(k\)) <span class="conductivity-unit-label">(\(\text{W/mK}\))</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Thermal conductivity of the wall material (e.g., Steel: ~45, Concrete: ~1.7).</span></span></label>
                            <input type="number" id="k_wall" step="0.1" value="45" min="0.1" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="dx_wall">Wall Thickness (\(\Delta x\)) <span class="length-unit-label">(\(\text{m}\))</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Thickness of the solid wall.</span></span></label>
                            <input type="number" id="dx_wall" step="0.001" value="0.005" min="0.001" required>
                        </div>
                        <div class="form-group">
                            <label for="rfi">Inner Fouling Factor (\(R_{f,i}\)) <span class="fouling-unit-label">(\(\text{m}^2\text{°C/W}\))</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Resistance due to fouling on the inner surface. Consult TEMA or specific industry guidelines for values (e.g., 0 for clean surfaces, up to 0.0005 for some waters).</span></span></label>
                            <input type="number" id="rfi" step="0.00001" value="0.0001" min="0" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rfo">Outer Fouling Factor (\(R_{f,o}\)) <span class="fouling-unit-label">(\(\text{m}^2\text{°C/W}\))</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Resistance due to fouling on the outer surface.</span></span></label>
                            <input type="number" id="rfo" step="0.00001" value="0.0001" min="0" required>
                        </div>
                    </div>
                    <button type="button" id="calculate-u-value-btn" class="calculate-btn">Calculate U-value</button>
                </form>
            </div>
            <div id="result-container" class="result-container">
                <h3>Calculation Results</h3>
                <div id="calculation-details"></div>
                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body"></tbody>
                </table>
                <div class="standard-reference" id="standard-reference"></div>
            </div>
        </div>
    </main>
    <footer>
        <div class="container">
            <div class="disclaimer">
                <h3>Disclaimer</h3>
                <p>To ensure accuracy and reliability, always verify the results obtained from these tools against the relevant engineering standards and guidelines.</p>
            </div>
            <div class="credit">
                <p>Created by A Sharma</p>
            </div>
            <div class="social-share">
                <h3>Share This Site</h3>
                <div class="social-buttons">
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in&title=Design Calculators - Instrumentation" target="_blank" class="social-btn linkedin">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" class="social-btn facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?text=Check out this amazing Design Calculators - Instrumentation!&url=https://designcalculators.co.in" target="_blank" class="social-btn twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text=Check out this amazing Design Calculators - Instrumentation! https://designcalculators.co.in" target="_blank" class="social-btn whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.reddit.com/submit?url=https://designcalculators.co.in&title=Design Calculators - Instrumentation" target="_blank" class="social-btn reddit">
                        <i class="fab fa-reddit"></i>
                    </a>
                    <a href="mailto:?subject=Check out Design Calculators - Instrumentation!&body=I found this amazing Overall Heat Transfer Coefficient Calculator and other design tools: https://designcalculators.co.in" class="social-btn email">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const calculateBtn = document.getElementById('calculate-u-value-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const standardReference = document.getElementById('standard-reference');
            const calculationDetailsDiv = document.getElementById('calculation-details');

            const unitSystemSelect = document.getElementById('unit-system');
            const hiInput = document.getElementById('hi');
            const hoInput = document.getElementById('ho');
            const kWallInput = document.getElementById('k_wall');
            const dxWallInput = document.getElementById('dx_wall');
            const rfiInput = document.getElementById('rfi');
            const rfoInput = document.getElementById('rfo');

            const convectionUnitLabels = document.querySelectorAll('.convection-unit-label');
            const conductivityUnitLabels = document.querySelectorAll('.conductivity-unit-label');
            const lengthUnitLabels = document.querySelectorAll('.length-unit-label');
            const foulingUnitLabels = document.querySelectorAll('.fouling-unit-label');
            
            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    document.body.appendChild(messageBox);
                }
                messageBox.textContent = message;
                if (type === "error") {
                    messageBox.style.backgroundColor = '#dc3545';
                    messageBox.style.color = 'white';
                } else if (type === "warning") {
                    messageBox.style.backgroundColor = '#ffc107';
                    messageBox.style.color = '#333';
                } else {
                    messageBox.style.backgroundColor = '#28a745';
                    messageBox.style.color = 'white';
                }
                messageBox.style.opacity = 1;
                setTimeout(() => {
                    messageBox.style.opacity = 0;
                }, 5000);
            }

            function updateUI() {
                const unitSystem = unitSystemSelect.value;

                // Update unit labels
                if (unitSystem === 'imperial') {
                    convectionUnitLabels.forEach(label => label.innerHTML = '(\\(\text{BTU/h ft}^2\\text{°F}\\))');
                    conductivityUnitLabels.forEach(label => label.innerHTML = '(\\(\text{BTU/h ft°F}\\))');
                    lengthUnitLabels.forEach(label => label.innerHTML = '(\\(\text{ft}\\))');
                    foulingUnitLabels.forEach(label => label.innerHTML = '(\\(\text{h ft}^2\\text{°F/BTU}\\))');
                } else { // Metric
                    convectionUnitLabels.forEach(label => label.innerHTML = '(\\(\text{W/m}^2\\text{°C}\\))');
                    conductivityUnitLabels.forEach(label => label.innerHTML = '(\\(\text{W/mK}\\))');
                    lengthUnitLabels.forEach(label => label.innerHTML = '(\\(\text{m}\\))');
                    foulingUnitLabels.forEach(label => label.innerHTML = '(\\(\text{m}^2\\text{°C/W}\\))');
                }
            }

            unitSystemSelect.addEventListener('change', updateUI);
            updateUI(); // Initial UI update

            calculateBtn.addEventListener('click', function() {
                const unitSystem = unitSystemSelect.value;

                let hi = parseFloat(hiInput.value);
                let ho = parseFloat(hoInput.value);
                let k_wall = parseFloat(kWallInput.value);
                let dx_wall = parseFloat(dxWallInput.value);
                let rfi = parseFloat(rfiInput.value);
                let rfo = parseFloat(rfoInput.value);

                // Input validation
                const inputs = [hi, ho, k_wall, dx_wall, rfi, rfo];
                for (let i = 0; i < inputs.length; i++) {
                    if (isNaN(inputs[i]) || inputs[i] < 0) { // Fouling factors can be 0, others must be positive
                        displayMessage("Please enter valid non-negative numbers for all fields. Convection coefficients, conductivity, and thickness must be positive.", "error");
                        return;
                    }
                    if ((i === 0 || i === 1 || i === 2 || i === 3) && inputs[i] === 0) { // hi, ho, k, dx cannot be zero
                         displayMessage("Convection coefficients, material conductivity, and wall thickness cannot be zero.", "error");
                        return;
                    }
                }

                let hi_si, ho_si, k_wall_si, dx_wall_si, rfi_si, rfo_si;
                let U_unit_display;

                // Convert all inputs to SI units for calculations
                if (unitSystem === 'imperial') {
                    // 1 BTU/h ft^2 °F = 5.67826 W/m^2 °C
                    // 1 BTU/h ft °F = 1.730735 W/mK
                    // 1 ft = 0.3048 m
                    // 1 h ft^2 °F / BTU = 0.1761 W / m^2 °C (inverse of convection unit)
                    // So, BTU/h ft^2 °F to W/m^2 °C: multiply by 5.67826
                    // h ft^2 °F / BTU to m^2 °C / W: divide by 5.67826
                    
                    hi_si = hi * 5.67826;
                    ho_si = ho * 5.67826;
                    k_wall_si = k_wall * 1.730735;
                    dx_wall_si = dx_wall * 0.3048;
                    rfi_si = rfi / 5.67826; // Inverse conversion
                    rfo_si = rfo / 5.67826; // Inverse conversion
                    U_unit_display = '\\(\\text{BTU/h ft}^2\\text{°F}\\)';
                    displayMessage("Imperial units are converted to Metric for calculations. Results will be converted back.", "info");
                } else { // Metric
                    hi_si = hi;
                    ho_si = ho;
                    k_wall_si = k_wall;
                    dx_wall_si = dx_wall;
                    rfi_si = rfi;
                    rfo_si = rfo;
                    U_unit_display = '\\(\\text{W/m}^2\\text{°C}\\)';
                }

                let calculationHtml = '<h4>Detailed Calculation Steps:</h4>';
                calculationHtml += `<p><strong>1. Input Parameters (Converted to SI Units):</strong></p>`;
                calculationHtml += `<ul>
                    <li>Inner Convection Coefficient (\\(h_i\\)): ${hi_si.toFixed(2)} W/m²°C</li>
                    <li>Outer Convection Coefficient (\\(h_o\\)): ${ho_si.toFixed(2)} W/m²°C</li>
                    <li>Wall Material Thermal Conductivity (\\(k\\)): ${k_wall_si.toFixed(2)} W/mK</li>
                    <li>Wall Thickness (\\(\\Delta x\\)): ${dx_wall_si.toExponential(2)} m</li>
                    <li>Inner Fouling Factor (\\(R_{f,i}\\)): ${rfi_si.toExponential(2)} m²°C/W</li>
                    <li>Outer Fouling Factor (\\(R_{f,o}\\)): ${rfo_si.toExponential(2)} m²°C/W</li>
                </ul>`;

                // Calculate individual resistances
                const R_inner_conv = 1 / hi_si;
                const R_wall_cond = dx_wall_si / k_wall_si;
                const R_outer_conv = 1 / ho_si;

                calculationHtml += `<p><strong>2. Calculate Individual Thermal Resistances (per unit area):</strong></p>`;
                calculationHtml += `<p class="calculation-step">Inner Convection Resistance (\\(R_{conv,i}\\)) = \\(1 / h_i\\) = \\(1 / ${hi_si.toFixed(2)}\\) = ${R_inner_conv.toExponential(2)} m²°C/W</p>`;
                calculationHtml += `<p class="calculation-step">Inner Fouling Resistance (\\(R_{f,i}\\)) = ${rfi_si.toExponential(2)} m²°C/W</p>`;
                calculationHtml += `<p class="calculation-step">Wall Conduction Resistance (\\(R_{wall}\\)) = \\(\\Delta x / k\\) = \\(${dx_wall_si.toExponential(2)} / ${k_wall_si.toFixed(2)}\\) = ${R_wall_cond.toExponential(2)} m²°C/W</p>`;
                calculationHtml += `<p class="calculation-step">Outer Fouling Resistance (\\(R_{f,o}\\)) = ${rfo_si.toExponential(2)} m²°C/W</p>`;
                calculationHtml += `<p class="calculation-step">Outer Convection Resistance (\\(R_{conv,o}\\)) = \\(1 / h_o\\) = \\(1 / ${ho_si.toFixed(2)}\\) = ${R_outer_conv.toExponential(2)} m²°C/W</p>`;
                
                // Calculate total thermal resistance
                const R_total_si = R_inner_conv + rfi_si + R_wall_cond + rfo_si + R_outer_conv;
                calculationHtml += `<p><strong>3. Calculate Total Thermal Resistance (\\(R_{total}\\)):</strong></p>`;
                calculationHtml += `<p class="formula">
                    \\( R_{total} = \\frac{1}{h_i} + R_{f,i} + \\frac{\\Delta x}{k} + R_{f,o} + \\frac{1}{h_o} \\)
                </p>`;
                calculationHtml += `<p class="calculation-step">
                    \\( R_{total} \\) = ${R_inner_conv.toExponential(2)} + ${rfi_si.toExponential(2)} + ${R_wall_cond.toExponential(2)} + ${rfo_si.toExponential(2)} + ${R_outer_conv.toExponential(2)} = ${R_total_si.toExponential(2)} m²°C/W
                </p>`;

                // Calculate Overall Heat Transfer Coefficient (U-value)
                let U_value_si = 1 / R_total_si;
                calculationHtml += `<p><strong>4. Calculate Overall Heat Transfer Coefficient (\\(U\\)):</strong></p>`;
                calculationHtml += `<p class="formula">
                    \\( U = \\frac{1}{R_{total}} \\)
                </p>`;
                calculationHtml += `<p class="calculation-step">
                    \\( U \\) = \\(1 / ${R_total_si.toExponential(2)}\\) = ${U_value_si.toFixed(2)} W/m²°C
                </p>`;

                // Convert U_value back to original unit system for display
                let displayU;
                if (unitSystem === 'imperial') {
                    displayU = U_value_si / 5.67826; // W/m^2 °C to BTU/h ft^2 °F
                } else {
                    displayU = U_value_si;
                }

                calculationDetailsDiv.innerHTML = calculationHtml;
                if (window.MathJax) {
                    window.MathJax.typesetPromise([calculationDetailsDiv]);
                }

                // Populate results table
                resultTableBody.innerHTML = '';
                function addResultRow(parameterHtml, valueHtml) {
                    const row = resultTableBody.insertRow();
                    const paramCell = row.insertCell();
                    const valueCell = row.insertCell();
                    paramCell.innerHTML = parameterHtml;
                    valueCell.innerHTML = valueHtml;
                }

                addResultRow("Unit System", unitSystem === 'imperial' ? 'Imperial' : 'Metric');
                addResultRow("Inner Convection Coefficient (\\(h_i\\))", `${hi} ${unitSystem === 'imperial' ? '\\(\\text{BTU/h ft}^2\\text{°F}\\)' : '\\(\\text{W/m}^2\\text{°C}\\)'}`);
                addResultRow("Outer Convection Coefficient (\\(h_o\\))", `${ho} ${unitSystem === 'imperial' ? '\\(\\text{BTU/h ft}^2\\text{°F}\\)' : '\\(\\text{W/m}^2\\text{°C}\\)'}`);
                addResultRow("Wall Material Thermal Conductivity (\\(k\\))", `${k_wall} ${unitSystem === 'imperial' ? '\\(\\text{BTU/h ft°F}\\)' : '\\(\\text{W/mK}\\)'}`);
                addResultRow("Wall Thickness (\\(\\Delta x\\))", `${dx_wall} ${unitSystem === 'imperial' ? '\\(\\text{ft}\\)' : '\\(\\text{m}\\)'}`);
                addResultRow("Inner Fouling Factor (\\(R_{f,i}\\))", `${rfi} ${unitSystem === 'imperial' ? '\\(\\text{h ft}^2\\text{°F/BTU}\\)' : '\\(\\text{m}^2\\text{°C/W}\\)'}`);
                addResultRow("Outer Fouling Factor (\\(R_{f,o}\\))", `${rfo} ${unitSystem === 'imperial' ? '\\(\\text{h ft}^2\\text{°F/BTU}\\)' : '\\(\\text{m}^2\\text{°C/W}\\)'}`);
                
                addResultRow(`Total Thermal Resistance (\\(R_{total}\\))`, `<strong>${(unitSystem === 'imperial' ? R_total_si * 5.67826 : R_total_si).toExponential(2)} ${unitSystem === 'imperial' ? '\\(\\text{h ft}^2\\text{°F/BTU}\\)' : '\\(\\text{m}^2\\text{°C/W}\\)'}</strong>`);
                addResultRow(`Overall Heat Transfer Coefficient (\\(U\\))`, `<strong>${displayU.toFixed(2)} ${U_unit_display}</strong>`);

                if (window.MathJax) {
                    window.MathJax.typesetPromise([resultTableBody, ...convectionUnitLabels, ...conductivityUnitLabels, ...lengthUnitLabels, ...foulingUnitLabels]);
                }

                standardReference.innerHTML = "The calculation of the overall heat transfer coefficient (U-value) is fundamental in heat exchanger design and building thermal performance. It is crucial to use accurate convection coefficients and, especially, appropriate fouling factors. Recommended sources for these values include: <ul><li><strong>TEMA (Tubular Exchanger Manufacturers Association) Standards</strong> for shell-and-tube heat exchangers, which provide detailed fouling resistance values for various fluids and operating conditions.</li><li><strong>ASHRAE Handbooks</strong> for building HVAC applications, which specify U-values and thermal properties for building materials and assemblies.</li><li><strong>ISO 6946:2017 (Thermal insulation - Calculation methods - Thermal resistances and thermal transmittances)</strong> for building components.</li><li>Textbooks such as <strong>Holman, J. P., 'Heat Transfer'</strong> or <strong>Incropera, F. P., et al., 'Fundamentals of Heat and Mass Transfer'</strong> for general principles and correlations.</li></ul>Always verify results against industry-specific codes and regulations.";

                resultContainer.style.display = 'block';
                setTimeout(() => {
                    resultContainer.classList.add('show');
                }, 10);
                resultContainer.scrollIntoView({ behavior: 'smooth' });
                displayMessage("Calculation completed successfully!", "info");
            });

            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }
                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }
        });
    </script>
</body>

</html>

