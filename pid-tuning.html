<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-23Y1V450SR');
</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PID Controller Tuning - Design Calculators - Instrumentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Basic CSS Variables for a consistent theme */
        :root {
            --primary-color: #4CAF50; /* Green */
            --secondary-color: #45a049; /* Darker Green */
            --accent-color: #FFC107; /* Amber */
            --bg-color: #f4f7f6; /* Light Greyish Green */
            --card-bg: #ffffff; /* White */
            --text-color: #333333; /* Dark Grey */
            --header-bg: #2C3E50; /* Dark Blue Grey */
            --footer-bg: #34495E; /* Slightly Lighter Dark Blue Grey */
            --border-color: #cccccc;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            --hover-color: #e2e6ea;
            --button-gradient: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            --button-hover-gradient: linear-gradient(45deg, var(--secondary-color), #3b8e3e);
            --reset-button-bg: #FFC107; /* Yellow for reset */
            --reset-button-hover-bg: #E0A800; /* Darker yellow */
            --clear-button-bg: #007bff; /* Blue for clear */
            --clear-button-hover-bg: #0056b3; /* Darker blue */
            --controller-color: #3498db; /* Blue for controller */
            --controller-color-dark: #2980b9; /* Darker blue for controller */
        }

        /* Dark Mode Variables */
        body.dark-mode {
            --bg-color: #2c3e50;
            --card-bg: #34495e;
            --text-color: #ecf0f1;
            --header-bg: #2c3e50;
            --footer-bg: #2c3e50;
            --border-color: #555555;
            --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            --hover-color: #446688;
            --button-gradient: linear-gradient(45deg, #3b8e3e, #4CAF50);
            --button-hover-gradient: linear-gradient(45deg, #4CAF50, #5cb85c);
            --reset-button-bg: #FFD700; /* Gold/Yellow for dark mode reset */
            --reset-button-hover-bg: #DAA520; /* Darker gold/yellow */
            --clear-button-bg: #17a2b8; /* Cyan for dark mode clear */
            --clear-button-hover-bg: #138496;
            --controller-color: #6dd5ed; /* Lighter blue for dark mode */
            --controller-color-dark: #2193b0; /* Darker blue for dark mode */
        }

        /* General Body Styling */
        body {
            font-family: 'Inter', sans-serif; /* Using Inter as specified */
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, var(--bg-color), #e0e0e0);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--header-bg);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative; /* For theme toggle positioning */
        }

        header h1 {
            margin: 0;
            font-size: 2.5em;
            color: var(--primary-color);
        }

        header .subtitle {
            margin: 5px 0 0;
            font-size: 1em;
            color: #bdc3c7;
        }

        main {
            padding: 20px 0;
        }

        .tool-container {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 20px;
            transition: transform 0.3s ease-in-out;
        }

        .tool-container:hover {
            transform: translateY(-5px);
        }

        .tool-container h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-top: 0;
            margin-bottom: 20px;
        }

        .tool-description {
            margin-bottom: 20px;
            color: var(--text-color);
        }

        .back-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border-radius: 4px;
            text-decoration: none;
            margin-bottom: 20px;
            transition: background-color 0.3s, transform 0.3s;
            width: fit-content; 
        }

        .back-button:hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
        }

        /* Theme Toggle */
        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
        }

        .theme-toggle .light-icon,
        .theme-toggle .dark-icon {
            color: white;
            margin: 0 5px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:focus + .slider {
            box-shadow: 0 0 1px var(--primary-color);
        }

        input:checked + .slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(26px);
            transform: translateX(26px);
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        /* Footer Styling */
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
            margin-top: 30px;
        }

        footer .disclaimer h3,
        footer .social-share h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        footer .disclaimer p {
            font-size: 0.9em;
            color: #bdc3c7;
        }

        .social-buttons {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .social-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.2em;
            transition: transform 0.3s ease-in-out;
        }

        .social-btn:hover {
            transform: translateY(-3px);
        }

        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.reddit { background-color: #FF4500; }

        /* Styles for Calculator Forms and Results */
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: var(--card-shadow);
        }
        
        .form-section {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 25px; /* Space between sections */
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
            opacity: 0; /* Initial state for fade-in animation */
            transform: translateY(10px); /* Initial state for slide-up animation */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }

        .form-section.fade-in {
            opacity: 1;
            transform: translateY(0);
        }

        .form-section h3 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px;
            border-bottom: 1px dashed var(--border-color);
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 15px; /* Default margin for form groups */
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--text-color);
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background-color: var(--card-bg); /* Use card-bg for input background */
            color: var(--text-color);
            box-sizing: border-box; /* Ensure padding doesn't increase width */
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Responsive grid */
            gap: 20px; /* Gap between grid items */
            margin-bottom: 0; /* Handled by form-group margin */
        }
        
        .calculate-btn {
            background: var(--button-gradient);
            color: white;
            border: none;
            padding: 12px 30px; /* Increased padding for better appearance */
            border-radius: 25px; /* More rounded */
            cursor: pointer;
            font-size: 1.1em; /* Slightly larger font */
            font-weight: bold;
            margin-top: 25px; /* More space above button */
            transition: background 0.3s ease-in-out, transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            width: auto; /* Allow button to size based on content and padding */
            min-width: 220px; /* Ensure a minimum width for consistency */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); /* More pronounced shadow */
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        
        .calculate-btn:hover {
            background: var(--button-hover-gradient);
            transform: translateY(-5px) scale(1.02); /* Lift and slightly scale */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); /* Deeper shadow on hover */
        }

        .reset-btn {
            background-color: var(--reset-button-bg);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 25px;
            margin-left: 15px; /* Space from calculate button */
            transition: background-color 0.3s ease-in-out, transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            width: auto;
            min-width: 150px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .reset-btn:hover {
            background-color: var(--reset-button-hover-bg);
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .clear-results-btn {
            background-color: var(--clear-button-bg);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            margin-top: 15px;
            transition: background-color 0.3s ease-in-out, transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .clear-results-btn:hover {
            background-color: var(--clear-button-hover-bg);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .result-container {
            margin-top: 30px;
            padding: 20px;
            border-radius: 8px;
            background-color: var(--card-bg);
            box-shadow: var(--card-shadow);
            display: none; /* Hidden by default */
            opacity: 0; /* For animation */
            transform: translateY(20px); /* Initial state for animation */
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
        
        .result-container.show {
            opacity: 1;
            transform: translateY(0);
        }

        .result-container h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            border-radius: 8px;
            overflow: hidden; /* Ensures rounded corners apply to table content */
        }
        
        .result-table th, .result-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.3s;
        }
        
        .result-table th {
            background-color: var(--hover-color);
            font-weight: bold;
            color: var(--secondary-color);
        }

        .result-table tr:last-child td {
            border-bottom: none; /* No border for the last row */
        }

        .result-table tbody tr:hover {
            background-color: var(--hover-color); /* Highlight row on hover */
        }
        
        .standard-reference {
            margin-top: 20px;
            font-style: italic;
            font-size: 0.9rem;
            color: var(--text-color);
            padding: 10px;
            border-left: 4px solid var(--primary-color);
            background-color: var(--hover-color);
            border-radius: 4px;
        }
        
        .info-icon {
            color: var(--primary-color);
            margin-left: 5px;
            cursor: help;
            transition: color 0.3s;
        }

        .info-icon:hover {
            color: var(--accent-color);
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px; /* Increased padding */
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            transform: translateY(10px); /* Initial state for tooltip animation */
            font-size: 0.85em;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
            transform: translateY(0);
        }

        /* Custom message box style */
        #custom-message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            display: flex; /* Use flex for centering text */
            align-items: center;
            justify-content: center;
            min-width: 250px; /* Ensure it's wide enough */
        }

        /* Styles for calculation details */
        #calculation-details {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px; /* More rounded */
            padding: 20px; /* Increased padding */
            margin-bottom: 25px; /* More space */
            font-size: 0.95em;
            color: var(--text-color);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05); /* Subtle inner shadow */
        }
        #calculation-details h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px; /* More space */
            text-align: center;
            font-size: 1.2em;
        }
        #calculation-details p.formula {
            font-family: 'Times New Roman', serif; /* A font suitable for mathematical formulas */
            font-style: italic;
            font-size: 1.1em;
            text-align: center;
            padding: 12px 10px; /* Increased padding */
            background-color: var(--hover-color);
            border-radius: 6px; /* More rounded */
            margin: 15px 0; /* More space */
            overflow-x: auto; /* Allow horizontal scrolling for long formulas */
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace; /* Monospace for steps */
            background-color: var(--hover-color);
            padding: 8px 15px; /* Increased padding */
            border-radius: 4px; /* More rounded */
            margin-bottom: 8px; /* More space */
            color: var(--text-color);
            white-space: pre-wrap; /* Preserve whitespace and wrap text */
            word-break: break-word; /* Break long words */
        }
        #calculation-details ul {
            list-style-type: disc;
            margin-left: 25px; /* Increased margin */
            padding-left: 0;
            margin-top: 15px;
        }
        #calculation-details ul li {
            margin-bottom: 8px; /* More space */
            color: var(--text-color);
        }

        /* Style for centering the button */
        .button-wrapper {
            display: flex;
            justify-content: center; /* Center the button horizontally */
            width: 100%; /* Ensure it takes full width to center effectively */
            padding-top: 20px; /* Add more spacing above the button */
        }

        /* Animation for input fields on focus */
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.4); /* Green glow, slightly more pronounced */
            outline: none;
            animation: pulse 0.8s infinite alternate;
        }

        @keyframes pulse {
            from {
                box-shadow: 0 0 0 4px rgba(76, 175, 80, 0.4);
            }
            to {
                box-shadow: 0 0 0 8px rgba(76, 175, 80, 0.2); /* Softer pulse */
            }
        }

        /* Specific styles for PID Controller Tuning */
        .tuning-method-selector, .controller-type-selector, .controller-form-selector {
            margin-bottom: 20px;
            background-color: var(--hover-color);
            border-radius: 8px;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: space-around;
        }
        .tuning-method-selector label, .controller-type-selector label, .controller-form-selector label {
            font-weight: bold;
            color: var(--text-color);
        }
        .tuning-method-selector input[type="radio"], .controller-type-selector input[type="radio"], .controller-form-selector input[type="radio"] {
            margin-right: 8px;
            transform: scale(1.2);
        }

        /* Controller visualization */
        .controller-visualization-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 30px;
            margin-bottom: 20px;
            padding: 20px;
            background-color: var(--bg-color);
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            flex-direction: column;
        }

        .controller-bar-container {
            width: 80%;
            height: 30px;
            background-color: #ddd;
            border-radius: 5px;
            overflow: hidden;
            position: relative;
            margin-bottom: 10px;
        }

        .controller-bar {
            height: 100%;
            width: 0%; /* Initial width */
            background: linear-gradient(to right, var(--controller-color), var(--controller-color-dark));
            transition: width 1.5s ease-out; /* Smooth animation */
            border-radius: 5px;
        }

        .controller-value-label {
            font-weight: bold;
            color: var(--text-color);
            font-size: 1.1em;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Design Calculators - Instrumentation</h1>
            <p class="subtitle">Smart Tools for Modern Instrumentation Engineers</p>
            <div class="theme-toggle">
                <span class="light-icon"><i class="fas fa-sun"></i></span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
                <span class="dark-icon"><i class="fas fa-moon"></i></span>
            </div>
        </div>
    </header>

    <main class="container">
        <div style="display: flex; justify-content: center; margin-bottom: 20px;">
            <a href="indexInst.html" class="back-button"><i class="fas fa-arrow-left"></i> Back to Tools</a>
        </div>
        
        <div class="tool-container">
            <h2>PID Controller Tuning Calculator</h2>
            
            <div class="tool-description">
                <p>This tool calculates optimal PID controller parameters (Proportional Gain, Integral Time, Derivative Time) using the Ziegler-Nichols (Open Loop) and Cohen-Coon tuning methods. It's essential for achieving stable and responsive process control in various industrial applications worldwide.</p>
            </div>
        
            <div class="calculator-form">
                <form id="pid-tuning-form">
                    <!-- Process Parameters (from Open-Loop Step Response) -->
                    <div class="form-section">
                        <h3>Process Parameters (from Open-Loop Step Response)</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="process-gain">Process Gain (K<sub>p</sub>) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The steady-state change in process output for a unit change in controller output. (Dimensionless)</span></span></label>
                                <input type="number" id="process-gain" step="0.01" value="1.0" required>
                            </div>
                            <div class="form-group">
                                <label for="time-constant">Time Constant (τ) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The time it takes for the process output to reach 63.2% of its total change after a step input. (Units of Time, e.g., seconds)</span></span></label>
                                <input type="number" id="time-constant" step="0.1" value="10.0" required>
                            </div>
                            <div class="form-group">
                                <label for="dead-time">Dead Time (L) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The delay between a change in controller output and the first observable change in process output. (Units of Time, e.g., seconds)</span></span></label>
                                <input type="number" id="dead-time" step="0.1" value="2.0" required>
                            </div>
                        </div>
                    </div>

                    <!-- Tuning Method Selection -->
                    <div class="form-section tuning-method-selector">
                        <h3>Select Tuning Method</h3>
                        <label>
                            <input type="radio" name="tuning-method" value="ziegler-nichols" checked> Ziegler-Nichols (Open Loop)
                        </label>
                        <label>
                            <input type="radio" name="tuning-method" value="cohen-coon"> Cohen-Coon
                        </label>
                    </div>

                    <!-- Controller Type Selection -->
                    <div class="form-section controller-type-selector">
                        <h3>Select Controller Type</h3>
                        <label>
                            <input type="radio" name="controller-type" value="pi" checked> PI Controller
                        </label>
                        <label>
                            <input type="radio" name="controller-type" value="pid"> PID Controller
                        </label>
                    </div>

                    <!-- Controller Form Selection -->
                    <div class="form-section controller-form-selector">
                        <h3>Select Controller Form</h3>
                        <label>
                            <input type="radio" name="controller-form" value="parallel" checked> Parallel (Standard)
                        </label>
                        <label>
                            <input type="radio" name="controller-form" value="series"> Series (Interacting)
                        </label>
                    </div>

                    <div class="button-wrapper">
                        <button type="button" id="calculate-tuning-btn" class="calculate-btn">Calculate Tuning Parameters</button>
                        <button type="button" id="reset-form-btn" class="reset-btn"><i class="fas fa-sync-alt"></i> Reset Form</button>
                    </div>
                </form>
            </div>
            
            <div id="result-container" class="result-container">
                <h3>Tuning Results</h3>
                <div class="controller-visualization-container">
                    <p class="controller-value-label">Proportional Gain (K<sub>c</sub>): <span id="kc-display">0.00</span></p>
                    <div class="controller-bar-container">
                        <div class="controller-bar" id="kc-bar" style="width: 0%;"></div>
                    </div>
                    <p class="controller-value-label">Integral Time (T<sub>i</sub>): <span id="ti-display">0.00</span></p>
                    <div class="controller-bar-container">
                        <div class="controller-bar" id="ti-bar" style="width: 0%;"></div>
                    </div>
                    <p class="controller-value-label" id="td-label" style="display: none;">Derivative Time (T<sub>d</sub>): <span id="td-display">0.00</span></p>
                    <div class="controller-bar-container" id="td-bar-container" style="display: none;">
                        <div class="controller-bar" id="td-bar" style="width: 0%;"></div>
                    </div>
                </div>
                <div id="calculation-details">
                    <!-- Calculation steps will be inserted here -->
                </div>
                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body">
                        <!-- Results will be dynamically inserted here -->
                    </tbody>
                </table>
                <div style="display: flex; justify-content: center; margin-top: 20px;">
                    <button type="button" id="clear-results-btn" class="clear-results-btn"><i class="fas fa-times-circle"></i> Clear Results</button>
                </div>
                <div class="standard-reference" id="standard-reference">
                    <!-- Standard reference text will be inserted here -->
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="disclaimer">
                <h3>Disclaimer</h3>
                <p>To ensure accuracy and reliability, always verify the results obtained from these tools against the relevant engineering standards and guidelines.</p>
            </div>
            <div class="credit">
                <p>Created by A Sharma</p>
            </div>
            <div class="social-share">
                <h3>Share This Site</h3>
                <div class="social-buttons">
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in&title=Design Calculators - Instrumentation" target="_blank" class="social-btn linkedin">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" class="social-btn facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?text=Check out this amazing Design Calculators - Instrumentation!&url=https://designcalculators.co.in" target="_blank" class="social-btn twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text=Check out this amazing Design Calculators - Instrumentation! https://designcalculators.co.in" target="_blank" class="social-btn whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.reddit.com/submit?url=https://designcalculators.co.in&title=Design Calculators - Instrumentation" target="_blank" class="social-btn reddit">
                        <i class="fab fa-reddit"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const tuningMethodRadios = document.querySelectorAll('input[name="tuning-method"]');
            const controllerTypeRadios = document.querySelectorAll('input[name="controller-type"]');
            const controllerFormRadios = document.querySelectorAll('input[name="controller-form"]'); // New

            const processGainInput = document.getElementById('process-gain');
            const timeConstantInput = document.getElementById('time-constant');
            const deadTimeInput = document.getElementById('dead-time');

            const calculateTuningBtn = document.getElementById('calculate-tuning-btn');
            const resetFormBtn = document.getElementById('reset-form-btn');
            const clearResultsBtn = document.getElementById('clear-results-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const standardReference = document.getElementById('standard-reference');
            const calculationDetailsDiv = document.getElementById('calculation-details');

            const kcDisplay = document.getElementById('kc-display');
            const tiDisplay = document.getElementById('ti-display');
            const tdDisplay = document.getElementById('td-display');
            const kcBar = document.getElementById('kc-bar');
            const tiBar = document.getElementById('ti-bar');
            const tdBar = document.getElementById('td-bar');
            const tdLabel = document.getElementById('td-label');
            const tdBarContainer = document.getElementById('td-bar-container');

            // Default values for resetting form
            const defaultValues = {
                'process-gain': 1.0,
                'time-constant': 10.0,
                'dead-time': 2.0,
                'tuning-method': 'ziegler-nichols',
                'controller-type': 'pi',
                'controller-form': 'parallel' // New default
            };

            // Event Listeners
            tuningMethodRadios.forEach(radio => radio.addEventListener('change', updateControllerTypeAndFormVisibility)); // Updated
            controllerTypeRadios.forEach(radio => radio.addEventListener('change', updateControllerTypeAndFormVisibility)); // Updated
            controllerFormRadios.forEach(radio => radio.addEventListener('change', updateControllerTypeAndFormVisibility)); // New
            calculateTuningBtn.addEventListener('click', calculateTuningParameters);
            resetFormBtn.addEventListener('click', resetForm);
            clearResultsBtn.addEventListener('click', clearResults);

            // Initial setup
            updateControllerTypeAndFormVisibility(); // Set initial visibility for Td fields based on type and form
            
            // Initial fade-in for form sections
            const formSections = document.querySelectorAll('.form-section');
            formSections.forEach((section, index) => {
                setTimeout(() => {
                    section.classList.add('fade-in');
                }, 100 * index); // Staggered fade-in
            });

            // Helper function to add rows to the result table
            function addResultRow(parameter, value) {
                const row = resultTableBody.insertRow();
                const paramCell = row.insertCell();
                const valueCell = row.insertCell();
                paramCell.innerHTML = parameter;
                valueCell.innerHTML = value;
            }

            function updateControllerTypeAndFormVisibility() { // Updated function name
                const controllerType = document.querySelector('input[name="controller-type"]:checked').value;
                const controllerForm = document.querySelector('input[name="controller-form"]:checked').value; // New

                if (controllerType === 'pid') {
                    tdLabel.style.display = 'block';
                    tdBarContainer.style.display = 'block';
                } else {
                    tdLabel.style.display = 'none';
                    tdBarContainer.style.display = 'none';
                }
                clearResults(); // Clear results when controller type or form changes
            }

            function clearResults() {
                resultContainer.classList.remove('show');
                resultTableBody.innerHTML = '';
                calculationDetailsDiv.innerHTML = '';
                standardReference.innerHTML = '';
                kcBar.style.width = '0%';
                tiBar.style.width = '0%';
                tdBar.style.width = '0%';
                kcDisplay.textContent = '0.00';
                tiDisplay.textContent = '0.00';
                tdDisplay.textContent = '0.00';
                displayMessage("Results cleared.", "info");
            }

            function resetForm() {
                processGainInput.value = defaultValues['process-gain'];
                timeConstantInput.value = defaultValues['time-constant'];
                deadTimeInput.value = defaultValues['dead-time'];
                
                document.querySelector(`input[name="tuning-method"][value="${defaultValues['tuning-method']}"]`).checked = true;
                document.querySelector(`input[name="controller-type"][value="${defaultValues['controller-type']}"]`).checked = true;
                document.querySelector(`input[name="controller-form"][value="${defaultValues['controller-form']}"]`).checked = true; // New
                
                updateControllerTypeAndFormVisibility(); // Ensure visibility is reset
                clearResults(); // Clear results again after inputs are reset
                displayMessage("Form reset to default values.", "info");
            }

            // Function to display messages (replaces alert())
            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    messageBox.style.cssText = `
                        position: fixed;
                        top: 20px;
                        left: 50%;
                        transform: translateX(-50%);
                        padding: 15px 25px;
                        border-radius: 8px;
                        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
                        z-index: 1000;
                        font-weight: bold;
                        color: white;
                        opacity: 0;
                        transition: opacity 0.5s ease-in-out, transform 0.3s ease-out;
                        display: flex; /* Use flex for centering text */
                        align-items: center;
                        justify-content: center;
                        min-width: 250px; /* Ensure it's wide enough */
                    `;
                    document.body.appendChild(messageBox);
                }

                messageBox.textContent = message;
                if (type === "error") {
                    messageBox.style.backgroundColor = '#dc3545'; /* Red */
                } else if (type === "warning") {
                    messageBox.style.backgroundColor = '#ffc107'; /* Amber */
                    messageBox.style.color = '#333';
                } else {
                    messageBox.style.backgroundColor = '#28a745'; /* Green */
                }
                messageBox.style.opacity = 1;
                messageBox.style.transform = 'translateX(-50%) translateY(0)'; // Bring to position

                // Hide after 5 seconds
                setTimeout(() => {
                    messageBox.style.opacity = 0;
                    messageBox.style.transform = 'translateX(-50%) translateY(-20px)'; // Fade out and move up
                }, 5000);
            }

            function calculateTuningParameters() {
                clearResults(); // Clear previous results

                const Kp = parseFloat(processGainInput.value);
                const tau = parseFloat(timeConstantInput.value);
                const L = parseFloat(deadTimeInput.value);
                const tuningMethod = document.querySelector('input[name="tuning-method"]:checked').value;
                const controllerType = document.querySelector('input[name="controller-type"]:checked').value;
                const controllerForm = document.querySelector('input[name="controller-form"]:checked').value; // New

                // Input Validation
                if (isNaN(Kp) || Kp <= 0) { displayMessage("Please enter a valid positive Process Gain (Kp).", "error"); return; }
                if (isNaN(tau) || tau <= 0) { displayMessage("Please enter a valid positive Time Constant (τ).", "error"); return; }
                if (isNaN(L) || L < 0) { displayMessage("Please enter a valid non-negative Dead Time (L).", "error"); return; }
                if (L >= tau && tuningMethod === 'cohen-coon') {
                    displayMessage("For Cohen-Coon, Dead Time (L) should generally be less than Time Constant (τ) for stable results.", "warning");
                }

                let Kc_parallel, Ti_parallel, Td_parallel; // Parameters for parallel form
                let Kc_final, Ti_final, Td_final; // Final parameters based on selected form

                let calculationHtml = '<h4>Detailed Calculation Steps:</h4>';
                calculationHtml += `<p><strong>Tuning Method:</strong> ${tuningMethod === 'ziegler-nichols' ? 'Ziegler-Nichols (Open Loop)' : 'Cohen-Coon'}</p>`;
                calculationHtml += `<p><strong>Controller Type:</strong> ${controllerType === 'pi' ? 'PI Controller' : 'PID Controller'}</p>`;
                calculationHtml += `<p><strong>Controller Form:</strong> ${controllerForm === 'parallel' ? 'Parallel (Standard)' : 'Series (Interacting)'}</p>`;
                calculationHtml += `<p><strong>Input Process Parameters:</strong></p>`;
                calculationHtml += `<p class="calculation-step">Process Gain (K<sub>p</sub>) = ${Kp.toFixed(2)}</p>`;
                calculationHtml += `<p class="calculation-step">Time Constant (τ) = ${tau.toFixed(1)} seconds</p>`;
                calculationHtml += `<p class="calculation-step">Dead Time (L) = ${L.toFixed(1)} seconds</p>`;

                // 1. Calculate Parallel Form Parameters based on Tuning Method
                calculationHtml += `<p><strong>1. Calculate Parallel Form Parameters:</strong></p>`;
                if (tuningMethod === 'ziegler-nichols') {
                    calculationHtml += `<p>Using Ziegler-Nichols (Open Loop) formulas for Parallel/Standard PID form:</p>`;
                    if (controllerType === 'pi') {
                        // PI Controller (Ziegler-Nichols)
                        Kc_parallel = 0.9 * (tau / L) / Kp;
                        Ti_parallel = 3.33 * L;
                        Td_parallel = 0; // Not applicable for PI
                        calculationHtml += `<p class="formula">K<sub>c,parallel</sub> = 0.9 &times; (τ / L) / K<sub>p</sub></p>`;
                        calculationHtml += `<p class="calculation-step">K<sub>c,parallel</sub> = 0.9 &times; (${tau.toFixed(1)} / ${L.toFixed(1)}) / ${Kp.toFixed(2)} = ${Kc_parallel.toFixed(3)}</p>`;
                        calculationHtml += `<p class="formula">T<sub>i,parallel</sub> = 3.33 &times; L</p>`;
                        calculationHtml += `<p class="calculation-step">T<sub>i,parallel</sub> = 3.33 &times; ${L.toFixed(1)} = ${Ti_parallel.toFixed(2)} seconds</p>`;
                    } else {
                        // PID Controller (Ziegler-Nichols)
                        Kc_parallel = 1.2 * (tau / L) / Kp;
                        Ti_parallel = 2 * L;
                        Td_parallel = 0.5 * L;
                        calculationHtml += `<p class="formula">K<sub>c,parallel</sub> = 1.2 &times; (τ / L) / K<sub>p</sub></p>`;
                        calculationHtml += `<p class="calculation-step">K<sub>c,parallel</sub> = 1.2 &times; (${tau.toFixed(1)} / ${L.toFixed(1)}) / ${Kp.toFixed(2)} = ${Kc_parallel.toFixed(3)}</p>`;
                        calculationHtml += `<p class="formula">T<sub>i,parallel</sub> = 2 &times; L</p>`;
                        calculationHtml += `<p class="calculation-step">T<sub>i,parallel</sub> = 2 &times; ${L.toFixed(1)} = ${Ti_parallel.toFixed(2)} seconds</p>`;
                        calculationHtml += `<p class="formula">T<sub>d,parallel</sub> = 0.5 &times; L</p>`;
                        calculationHtml += `<p class="calculation-step">T<sub>d,parallel</sub> = 0.5 &times; ${L.toFixed(1)} = ${Td_parallel.toFixed(2)} seconds</p>`;
                    }
                } else { // Cohen-Coon
                    const L_over_tau = L / tau;
                    calculationHtml += `<p>Using Cohen-Coon formulas for Parallel/Standard PID form:</p>`;
                    if (controllerType === 'pi') {
                        // PI Controller (Cohen-Coon)
                        Kc_parallel = (1 / Kp) * ((tau / L) + (1 / 3));
                        Ti_parallel = L * ((30 + 3 * L_over_tau) / (9 + 20 * L_over_tau));
                        Td_parallel = 0; // Not applicable for PI
                        calculationHtml += `<p class="formula">K<sub>c,parallel</sub> = (1 / K<sub>p</sub>) &times; (τ / L + 1 / 3)</p>`;
                        calculationHtml += `<p class="calculation-step">K<sub>c,parallel</sub> = (1 / ${Kp.toFixed(2)}) &times; (${tau.toFixed(1)} / ${L.toFixed(1)} + 1 / 3) = ${Kc_parallel.toFixed(3)}</p>`;
                        calculationHtml += `<p class="formula">T<sub>i,parallel</sub> = L &times; (30 + 3L/τ) / (9 + 20L/τ)</p>`;
                        calculationHtml += `<p class="calculation-step">T<sub>i,parallel</sub> = ${L.toFixed(1)} &times; (30 + 3 &times; ${L_over_tau.toFixed(2)}) / (9 + 20 &times; ${L_over_tau.toFixed(2)}) = ${Ti_parallel.toFixed(2)} seconds</p>`;
                    } else {
                        // PID Controller (Cohen-Coon)
                        Kc_parallel = (1 / Kp) * ((tau / L) * (4 / 3 + L / (4 * tau)));
                        Ti_parallel = L * ((32 + 6 * L_over_tau) / (13 + 8 * L_over_tau));
                        Td_parallel = L * (4 / (11 + 2 * L_over_tau));
                        calculationHtml += `<p class="formula">K<sub>c,parallel</sub> = (1 / K<sub>p</sub>) &times; (τ / L &times; (4 / 3 + L / (4 &times; τ)))</p>`;
                        calculationHtml += `<p class="calculation-step">K<sub>c,parallel</sub> = (1 / ${Kp.toFixed(2)}) &times; (${tau.toFixed(1)} / ${L.toFixed(1)} &times; (4 / 3 + ${L.toFixed(1)} / (4 &times; ${tau.toFixed(1)}))) = ${Kc_parallel.toFixed(3)}</p>`;
                        calculationHtml += `<p class="formula">T<sub>i,parallel</sub> = L &times; (32 + 6L/τ) / (13 + 8L/τ)</p>`;
                        calculationHtml += `<p class="calculation-step">T<sub>i,parallel</sub> = ${L.toFixed(1)} &times; (32 + 6 &times; ${L_over_tau.toFixed(2)}) / (13 + 8 &times; ${L_over_tau.toFixed(2)}) = ${Ti_parallel.toFixed(2)} seconds</p>`;
                        calculationHtml += `<p class="formula">T<sub>d,parallel</sub> = L &times; 4 / (11 + 2L/τ)</p>`;
                        calculationHtml += `<p class="calculation-step">T<sub>d,parallel</sub> = ${L.toFixed(1)} &times; 4 / (11 + 2 &times; ${L_over_tau.toFixed(2)}) = ${Td_parallel.toFixed(2)} seconds</p>`;
                    }
                }

                // 2. Convert to Series Form if selected
                if (controllerForm === 'series' && controllerType === 'pid') {
                    // Only PID has a meaningful series form conversion for Td
                    calculationHtml += `<p><strong>2. Convert to Series (Interacting) Form:</strong></p>`;
                    calculationHtml += `<p>If your controller uses a series (interacting) form, the parallel parameters are converted as follows:</p>`;
                    
                    Kc_final = Kc_parallel * (1 + (Td_parallel / Ti_parallel));
                    Ti_final = Ti_parallel + Td_parallel;
                    Td_final = (Ti_parallel * Td_parallel) / (Ti_parallel + Td_parallel);

                    calculationHtml += `<p class="formula">K<sub>c,series</sub> = K<sub>c,parallel</sub> &times; (1 + T<sub>d,parallel</sub> / T<sub>i,parallel</sub>)</p>`;
                    calculationHtml += `<p class="calculation-step">K<sub>c,series</sub> = ${Kc_parallel.toFixed(3)} &times; (1 + ${Td_parallel.toFixed(2)} / ${Ti_parallel.toFixed(2)}) = ${Kc_final.toFixed(3)}</p>`;
                    
                    calculationHtml += `<p class="formula">T<sub>i,series</sub> = T<sub>i,parallel</sub> + T<sub>d,parallel</sub></p>`;
                    calculationHtml += `<p class="calculation-step">T<sub>i,series</sub> = ${Ti_parallel.toFixed(2)} + ${Td_parallel.toFixed(2)} = ${Ti_final.toFixed(2)} seconds</p>`;
                    
                    calculationHtml += `<p class="formula">T<sub>d,series</sub> = (T<sub>i,parallel</sub> &times; T<sub>d,parallel</sub>) / (T<sub>i,parallel</sub> + T<sub>d,parallel</sub>)</p>`;
                    calculationHtml += `<p class="calculation-step">T<sub>d,series</sub> = (${Ti_parallel.toFixed(2)} &times; ${Td_parallel.toFixed(2)}) / (${Ti_parallel.toFixed(2)} + ${Td_parallel.toFixed(2)}) = ${Td_final.toFixed(2)} seconds</p>`;

                } else if (controllerForm === 'series' && controllerType === 'pi') {
                    // For PI controller, series form is effectively the same as parallel for tuning purposes (Td=0)
                    Kc_final = Kc_parallel;
                    Ti_final = Ti_parallel;
                    Td_final = 0;
                    calculationHtml += `<p><strong>2. Controller Form (Series for PI):</strong></p>`;
                    calculationHtml += `<p>For a PI controller, the series form is mathematically equivalent to the parallel form as there is no derivative action (T<sub>d</sub> = 0).</p>`;
                    calculationHtml += `<p class="calculation-step">K<sub>c,series</sub> = K<sub>c,parallel</sub> = ${Kc_final.toFixed(3)}</p>`;
                    calculationHtml += `<p class="calculation-step">T<sub>i,series</sub> = T<sub>i,parallel</sub> = ${Ti_final.toFixed(2)} seconds</p>`;
                }
                else {
                    // If parallel form is selected, final parameters are the same as calculated parallel parameters
                    Kc_final = Kc_parallel;
                    Ti_final = Ti_parallel;
                    Td_final = Td_parallel;
                    calculationHtml += `<p><strong>2. Final Parameters (Parallel Form Selected):</strong></p>`;
                    calculationHtml += `<p>Since the Parallel (Standard) controller form was selected, the calculated parallel parameters are the final tuning parameters.</p>`;
                }

                // Display Results in table
                resultTableBody.innerHTML = '';
                addResultRow("Process Gain (K<sub>p</sub>)", Kp.toFixed(2));
                addResultRow("Time Constant (τ)", `${tau.toFixed(1)} seconds`);
                addResultRow("Dead Time (L)", `${L.toFixed(1)} seconds`);
                addResultRow("Tuning Method", tuningMethod === 'ziegler-nichols' ? 'Ziegler-Nichols (Open Loop)' : 'Cohen-Coon');
                addResultRow("Controller Type", controllerType === 'pi' ? 'PI Controller' : 'PID Controller');
                addResultRow("Controller Form", controllerForm === 'parallel' ? 'Parallel (Standard)' : 'Series (Interacting)');
                addResultRow("<strong>Proportional Gain (K<sub>c</sub>)</strong>", `<strong>${Kc_final.toFixed(3)}</strong>`);
                addResultRow("<strong>Integral Time (T<sub>i</sub>)</strong>", `<strong>${Ti_final.toFixed(2)} seconds</strong>`);
                if (controllerType === 'pid') {
                    addResultRow("<strong>Derivative Time (T<sub>d</sub>)</strong>", `<strong>${Td_final.toFixed(2)} seconds</strong>`);
                }
                
                // Update Controller Visualization
                // Normalize values for bar width (example max values)
                const maxKcViz = 5.0; // Max Kp for full bar
                const maxTiViz = 30.0; // Max Ti for full bar
                const maxTdViz = 10.0; // Max Td for full bar

                kcBar.style.width = `${Math.min(100, (Kc_final / maxKcViz) * 100)}%`;
                tiBar.style.width = `${Math.min(100, (Ti_final / maxTiViz) * 100)}%`;
                
                kcDisplay.textContent = Kc_final.toFixed(3);
                tiDisplay.textContent = Ti_final.toFixed(2);

                if (controllerType === 'pid') {
                    tdBar.style.width = `${Math.min(100, (Td_final / maxTdViz) * 100)}%`;
                    tdDisplay.textContent = Td_final.toFixed(2);
                } else {
                    tdDisplay.textContent = 'N/A';
                }


                standardRefText = `
                    <h4>International Standards Compliance & Best Practices:</h4>
                    <p>PID controller tuning is a fundamental aspect of industrial automation and control, widely supported by various international standards and best practices:</p>
                    <ul>
                        <li><strong>IEC 61131-3: Programmable controllers - Part 3: Programming languages.</strong> This standard defines programming languages for programmable controllers, which often implement PID control algorithms in various forms (parallel, series). Proper tuning ensures these algorithms perform effectively.</li>
                        <li><strong>ISA-TR77.60.04-2016: Best Practices for PID Control.</strong> Developed by the International Society of Automation (ISA), this technical report provides guidelines and best practices for implementing and tuning PID controllers in industrial applications, including considerations for different controller forms.</li>
                        <li><strong>ISO 13584-30: Industrial automation systems and integration - Parts library - Part 30: Basic principles for the description of process control systems.</strong> This standard provides a framework for describing process control systems, including the functions and forms of controllers like PID.</li>
                        <li><strong>General Principles of Control Theory:</strong> The Ziegler-Nichols and Cohen-Coon methods are classic and widely taught empirical tuning techniques based on the first-order plus dead-time (FOPDT) process model, a cornerstone of classical control theory. These methods are universally recognized in chemical, mechanical, and electrical engineering disciplines. Understanding parallel vs. series forms is crucial for correct implementation.</li>
                        <li><strong>Industry Best Practices:</strong> Proper PID tuning is critical for process stability, efficiency, and product quality across all industries (e.g., chemical, oil & gas, power generation, manufacturing, food & beverage). These methods provide a starting point for optimizing controller performance. Consideration of tuning objectives (e.g., quarter-decay ratio for setpoint tracking, or smoother response for disturbance rejection) is also vital.</li>
                    </ul>
                    <p>This tool provides calculations based on these widely accepted engineering principles and industry practices. For critical applications, always perform on-site empirical tuning, consider advanced control strategies (such as Model Predictive Control for highly complex systems), and consult with experienced control engineers. Be aware of controller output limits and anti-windup mechanisms for robust performance.</p>
                `;
                standardReference.innerHTML = standardRefText;

                calculationDetailsDiv.innerHTML = calculationHtml; // Insert detailed steps
                resultContainer.style.display = 'block';
                setTimeout(() => {
                    resultContainer.classList.add('show');
                    calculationDetailsDiv.scrollIntoView({ behavior: 'smooth', block: 'start' }); // Scroll to calculation details
                }, 10);
            }

            // Theme switch logic
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }

                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }
        });
    </script>
</body>

</html>
