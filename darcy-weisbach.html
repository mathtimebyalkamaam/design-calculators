<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
     crossorigin="anonymous"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-23Y1V450SR');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Darcy-Weisbach Pressure Drop Calculator - Design Calculators - Mechanical</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- MathJax for LaTeX rendering -->
    <script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="icon" href="/favicon.ico" type="image/x-icon">

    <style>
        /* Basic CSS Variables for a consistent theme (adapted from provided file) */
        :root {
            --primary-color: #2196F3; /* Blue */
            --secondary-color: #1976D2; /* Darker Blue */
            --accent-color: #FFC107; /* Amber */
            --bg-color: #f4f7f6; /* Light Greyish Green */
            --card-bg: #ffffff; /* White */
            --text-color: #333333; /* Dark Grey */
            --header-bg: #2C3E50; /* Dark Blue Grey */
            --footer-bg: #34495E; /* Slightly Lighter Dark Blue Grey */
            --border-color: #cccccc;
            --card-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); /* More pronounced shadow */
            --hover-color: #e2e6ea;
        }

        /* Dark Mode Variables (adapted from provided file) */
        body.dark-mode {
            --primary-color: #5DADE2; /* New primary blue for dark mode */
            --secondary-color: #2874A6; /* New darker blue for dark mode */
            --bg-color: #252D3A; /* Very dark blue-grey */
            --card-bg: #2F3C4C; /* Slightly lighter dark blue-grey */
            --text-color: #E0E6EB; /* Soft off-white */
            --header-bg: #252D3A; /* Darker header */
            --footer-bg: #252D3A; /* Darker footer */
            --border-color: #4C5C70; /* Medium dark grey-blue */
            --card-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            --hover-color: #3A475C; /* Darker hover for dark mode */
        }

        /* General Body Styling (adapted from provided file) */
        body {
            font-family: 'Inter', sans-serif; /* Using Inter as specified */
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at center, var(--bg-color) 0%, rgba(244, 247, 246, 0.8) 100%); /* Subtle gradient */
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s, background-image 0.3s;
        }

        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background-color: var(--header-bg);
            color: white;
            padding: 25px 0; /* Increased padding */
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative; /* For theme toggle positioning */
        }

        header h1 {
            margin: 0;
            font-size: 2.8em; /* Slightly larger */
            color: var(--primary-color);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2); /* Subtle text shadow */
        }

        header .subtitle {
            margin: 8px 0 0; /* Adjusted margin */
            font-size: 1.1em; /* Slightly larger */
            color: #bdc3c7;
        }

        main {
            padding: 30px 0; /* Increased padding */
        }

        .tool-container {
            background-color: var(--card-bg);
            border-radius: 12px; /* More rounded corners */
            padding: 30px; /* Increased padding */
            box-shadow: var(--card-shadow);
            margin-bottom: 25px; /* Adjusted margin */
            transition: transform 0.3s ease-in-out;
        }

        .tool-container:hover {
            transform: translateY(-5px); /* Lift effect on hover */
        }

        .tool-container h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 12px; /* Adjusted padding */
            margin-top: 0;
            margin-bottom: 25px; /* Adjusted margin */
            font-size: 2em; /* Slightly larger */
        }

        .tool-description {
            margin-bottom: 25px; /* Adjusted margin */
            color: var(--text-color);
            font-size: 1.05em; /* Slightly larger font */
        }

        .tool-description ul {
            list-style-type: disc;
            margin-left: 25px; /* Adjusted margin */
            padding-left: 0;
            margin-top: 15px; /* Adjusted margin */
        }

        .tool-description ul li {
            margin-bottom: 8px; /* Adjusted margin */
        }

        .tool-description strong {
            color: var(--primary-color);
        }

        .back-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 12px 20px; /* Adjusted padding */
            border-radius: 8px; /* More rounded corners */
            text-decoration: none;
            margin-bottom: 25px; /* Adjusted margin */
            transition: background-color 0.3s, transform 0.2s ease-in-out;
            font-weight: bold;
        }

        .back-button:hover {
            background-color: var(--secondary-color);
            transform: scale(1.03); /* Slightly increased scale transform */
        }

        /* Theme Toggle (adapted from provided file) */
        .theme-toggle {
            position: absolute;
            top: 25px; /* Adjusted position */
            right: 25px; /* Adjusted position */
            display: flex;
            align-items: center;
        }

        .theme-toggle .light-icon,
        .theme-toggle .dark-icon {
            color: white;
            margin: 0 8px; /* Increased margin */
            font-size: 1.3em; /* Slightly larger icons */
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 65px; /* Slightly wider */
            height: 38px; /* Slightly taller */
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            -webkit-transition: .4s;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 30px; /* Slightly larger */
            width: 30px; /* Slightly larger */
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:focus + .slider {
            box-shadow: 0 0 1px var(--primary-color);
        }

        input:checked + .slider:before {
            -webkit-transform: translateX(26px);
            -ms-transform: translateX(27px); /* Adjusted for wider slider */
            transform: translateX(27px); /* Adjusted for wider slider */
        }

        /* Rounded sliders */
        .slider.round {
            border-radius: 38px; /* Adjusted for taller slider */
        }

        .slider.round:before {
            border-radius: 50%;
        }

        /* Footer Styling (adapted from provided file) */
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 25px 0; /* Increased padding */
            text-align: center;
            box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.2); /* More pronounced shadow */
            margin-top: 40px; /* Increased margin */
        }

        footer .disclaimer h3,
        footer .social-share h3 {
            color: var(--primary-color);
            margin-bottom: 12px; /* Adjusted margin */
            font-size: 1.3em; /* Slightly larger */
        }

        footer .disclaimer p {
            font-size: 0.95em; /* Slightly larger font */
            color: #bdc3c7;
        }

        .social-buttons {
            margin-top: 20px; /* Adjusted margin */
            display: flex;
            justify-content: center;
            gap: 15px; /* Increased gap */
        }

        .social-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px; /* Slightly larger */
            height: 45px; /* Slightly larger */
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.4em; /* Slightly larger icon */
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out; /* Added box-shadow transition */
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .social-btn:hover {
            transform: translateY(-5px) scale(1.1); /* More pronounced hover effect */
            box-shadow: 0 8px 15px rgba(0,0,0,0.3);
        }

        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.reddit { background-color: #FF4500; }
        .social-btn.email { background-color: #7f8c8d; } /* Grey for email */

        /* Styles for Calculator Forms and Results (adapted from provided file) */
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 12px; /* More rounded corners */
            padding: 30px; /* Increased padding */
            margin-top: 25px; /* Adjusted margin */
            box-shadow: var(--card-shadow);
        }
        
        .form-group {
            margin-bottom: 20px; /* Increased margin */
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px; /* Adjusted margin */
            font-weight: bold;
            font-size: 1.05em; /* Slightly larger font */
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px; /* Increased padding */
            border: 1px solid var(--border-color);
            border-radius: 8px; /* More rounded corners */
            background-color: var(--bg-color);
            color: var(--text-color);
            box-sizing: border-box;
            font-size: 1em;
            transition: border-color 0.3s, box-shadow 0.3s;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.08); /* Subtle inset shadow */
        }
        
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb, 33, 150, 243), 0.3); /* Ring focus effect */
            outline: none;
        }
        /* Define primary color RGB for focus effect */
        :root {
            --primary-color-rgb: 33, 150, 243; /* For #2196F3 */
        }
        body.dark-mode {
            --primary-color-rgb: 93, 173, 226; /* For #5DADE2 */
        }

        .form-row {
            display: flex;
            gap: 20px; /* Increased gap */
            flex-wrap: wrap;
        }
        
        .form-row .form-group {
            flex: 1 1 calc(50% - 10px); /* Adjusted for flex-wrap and gap */
            min-width: 280px; /* Ensure inputs don't get too small */
        }
        @media (max-width: 600px) {
            .form-row .form-group {
                flex: 1 1 100%; /* Stack on small screens */
            }
        }

        .calculate-btn {
            background-image: linear-gradient(to right, var(--primary-color), var(--secondary-color)); /* Gradient button */
            color: white;
            border: none;
            padding: 14px 25px; /* Increased padding */
            border-radius: 8px; /* More rounded corners */
            cursor: pointer;
            font-size: 17px; /* Slightly larger font */
            font-weight: bold;
            margin-top: 20px; /* Adjusted margin */
            transition: background-image 0.3s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Shadow for button */
        }
        
        .calculate-btn:hover {
            background-image: linear-gradient(to right, var(--secondary-color), var(--primary-color)); /* Reverse gradient on hover */
            transform: translateY(-3px) scale(1.02); /* Lift and scale effect */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        .result-container {
            margin-top: 40px; /* Adjusted margin */
            padding: 30px; /* Increased padding */
            border-radius: 12px; /* More rounded corners */
            background-color: var(--card-bg);
            box-shadow: var(--card-shadow);
            display: block; /* Changed to block for initial display */
            opacity: 0;
            transition: opacity 0.6s ease-out;
            pointer-events: none; /* Disable interaction until shown */
        }
        
        .result-container.show {
            opacity: 1;
            pointer-events: auto; /* Enable interaction when shown */
        }

        .result-container h3 {
            color: var(--primary-color);
            margin-bottom: 20px; /* Adjusted margin */
            font-size: 1.8em; /* Slightly larger */
        }
        
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px; /* Adjusted margin */
        }
        
        .result-table th, .result-table td {
            padding: 15px; /* Increased padding */
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .result-table th {
            background-color: var(--hover-color);
            font-weight: bold;
            font-size: 1.1em;
        }
        .result-table tr:last-child td {
            border-bottom: none; /* No border for the last row */
        }

        .standard-reference {
            margin-top: 25px; /* Adjusted margin */
            font-style: italic;
            font-size: 0.95rem; /* Slightly larger font */
            line-height: 1.5;
            padding: 10px;
            background-color: var(--bg-color);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .info-icon {
            color: var(--primary-color);
            margin-left: 8px; /* Adjusted margin */
            cursor: help;
            font-size: 1em;
        }
        
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px; /* Slightly wider */
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px; /* More rounded */
            padding: 8px; /* Adjusted padding */
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px; /* Adjusted for wider tooltip */
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85em; /* Smaller font for tooltip */
        }
        .tooltip .tooltiptext::after { /* Tooltip arrow */
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Custom message box style (adapted from provided file) */
        #custom-message-box {
            position: fixed;
            top: 30px; /* Adjusted position */
            left: 50%;
            transform: translateX(-50%);
            padding: 18px 30px; /* Increased padding */
            border-radius: 10px; /* More rounded */
            box-shadow: 0 6px 15px rgba(0,0,0,0.3); /* More pronounced shadow */
            z-index: 1000;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            font-size: 1.1em;
        }

        /* Styles for calculation details (adapted from provided file) */
        #calculation-details {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px; /* More rounded */
            padding: 20px; /* Increased padding */
            margin-bottom: 25px; /* Adjusted margin */
            font-size: 0.98em; /* Slightly larger font */
        }
        #calculation-details h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px; /* Adjusted margin */
            font-size: 1.3em;
        }
        #calculation-details p.formula {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            font-size: 1.2em; /* Slightly larger formula font */
            text-align: center;
            padding: 12px 0; /* Adjusted padding */
            background-color: var(--hover-color);
            border-radius: 6px;
            margin: 15px 0; /* Adjusted margin */
            overflow-x: auto;
            border: 1px dashed var(--border-color); /* Dashed border for formulas */
        }
        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace;
            background-color: var(--hover-color);
            padding: 8px 12px; /* Adjusted padding */
            border-radius: 5px;
            margin-bottom: 8px; /* Adjusted margin */
            font-size: 0.95em;
        }
        #calculation-details ul {
            list-style-type: disc;
            margin-left: 25px; /* Adjusted margin */
            padding-left: 0;
        }
        #calculation-details ul li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Design Calculators - Mechanical</h1>
            <p class="subtitle">Smart Tools for Modern Mechanical Engineers</p>
            <div class="theme-toggle">
                <span class="light-icon"><i class="fas fa-sun"></i></span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
                <span class="dark-icon"><i class="fas fa-moon"></i></span>
            </div>
        </div>
    </header>

    <main class="container">
        <a href="indexMech.html" class="back-button">
            <i class="fas fa-arrow-left"></i> Back to Tools
        </a>
        
        <div class="tool-container">
            <h2>Darcy-Weisbach Pressure Drop Calculator</h2>
            
            <div class="tool-description">
                <p>This calculator determines the pressure drop due to friction in a pipe using the **Darcy-Weisbach equation**. This fundamental equation in fluid dynamics accounts for various factors affecting fluid flow resistance, including pipe dimensions, fluid properties, flow velocity, and pipe surface roughness.</p>
                <p>It is crucial for designing piping systems, selecting appropriate pumps, and ensuring efficient fluid transport in various engineering applications.</p>
            </div>
        
            <div class="calculator-form">
                <form id="darcy-weisbach-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fluid-type">Fluid Type <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select the type of fluid. Its density and viscosity will be used in calculations.</span></span></label>
                            <select id="fluid-type" required>
                                <option value="water">Water</option>
                                <option value="air">Air</option>
                                <option value="oil">Engine Oil (SAE 30)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="fluid-temperature">Fluid Temperature (&#8451;) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Enter the fluid's operating temperature. This affects its density and viscosity.</span></span></label>
                            <input type="number" id="fluid-temperature" step="0.1" value="20" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="pipe-diameter">Pipe Internal Diameter (mm) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The internal diameter of the pipe.</span></span></label>
                            <input type="number" id="pipe-diameter" min="1" step="0.1" value="50" required>
                        </div>
                        <div class="form-group">
                            <label for="pipe-length">Pipe Length (m) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The total length of the pipe section.</span></span></label>
                            <input type="number" id="pipe-length" min="0.1" step="0.1" value="100" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="pipe-material">Pipe Material <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The material of the pipe, affecting its surface roughness.</span></span></label>
                            <select id="pipe-material" required>
                                <option value="steel">Commercial Steel</option>
                                <option value="cast_iron">Cast Iron</option>
                                <option value="pvc">PVC</option>
                                <option value="copper">Copper</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="velocity">Average Fluid Velocity (m/s) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The average velocity of the fluid flowing through the pipe.</span></span></label>
                            <input type="number" id="velocity" min="0.0001" step="0.0001" value="1.0" required>
                        </div>
                    </div>

                    <button type="button" id="calculate-darcy-btn" class="calculate-btn">Calculate Pressure Drop</button>
                </form>
            </div>
            
            <div id="result-container" class="result-container">
                <h3>Calculation Results</h3>
                <div id="calculation-details">
                    <!-- Calculation steps will be inserted here -->
                </div>
                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body">
                        <!-- Results will be dynamically inserted here -->
                    </tbody>
                </table>
                <div class="standard-reference" id="standard-reference">
                    <!-- Standard reference text will be inserted here -->
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <div class="disclaimer">
                <h3>Disclaimer</h3>
                <p>To ensure accuracy and reliability, always verify the results obtained from these tools against the relevant engineering standards and guidelines.</p>
            </div>
            <div class="credit">
                <p>Created by A Sharma</p>
            </div>
            <div class="social-share">
                <h3>Share This Site</h3>
                <div class="social-buttons">
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in&title=Design Calculators - Mechanical" target="_blank" class="social-btn linkedin">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" class="social-btn facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?text=Check out this amazing Design Calculators - Mechanical!&url=https://designcalculators.co.in" target="_blank" class="social-btn twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text=Check out this amazing Design Calculators - Mechanical! https://designcalculators.co.in" target="_blank" class="social-btn whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.reddit.com/submit?url=https://designcalculators.co.in&title=Design Calculators - Mechanical" target="_blank" class="social-btn reddit">
                        <i class="fab fa-reddit"></i>
                    </a>
                    <a href="mailto:?subject=Check out Design Calculators - Mechanical!&body=I found this amazing Darcy-Weisbach Pressure Drop Calculator and other mechanical tools: https://designcalculators.co.in" class="social-btn email">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const calculateBtn = document.getElementById('calculate-darcy-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const standardReference = document.getElementById('standard-reference');
            const calculationDetailsDiv = document.getElementById('calculation-details');

            const fluidTypeSelect = document.getElementById('fluid-type');
            const fluidTemperatureInput = document.getElementById('fluid-temperature');
            const pipeDiameterInput = document.getElementById('pipe-diameter');
            const pipeLengthInput = document.getElementById('pipe-length');
            const pipeMaterialSelect = document.getElementById('pipe-material');
            const velocityInput = document.getElementById('velocity');

            // Data for fluid properties at various temperatures (density in kg/m3, dynamic viscosity in Pa·s)
            // Simplified data points for linear interpolation. For high precision, external data is needed.
            const fluidPropertiesData = {
                'water': {
                    density: { value: 998, unit: 'kg/m3' }, // Simplified: assume constant density for now in this calculator
                    viscosity: [ // [temperature, viscosity] pairs
                        [0, 0.00179], [10, 0.001307], [20, 0.001002], [30, 0.000797],
                        [40, 0.000653], [50, 0.000547], [60, 0.000467], [70, 0.000404],
                        [80, 0.000355], [90, 0.000316], [100, 0.000282]
                    ]
                },
                'air': {
                    density: { value: 1.204, unit: 'kg/m3' }, // at 20°C, 1 atm
                    viscosity: [
                        [0, 0.0000171], [10, 0.0000176], [20, 0.00001825], [30, 0.0000187],
                        [40, 0.0000193], [50, 0.0000198], [60, 0.0000203], [70, 0.0000208],
                        [80, 0.0000213], [90, 0.0000218], [100, 0.0000223]
                    ]
                },
                'oil': { // Engine Oil (SAE 30). Highly temperature dependent, simplified to base 20C value.
                    // User should consult specific oil charts for accuracy.
                    density: { value: 880, unit: 'kg/m3' },
                    viscosity: [ // Placeholder data, strong warning needed for real use
                        [20, 0.29] // At 20°C
                    ]
                }
            };

            // Data for pipe roughness (epsilon in meters)
            const pipeRoughness = {
                'steel': 0.000045, // Commercial steel
                'cast_iron': 0.00026, // Cast iron
                'pvc': 0.0000015, // PVC (smooth)
                'copper': 0.0000015, // Copper (smooth)
            };

            // Function to linearly interpolate viscosity based on temperature
            function interpolateViscosity(fluidType, temperature) {
                const data = fluidPropertiesData[fluidType].viscosity;

                if (data.length === 1 && fluidType === 'oil') {
                    // For oil, only one data point is provided, so return it directly.
                    // A warning will be issued later if temperature deviates.
                    return data[0][1]; 
                }

                // Ensure temperature is within the range of the data points
                if (temperature <= data[0][0]) {
                    return data[0][1];
                }
                if (temperature >= data[data.length - 1][0]) {
                    return data[data.length - 1][1];
                }

                // Find the two data points that bracket the given temperature
                for (let i = 0; i < data.length - 1; i++) {
                    const temp1 = data[i][0];
                    const visc1 = data[i][1];
                    const temp2 = data[i + 1][0];
                    const visc2 = data[i + 1][1];

                    if (temperature >= temp1 && temperature <= temp2) {
                        // Perform linear interpolation
                        return visc1 + (visc2 - visc1) * (temperature - temp1) / (temp2 - temp1);
                    }
                }
                return data[0][1]; // Should not happen if checks above are correct
            }

            // Function to display custom messages (replaces alert())
            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    document.body.appendChild(messageBox);
                }

                messageBox.textContent = message;
                if (type === "error") {
                    messageBox.style.backgroundColor = '#dc3545'; /* Red */
                    messageBox.style.color = 'white';
                } else if (type === "warning") {
                    messageBox.style.backgroundColor = '#ffc107'; /* Amber */
                    messageBox.style.color = '#333';
                } else {
                    messageBox.style.backgroundColor = '#28a745'; /* Green */
                    messageBox.style.color = 'white';
                }
                messageBox.style.opacity = 1;

                // Hide after 5 seconds
                setTimeout(() => {
                    messageBox.style.opacity = 0;
                }, 5000);
            }

            calculateBtn.addEventListener('click', function() {
                // Get input values
                const fluidType = fluidTypeSelect.value;
                const fluidTemperature = parseFloat(fluidTemperatureInput.value);
                let diameter_mm = parseFloat(pipeDiameterInput.value);
                let length_m = parseFloat(pipeLengthInput.value);
                const pipeMaterial = pipeMaterialSelect.value;
                let velocity_ms = parseFloat(velocityInput.value);

                // Input validation
                if (isNaN(diameter_mm) || diameter_mm <= 0) {
                    displayMessage("Please enter a valid positive value for Pipe Internal Diameter.", "error");
                    return;
                }
                if (isNaN(length_m) || length_m <= 0) {
                    displayMessage("Please enter a valid positive value for Pipe Length.", "error");
                    return;
                }
                if (isNaN(velocity_ms) || velocity_ms <= 0) {
                    displayMessage("Please enter a valid positive value for Average Fluid Velocity.", "error");
                    return;
                }
                if (isNaN(fluidTemperature)) {
                    displayMessage("Please enter a valid number for Fluid Temperature.", "error");
                    return;
                }

                // Convert diameter to meters
                const diameter_m = diameter_mm / 1000; // D in meters

                // Determine fluid properties based on selected fluid type AND temperature
                const density = fluidPropertiesData[fluidType].density.value;
                const viscosity = interpolateViscosity(fluidType, fluidTemperature);

                // Specific warning for oil if temperature deviates significantly
                if (fluidType === 'oil') {
                    if (Math.abs(fluidTemperature - 20) > 1) { // Check if temperature is not around 20°C
                        displayMessage(`Warning: Oil viscosity is highly temperature-dependent. The calculator uses a fixed value for Engine Oil (SAE 30) at 20°C (${fluidPropertiesData[fluidType].viscosity[0][1].toExponential(2)} Pa·s). For accurate results at ${fluidTemperature}°C, please consult specific oil property tables.`, "warning");
                    }
                } else {
                    // Check if temperature is outside the hardcoded range for water/air
                    const minTemp = fluidPropertiesData[fluidType].viscosity[0][0];
                    const maxTemp = fluidPropertiesData[fluidType].viscosity[fluidPropertiesData[fluidType].viscosity.length - 1][0];
                    if (fluidTemperature < minTemp || fluidTemperature > maxTemp) {
                        displayMessage(`Warning: Fluid properties for ${fluidType.charAt(0).toUpperCase() + fluidType.slice(1)} are estimated outside the typical range (${minTemp}°C to ${maxTemp}°C). For higher accuracy at ${fluidTemperature}°C, consult comprehensive fluid property tables.`, "warning");
                    }
                }

                // Pipe roughness
                const roughness_e = pipeRoughness[pipeMaterial]; // epsilon in meters

                let calculationHtml = '<h4>Detailed Calculation Steps:</h4>';

                // Step 1: Calculate Reynolds Number (Re)
                const reynoldsNumber = (density * velocity_ms * diameter_m) / viscosity;
                let flowRegime = '';

                calculationHtml += `<p><strong>1. Calculate Reynolds Number:</strong></p>`;
                calculationHtml += `<p>The Reynolds Number ($$Re$$) is a dimensionless quantity that helps predict flow patterns in fluid dynamics. It is the ratio of inertial forces to viscous forces within a fluid which is subjected to relative internal movement due to different fluid velocities. At low Reynolds numbers, flows tend to be laminar (smooth, constant motion), while at high Reynolds numbers, flows tend to be turbulent (chaotic, eddying). The critical Reynolds numbers for internal pipe flow are approximately 2000 for the transition from laminar to transitional, and 4000 for the transition from transitional to turbulent.</p>`;
                calculationHtml += `<p class="formula">$$Re = \\frac{\\rho V D}{\\mu}$$</p>`;
                calculationHtml += `<ul>
                    <li>Fluid Type: ${fluidType.charAt(0).toUpperCase() + fluidType.slice(1)}</li>
                    <li>Actual Fluid Temperature: ${fluidTemperature}&#8451;</li>
                    <li>Density ($\\rho$) = ${density} kg/m<sup>3</sup></li>
                    <li>Average Fluid Velocity (V) = ${velocity_ms.toFixed(4)} m/s</li>
                    <li>Pipe Internal Diameter (D) = ${diameter_m.toFixed(4)} m</li>
                    <li>Dynamic Viscosity ($\\mu$) = ${viscosity.toExponential(3)} Pa&#xB7;s (Adjusted for temperature)</li>
                </ul>`;
                calculationHtml += `<p class="calculation-step">
                    $$Re = \\frac{${density} \\times ${velocity_ms.toFixed(4)} \\times ${diameter_m.toFixed(4)}}{${viscosity.toExponential(3)}} = ${reynoldsNumber.toExponential(4)}$$
                </p>`;

                // Step 2: Determine Flow Regime
                if (reynoldsNumber < 2000) {
                    flowRegime = 'Laminar';
                } else if (reynoldsNumber > 4000) {
                    flowRegime = 'Turbulent';
                } else {
                    flowRegime = 'Transitional';
                }
                calculationHtml += `<p><strong>2. Determine Flow Regime:</strong></p>`;
                calculationHtml += `<p>Based on the calculated Reynolds Number, the flow regime is classified as follows:</p>`;
                calculationHtml += `<ul>
                    <li>If $$Re < 2000$$: <strong>Laminar Flow</strong> (Fluid flows in parallel layers without disruption)</li>
                    <li>If $$2000 \\le Re \\le 4000$$: <strong>Transitional Flow</strong> (Unpredictable, shifting between laminar and turbulent)</li>
                    <li>If $$Re > 4000$$: <strong>Turbulent Flow</strong> (Chaotic and irregular flow with eddies)</li>
                </ul>`;
                calculationHtml += `<p class="calculation-step">
                    Calculated Reynolds Number: ${reynoldsNumber.toExponential(4)}
                </p>`;
                calculationHtml += `<p class="calculation-step">
                    Flow Regime: <strong>${flowRegime}</strong>
                </p>`;
                
                // Step 3: Calculate Friction Factor (f)
                let frictionFactor;
                let frictionFormula = '';
                let colebrookDetails = '';

                calculationHtml += `<p><strong>3. Calculate Friction Factor:</strong></p>`;
                if (reynoldsNumber < 2000) { // Laminar flow
                    frictionFactor = 64 / reynoldsNumber;
                    frictionFormula = `$$f = \\frac{64}{Re}$$ (For Laminar Flow)`;
                    calculationHtml += `<p>For laminar flow, the friction factor is solely dependent on the Reynolds number.</p>`;
                } else { // Turbulent or Transitional flow (using Swamee-Jain approximation)
                    const relativeRoughness = roughness_e / diameter_m; // ε/D
                    frictionFactor = 0.25 / Math.pow(Math.log10((relativeRoughness / 3.7) + (5.74 / Math.pow(reynoldsNumber, 0.9))), 2);
                    frictionFormula = `$$f = \\frac{0.25}{\\left[\\log_{10}\\left(\\frac{\\epsilon}{3.7D} + \\frac{5.74}{Re^{0.9}}\\right)\\right]^2}$$ (Swamee-Jain equation for Turbulent Flow)`;
                    colebrookDetails = `This uses the Swamee-Jain equation, an explicit approximation of the implicit Colebrook-White equation, which is widely used for turbulent flow in pipes.`;
                    calculationHtml += `<p>For turbulent flow, the friction factor depends on both the Reynolds number and the relative roughness of the pipe. ${colebrookDetails}</p>`;
                    calculationHtml += `<ul>
                        <li>Pipe Roughness ($\\epsilon$) = ${roughness_e.toExponential(2)} m (${pipeMaterial})</li>
                        <li>Relative Roughness ($\\epsilon$/D) = ${relativeRoughness.toExponential(2)}</li>
                    </ul>`;
                }
                
                calculationHtml += `<p class="formula">${frictionFormula}</p>`;
                calculationHtml += `<p class="calculation-step">Friction Factor (f) = ${frictionFactor.toFixed(6)}</p>`;


                // Step 4: Calculate Pressure Drop using Darcy-Weisbach Equation
                const pressureDrop_pa = frictionFactor * (length_m / diameter_m) * (density * Math.pow(velocity_ms, 2) / 2);
                calculationHtml += `<p><strong>4. Calculate Pressure Drop using Darcy-Weisbach Equation:</strong></p>`;
                calculationHtml += `<p>The Darcy-Weisbach equation calculates the major head loss (pressure drop) due to friction. It is a fundamental equation in pipe flow analysis.</p>`;
                calculationHtml += `<p class="formula">$$\\Delta P = f \\frac{L}{D} \\frac{\\rho V^2}{2}$$</p>`;
                calculationHtml += `<ul>
                    <li>Friction Factor (f) = ${frictionFactor.toFixed(6)}</li>
                    <li>Pipe Length (L) = ${length_m} m</li>
                    <li>Pipe Internal Diameter (D) = ${diameter_m.toFixed(4)} m</li>
                    <li>Density ($\\rho$) = ${density} kg/m<sup>3</sup></li>
                    <li>Velocity (V) = ${velocity_ms.toFixed(4)} m/s</li>
                </ul>`;
                calculationHtml += `<p class="calculation-step">
                    $$\\Delta P = ${frictionFactor.toFixed(6)} \\times \\frac{${length_m}}{${diameter_m.toFixed(4)}} \\times \\frac{${density} \\times ${velocity_ms.toFixed(4)}^2}{2} = ${pressureDrop_pa.toFixed(2)} \\text{ Pa}$$
                </p>`;
                
                calculationDetailsDiv.innerHTML = calculationHtml;
                // Trigger MathJax to render the new content
                if (window.MathJax) {
                    window.MathJax.typesetPromise([calculationDetailsDiv]);
                }

                // Display summarized results in the table
                resultTableBody.innerHTML = ''; // Clear previous results
                
                function addResultRow(parameter, value) {
                    const row = resultTableBody.insertRow();
                    const paramCell = row.insertCell();
                    const valueCell = row.insertCell();
                    paramCell.textContent = parameter;
                    valueCell.textContent = value;
                }

                addResultRow("Fluid Type", fluidType.charAt(0).toUpperCase() + fluidType.slice(1));
                addResultRow("Fluid Temperature", `${fluidTemperature}°C`);
                addResultRow("Pipe Material", pipeMaterial.replace('_', ' ').split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' '));
                addResultRow("Pipe Internal Diameter", `${diameter_mm} mm`);
                addResultRow("Pipe Length", `${length_m} m`);
                addResultRow("Average Fluid Velocity", `${velocity_ms.toFixed(4)} m/s`);
                addResultRow("Fluid Density", `${density.toFixed(3)} kg/m³`);
                addResultRow("Fluid Viscosity", `${viscosity.toExponential(3)} Pa·s`);
                addResultRow("Pipe Roughness", `${roughness_e.toExponential(2)} m`);
                addResultRow("Reynolds Number (Re)", `${reynoldsNumber.toExponential(4)}`);
                addResultRow("Flow Regime", flowRegime);
                addResultRow("Friction Factor (f)", frictionFactor.toFixed(6));
                addResultRow("Pressure Drop (ΔP)", `${(pressureDrop_pa / 1000).toFixed(2)} kPa (${pressureDrop_pa.toFixed(2)} Pa)`);

                standardReference.innerHTML = "The Darcy-Weisbach equation is a widely accepted empirical equation for calculating pressure drop due to friction in pipes. Reynolds number classification and friction factor determination (using Swamee-Jain approximation for turbulent flow and Hagen-Poiseuille for laminar flow) adhere to international fluid mechanics standards. Always refer to international mechanical engineering handbooks or standards (e.g., ISO, ASME) for definitive requirements and more complex scenarios (e.g., minor losses, non-Newtonian fluids, compressible flow).";
                
                resultContainer.style.display = 'block'; // Ensure it's block so opacity works
                setTimeout(() => { // Small delay to ensure display:block is applied before transition
                    resultContainer.classList.add('show');
                }, 10); 
                
                resultContainer.scrollIntoView({ behavior: 'smooth' }); // Scroll to results
                displayMessage("Calculation completed successfully!", "info");
            });

            // Theme switch logic (adapted from provided file)
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }

                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }
        });
    </script>
</body>

</html>


