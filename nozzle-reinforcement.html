<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Retained original title -->
    <title>Nozzle Reinforcement Calculator - Design Calculators - Mechanical</title>
    
    <!-- New meta tags, scripts, and links -->
    <meta name="description" content="Professional Nozzle Reinforcement Calculator as per ASME VIII Div 1 (UG-37, UG-40, UG-41). Calculates required area (A_req) and all available areas (A1, A2, A3, A4, A5).">
    <meta name="keywords" content="nozzle reinforcement, asme viii div 1, ug-37, area replacement, pressure vessel design, mechanical calculator, a1 a2 a3 a4 a5">
    <meta name="author" content="Design Calculators">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://designcalculators.co.in/nozzle-reinforcement.html" />

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780" crossorigin="anonymous"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-23Y1V450SR');
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- MathJax script -->
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- Retained original MathJax configuration -->
    <script>
        MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']],
                processEscapes: true
            }
        };
    </script>

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <!-- New unified CSS -->
    <style>
        @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
        from { opacity: 0; transform: translateX(-20px); }
        to { opacity: 1; transform: translateX(0); }
        }

        @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
        }

        @keyframes shimmer {
        0% { background-position: -1000px 0; }
        100% { background-position: 1000px 0; }
        }

        :root {
        --primary-color: #1E3A8A;
        --secondary-color: #2563EB;
        --accent-color: #F59E0B;
        --success-color: #10B981;
        --error-color: #EF4444; /* Added for consistency */
        --bg-color: #F8FAFC;
        --card-bg: #FFFFFF;
        --text-color: #4B5563;
        --heading-color: #111827;
        --footer-bg: #0F172A;
        --border-color: #E2E8F0;
        --gradient-primary: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        --gradient-dark: linear-gradient(135deg, #0F172A, #1E293B);
        --card-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        --primary-color-rgb: 30, 58, 138;
        }

        body.dark-mode {
        --primary-color: #10B981;
        --secondary-color: #34D399;
        --bg-color: #0F172A;
        --card-bg: #1E293B;
        --text-color: #CBD5E1;
        --heading-color: #F1F5F9;
        --footer-bg: #020617;
        --border-color: #334155;
        --success-color: #10B981;
        --error-color: #F44336;
        --primary-color-rgb: 16, 185, 129;
        }

        * { box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
        font-family: 'Inter', sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        line-height: 1.8;
        transition: background-color 0.3s, color 0.3s;
        margin: 0;
        padding: 0;
        }

        .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; }

        /* HEADER */
        .header {
        background: var(--gradient-primary);
        color: white;
        padding: 24px 0;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        animation: slideIn 0.5s ease;
        }

        .navbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        }

        .logo-container {
        display: flex;
        align-items: center;
        gap: 16px;
        text-decoration: none;
        color: white;
        }

        .logo-text {
        font-size: 1.75rem;
        font-weight: 800;
        font-family: 'Montserrat', sans-serif;
        }

        .nav-links {
        display: flex;
        gap: 24px;
        list-style: none;
        margin: 0;
        padding: 0;
        }

        .nav-links a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s;
        }

        .nav-links a:hover {
        color: var(--accent-color);
        transform: translateY(-2px);
        }

        .theme-toggle {
        display: flex;
        align-items: center;
        gap: 12px;
        }

        .theme-toggle .icon {
        color: white;
        font-size: 1.2rem;
        }

        .switch {
        position: relative;
        width: 56px;
        height: 30px;
        }

        .switch input {
        opacity: 0;
        width: 0;
        height: 0;
        }

        .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0,0,0,0.2);
        transition: .4s;
        border-radius: 30px;
        }

        .slider:before {
        position: absolute;
        content: "";
        height: 22px;
        width: 22px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
        }

        input:checked + .slider {
        background-color: var(--accent-color);
        }

        input:checked + .slider:before {
        transform: translateX(26px);
        }

        main {
        padding: 40px 0;
        max-width: 1000px;
        margin: 0 auto;
        }

        .tool-container {
        background-color: var(--card-bg);
        border-radius: 12px;
        padding: 30px;
        box-shadow: var(--card-shadow);
        margin-bottom: 30px;
        animation: fadeInUp 0.6s ease;
        }

        .tool-container h2 {
        color: var(--primary-color);
        border-bottom: 3px solid var(--primary-color);
        padding-bottom: 15px;
        margin-top: 0;
        margin-bottom: 25px;
        font-family: 'Montserrat', sans-serif;
        font-size: 1.8rem;
        }
        
        .tool-container h3 {
            color: var(--primary-color);
            margin-top: 25px;
        }
        
        .tool-container h4 {
            color: var(--secondary-color);
            margin-top: 20px;
        }

        .tool-description {
        margin-bottom: 25px;
        font-size: 1rem;
        line-height: 1.8;
        }
        
        .tool-description ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
            margin-top: 15px;
        }
        .tool-description ul li {
            margin-bottom: 8px;
        }
        
        .tool-description strong {
            color: var(--primary-color);
        }

        .calculator-form {
        background-color: var(--card-bg);
        border-radius: 12px;
        padding: 25px;
        margin-top: 25px;
        box-shadow: var(--card-shadow);
        }

        .form-group {
        margin-bottom: 20px;
        animation: slideIn 0.5s ease;
        }

        .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--heading-color);
        }

        .form-group input, .form-group select {
        width: 100%;
        padding: 12px;
        border: 2px solid var(--border-color);
        border-radius: 6px;
        background-color: var(--bg-color);
        color: var(--text-color);
        font-size: 1rem;
        transition: all 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 12px rgba(var(--primary-color-rgb), 0.25);
        outline: none;
        transform: scale(1.02);
        }

        .form-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        }

        .button-group {
        display: flex;
        gap: 15px;
        margin-top: 20px;
        flex-wrap: wrap;
        }

        .calculate-btn, .reset-btn, .download-btn {
        padding: 14px 28px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 700;
        transition: all 0.3s;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        }

        .calculate-btn {
        background: var(--gradient-primary);
        color: white;
        flex: 1;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(var(--primary-color-rgb), 0.3);
        }

        .calculate-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(var(--primary-color-rgb), 0.4);
        animation: pulse 0.6s ease;
        }

        .reset-btn {
        background: linear-gradient(135deg, #EF4444, #DC2626);
        color: white;
        box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .reset-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(239, 68, 68, 0.4);
        }

        .download-btn {
        background: linear-gradient(135deg, #10B981, #059669);
        color: white;
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .download-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);
        }

        .result-container {
        margin-top: 40px;
        padding: 30px;
        border-radius: 12px;
        background-color: var(--card-bg);
        box-shadow: var(--card-shadow);
        display: none;
        opacity: 0;
        transform: translateY(20px);
        transition: all 0.6s ease;
        }

        .result-container.show {
        display: block;
        opacity: 1;
        transform: translateY(0);
        }

        .result-container h3 {
        color: var(--primary-color);
        margin-bottom: 25px;
        font-family: 'Montserrat', sans-serif;
        font-size: 1.6rem;
        }

        #calculation-details {
        background-color: var(--bg-color);
        border: 2px solid var(--border-color);
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 25px;
        animation: fadeInUp 0.7s ease;
        overflow-x: auto; /* Allow horizontal scrolling for formulas */
        }

        #calculation-details h4 {
        color: var(--secondary-color);
        margin-top: 0;
        margin-bottom: 15px;
        font-size: 1.2rem;
        }

        #calculation-details p.formula {
        font-family: 'Times New Roman', serif;
        font-size: 1.1rem;
        text-align: center;
        padding: 15px;
        background: linear-gradient(90deg, transparent, rgba(var(--border-color), 0.5), transparent);
        border-radius: 6px;
        margin: 15px 0;
        overflow-x: auto;
        white-space: nowrap;
        }
        
        body.dark-mode #calculation-details p.formula {
             background: linear-gradient(90deg, transparent, rgba(var(--border-color), 0.1), transparent);
        }

        #calculation-details p.calculation-step {
        font-family: 'Courier New', monospace;
        background-color: var(--card-bg);
        padding: 10px 12px;
        border-radius: 4px;
        border-left: 4px solid var(--secondary-color);
        margin-bottom: 10px;
        word-wrap: break-word;
        white-space: nowrap; /* Prevent wrapping */
        }

        #calculation-details ul {
        list-style-type: disc;
        margin-left: 25px;
        padding-left: 0;
        }
        
        #calculation-details ul li {
            margin-bottom: 5px;
        }

        .result-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        border-radius: 8px;
        overflow: hidden;
        animation: fadeInUp 0.8s ease;
        }

        .result-table th, .result-table td {
        padding: 14px;
        text-align: left;
        border-bottom: 1px solid var(--border-color);
        }

        .result-table th {
        background: var(--gradient-primary);
        color: white;
        font-weight: 700;
        }

        .result-table tr:nth-child(even) {
        background-color: rgba(0,0,0,0.02);
        }
        
        body.dark-mode .result-table tr:nth-child(even) {
            background-color: rgba(255,255,255,0.02);
        }

        .result-table tr:hover {
        background-color: rgba(37, 99, 235, 0.1);
        transform: scale(1.01);
        transition: all 0.3s;
        }
        
        body.dark-mode .result-table tr:hover {
            background-color: rgba(16, 185, 129, 0.1);
        }

        .standard-reference {
        margin-top: 25px;
        font-style: italic;
        font-size: 0.95rem;
        padding: 15px;
        background: linear-gradient(135deg, rgba(245,158,11,0.1), rgba(245,158,11,0.05));
        border-left: 4px solid var(--accent-color);
        border-radius: 6px;
        line-height: 1.7;
        animation: fadeInUp 0.9s ease;
        }

        .info-icon {
        color: var(--primary-color);
        margin-left: 6px;
        cursor: help;
        transition: transform 0.3s;
        }

        .info-icon:hover {
        transform: scale(1.2) rotate(10deg);
        }

        .tooltip {
        position: relative;
        display: inline-block;
        }

        .tooltip .tooltiptext {
        visibility: hidden;
        width: 260px;
        background-color: #333;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 10px;
        position: absolute;
        z-index: 1000;
        bottom: 130%;
        left: 50%;
        margin-left: -130px;
        opacity: 0;
        transition: opacity 0.3s;
        font-size: 0.85rem;
        white-space: normal;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
        }

        #custom-message-box {
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%) translateY(-100px);
        padding: 16px 28px;
        border-radius: 8px;
        box-shadow: 0 6px 16px rgba(0,0,0,0.25);
        z-index: 10000;
        font-weight: 600;
        color: white;
        opacity: 0;
        transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        #custom-message-box.info { background-color: var(--success-color); }
        #custom-message-box.error { background-color: var(--error-color); }
        #custom-message-box.warning { background-color: var(--accent-color); color: #333; }


        #custom-message-box.show {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
        }

        /* FOOTER */
        footer {
        background: var(--gradient-dark);
        color: #CBD5E1;
        padding: 50px 0 20px 0;
        margin-top: 40px; /* Added margin-top */
        }

        .footer-content {
        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 40px;
        margin-bottom: 30px;
        }

        .footer-col {
        flex: 1;
        min-width: 200px;
        }

        .footer-col h4 {
        color: white;
        margin-bottom: 15px;
        font-weight: 700;
        }

        .footer-col ul {
        list-style: none;
        padding: 0;
        margin: 0;
        }

        .footer-col ul li {
        margin-bottom: 10px;
        }

        .footer-col a {
        color: #CBD5E1;
        text-decoration: none;
        transition: all 0.3s;
        }

        .footer-col a:hover {
        color: var(--accent-color);
        transform: translateX(3px);
        }

        .footer-disclaimer {
        text-align: center;
        margin: 30px auto;
        padding-top: 25px;
        border-top: 1px solid #334155;
        max-width: 800px;
        font-size: 0.9rem;
        line-height: 1.6;
        }

        .footer-bottom {
        text-align: center;
        padding-top: 20px;
        font-size: 0.9rem;
        color: #94A3B8;
        }

        .creator-name {
        color: var(--secondary-color);
        font-weight: bold;
        }

        .social-buttons {
        display: flex;
        gap: 12px;
        margin-top: 15px;
        }

        .social-btn {
        width: 40px;
        height: 40px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: white;
        border-radius: 50%;
        text-decoration: none;
        transition: all 0.3s;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .social-btn:hover {
        transform: translateY(-4px) scale(1.1);
        box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }

        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.youtube { background-color: #FF0000; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.email { background-color: #7f8c8d; } /* Added from original file */


        @media (max-width: 768px) {
        .navbar { flex-direction: column; gap: 20px; }
        .nav-links { flex-direction: column; gap: 12px; text-align: center; }
        .form-row { grid-template-columns: 1fr; }
        .button-group { flex-direction: column; }
        .calculate-btn, .reset-btn, .download-btn { width: 100%; }
        .footer-content { flex-direction: column; }
        }
    </style>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- NEW HEADER -->
    <header class="header">
        <div class="header-bg-animation"></div>
        <div class="container">
            <nav class="navbar">
                <a href="/" class="logo-container">
                    <img src="logo.png" alt="Design Calculators Logo" class="logo">
                    <span class="logo-text">Design Calculators</span>
                </a>

                <div class="nav-menu">
                    <button class="mobile-menu-toggle" aria-label="Toggle menu">
                        <i class="fas fa-bars"></i>
                    </button>

                    <ul class="nav-links">
                        <li><a href="/index.html">Home</a></li>
                        
    <li class="dropdown">
        <a href="/indexele.html" class="dropdown-toggle">Electrical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/arcflash.html">Arc Flash Calculator</a><a href="/breaker-sizing.html">Breaker Sizing</a><a href="/cable-thermal-rating.html">Cable Ampacity</a><a href="/comm-cable-loss.html">Comm Cable Loss</a><a href="/earth-conductor-size.html">Earth Conductor Size</a><a href="/generatorsizing.html">Generator Sizing</a><a href="/harmonicsanalyser.html">Harmonics Analyser</a><a href="/insulationresistance.html">Insulation Resistance</a><a href="/logicgate.html">Logic Gates Simulator</a><a href="/motor-starting.html">Motor Starting Current</a><a href="/pcbtrace.html">PCB Trace Width</a><a href="/protection-device.html">Protection Device</a><a href="/resistor.html">Resistor Color Code</a><a href="/solarcable.html">Solar Cable Sizing</a><a href="/systemxrcalculator.html">System X/R Ratio</a><a href="/transmissionline.html">Transmission Line</a><a href="/vfd-selection.html">VFD Selection Tool</a></div><div><a href="/batterylife.html">Battery Life Estimator</a><a href="/busbarampacity.html">Busbar Ampacity</a><a href="/cablepulling.html">Cable Pulling Tension</a><a href="/conduit-fill.html">Conduit Fill Calculator</a><a href="/earthingfaultsimulator.html">Earthing Fault Simulator</a><a href="/grounding.html">Grounding System Design</a><a href="/hvac-sizing.html">HVAC Sizing Calculator</a><a href="/lcresonancecalculator.html">LC Resonance Calculator</a><a href="/maintenance-guide.html">Maintenance Guide</a><a href="/nemaipconvertor.html">NEMA to IP Converter</a><a href="/power-factor.html">Power Factor Correction</a><a href="/relay-coordination.html">Relay Coordination</a><a href="/short-circuit.html">Short Circuit Current</a><a href="/solarpvarray.html">Solar PV Array</a><a href="/transformer-calculator.html">Transformer Calculator</a><a href="/unit-converter.html">Unit Converter</a><a href="/voltage-drop.html">Voltage Drop Calculator</a></div><div><a href="/battery-sizing.html">Battery Sizing (AH)</a><a href="/busbarshortcircuit.html">Busbar Short Circuit</a><a href="/cable-sizing.html">Cable Sizing Calculator</a><a href="/ctsaturation.html">CT Saturation</a><a href="/equipment-relay.html">Equipment Relay Setting</a><a href="/harmonic-distortion.html">Harmonic Distortion</a><a href="/industriallighting.html">Industrial Lighting</a><a href="/lighting-calulator.html">Lighting Calculator</a><a href="/motor-efficiency.html">Motor Efficiency</a><a href="/neutral-earth-fault-current.html">Neutral Earth Fault</a><a href="/powertriangletool.html">Power Triangle</a><a href="/electricalresidentialload.html">Residential Load Calc</a><a href="/skindepth.html">Skin Depth Calculator</a><a href="/symmetricalcomponents.html">Symmetrical Components</a><a href="/transformerinrush.html">Transformer Inrush</a><a href="/ups-sizing.html">UPS Sizing</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexele.html" class="view-all-link">View All Electrical Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexinst.html" class="dropdown-toggle">Instrumentation <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/adc-resolution.html">ADC Resolution</a><a href="/capillarylengthtemperatureerror.html">Capillary Error</a><a href="/cv-kv-valve.html">Cv/Kv Valve Sizing</a><a href="/dp-level.html">DP Level Measurement</a><a href="/hydrostatic-level.html">Hydrostatic Level</a><a href="/instrument-range.html">Instrument Range</a><a href="/loop-impedance.html">Loop Impedance</a><a href="/orifice-plate.html">Orifice Plate Beta</a><a href="/pid-tuning.html">PID Tuning</a><a href="/profibus.html">Profibus Calculator</a><a href="/tempsensorresponse.html">Response Time (Tau)</a><a href="/rtd-lead-comp.html">RTD Lead Wire Comp.</a><a href="/sealfluidzeroshift.html">Seal Fluid Shift</a><a href="/snr-calculator.html">SNR Calculator</a><a href="/thermocoupleextensioncable.html">TC Extension Cable</a><a href="/thermowellwakefreq.html">Thermowell Frequency</a><a href="/pressuretransmitteroverrange.html">Tx Overrange</a><a href="/valvecavitationcalculator.html">Valve Cavitation</a><a href="/vibrationtransmitter.html">Vibration Tx</a><a href="/zoneclassificationhelper.html">Zone Classification</a></div><div><a href="/baud-rate.html">Baud Rate Calculator</a><a href="/gascompressibility.html">Compressibility (Z)</a><a href="/dbcalculator.html">dB Gain/Loss Calc</a><a href="/flowprofiledistortioncalculator.html">Flow Distortion</a><a href="/impulselinefreezing.html">Impulse Freezing</a><a href="/intrinsic-safety.html">Intrinsic Safety Loop</a><a href="/measurement.html">Measurement Uncertainty</a><a href="/ph-temp-comp.html">pH Temp Compensation</a><a href="/plcscantime.html">PLC Scan Time</a><a href="/pressurereliefvalve.html">PRV Sizing (API 520)</a><a href="/reynoldsnumbercal.html">Reynolds Number</a><a href="/rtdselfheating.html">RTD Self-Heating</a><a href="/signal-scaling.html">Signal Scaling</a><a href="/staticheadcal.html">Static Head</a><a href="/temperaturesensorlag.html">Temp Sensor Lag</a><a href="/thermowell-wake.html">Thermowell Wake</a><a href="/ultrasoniclevel.html">Ultrasonic Level</a><a href="/valve-cv.html">Valve Cv Viewer</a><a href="/wetlegdensitycompensation.html">Wet Leg Compensation</a></div><div><a href="/capacitance-level.html">Capacitance Level</a><a href="/controlvalvenoise.html">Control Valve Noise</a><a href="/dp-flow-conversion.html">DP Flow Conversion</a><a href="/hartdevices.html">HART Devices</a><a href="/impulse-pressure-drop.html">Impulse Pressure Drop</a><a href="/junctionbox.html">Junction Box Sizing</a><a href="/orifice-flow.html">Orifice Flow Calculator</a><a href="/pid-symbol-library.html">PID Symbol Library</a><a href="/power-supply-load.html">Power Supply Load</a><a href="/prvsizing.html">Relief Orifice Area</a><a href="/rtdexcitationcurrentselection.html">RTD Excitation</a><a href="/rtd-tc-conversion.html">RTD/TC Conversion</a><a href="/sil.html">SIL Calculator</a><a href="/steamflow.html">Steam Flow</a><a href="/thermocouplecjccalculator.html">Thermocouple CJC</a><a href="/turndown.html">Turndown Ratio</a><a href="/controlvalveauthority.html">Valve Authority</a><a href="/controlvalveleakage.html">Valve Leakage Class</a><a href="/wirelesshart.html">WirelessHART Range</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexinst.html" class="view-all-link">View All Instrumentation Tools â†’</a>
            </div>
        </div>
    </li>
                        
    <li class="dropdown">
        <a href="/indexmech.html" class="dropdown-toggle">Mechanical <i class="fas fa-chevron-down" style="font-size: 0.7em; margin-left: 4px;"></i></a>
        <div class="dropdown-menu">
            <div class="repo-grid"><div><a href="/aircompressorfad.html">Air Compressor FAD</a><a href="/asme-vessel.html">ASME Vessel Design</a><a href="/belt-pulley.html">Belt & Pulley</a><a href="/bolt-torque.html">Bolt Torque</a><a href="/controlvalveactuator.html">Control Valve Actuator</a><a href="/frictionfactortool.html">Darcy Friction Factor</a><a href="/fatigue.html">Fatigue Analysis</a><a href="/fuel-combustion.html">Fuel Combustion</a><a href="/gas.html">Gas Properties</a><a href="/heat-exchanger.html">Heat Exchanger</a><a href="/hydroliccylinder.html">Hydraulic Cylinder</a><a href="/material-compatibility.html">Material Compatibility</a><a href="/nozzle-reinforcement.html">Nozzle Reinforcement</a><a href="/openchannelflow.html">Open Channel Flow</a><a href="/pipescheduletool.html">Pipe Schedule & Stress</a><a href="/pump-head.html">Pump Head</a><a href="/shaft-power-torque.html">Shaft Power & Torque</a><a href="/steam-table.html">Steam Table</a><a href="/vibrationanalysis.html">Vibration Analysis</a></div><div><a href="/air-flow-duct.html">Air Flow Duct Sizing</a><a href="/beam-deflection.html">Beam Deflection</a><a href="/bernoulli-equation.html">Bernoulli Equation</a><a href="/chiller-capacity.html">Chiller Capacity</a><a href="/cooling-tower-sizing.html">Cooling Tower Sizing</a><a href="/darcy-weisbach.html">Darcy-Weisbach</a><a href="/finned-tube-heat-transfer.html">Finned Tube Heat</a><a href="/furnace-heat-duty.html">Furnace Heat Duty</a><a href="/gear-design.html">Gear Design</a><a href="/heat-loss-pipes.html">Heat Loss Pipes</a><a href="/jacketed-vessel-heat-transfer.html">Jacketed Vessel</a><a href="/metalweight.html">Metal Weight Calculator</a><a href="/nptbspthreadcalculator.html">NPT/BSP Threads</a><a href="/overall-heat-transfer.html">Overall Heat Transfer</a><a href="/pipe-stress-flexibility.html">Pipe Stress</a><a href="/pump-power.html">Pump Power</a><a href="/specific-heat-enthalpy.html">Specific Heat</a><a href="/storage-tank-volume.html">Storage Tank Volume</a><a href="/weldingstress.html">Welding Stress</a></div><div><a href="/allowable-stress-safety-factor.html">Allowable Stress</a><a href="/bearinglife.html">Bearing Life Calculator</a><a href="/boiler-efficiency.html">Boiler Efficiency</a><a href="/compressor-power.html">Compressor Power</a><a href="/corrosion-rate.html">Corrosion Rate</a><a href="/fan-laws.html">Fan Laws</a><a href="/foundation.html">Foundation Design</a><a href="/gas-laws.html">Gas Laws</a><a href="/hardness.html">Hardness Converter</a><a href="/conduction-convection-radiation.html">Heat Transfer Modes</a><a href="/machining.html">Machining Calculator</a><a href="/momentofinertia.html">Moment of Inertia</a><a href="/oring.html">O-Ring Sizing</a><a href="/pipe-flow.html">Pipe Flow Calculator</a><a href="/psychrometric.html">Psychrometric Calc</a><a href="/reynolds-number.html">Reynolds Number</a><a href="/spring.html">Spring Design</a><a href="/thermal-expansion.html">Thermal Expansion</a></div>
            </div>
            <div class="view-all-container">
                <a href="/indexmech.html" class="view-all-link">View All Mechanical Tools â†’</a>
            </div>
        </div>
    </li>
                        <li><a href="/index.html#articles">Articles</a></li>
                        <li><a href="/sitemap2.html">Site Map</a></li>
                    </ul>

                    <div class="theme-toggle">
                        <i class="fas fa-sun icon"></i>
                        <label class="switch">
                            <input type="checkbox" id="theme-switch">
                            <span class="slider"></span>
                        </label>
                        <i class="fas fa-moon icon"></i>
                    </div>
                </div>
            </nav>
    </header>

    <main class="container">
        <!-- Back button removed -->
            
        <div class="tool-container">
            <h2><i class="fas fa-shield-alt"></i> Nozzle Reinforcement Calculator (ASME VIII Div 1)</h2>
            <div class="tool-description">
                <p>This calculator determines the adequacy of nozzle reinforcement in pressure vessels based on the **Area Replacement Method** of <strong>ASME Boiler and Pressure Vessel Code, Section VIII, Division 1 (ASME VIII-1), Part UG-37 through UG-42</strong>.</p>
                <p>It performs a full code-compliant calculation by comparing the required area of reinforcement (`A_req`) against the sum of all available areas (`A1`, `A2`, `A3`, `A4`, `A5`).</p>
                <ul>
                    <li><strong>`A_req` (Required Area):</strong> The cross-sectional area of metal that must be "added" back to compensate for the hole cut in the vessel.</li>
                    <li><strong>`A1` (Area in Shell):</strong> Area available from excess thickness in the vessel shell.</li>
                    <li><strong>`A2` (Area in Nozzle - Outward):</strong> Area available from the nozzle neck projecting *outside* the shell.</li>
                    <li><strong>`A3` (Area in Nozzle - Inward):</strong> Area available from the nozzle neck projecting *inside* the shell.</li>
                    <li><strong>`A4` (Weld Areas):</strong> Area available from the attachment welds.</li>
                    <li><strong>`A5` (Pad Area):</strong> Area available from a dedicated reinforcement pad.</li>
                </ul>
                <p><strong>This tool is for preliminary design and verification only.</strong> A final design must always be checked and certified by a qualified Professional Engineer familiar with the full ASME BPVC code, including all specific nuances, material properties at temperature, and weld strength considerations.</p>
            </div>

            <div class="calculator-form">
                <form id="nozzle-reinforcement-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="unit-system">Unit System: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select Metric (mm, MPa) or Imperial (inches, psi) units.</span></span></label>
                            <select id="unit-system" required>
                                <option value="metric">Metric (mm, MPa)</option>
                                <option value="imperial">Imperial (inches, psi)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="vessel-type">Vessel Type: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Shape of the vessel shell. Affects pressure calculations.</span></span></label>
                            <select id="vessel-type" required>
                                <option value="cylinder">Cylindrical</option>
                                <option value="sphere">Spherical</option>
                            </select>
                        </div>
                    </div>

                    <h4>Vessel Parameters</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="design-pressure">Design Pressure (P) <span class="pressure-unit-label">(MPa)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Internal design pressure of the vessel (MAWP).</span></span></label>
                            <input type="number" id="design-pressure" step="0.01" value="1.0" min="0.1" required>
                        </div>
                         <div class="form-group">
                            <label for="vessel-id">Vessel Inside Diameter (ID) <span class="length-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Inside diameter of the pressure vessel shell.</span></span></label>
                            <input type="number" id="vessel-id" step="0.1" value="1000" min="1" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="shell-material-allowable-stress">Shell Allowable Stress (S) <span class="stress-unit-label">(MPa)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Allowable stress of vessel shell material at design temperature (from ASME II-D).</span></span></label>
                            <input type="number" id="shell-material-allowable-stress" step="0.1" value="138" min="1" required>
                        </div>
                        <div class="form-group">
                            <label for="joint-efficiency-shell">Shell Joint Efficiency (E) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Shell longitudinal weld joint efficiency (e.g., 1.0 for Type 1, 0.85 for Type 2).</span></span></label>
                            <input type="number" id="joint-efficiency-shell" step="0.01" min="0.1" max="1.0" value="0.85" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vessel-thickness-nom">Vessel Nominal Thickness (t) <span class="length-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Nominal (as-built) thickness of the vessel shell.</span></span></label>
                            <input type="number" id="vessel-thickness-nom" step="0.01" value="10" min="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="corrosion-allowance-vessel">Vessel Corrosion Allowance (CA_v) <span class="length-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Corrosion allowance for the vessel shell.</span></span></label>
                            <input type="number" id="corrosion-allowance-vessel" step="0.01" value="1.5" min="0" required>
                        </div>
                    </div>
                    
                    <h4>Nozzle Parameters</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nozzle-od">Nozzle Outside Diameter (OD_n) <span class="length-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Outside diameter of the nozzle pipe.</span></span></label>
                            <input type="number" id="nozzle-od" step="0.1" value="219.1" min="1" required>
                        </div>
                        <div class="form-group">
                            <label for="nozzle-thickness-nom">Nozzle Nominal Thickness (t_n) <span class="length-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Nominal wall thickness of the nozzle pipe.</span></span></label>
                            <input type="number" id="nozzle-thickness-nom" step="0.01" value="8.18" min="0.1" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="nozzle-material-allowable-stress">Nozzle Allowable Stress (S_n) <span class="stress-unit-label">(MPa)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Allowable stress of nozzle material at design temperature.</span></span></label>
                            <input type="number" id="nozzle-material-allowable-stress" step="0.1" value="138" min="1" required>
                        </div>
                        <div class="form-group">
                            <label for="joint-efficiency-nozzle">Nozzle Joint Efficiency (E_n) <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Nozzle weld efficiency. Use 1.0 for seamless nozzle pipe.</span></span></label>
                            <input type="number" id="joint-efficiency-nozzle" step="0.01" min="0.1" max="1.0" value="1.0" required>
                        </div>
                    </div>
                    <div class="form-row">
                         <div class="form-group">
                            <label for="nozzle-projection-outside">Nozzle Projection Outside (h) <span class="length-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Projection of the nozzle neck outside the vessel wall (used for A2).</span></span></label>
                            <input type="number" id="nozzle-projection-outside" step="0.1" value="50" min="0" required>
                        </div>
                         <div class="form-group">
                            <label for="nozzle-projection-inside">Nozzle Projection Inside (h_in) <span class="length-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Projection of the nozzle neck inside the vessel wall (used for A3). Enter 0 if not projecting.</span></span></label>
                            <input type="number" id="nozzle-projection-inside" step="0.1" value="0" min="0" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="corrosion-allowance-nozzle">Nozzle Corrosion Allowance (CA_n) <span class="length-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Corrosion allowance for the nozzle neck.</span></span></label>
                            <input type="number" id="corrosion-allowance-nozzle" step="0.01" value="1.5" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="correction-factor-f">Correction Factor (F): <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">ASME UG-37(c)(2) correction factor. 1.0 for nozzles in cylinders/cones. See code for non-radial.</span></span></label>
                            <input type="number" id="correction-factor-f" step="0.01" value="1.0" min="0.1" max="1.0" required>
                        </div>
                    </div>
                    
                    <h4>Reinforcement Pad Parameters (Optional)</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="pad-thickness-nom">Pad Thickness (t_p) <span class="length-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Thickness of the reinforcement pad. Enter 0 if no pad is used.</span></span></label>
                            <input type="number" id="pad-thickness-nom" step="0.01" value="0" min="0">
                        </div>
                        <div class="form-group">
                            <label for="pad-od">Pad Outside Diameter (D_p) <span class="length-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Outside diameter of the reinforcement pad. Enter 0 if no pad.</span></span></label>
                            <input type="number" id="pad-od" step="0.1" value="0" min="0">
                        </div>
                    </div>
                     <div class="form-row">
                        <div class="form-group">
                            <label for="pad-material-allowable-stress">Pad Allowable Stress (S_p) <span class="stress-unit-label">(MPa)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Allowable stress of pad material. Required if pad thickness > 0.</span></span></label>
                            <input type="number" id="pad-material-allowable-stress" step="0.1" value="138" min="0">
                        </div>
                    </div>
                    
                    <h4>Weld Parameters (Optional, for A4)</h4>
                     <div class="form-row">
                        <div class="form-group">
                            <label for="weld-leg-outer">Outer Weld Leg (W_o) <span class="length-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Fillet weld leg size (nozzle-to-shell or pad-to-shell). Enter 0 if not applicable.</span></span></label>
                            <input type="number" id="weld-leg-outer" step="0.1" value="6" min="0">
                        </div>
                        <div class="form-group">
                            <label for="weld-leg-inner">Inner Weld Leg (W_i) <span class="length-unit-label">(mm)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Fillet weld leg size for inner nozzle projection. Enter 0 if not applicable.</span></span></label>
                            <input type="number" id="weld-leg-inner" step="0.1" value="0" min="0">
                        </div>
                    </div>
                    
                    <div class="button-group">
                        <button type="button" id="calculate-nozzle-btn" class="calculate-btn">
                            <i class="fas fa-calculator"></i> Calculate Reinforcement
                        </button>
                    </div>
                </form>
            </div>
            <div id="result-container" class="result-container">
                <h3><i class="fas fa-chart-line"></i> Calculation Results (ASME VIII-1, UG-37)</h3>
                <div id="calculation-details"></div>
                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body"></tbody>
                </table>
                <div class="standard-reference" id="standard-reference"></div>
            </div>
        </div>

        <!-- NEW 800+ WORD INFORMATIVE SECTION -->
        <div class="tool-container" style="margin-top: 40px;">
            <h2><i class="fas fa-book-open"></i> Professional Guide to Nozzle Reinforcement (ASME VIII-1)</h2>

            <h3 style="color: var(--primary-color); margin-top: 25px;">Why is Reinforcement Necessary?</h3>
            <p>A pressure vessel (like a cylinder or sphere) holds pressure by maintaining a state of "hoop stress" and "longitudinal stress" in its walls. When you cut a hole in this shell to add a nozzle, you remove critical metal that was carrying those stresses. This creates a significant **stress concentration** around the opening, which is typically the weakest point in the entire vessel and the most likely to fail.</p>
            <p>The <strong>Area Replacement Method</strong>, detailed in ASME VIII-1, Division 1, Part UG-37, is the industry-standard way to ensure the opening is safe. The principle is simple: the area of metal removed by the opening must be "replaced" by an equivalent area of reinforcement located very close to the opening.</p>
            <p>This calculator performs this check by comparing the **Area Required (`A_req`)** with the **Area Available (`A_avail`)**. For the design to be adequate, `A_avail` must be greater than or equal to `A_req`.</p>

            <h3 style="color: var(--primary-color); margin-top: 25px;">The Required Area (`A_req`)</h3>
            <p>The "Area Required" is the cross-sectional area of metal that *would* have been there if the hole wasn't cut, in the corroded condition. It's the product of the opening's finished diameter (`d`) and the shell's *required* thickness (`t_r`), adjusted by a factor `F`.</p>
            <p class="formula">\[ A_{req} = d \cdot t_r \cdot F \]</p>
            <ul>
                <li>`d` is the finished diameter of the opening in the corroded condition.</li>
                <li>`t_r` is the *required* shell thickness to withstand the pressure `P` (calculated per UG-27), *not* the actual thickness.</li>
                <li>`F` is a correction factor, usually 1.0 for radial nozzles in cylindrical shells.</li>
            </ul>

            <h3 style="color: var(--primary-color); margin-top: 25px;">The Available Area (`A_avail`)</h3>
            <p>The "Area Available" is the sum of all "extra" metal found within a strictly defined "box" around the nozzle, known as the **limits of reinforcement**. The code provides credit for metal from five distinct sources, all of which are calculated by this tool.</p>
            <p class="formula">\[ A_{avail} = A_1 + A_2 + A_3 + A_4 + A_5 \]</p>

            <h4>Area `A1`: Excess Thickness in the Shell</h4>
            <p>This is the most common source of reinforcement. It is the area provided by the shell being *thicker than it needs to be* for the given pressure. If the actual corroded thickness (`t`) is greater than the required thickness (`t_r`), this excess metal gets credit. The code allows you to take credit for this area over a specific width, which is the *larger* of `d` or `R_n + t_n + t`.</p>
            <p class="formula">\[ A_1 = \text{max}(d, R_n + t_n + t) \cdot (t - t_r) \]</p>
            <p>(Note: `R_n`, `t_n`, and `t` are all in the corroded condition).</p>

            <h4>Area `A2`: Nozzle Neck Projecting Outward</h4>
            <p>This is the area provided by the "extra" metal in the nozzle wall that projects *outside* the shell. The code only gives credit for this area up to a certain height (`L1`), which is the *smallest* of:</p>
            <ol>
                <li>The actual nozzle projection `h`.</li>
                <li>`2.5 * t` (2.5 times the corroded shell thickness).</li>
                <li>`2.5 * t_n + t_p` (2.5 times the corroded nozzle thickness, plus pad thickness).</li>
            </ol>
            <p>The area is this limited height `L1` multiplied by the excess nozzle thickness (`t_n - t_rn`), and adjusted by a strength reduction factor (`f_r1 = S_n / S`).</p>
            <p class="formula">\[ A_2 = 2 \cdot L1 \cdot (t_n - t_{rn}) \cdot f_{r1} \]</p>

            <h4>Area `A3`: Nozzle Neck Projecting Inward</h4>
            <p>This is the area from the nozzle neck that projects *inside* the vessel. It's calculated similarly to `A2` but with a different height limit (`L2`), which is the *smallest* of:</p>
            <ol>
                <li>The actual inward projection `h_in`.</li>
                <li>`2.5 * t` (2.5 times the corroded shell thickness).</li>
                <li>`2.5 * t_n` (2.5 times the corroded nozzle thickness).</li>
            </ol>
            <p>The code generously gives credit for the *full* thickness `t_n` for this area (not just the excess).</p>
            <p class="formula">\[ A_3 = 2 \cdot L2 \cdot t_n \cdot f_{r1} \]</p>

            <h4>Area `A4`: Attachment Welds</h4>
            <p>Credit is given for the cross-sectional area of the fillet welds that attach the nozzle and pad to the shell. This calculator includes `A41` (outer welds) and `A42` (inner welds) based on the weld leg sizes you provide, adjusted by the strength factor.</p>
            <p class="formula">\[ A_{41} = (\text{leg}_{outer})^2 \cdot f_{r1} \quad | \quad A_{42} = (\text{leg}_{inner})^2 \cdot f_{r1} \]</p>
            
            <h4>Area `A5`: Reinforcement Pad</h4>
            <p>This is the area provided by a dedicated "rep ad" welded to the outside of the shell. The area is simply the cross-section of the pad that falls within the reinforcement limits, adjusted by its own strength factor (`f_r2 = S_p / S`).</p>
            <p class="formula">\[ A_5 = (D_p - OD_n) \cdot t_p \cdot f_{r2} \]</p>
            <p>Where `D_p` is the pad OD, `OD_n` is the nozzle OD, and `t_p` is the corroded pad thickness. This is a common representation, and this calculator uses the nominal `OD_n` for this check as specified in UG-40.</p>
        </div>
    </main>

    <!-- NEW FOOTER -->
        <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <a href="/" class="footer-logo">
                        <img src="logo.png" alt="Design Calculators Logo" loading="lazy" decoding="async">
                        <span class="footer-logo-text">Design Calculators</span>
                    </a>
                    <p class="footer-description">A comprehensive engineering calculator hub based on IEC, IEEE, and
                        global standards.</p>
                    <div class="social-buttons">
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn linkedin"
                            aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="https://www.youtube.com/@designcalculators" target="_blank" rel="noopener noreferrer"
                            class="social-btn youtube" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="https://twitter.com/intent/tweet?url=https://designcalculators.co.in&text=Check%20out%20this%20amazing%20engineering%20calculator%20hub!"
                            target="_blank" rel="noopener noreferrer" class="social-btn twitter" aria-label="Twitter"><i
                                class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn facebook"
                            aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20amazing%20engineering%20resource:%20https://designcalculators.co.in"
                            target="_blank" rel="noopener noreferrer" class="social-btn whatsapp"
                            aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="footer-col">
                        <h4>Quick Links</h4>
                        <ul>
                            <li><a href='/indexele.html'>Electrical Tools</a></li>
                            <li><a href='/indexmech.html'>Mechanical Tools</a></li>
                            <li><a href='/indexinst.html'>Instrumentation Tools</a></li>
                            <li><a href='/about.html'>About Us</a></li>
                            <li><a href='/faq.html'>FAQ</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Learn More</h4>
                        <ul>
                            <li><a href="https://www.youtube.com/@designcalculators" target="_blank"
                                    rel="noopener noreferrer">YouTube Channel</a></li>
                            <li><a href='/contact.html'>Contact Us</a></li>
                            <li><a href='/privacy-policy.html'>Privacy Policy</a></li>
                            <li><a href='/terms-of-service.html'>Terms of Service</a></li>
                            <li><a href='/sitemap2.html'>Sitemap</a></li>
                        </ul>
                    </div>
                    <div class="footer-col">
                        <h4>Our Network</h4>
                        <ul>
                            <li style="margin-bottom: 12px;">
                                <a href="https://reliabilitytools.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">Reliability Tools</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Reliability
                                    & maintenance engineering calculators.</span>
                            </li>
                            <li style="margin-bottom: 12px;">
                                <a href="https://electrosafe.homes/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">ElectroSafe</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Dedicated
                                    to home electrical safety & protection.</span>
                            </li>
                            <li>
                                <a href="https://knowyourname.co.in/" target="_blank" rel="noopener"
                                   style="font-weight: 600; display: block; margin-bottom: 2px;">KnowYourName</a>
                                <span style="font-size: 0.85rem; color: #94a3b8; line-height: 1.3; display: block;">Scientific
                                    name analysis: Phonetics, Ergonomics & Acoustics.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-disclaimer">
                <p>All calculations are for preliminary engineering design guidance. Final designs must comply with all applicable local and international standards (including but not limited to ASHRAE 90.1, ARI 550/590). Always verify calculations and consult with a licensed professional engineer before implementation or construction.</p>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Design Calculators. Created by <span style="color: var(--secondary); font-weight: bold;">Anil Sharma</span>. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <!-- Message box for notifications -->
    <div id="custom-message-box"></div>

    <!-- HEAVY-DUTY JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get references to DOM elements
            const calculateBtn = document.getElementById('calculate-nozzle-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const standardReference = document.getElementById('standard-reference');
            const calculationDetailsDiv = document.getElementById('calculation-details');

            // Input fields
            const unitSystemSelect = document.getElementById('unit-system');
            const vesselTypeSelect = document.getElementById('vessel-type');
            const designPressureInput = document.getElementById('design-pressure');
            const vesselIDInput = document.getElementById('vessel-id');
            const shellMaterialAllowableStressInput = document.getElementById('shell-material-allowable-stress');
            const jointEfficiencyShellInput = document.getElementById('joint-efficiency-shell');
            const vesselThicknessNomInput = document.getElementById('vessel-thickness-nom');
            const corrosionAllowanceVesselInput = document.getElementById('corrosion-allowance-vessel');
            
            const nozzleODInput = document.getElementById('nozzle-od');
            const nozzleThicknessNomInput = document.getElementById('nozzle-thickness-nom');
            const nozzleMaterialAllowableStressInput = document.getElementById('nozzle-material-allowable-stress');
            const jointEfficiencyNozzleInput = document.getElementById('joint-efficiency-nozzle');
            const nozzleProjectionOutsideInput = document.getElementById('nozzle-projection-outside');
            const nozzleProjectionInsideInput = document.getElementById('nozzle-projection-inside');
            const corrosionAllowanceNozzleInput = document.getElementById('corrosion-allowance-nozzle');
            const correctionFactorFInput = document.getElementById('correction-factor-f');

            const padThicknessNomInput = document.getElementById('pad-thickness-nom');
            const padODInput = document.getElementById('pad-od');
            const padMaterialAllowableStressInput = document.getElementById('pad-material-allowable-stress');
            
            const weldLegOuterInput = document.getElementById('weld-leg-outer');
            const weldLegInnerInput = document.getElementById('weld-leg-inner');

            // Unit labels
            const lengthUnitLabels = document.querySelectorAll('.length-unit-label');
            const stressUnitLabels = document.querySelectorAll('.stress-unit-label');
            const pressureUnitLabels = document.querySelectorAll('.pressure-unit-label');

            /**
             * Displays a custom message box at the top of the screen.
             */
            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    document.body.appendChild(messageBox);
                }
                messageBox.textContent = message;
                messageBox.className = ''; // Clear previous classes
                messageBox.classList.add(type); // Add type class for styling
                messageBox.classList.add('show');

                // Hide message after 5 seconds
                setTimeout(() => {
                    messageBox.classList.remove('show');
                }, 5000);
            }

            /**
             * Updates the unit labels and default values in the UI based on the selected unit system.
             */
            function updateUnitLabels() {
                const unitSystem = unitSystemSelect.value;
                const lengthUnit = unitSystem === 'imperial' ? '(in)' : '(mm)';
                const stressUnit = unitSystem === 'imperial' ? '(psi)' : '(MPa)';
                const pressureUnit = unitSystem === 'imperial' ? '(psi)' : '(MPa)';

                document.querySelectorAll('.length-unit-label').forEach(label => label.textContent = lengthUnit);
                document.querySelectorAll('.stress-unit-label').forEach(label => label.textContent = stressUnit);
                document.querySelectorAll('.pressure-unit-label').forEach(label => label.textContent = pressureUnit);

                // --- Auto-convert default values ---
                const isMetric = unitSystem === 'metric';
                
                // Helper to convert value
                const convert = (input, metricVal, imperialVal) => {
                    const currentVal = parseFloat(input.value);
                    if (isMetric) {
                        if (Math.abs(currentVal - imperialVal) < 0.01) input.value = metricVal;
                    } else {
                        if (Math.abs(currentVal - metricVal) < 0.01) input.value = imperialVal;
                    }
                };
                
                // (input, metric, imperial)
                convert(designPressureInput, 1.0, 145.04);
                convert(vesselIDInput, 1000, 39.37);
                convert(shellMaterialAllowableStressInput, 138, 20015);
                convert(vesselThicknessNomInput, 10, 0.394);
                convert(corrosionAllowanceVesselInput, 1.5, 0.059);
                
                convert(nozzleODInput, 219.1, 8.625);
                convert(nozzleThicknessNomInput, 8.18, 0.322);
                convert(nozzleMaterialAllowableStressInput, 138, 20015);
                convert(nozzleProjectionOutsideInput, 50, 1.97);
                convert(nozzleProjectionInsideInput, 0, 0);
                convert(corrosionAllowanceNozzleInput, 1.5, 0.059);
                
                convert(padMaterialAllowableStressInput, 138, 20015);
                convert(weldLegOuterInput, 6, 0.236);
            }

            // Event listener for unit system change
            unitSystemSelect.addEventListener('change', updateUnitLabels);
            updateUnitLabels(); // Initial UI update

            /**
             * Adds a row to the result table.
             */
            function addResultRow(parameterHtml, valueHtml) {
                const row = resultTableBody.insertRow();
                const paramCell = row.insertCell();
                const valueCell = row.insertCell();
                paramCell.innerHTML = parameterHtml;
                valueCell.innerHTML = valueHtml;
            }

            // Event listener for the calculate button
            calculateBtn.addEventListener('click', function() {
                // Validate all required fields
                const form = document.getElementById('nozzle-reinforcement-form');
                if (!form.checkValidity()) {
                    displayMessage("Please fill in all required fields correctly.", "error");
                    form.reportValidity();
                    return;
                }
                
                try {
                    // --- 1. GATHER AND VALIDATE ALL INPUTS ---
                    const unitSystem = unitSystemSelect.value;
                    const P = parseFloat(designPressureInput.value);
                    const R_vessel = parseFloat(vesselIDInput.value) / 2;
                    const S = parseFloat(shellMaterialAllowableStressInput.value);
                    const E = parseFloat(jointEfficiencyShellInput.value);
                    const t_vessel_nom = parseFloat(vesselThicknessNomInput.value);
                    const CA_vessel = parseFloat(corrosionAllowanceVesselInput.value);
                    const vesselType = vesselTypeSelect.value;
                    
                    const OD_n = parseFloat(nozzleODInput.value);
                    const t_nozzle_nom = parseFloat(nozzleThicknessNomInput.value);
                    const S_n = parseFloat(nozzleMaterialAllowableStressInput.value);
                    const E_n = parseFloat(jointEfficiencyNozzleInput.value);
                    const h_proj = parseFloat(nozzleProjectionOutsideInput.value);
                    const h_in = parseFloat(nozzleProjectionInsideInput.value);
                    const CA_nozzle = parseFloat(corrosionAllowanceNozzleInput.value);
                    const F = parseFloat(correctionFactorFInput.value);
                    
                    const t_pad_nom = parseFloat(padThicknessNomInput.value);
                    const OD_p = parseFloat(padODInput.value);
                    let S_p = parseFloat(padMaterialAllowableStressInput.value);
                    
                    const weld_leg_outer = parseFloat(weldLegOuterInput.value);
                    const weld_leg_inner = parseFloat(weldLegInnerInput.value);

                    if (t_pad_nom > 0 && (OD_p <= OD_n || isNaN(S_p) || S_p <= 0)) {
                        throw new Error("If Pad Thickness > 0, Pad OD must be > Nozzle OD and Pad Stress must be a valid, positive number.");
                    }
                    if (t_pad_nom === 0) S_p = S; // Set to S if no pad, f_r2 will be 1 but A5 will be 0.
                    
                    let calculationHtml = `<h4>Detailed Calculation Steps (ASME VIII-1, UG-37):</h4>`;
                    const unitL = unitSystem === 'imperial' ? 'in' : 'mm';
                    const unitA = unitSystem === 'imperial' ? 'in²' : 'mm²';
                    
                    // --- 2. CALCULATE CORRODED DIMENSIONS ---
                    const t = t_vessel_nom - CA_vessel;
                    const t_n = t_nozzle_nom - CA_nozzle;
                    const t_p = t_pad_nom; // Per UG-40(b), pad thickness is not reduced by corrosion allowance
                    
                    if (t <= 0) throw new Error("Vessel corroded thickness (t) is ≤ 0.");
                    if (t_n <= 0) throw new Error("Nozzle corroded thickness (t_n) is ≤ 0.");
                    
                    const d = OD_n - 2 * t_n; // Corroded Nozzle ID
                    const R_n = d / 2;
                    
                    calculationHtml += `<p><strong>1. Corroded Dimensions:</strong></p><ul>
                        <li>Corroded Shell Thickness (t) = ${t.toFixed(3)} ${unitL}</li>
                        <li>Corroded Nozzle Thickness (t_n) = ${t_n.toFixed(3)} ${unitL}</li>
                        <li>Corroded Pad Thickness (t_p) = ${t_p.toFixed(3)} ${unitL} (Per UG-40(b), CA is not deducted)</li>
                        <li>Finished Opening Diameter (d) = ${d.toFixed(3)} ${unitL}</li>
                    </ul>`;

                    // --- 3. CALCULATE REQUIRED THICKNESSES ---
                    let t_r;
                    if (vesselType === 'cylinder') {
                        t_r = (P * R_vessel) / (S * E - 0.6 * P);
                        calculationHtml += `<p><strong>2. Required Shell Thickness (t_r) (Cylindrical):</strong></p>
                            <p class="formula">\\[ t_r = \\frac{P R}{S E - 0.6 P} \\]</p>
                            <p class="calculation-step">\\(t_r = \\frac{${P} \\times ${R_vessel}}{${S} \\times ${E} - 0.6 \\times ${P}} = ${t_r.toFixed(3)} ${unitL}\\)</p>`;
                    } else { // spherical
                        t_r = (P * R_vessel) / (2 * S * E - 0.2 * P);
                        calculationHtml += `<p><strong>2. Required Shell Thickness (t_r) (Spherical):</strong></p>
                            <p class="formula">\\[ t_r = \\frac{P R}{2 S E - 0.2 P} \\]</p>
                            <p class="calculation-step">\\(t_r = \\frac{${P} \\times ${R_vessel}}{2 \\times ${S} \\times ${E} - 0.2 \\times ${P}} = ${t_r.toFixed(3)} ${unitL}\\)</p>`;
                    }
                    if (t_r < 0) throw new Error("Calculated t_r is negative. Check inputs.");
                    
                    const t_rn = (P * R_n) / (S_n * E_n - 0.6 * P);
                    calculationHtml += `<p><strong>3. Required Nozzle Thickness (t_rn):</strong></p>
                        <p class="formula">\\[ t_{rn} = \\frac{P R_n}{S_n E_n - 0.6 P} \\]</p>
                        <p class="calculation-step">\\(t_{rn} = \\frac{${P} \\times ${R_n.toFixed(3)}}{${S_n} \\times ${E_n} - 0.6 \\times ${P}} = ${t_rn.toFixed(3)} ${unitL}\\)</p>`;
                    if (t_rn < 0) throw new Error("Calculated t_rn is negative. Check inputs.");

                    // --- 4. CALCULATE REQUIRED AREA (A_req) ---
                    const A_req = d * t_r * F;
                    calculationHtml += `<p><strong>4. Area Required (A_req):</strong></p>
                        <p class="formula">\\[ A_{req} = d \\cdot t_r \\cdot F \\]</p>
                        <p class="calculation-step">\\(A_{req} = ${d.toFixed(3)} \\times ${t_r.toFixed(3)} \\times ${F} = ${A_req.toFixed(3)} ${unitA}\\)</p>`;

                    // --- 5. CALCULATE AVAILABLE AREAS (A1-A5) ---
                    calculationHtml += `<p><strong>5. Area Available (A_avail):</strong></p>`;
                    
                    const f_r1 = Math.min(1.0, S_n / S);
                    const f_r2 = Math.min(1.0, S_p / S);
                    calculationHtml += `<p class="calculation-step">Strength Factor (f_r1, Nozzle) = min(1, ${S_n}/${S}) = ${f_r1.toFixed(3)}</p>`;
                    if (t_pad_nom > 0) calculationHtml += `<p class="calculation-step">Strength Factor (f_r2, Pad) = min(1, ${S_p}/${S}) = ${f_r2.toFixed(3)}</p>`;

                    // --- A1: Area in Shell ---
                    const A1_path1 = d * (t - t_r);
                    const A1_path2 = 2 * (t + t_n) * (t - t_r);
                    const A1 = Math.max(0, A1_path1, A1_path2);
                    calculationHtml += `<h4>Area A1 (from Shell)</h4>
                        <p class="calculation-step">Path 1 = \\( d(t - t_r) \\) = ${A1_path1.toFixed(3)} ${unitA}</p>
                        <p class="calculation-step">Path 2 = \\( 2(t + t_n)(t - t_r) \\) = ${A1_path2.toFixed(3)} ${unitA}</p>
                        <p class="calculation-step">\\( A1 = \\text{max}(0, \\text{Path 1}, \\text{Path 2}) = ${A1.toFixed(3)} ${unitA} \\)</p>`;

                    // --- A2: Area in Nozzle (Outside) ---
                    const L1 = Math.min(h_proj, 2.5 * t, 2.5 * t_n + t_p);
                    const A2 = 2 * L1 * (t_n - t_rn) * f_r1;
                    calculationHtml += `<h4>Area A2 (from Nozzle - Outside)</h4>
                        <p class="calculation-step">Limit L1 = min(h_proj, 2.5*t, 2.5*t_n + t_p)</p>
                        <p class="calculation-step">L1 = min(${h_proj.toFixed(3)}, ${ (2.5 * t).toFixed(3)}, ${ (2.5 * t_n + t_p).toFixed(3)}) = ${L1.toFixed(3)} ${unitL}</p>
                        <p class="formula">\\[ A2 = 2 \\cdot L1 \\cdot (t_n - t_{rn}) \\cdot f_{r1} \\]</p>
                        <p class="calculation-step">\\( A2 = 2 \\times ${L1.toFixed(3)} \\times (${t_n.toFixed(3)} - ${t_rn.toFixed(3)}) \\times ${f_r1.toFixed(3)} = ${Math.max(0, A2).toFixed(3)} ${unitA} \\)</p>`;

                    // --- A3: Area in Nozzle (Inside) ---
                    const L2 = Math.min(h_in, 2.5 * t, 2.5 * t_n);
                    const A3 = 2 * L2 * t_n * f_r1;
                    calculationHtml += `<h4>Area A3 (from Nozzle - Inside)</h4>
                        <p class="calculation-step">Limit L2 = min(h_in, 2.5*t, 2.5*t_n)</p>
                        <p class="calculation-step">L2 = min(${h_in.toFixed(3)}, ${ (2.5 * t).toFixed(3)}, ${ (2.5 * t_n).toFixed(3)}) = ${L2.toFixed(3)} ${unitL}</p>
                        <p class="formula">\\[ A3 = 2 \\cdot L2 \\cdot t_n \\cdot f_{r1} \\]</p>
                        <p class="calculation-step">\\( A3 = 2 \\times ${L2.toFixed(3)} \\times ${t_n.toFixed(3)} \\times ${f_r1.toFixed(3)} = ${Math.max(0, A3).toFixed(3)} ${unitA} \\)</p>`;

                    // --- A4: Weld Areas ---
                    const A41 = weld_leg_outer**2 * f_r1;
                    const A42 = weld_leg_inner**2 * f_r1;
                    calculationHtml += `<h4>Area A4 (from Welds)</h4>
                        <p class="formula">\\[ A41 = (W_o)^2 \\cdot f_{r1} \\]</p>
                        <p class="calculation-step">\\( A41 = ${weld_leg_outer.toFixed(3)}^2 \\times ${f_r1.toFixed(3)} = ${A41.toFixed(3)} ${unitA} \\)</p>
                        <p class="formula">\\[ A42 = (W_i)^2 \\cdot f_{r1} \\]</p>
                        <p class="calculation-step">\\( A42 = ${weld_leg_inner.toFixed(3)}^2 \\times ${f_r1.toFixed(3)} = ${A42.toFixed(3)} ${unitA} \\)</p>`;
                    
                    // --- A5: Pad Area ---
                    let A5 = 0;
                    if (t_pad_nom > 0) {
                        A5 = (OD_p - OD_n) * t_p * f_r2;
                        calculationHtml += `<h4>Area A5 (from Pad)</h4>
                            <p class="formula">\\[ A5 = (D_p - OD_n) \\cdot t_p \\cdot f_{r2} \\]</p>
                            <p class="calculation-step">\\( A5 = (${OD_p.toFixed(3)} - ${OD_n.toFixed(3)}) \\times ${t_p.toFixed(3)} \\times ${f_r2.toFixed(3)} = ${Math.max(0, A5).toFixed(3)} ${unitA} \\)</p>`;
                    }

                    // --- 6. FINAL CHECK ---
                    // Ensure areas are not negative
                    const A1_final = Math.max(0, A1);
                    const A2_final = Math.max(0, A2);
                    const A3_final = Math.max(0, A3);
                    const A41_final = Math.max(0, A41);
                    const A42_final = Math.max(0, A42);
                    const A5_final = Math.max(0, A5);
                    
                    const A_avail = A1_final + A2_final + A3_final + A41_final + A42_final + A5_final;
                    const isAdequate = A_avail >= A_req;
                    const margin = A_avail - A_req;
                    
                    calculationHtml += `<p><strong>6. Final Check:</strong></p>`;
                    calculationHtml += `<p class="formula">\\[ A_{avail} = A1 + A2 + A3 + A41 + A42 + A5 \\]</p>`;
                    calculationHtml += `<p class="calculation-step">\\( A_{avail} = ${A1_final.toFixed(3)} + ${A2_final.toFixed(3)} + ${A3_final.toFixed(3)} + ${A41_final.toFixed(3)} + ${A42_final.toFixed(3)} + ${A5_final.toFixed(3)} = ${A_avail.toFixed(3)} ${unitA} \\)</p>`;
                    calculationHtml += `<p class="calculation-step">\\( A_{avail} \\ge A_{req} \\) ?</p>`;
                    calculationHtml += `<p class="calculation-step">\\( ${A_avail.toFixed(3)} \\ge ${A_req.toFixed(3)} \\) : <strong>${isAdequate ? 'TRUE' : 'FALSE'}</strong></p>`;
                    
                    // --- Populate Results Table ---
                    resultTableBody.innerHTML = ''; // Clear previous results
                    
                    addResultRow("Required Shell Thickness (t_r)", `\\( ${t_r.toFixed(3)} \\) ${unitL}`);
                    addResultRow("Required Nozzle Thickness (t_rn)", `\\( ${t_rn.toFixed(3)} \\) ${unitL}`);
                    addResultRow("<strong>Area Required (A_req)</strong>", `<strong>\\( ${A_req.toFixed(3)} \\) ${unitA}</strong>`);
                    addResultRow("Area in Shell (A1)", `\\( ${A1_final.toFixed(3)} \\) ${unitA}`);
                    addResultRow("Area in Nozzle Outward (A2)", `\\( ${A2_final.toFixed(3)} \\) ${unitA}`);
                    addResultRow("Area in Nozzle Inward (A3)", `\\( ${A3_final.toFixed(3)} \\) ${unitA}`);
                    addResultRow("Area in Outer Welds (A41)", `\\( ${A41_final.toFixed(3)} \\) ${unitA}`);
                    addResultRow("Area in Inner Welds (A42)", `\\( ${A42_final.toFixed(3)} \\) ${unitA}`);
                    addResultRow("Area in Pad (A5)", `\\( ${A5_final.toFixed(3)} \\) ${unitA}`);
                    addResultRow("<strong>Total Area Available (A_avail)</strong>", `<strong>\\( ${A_avail.toFixed(3)} \\) ${unitA}</strong>`);
                    addResultRow("Margin (A_avail - A_req)", `<strong>\\( ${margin.toFixed(3)} \\) ${unitA}</strong>`);
                    
                    if(isAdequate) {
                        addResultRow("Design Status", `<strong style="color:var(--success-color); font-size:1.2em;">ADEQUATE</strong>`);
                    } else {
                        addResultRow("Design Status", `<strong style="color:var(--error-color); font-size:1.2em;">INADEQUATE</strong>`);
                    }

                    calculationDetailsDiv.innerHTML = calculationHtml;
                    // Re-render MathJax equations
                    if (window.MathJax) {
                        window.MathJax.typeset([calculationDetailsDiv, resultTableBody]);
                    }
                    
                    standardReference.innerHTML = "This calculation is based on the Area Replacement Method described in <strong>ASME Boiler and Pressure Vessel Code, Section VIII, Division 1, Part UG-37, UG-40, and UG-41</strong>. This is for preliminary design only. Final design must be performed by a qualified engineer in full compliance with the code.";
                    
                    resultContainer.style.display = 'block';
                    setTimeout(() => {
                        resultContainer.classList.add('show');
                    }, 10);
                    resultContainer.scrollIntoView({ behavior: 'smooth' });
                    displayMessage("Calculation completed successfully!", "info");

                } catch (e) {
                    displayMessage(e.message, "error");
                    resultContainer.style.display = 'none';
                    resultContainer.classList.remove('show');
                }
            });

            // New theme switch logic
            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }
                themeSwitch.addEventListener('change', function() {
                    document.body.classList.toggle('dark-mode');
                    localStorage.setItem('theme', this.checked ? 'dark' : 'light');
                });
            }
        });
    </script>
</body>
</html>

