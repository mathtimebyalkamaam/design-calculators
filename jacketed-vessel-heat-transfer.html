<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-23Y1V450SR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-23Y1V450SR');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5936527763614780"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jacketed Vessel Heat Transfer Calculator - Design Calculators - Mechanical</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- MathJax for LaTeX rendering -->
    <script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="icon" href="/favicon.ico" type="image/x-icon">

    <script>
        MathJax = {
            tex: {
                inlineMath: [['\\(', '\\)']],
                displayMath: [['\\[', '\\]']],
                processEscapes: true
            }
        };
    </script>
    <style>
        :root {
            --primary-color: #2196F3;
            --secondary-color: #1976D2;
            --accent-color: #FFC107;
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --text-color: #333333;
            --header-bg: #2C3E50;
            --footer-bg: #34495E;
            --border-color: #cccccc;
            --card-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            --hover-color: #e2e6ea;
            --primary-color-rgb: 33, 150, 243;
        }
        body.dark-mode {
            --primary-color: #5DADE2;
            --secondary-color: #2874A6;
            --bg-color: #252D3A;
            --card-bg: #2F3C4C;
            --text-color: #E0E6EB;
            --header-bg: #252D3A;
            --footer-bg: #252D3A;
            --border-color: #4C5C70;
            --card-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            --hover-color: #3A475C;
            --primary-color-rgb: 93, 173, 226;
        }
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at center, var(--bg-color) 0%, rgba(244, 247, 246, 0.8) 100%);
            color: var(--text-color);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s, background-image 0.3s;
        }
        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-color: var(--header-bg);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: var(--card-shadow);
            position: relative;
        }
        header h1 {
            margin: 0;
            font-size: 2.8em;
            color: var(--primary-color);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
        header .subtitle {
            margin: 8px 0 0;
            font-size: 1.1em;
            color: #bdc3c7;
        }
        main {
            padding: 30px 0;
        }
        .tool-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            margin-bottom: 25px;
            transition: transform 0.3s ease-in-out;
        }
        .tool-container:hover {
            transform: translateY(-5px);
        }
        .tool-container h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 12px;
            margin-top: 0;
            margin-bottom: 25px;
            font-size: 2em;
        }
        .tool-description {
            margin-bottom: 25px;
            color: var(--text-color);
            font-size: 1.05em;
        }
        .tool-description ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
            margin-top: 15px;
        }
        .tool-description ul li {
            margin-bottom: 8px;
        }
        .tool-description strong {
            color: var(--primary-color);
        }
        .back-button {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            margin-bottom: 25px;
            transition: background-color 0.3s, transform 0.2s ease-in-out;
            font-weight: bold;
        }
        .back-button:hover {
            background-color: var(--secondary-color);
            transform: scale(1.03);
        }
        .theme-toggle {
            position: absolute;
            top: 25px;
            right: 25px;
            display: flex;
            align-items: center;
        }
        .theme-toggle .light-icon,
        .theme-toggle .dark-icon {
            color: white;
            margin: 0 8px;
            font-size: 1.3em;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 65px;
            height: 38px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 30px;
            width: 30px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
        }
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        input:focus + .slider {
            box-shadow: 0 0 1px var(--primary-color);
        }
        input:checked + .slider:before {
            transform: translateX(27px);
        }
        .slider.round {
            border-radius: 38px;
        }
        .slider.round:before {
            border-radius: 50%;
        }
        footer {
            background-color: var(--footer-bg);
            color: white;
            padding: 25px 0;
            text-align: center;
            box-shadow: 0 -3px 10px rgba(0, 0, 0, 0.2);
            margin-top: 40px;
        }
        footer .disclaimer h3,
        footer .social-share h3 {
            color: var(--primary-color);
            margin-bottom: 12px;
            font-size: 1.3em;
        }
        footer .disclaimer p {
            font-size: 0.95em;
            color: #bdc3c7;
        }
        .social-buttons {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .social-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.4em;
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .social-btn:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 15px rgba(0,0,0,0.3);
        }
        .social-btn.linkedin { background-color: #0A66C2; }
        .social-btn.facebook { background-color: #1877F2; }
        .social-btn.twitter { background-color: #1DA1F2; }
        .social-btn.whatsapp { background-color: #25D366; }
        .social-btn.reddit { background-color: #FF4500; }
        .social-btn.email { background-color: #7f8c8d; }
        .calculator-form {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 30px;
            margin-top: 25px;
            box-shadow: var(--card-shadow);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 1.05em;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--bg-color);
            color: var(--text-color);
            box-sizing: border-box;
            font-size: 1em;
            transition: border-color 0.3s, box-shadow 0.3s;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.08);
        }
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb), 0.3);
            outline: none;
        }
        .form-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .form-row .form-group {
            flex: 1 1 calc(50% - 10px);
            min-width: 280px;
        }
        @media (max-width: 600px) {
            .form-row .form-group {
                flex: 1 1 100%;
            }
        }
        .calculate-btn {
            background-image: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 18px 25px; /* Increased padding for taller button */
            border-radius: 8px;
            cursor: pointer;
            font-size: 17px;
            font-weight: bold;
            margin-top: 20px;
            transition: background-image 0.3s ease-in-out, transform 0.2s ease-in-out, box-shadow 0.3s ease-in-out;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .calculate-btn:hover {
            background-image: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        .result-container {
            margin-top: 40px;
            padding: 30px;
            border-radius: 12px;
            background-color: var(--card-bg);
            box-shadow: var(--card-shadow);
            display: block;
            opacity: 0;
            transition: opacity 0.6s ease-out;
            pointer-events: none;
        }
        .result-container.show {
            opacity: 1;
            pointer-events: auto;
        }
        .result-container h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .result-table th, .result-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        .result-table th {
            background-color: var(--hover-color);
            font-weight: bold;
            font-size: 1.1em;
        }
        .result-table tr:last-child td {
            border-bottom: none;
        }
        .standard-reference {
            margin-top: 25px;
            font-style: italic;
            font-size: 0.95rem;
            line-height: 1.5;
            padding: 10px;
            background-color: var(--bg-color);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        .info-icon {
            color: var(--primary-color);
            margin-left: 8px;
            cursor: help;
            font-size: 1em;
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 8px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85em;
        }
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
        #custom-message-box {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 18px 30px;
            border-radius: 10px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            font-size: 1.1em;
        }
        #calculation-details {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            font-size: 0.98em;
        }
        #calculation-details h4 {
            color: var(--secondary-color);
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        #calculation-details p.formula {
            font-family: 'Times New Roman', serif;
            font-style: italic;
            font-size: 1.2em;
            text-align: center;
            padding: 12px 0;
            background-color: var(--hover-color);
            border-radius: 6px;
            margin: 15px 0;
            overflow-x: auto;
            border: 1px dashed var(--border-color);
        }
        #calculation-details p.calculation-step {
            font-family: 'Courier New', monospace;
            background-color: var(--hover-color);
            padding: 8px 12px;
            border-radius: 5px;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        #calculation-details ul {
            list-style-type: disc;
            margin-left: 25px;
            padding-left: 0;
        }
        #calculation-details ul li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Design Calculators - Mechanical</h1>
            <p class="subtitle">Smart Tools for Modern Mechanical Engineers</p>
            <div class="theme-toggle">
                <span class="light-icon"><i class="fas fa-sun"></i></span>
                <label class="switch">
                    <input type="checkbox" id="theme-switch">
                    <span class="slider round"></span>
                </label>
                <span class="dark-icon"><i class="fas fa-moon"></i></span>
            </div>
        </div>
    </header>
    <main class="container">
        <a href="indexMech.html" class="back-button">
            <i class="fas fa-arrow-left"></i> Back to Tools
        </a>
        <div class="tool-container">
            <h2>Jacketed Vessel Heat Transfer Calculator</h2>
            <div class="tool-description">
                <p>This calculator provides an estimation of the heat transfer rate for the cylindrical section of a jacketed vessel, useful for initial design and feasibility studies. Jacketed vessels are crucial in process industries for precise temperature control during heating or cooling operations.</p>
                <p>The calculation accounts for heat transfer through convection on both the process and jacket sides, conduction across the vessel wall, and the impact of fouling resistances that can build up on surfaces, reducing efficiency.</p>
                <p>For complex engineering problems involving jacketed vessels, accurate design requires careful consideration of factors not fully captured by this simplified model, such as:</p>
                <ul>
                    <li><strong>Complex Geometries:</strong> Heat transfer through vessel heads (e.g., torispherical, ellipsoidal) often differs significantly from cylindrical sections.</li>
                    <li><strong>Agitation Effects:</strong> Stirrers and agitators create complex flow patterns that drastically alter heat transfer coefficients.</li>
                    <li><strong>Specific Fluid Properties & Flow Regimes:</strong> Precise determination of convection coefficients (h) requires detailed correlations based on fluid viscosity, density, thermal conductivity, specific heat, and flow velocity/turbulence (e.g., using dimensionless numbers like Reynolds, Prandtl, Nusselt).</li>
                    <li><strong>Non-uniform Temperature Distribution:</strong> This calculator assumes average fluid temperatures; in reality, temperatures can vary within the vessel and jacket.</li>
                </ul>
                <p>For precise design, optimization, and compliance with international standards, it is crucial to consult specialized heat transfer literature, advanced computational fluid dynamics (CFD) analysis, and adhere to industry-specific standards:</p>
                <ul>
                    <li><strong>TEMA (Tubular Exchanger Manufacturers Association) Standards:</strong> Provides comprehensive guidelines for heat exchanger design, including widely accepted values for fouling factors (R<sub>f</sub>) for various fluids and operating conditions.</li>
                    <li><strong>ASME Boiler and Pressure Vessel Code:</strong> Governs the design, fabrication, and inspection of pressure vessels, including safety and integrity requirements for jacketed vessels.</li>
                    <li><strong>API (American Petroleum Institute) Standards:</strong> Relevant for design and operation of equipment in the oil and gas industry.</li>
                    <li><strong>Comprehensive Textbooks:</strong> Essential resources include <strong>Kern, D. Q., 'Process Heat Transfer'</strong>, <strong>Coulson & Richardson's Chemical Engineering, Vol. 6: Chemical Engineering Design</strong>, and <strong>Perry's Chemical Engineers' Handbook</strong>, which provide detailed correlations, design methodologies, and best practices.</li>
                </ul>
                <p>Always ensure compliance with applicable industry codes and regulations for actual engineering design, as simplified calculations are for estimation and conceptualization only.</p>
            </div>
            <div class="calculator-form">
                <form id="jacketed-vessel-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="unit-system">Unit System: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select Metric (m, °C, W, W/mK, W/m²°C) or Imperial (ft, °F, BTU/h, BTU/h ft°F, BTU/h ft²°F) units.</span></span></label>
                            <select id="unit-system" required>
                                <option value="metric">Metric (m, °C, W)</option>
                                <option value="imperial">Imperial (ft, °F, BTU/h)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="vessel-inner-dia">Vessel Inner Diameter (D<sub>i</sub>) <span class="length-unit-label">(m)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Inner diameter of the main process vessel.</span></span></label>
                            <input type="number" id="vessel-inner-dia" step="0.01" value="1.0" min="0.01" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vessel-wall-thickness">Vessel Wall Thickness (t<sub>w</sub>) <span class="length-unit-label">(m)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Thickness of the vessel wall separating process and jacket.</span></span></label>
                            <input type="number" id="vessel-wall-thickness" step="0.001" value="0.01" min="0.001" required>
                        </div>
                        <div class="form-group">
                            <label for="jacket-inner-dia">Jacket Inner Diameter (D<sub>jacket,i</sub>) <span class="length-unit-label">(m)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Inner diameter of the jacket, which is the outer diameter of the vessel. This field is automatically calculated.</span></span></label>
                            <input type="number" id="jacket-inner-dia" step="0.01" value="1.02" min="0.01" required readonly>
                        </div>
                    </div>
                     <div class="form-row">
                        <div class="form-group">
                            <label for="jacket-outer-dia">Jacket Outer Diameter (D<sub>jacket,o</sub>) <span class="length-unit-label">(m)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Outer diameter of the jacket.</span></span></label>
                            <input type="number" id="jacket-outer-dia" step="0.01" value="1.10" min="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="vessel-straight-length">Vessel Straight Side Length (L) <span class="length-unit-label">(m)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">The length of the cylindrical section of the vessel where heat transfer occurs. Excludes heads.</span></span></label>
                            <input type="number" id="vessel-straight-length" step="0.1" value="2.0" min="0.1" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="process-fluid-temp-in">Process Fluid Inlet Temp (T<sub>process,in</sub>) <span class="temp-unit-label">(°C)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Inlet temperature of the fluid inside the vessel.</span></span></label>
                            <input type="number" id="process-fluid-temp-in" step="0.1" value="80" required>
                        </div>
                        <div class="form-group">
                            <label for="process-fluid-temp-out">Process Fluid Outlet Temp (T<sub>process,out</sub>) <span class="temp-unit-label">(°C)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Outlet temperature of the fluid inside the vessel.</span></span></label>
                            <input type="number" id="process-fluid-temp-out" step="0.1" value="70" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="jacket-fluid-temp-in">Jacket Fluid Inlet Temp (T<sub>jacket,in</sub>) <span class="temp-unit-label">(°C)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Inlet temperature of the fluid in the jacket.</span></span></label>
                            <input type="number" id="jacket-fluid-temp-in" step="0.1" value="20" required>
                        </div>
                        <div class="form-group">
                            <label for="jacket-fluid-temp-out">Jacket Fluid Outlet Temp (T<sub>jacket,out</sub>) <span class="temp-unit-label">(°C)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Outlet temperature of the fluid in the jacket.</span></span></label>
                            <input type="number" id="jacket-fluid-temp-out" step="0.1" value="30" required>
                        </div>
                    </div>
                    <div class="form-row">
                         <div class="form-group">
                            <label for="jacket-type">Jacket Type: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Different jacket designs (e.g., conventional, dimpled, half-pipe coil) impact the jacket side convection coefficient (h<sub>jacket</sub>) and heat transfer area. Select for conceptual understanding.</span></span></label>
                            <select id="jacket-type" required>
                                <option value="conventional">Conventional Jacket</option>
                                <option value="dimpled">Dimpled Jacket</option>
                                <option value="half-pipe">Half-Pipe Coil Jacket</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="flow-arrangement">Flow Arrangement: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Select flow arrangement for LMTD calculation. Counter-current flow is generally more efficient.</span></span></label>
                            <select id="flow-arrangement" required>
                                <option value="counter-current">Counter-Current Flow</option>
                                <option value="co-current">Co-Current Flow</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="h-process">Process Side Convection Coefficient (h<sub>process</sub>) <span class="convection-unit-label">(W/m²°C)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Heat transfer coefficient on the process fluid side. This value is critically dependent on detailed fluid properties (viscosity, density, specific heat, thermal conductivity) and internal flow characteristics (agitation type, speed, baffles). It's typically calculated using complex empirical correlations involving dimensionless numbers (e.g., Reynolds, Prandtl, Nusselt) specific to agitated vessels or flow regimes. Typical values vary widely: e.g., water (agitated) 500-10,000 W/m²°C; viscous liquids 50-500 W/m²°C.</span></span></label>
                            <input type="number" id="h-process" step="0.1" value="1000" min="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="h-jacket">Jacket Side Convection Coefficient (h<sub>jacket</sub>) <span class="convection-unit-label">(W/m²°C)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Heat transfer coefficient on the jacket fluid side. This value depends on the jacket type (e.g., conventional, dimpled, half-pipe coil), fluid properties, and flow velocity/arrangement within the jacket. Like h<sub>process</sub>, it's typically determined from specific empirical correlations for the jacket configuration. Typical values are similar to process side.</span></span></label>
                            <input type="number" id="h-jacket" step="0.1" value="800" min="0.1" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="k-wall">Vessel Wall Thermal Conductivity (k<sub>wall</sub>) <span class="conductivity-unit-label">(W/mK)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Thermal conductivity of the vessel wall material (e.g., Stainless Steel: ~15, Carbon Steel: ~45).</span></span></label>
                            <input type="number" id="k-wall" step="0.1" value="15" min="0.1" required>
                        </div>
                        <div class="form-group">
                            <label for="rf-process">Process Side Fouling Factor (R<sub>f,process</sub>) <span class="fouling-unit-label">(m²°C/W)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Resistance due to deposition of impurities on the process fluid side. Accurate values are crucial and often found in industry standards like TEMA (Table RGP-2.1 provides guidance). For example, 0.0001 m²°C/W for cooling water, 0.0002 m²°C/W for boiler feedwater, and higher for more problematic fluids.</span></span></label>
                            <input type="number" id="rf-process" step="0.00001" value="0.0001" min="0" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="rf-jacket">Jacket Side Fouling Factor (R<sub>f,jacket</sub>) <span class="fouling-unit-label">(m²°C/W)</span>: <span class="tooltip"><i class="fas fa-info-circle info-icon"></i><span class="tooltiptext">Resistance due to fouling on the jacket fluid side. Similar considerations apply as for the process side.</span></span></label>
                            <input type="number" id="rf-jacket" step="0.00001" value="0.0001" min="0" required>
                        </div>
                    </div>

                    <button type="button" id="calculate-jacketed-heat-transfer-btn" class="calculate-btn">Calculate Heat Transfer</button>
                </form>
            </div>
            <div id="result-container" class="result-container">
                <h3>Calculation Results</h3>
                <div id="calculation-details"></div>
                <table class="result-table">
                    <thead>
                        <tr>
                            <th>Parameter</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody id="result-table-body"></tbody>
                </table>
                <div class="standard-reference" id="standard-reference"></div>
            </div>
        </div>
    </main>
    <footer>
        <div class="container">
            <div class="disclaimer">
                <h3>Disclaimer</h3>
                <p>To ensure accuracy and reliability, always verify the results obtained from these tools against the relevant engineering standards and guidelines.</p>
            </div>
            <div class="credit">
                <p>Created by A Sharma</p>
            </div>
            <div class="social-share">
                <h3>Share This Site</h3>
                <div class="social-buttons">
                    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://designcalculators.co.in&title=Design Calculators - Mechanical" target="_blank" class="social-btn linkedin">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=https://designcalculators.co.in" target="_blank" class="social-btn facebook">
                        <i class="fab fa-facebook"></i>
                    </a>
                    <a href="https://twitter.com/intent/tweet?text=Check out this amazing Design Calculators - Mechanical!&url=https://designcalculators.co.in" target="_blank" class="social-btn twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://api.whatsapp.com/send?text=Check out this amazing Design Calculators - Mechanical! https://designcalculators.co.in" target="_blank" class="social-btn whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="https://www.reddit.com/submit?url=https://designcalculators.co.in&title=Design Calculators - Mechanical" target="_blank" class="social-btn reddit">
                        <i class="fab fa-reddit"></i>
                    </a>
                    <a href="mailto:?subject=Check out Design Calculators - Mechanical!&body=I found this amazing Jacketed Vessel Heat Transfer Calculator and other mechanical tools: https://designcalculators.co.in" class="social-btn email">
                        <i class="fas fa-envelope"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const calculateBtn = document.getElementById('calculate-jacketed-heat-transfer-btn');
            const resultContainer = document.getElementById('result-container');
            const resultTableBody = document.getElementById('result-table-body');
            const standardReference = document.getElementById('standard-reference');
            const calculationDetailsDiv = document.getElementById('calculation-details');

            const unitSystemSelect = document.getElementById('unit-system');
            const vesselInnerDiaInput = document.getElementById('vessel-inner-dia');
            const vesselWallThicknessInput = document.getElementById('vessel-wall-thickness');
            const jacketInnerDiaInput = document.getElementById('jacket-inner-dia'); // Readonly
            const jacketOuterDiaInput = document.getElementById('jacket-outer-dia');
            const vesselStraightLengthInput = document.getElementById('vessel-straight-length');
            const processFluidTempInInput = document.getElementById('process-fluid-temp-in');
            const processFluidTempOutInput = document.getElementById('process-fluid-temp-out');
            const jacketFluidTempInInput = document.getElementById('jacket-fluid-temp-in');
            const jacketFluidTempOutInput = document.getElementById('jacket-fluid-temp-out');
            const jacketTypeSelect = document.getElementById('jacket-type');
            const flowArrangementSelect = document.getElementById('flow-arrangement');

            const hProcessInput = document.getElementById('h-process');
            const hJacketInput = document.getElementById('h-jacket');
            const kWallInput = document.getElementById('k-wall');
            const rfProcessInput = document.getElementById('rf-process');
            const rfJacketInput = document.getElementById('rf-jacket');

            const lengthUnitLabels = document.querySelectorAll('.length-unit-label');
            const tempUnitLabels = document.querySelectorAll('.temp-unit-label');
            const convectionUnitLabels = document.querySelectorAll('.convection-unit-label');
            const conductivityUnitLabels = document.querySelectorAll('.conductivity-unit-label');
            const foulingUnitLabels = document.querySelectorAll('.fouling-unit-label');

            function displayMessage(message, type = "info") {
                let messageBox = document.getElementById('custom-message-box');
                if (!messageBox) {
                    messageBox = document.createElement('div');
                    messageBox.id = 'custom-message-box';
                    document.body.appendChild(messageBox);
                }
                messageBox.textContent = message;
                if (type === "error") {
                    messageBox.style.backgroundColor = '#dc3545';
                    messageBox.style.color = 'white';
                } else if (type === "warning") {
                    messageBox.style.backgroundColor = '#ffc107';
                    messageBox.style.color = '#333';
                } else {
                    messageBox.style.backgroundColor = '#28a745';
                    messageBox.style.color = 'white';
                }
                messageBox.style.opacity = 1;
                setTimeout(() => {
                    messageBox.style.opacity = 0;
                }, 5000);
            }

            function updateUI() {
                const unitSystem = unitSystemSelect.value;
                const lengthLabelText = unitSystem === 'imperial' ? 'ft' : 'm';
                const tempLabelText = unitSystem === 'imperial' ? '°F' : '°C';
                const convectionLabelText = unitSystem === 'imperial' ? 'BTU/h ft²°F' : 'W/m²°C';
                const conductivityLabelText = unitSystem === 'imperial' ? 'BTU/h ft°F' : 'W/mK';
                const foulingLabelText = unitSystem === 'imperial' ? 'h ft²°F/BTU' : 'm²°C/W';
                // const powerLabelText = unitSystem === 'imperial' ? 'BTU/h' : 'W'; // Not used directly in label updates

                lengthUnitLabels.forEach(label => label.innerHTML = `(${lengthLabelText})`);
                tempUnitLabels.forEach(label => label.innerHTML = `(${tempLabelText})`);
                convectionUnitLabels.forEach(label => label.innerHTML = `(${convectionLabelText})`);
                conductivityUnitLabels.forEach(label => label.innerHTML = `(${conductivityLabelText})`);
                foulingUnitLabels.forEach(label => label.innerHTML = `(${foulingLabelText})`);

                // Update unit system dropdown options
                unitSystemSelect.options[0].innerHTML = `Metric (m, °C, W)`;
                unitSystemSelect.options[1].innerHTML = `Imperial (ft, °F, BTU/h)`;

                // Update jacket inner diameter based on vessel outer diameter
                const vesselInnerDia = parseFloat(vesselInnerDiaInput.value);
                const vesselWallThickness = parseFloat(vesselWallThicknessInput.value);
                if (!isNaN(vesselInnerDia) && !isNaN(vesselWallThickness)) {
                    let vesselOuterDia = vesselInnerDia + 2 * vesselWallThickness;
                    jacketInnerDiaInput.value = vesselOuterDia.toFixed(3);
                } else {
                    jacketInnerDiaInput.value = '';
                }
            }
            
            unitSystemSelect.addEventListener('change', updateUI);
            vesselInnerDiaInput.addEventListener('input', updateUI);
            vesselWallThicknessInput.addEventListener('input', updateUI);
            updateUI(); // Initial UI update

            calculateBtn.addEventListener('click', function() {
                const unitSystem = unitSystemSelect.value;
                const flowArrangement = flowArrangementSelect.value;

                let D_vessel_i = parseFloat(vesselInnerDiaInput.value);
                let t_wall = parseFloat(vesselWallThicknessInput.value);
                let D_jacket_o = parseFloat(jacketOuterDiaInput.value);
                let L_vessel = parseFloat(vesselStraightLengthInput.value);
                
                let T_process_in = parseFloat(processFluidTempInInput.value);
                let T_process_out = parseFloat(processFluidTempOutInput.value);
                let T_jacket_in = parseFloat(jacketFluidTempInInput.value);
                let T_jacket_out = parseFloat(jacketFluidTempOutInput.value);

                let h_process = parseFloat(hProcessInput.value);
                let h_jacket = parseFloat(hJacketInput.value);
                let k_wall = parseFloat(kWallInput.value);
                let R_f_process = parseFloat(rfProcessInput.value);
                let R_f_jacket = parseFloat(rfJacketInput.value);

                // Input validation
                const inputs = [D_vessel_i, t_wall, D_jacket_o, L_vessel, T_process_in, T_process_out, T_jacket_in, T_jacket_out, h_process, h_jacket, k_wall, R_f_process, R_f_jacket];
                for (let i = 0; i < inputs.length; i++) {
                    if (isNaN(inputs[i]) || inputs[i] < 0) { // Allow 0 for fouling factors
                        displayMessage("Please enter valid non-negative numbers for all fields. Diameters, thickness, length, and convection/conductivity coefficients must be positive.", "error");
                        return;
                    }
                    if ((i < 9) && inputs[i] === 0) { // Diameters, thickness, length, h values, k_wall must be positive
                        displayMessage("Inputs like diameters, thickness, length, and convection/conductivity coefficients cannot be zero.", "error");
                        return;
                    }
                }
                
                // Temperature validation for LMTD calculation
                const deltaT1_cc = T_process_in - T_jacket_out; // Counter-current Delta T1
                const deltaT2_cc = T_process_out - T_jacket_in; // Counter-current Delta T2

                const deltaT1_co = T_process_in - T_jacket_in; // Co-current Delta T1
                const deltaT2_co = T_process_out - T_jacket_out; // Co-current Delta T2

                if (Math.abs(deltaT1_cc) < 0.001 || Math.abs(deltaT2_cc) < 0.001 || Math.abs(deltaT1_co) < 0.001 || Math.abs(deltaT2_co) < 0.001) {
                    displayMessage("Temperature differences for LMTD calculation are too small, which can lead to inaccuracies or division by zero. Ensure significant temperature changes.", "warning");
                }

                // Check for temperature cross-over for counter-current flow (T_jacket_in should not be > T_process_out for heating, or T_jacket_in < T_process_out for cooling)
                // Simplified check: If one fluid is heating and the other cooling, check for logical flow paths.
                const processDelta = T_process_out - T_process_in;
                const jacketDelta = T_jacket_out - T_jacket_in;

                // Determine if heating or cooling is occurring
                const isHeatingProcess = processDelta > 0;
                const isCoolingProcess = processDelta < 0;
                const isHeatingJacket = jacketDelta > 0;
                const isCoolingJacket = jacketDelta < 0;

                // Simplified check for logical temperature gradients
                if (isHeatingProcess && isCoolingJacket && (T_process_out < T_jacket_in || T_jacket_out > T_process_in)) {
                    displayMessage("Temperatures indicate a potential cross-over for heating/cooling, which is impossible or highly inefficient in counter-current flow. Please check your inlet/outlet temperatures.", "error");
                    return;
                }
                 if (isCoolingProcess && isHeatingJacket && (T_process_out > T_jacket_in || T_jacket_out < T_process_in)) {
                    displayMessage("Temperatures indicate a potential cross-over for heating/cooling, which is impossible or highly inefficient in counter-current flow. Please check your inlet/outlet temperatures.", "error");
                    return;
                }
                
                let D_vessel_i_si, t_wall_si, D_jacket_o_si, L_vessel_si;
                let T_process_in_K, T_process_out_K, T_jacket_in_K, T_jacket_out_K;
                let h_process_si, h_jacket_si, k_wall_si, R_f_process_si, R_f_jacket_si;
                let Q_display_unit, U_display_unit;

                // Convert to SI units for calculation
                if (unitSystem === 'imperial') {
                    D_vessel_i_si = D_vessel_i * 0.3048; // ft to m
                    t_wall_si = t_wall * 0.3048; // ft to m
                    D_jacket_o_si = D_jacket_o * 0.3048; // ft to m
                    L_vessel_si = L_vessel * 0.3048; // ft to m
                    
                    T_process_in_K = (T_process_in - 32) * 5/9 + 273.15; // °F to K
                    T_process_out_K = (T_process_out - 32) * 5/9 + 273.15; // °F to K
                    T_jacket_in_K = (T_jacket_in - 32) * 5/9 + 273.15; // °F to K
                    T_jacket_out_K = (T_jacket_out - 32) * 5/9 + 273.15; // °F to K

                    h_process_si = h_process * 5.67826; // BTU/h ft²°F to W/m²°C
                    h_jacket_si = h_jacket * 5.67826; // BTU/h ft²°F to W/m²°C
                    k_wall_si = k_wall * 1.730735; // BTU/h ft°F to W/mK
                    R_f_process_si = R_f_process / 5.67826; // h ft²°F/BTU to m²°C/W
                    R_f_jacket_si = R_f_jacket / 5.67826; // h ft²°F/BTU to m²°C/W
                    Q_display_unit = 'BTU/h';
                    U_display_unit = 'BTU/h ft²°F';
                    displayMessage("Imperial units are converted to Metric for calculations. Results will be converted back.", "info");
                } else { // Metric (already SI units for calculation)
                    D_vessel_i_si = D_vessel_i;
                    t_wall_si = t_wall;
                    D_jacket_o_si = D_jacket_o;
                    L_vessel_si = L_vessel;

                    T_process_in_K = T_process_in + 273.15;
                    T_process_out_K = T_process_out + 273.15;
                    T_jacket_in_K = T_jacket_in + 273.15;
                    T_jacket_out_K = T_jacket_out + 273.15;

                    h_process_si = h_process;
                    h_jacket_si = h_jacket;
                    k_wall_si = k_wall;
                    R_f_process_si = R_f_process;
                    R_f_jacket_si = R_f_jacket;
                    Q_display_unit = 'W';
                    U_display_unit = 'W/m²°C';
                }

                // Calculate derived diameters/radii
                const D_vessel_o_si = D_vessel_i_si + 2 * t_wall_si; // Outer diameter of inner vessel = Inner diameter of jacket
                const r_vessel_i_si = D_vessel_i_si / 2;
                const r_vessel_o_si = D_vessel_o_si / 2;
                // const r_jacket_o_si = D_jacket_o_si / 2; // Not directly used in U calculation beyond providing D_jacket_o_si

                // Reference Area (outer surface area of the inner vessel wall)
                const A_o_ref = Math.PI * D_vessel_o_si * L_vessel_si; // m²

                if (D_vessel_i_si >= D_vessel_o_si) {
                    displayMessage("Vessel inner diameter must be less than vessel outer diameter.", "error");
                    return;
                }
                if (D_vessel_o_si >= D_jacket_o_si) {
                    displayMessage("Jacket outer diameter must be greater than vessel outer diameter (or equal if jacket thickness is zero).", "error");
                    return;
                }
                
                let calculationHtml = '<h4>Detailed Calculation Steps:</h4>';
                calculationHtml += `<p><strong>1. Input Parameters (Converted to SI Units):</strong></p>`;
                calculationHtml += `<ul>
                    <li>Vessel Inner Diameter (D<sub>i</sub>): ${D_vessel_i_si.toFixed(4)} m</li>
                    <li>Vessel Wall Thickness (t<sub>w</sub>): ${t_wall_si.toFixed(4)} m</li>
                    <li>Jacket Outer Diameter (D<sub>jacket,o</sub>): ${D_jacket_o_si.toFixed(4)} m</li>
                    <li>Vessel Straight Side Length (L): ${L_vessel_si.toFixed(2)} m</li>
                    <li>Process Fluid Inlet Temperature (T<sub>process,in</sub>): ${T_process_in_K.toFixed(2)} K</li>
                    <li>Process Fluid Outlet Temperature (T<sub>process,out</sub>): ${T_process_out_K.toFixed(2)} K</li>
                    <li>Jacket Fluid Inlet Temperature (T<sub>jacket,in</sub>): ${T_jacket_in_K.toFixed(2)} K</li>
                    <li>Jacket Fluid Outlet Temperature (T<sub>jacket,out</sub>): ${T_jacket_out_K.toFixed(2)} K</li>
                    <li>Process Side Convection Coefficient (h<sub>process</sub>): ${h_process_si.toFixed(2)} W/m²°C</li>
                    <li>Jacket Side Convection Coefficient (h<sub>jacket</sub>): ${h_jacket_si.toFixed(2)} W/m²°C</li>
                    <li>Vessel Wall Thermal Conductivity (k<sub>wall</sub>): ${k_wall_si.toFixed(2)} W/mK</li>
                    <li>Process Side Fouling Factor (R<sub>f,process</sub>): ${R_f_process_si.toExponential(2)} m²°C/W</li>
                    <li>Jacket Side Fouling Factor (R<sub>f,jacket</sub>): ${R_f_jacket_si.toExponential(2)} m²°C/W</li>
                </ul>`;

                calculationHtml += `<p><strong>2. Intermediate Geometrical Calculations:</strong></p>`;
                calculationHtml += `<p class="calculation-step">Vessel Outer Diameter (D<sub>o</sub>, also Jacket Inner Diameter) = D<sub>i</sub> + 2 * t<sub>w</sub> = ${D_vessel_i_si.toFixed(4)} + 2 * ${t_wall_si.toFixed(4)} = ${D_vessel_o_si.toFixed(4)} m</p>`;
                calculationHtml += `<p class="calculation-step">Vessel Inner Radius (r<sub>i</sub>) = D<sub>i</sub> / 2 = ${r_vessel_i_si.toFixed(4)} m</p>`;
                calculationHtml += `<p class="calculation-step">Vessel Outer Radius (r<sub>o</sub>) = D<sub>o</sub> / 2 = ${r_vessel_o_si.toFixed(4)} m</p>`;
                calculationHtml += `<p class="calculation-step">Reference Heat Transfer Area (A<sub>o</sub>) = \\(\\pi \\times D_o \\times L\\) = \\(\\pi \\times ${D_vessel_o_si.toFixed(4)} \\times ${L_vessel_si.toFixed(2)}\\) = ${A_o_ref.toFixed(2)} m²</p>`;

                // Calculate individual thermal resistances per unit of reference area (A_o_ref)
                calculationHtml += `<p><strong>3. Calculate Individual Thermal Resistances (per unit of reference area A<sub>o</sub>):</strong></p>`;

                const R_1_conv_process = (1 / h_process_si) * (D_vessel_o_si / D_vessel_i_si);
                calculationHtml += `<p class="calculation-step">Inner Process Convection Resistance (R<sub>conv,process</sub>) = \\(\\frac{1}{h_{process}} \\frac{D_o}{D_i}\\) = \\(\\frac{1}{${h_process_si.toFixed(2)}} \\frac{${D_vessel_o_si.toFixed(4)}}{${D_vessel_i_si.toFixed(4)}}\\) = ${R_1_conv_process.toExponential(2)} m²°C/W</p>`;

                const R_2_f_process = R_f_process_si * (D_vessel_o_si / D_vessel_i_si);
                calculationHtml += `<p class="calculation-step">Inner Process Fouling Resistance (R<sub>f,process</sub>) = \\(R_{f,process,given} \\frac{D_o}{D_i}\\) = \\(${R_f_process_si.toExponential(2)} \\frac{${D_vessel_o_si.toFixed(4)}}{${D_vessel_i_si.toFixed(4)}}\\) = ${R_2_f_process.toExponential(2)} m²°C/W</p>`;
                
                const R_3_wall_cond = (r_vessel_o_si * Math.log(r_vessel_o_si / r_vessel_i_si)) / k_wall_si;
                calculationHtml += `<p class="calculation-step">Vessel Wall Conduction Resistance (R<sub>wall,cond</sub>) = \\(\\frac{r_o \\ln(r_o/r_i)}{k_{wall}}\\) = \\(\\frac{${r_vessel_o_si.toFixed(4)} \\ln(${r_vessel_o_si.toFixed(4)}/${r_vessel_i_si.toFixed(4)})}{${k_wall_si.toFixed(2)}}\\) = ${R_3_wall_cond.toExponential(2)} m²°C/W</p>`;

                const R_4_f_jacket = R_f_jacket_si; // Fouling on inner side of jacket (outer side of vessel wall)
                calculationHtml += `<p class="calculation-step">Jacket Side Fouling Resistance (R<sub>f,jacket</sub>) = ${R_4_f_jacket.toExponential(2)} m²°C/W</p>`;

                const R_5_conv_jacket = 1 / h_jacket_si; // Convection on inner side of jacket (outer side of vessel wall)
                calculationHtml += `<p class="calculation-step">Jacket Convection Resistance (R<sub>conv,jacket</sub>) = \\(\\frac{1}{h_{jacket}}\\) = \\(\\frac{1}{${h_jacket_si.toFixed(2)}}\\) = ${R_5_conv_jacket.toExponential(2)} m²°C/W</p>`;

                // Calculate total thermal resistance per unit reference area
                const R_total_per_area_si = R_1_conv_process + R_2_f_process + R_3_wall_cond + R_4_f_jacket + R_5_conv_jacket;
                calculationHtml += `<p><strong>4. Calculate Total Thermal Resistance (per unit reference area):</strong></p>`;
                calculationHtml += `<p class="formula">
                    \\( \\frac{1}{U_{o}} = R_{total,per\_area} = R_{conv,process} + R_{f,process} + R_{wall,cond} + R_{f,jacket} + R_{conv,jacket} \\)
                </p>`;
                calculationHtml += `<p class="calculation-step">
                    \\( R_{total,per\_area} \\) = ${R_1_conv_process.toExponential(2)} + ${R_2_f_process.toExponential(2)} + ${R_3_wall_cond.toExponential(2)} + ${R_4_f_jacket.toExponential(2)} + ${R_5_conv_jacket.toExponential(2)} = ${R_total_per_area_si.toExponential(2)} m²°C/W
                </p>`;

                // Calculate Overall Heat Transfer Coefficient (U)
                let U_value_si = 1 / R_total_per_area_si;
                calculationHtml += `<p><strong>5. Calculate Overall Heat Transfer Coefficient (U<sub>o</sub>):</strong></p>`;
                calculationHtml += `<p class="formula">
                    \\( U_{o} = \\frac{1}{R_{total,per\_area}} \\)
                </p>`;
                calculationHtml += `<p class="calculation-step">
                    \\( U_{o} \\) = \\(\\frac{1}{${R_total_per_area_si.toExponential(2)}}\\) = ${U_value_si.toFixed(2)} W/m²°C
                </p>`;

                // Calculate LMTD
                let deltaT_A, deltaT_B;
                if (flowArrangement === 'counter-current') {
                    deltaT_A = T_process_in_K - T_jacket_out_K;
                    deltaT_B = T_process_out_K - T_jacket_in_K;
                } else { // Co-current
                    deltaT_A = T_process_in_K - T_jacket_in_K;
                    deltaT_B = T_process_out_K - T_jacket_out_K;
                }

                let LMTD;
                if (Math.abs(deltaT_A - deltaT_B) < 0.001) { // Check if deltaT_A and deltaT_B are nearly equal
                    LMTD = (deltaT_A + deltaT_B) / 2; // Use arithmetic mean if logs are problematic
                    calculationHtml += `<p class="calculation-step">Since \\(\\Delta T_A \\approx \\Delta T_B\\), LMTD is approximated by the arithmetic mean.</p>`;
                } else if (deltaT_A <= 0 || deltaT_B <= 0) {
                     LMTD = 0; // Or handle as error
                     displayMessage("LMTD calculation resulted in zero or negative values. This might indicate incorrect temperature inputs or an impossible heat transfer scenario. Ensure proper temperature gradients for the selected flow arrangement.", "error");
                     return;
                }
                 else {
                    LMTD = (deltaT_A - deltaT_B) / Math.log(deltaT_A / deltaT_B);
                }

                calculationHtml += `<p><strong>6. Calculate Log Mean Temperature Difference (LMTD):</strong></p>`;
                calculationHtml += `<p class="calculation-step">Flow Arrangement: ${flowArrangement.replace('-', ' ').replace(/\b\w/g, char => char.toUpperCase())}</p>`;
                calculationHtml += `<p class="formula">
                    \\( LMTD = \\frac{\\Delta T_A - \\Delta T_B}{\\ln(\\Delta T_A / \\Delta T_B)} \\)
                </p>`;
                calculationHtml += `<p class="calculation-step">
                    \\( \\Delta T_A \\) = ${flowArrangement === 'counter-current' ? 'T<sub>process,in</sub> - T<sub>jacket,out</sub>' : 'T<sub>process,in</sub> - T<sub>jacket,in</sub>'} = ${deltaT_A.toFixed(2)} K
                </p>`;
                calculationHtml += `<p class="calculation-step">
                    \\( \\Delta T_B \\) = ${flowArrangement === 'counter-current' ? 'T<sub>process,out</sub> - T<sub>jacket,in</sub>' : 'T<sub>process,out</sub> - T<sub>jacket,out</sub>'} = ${deltaT_B.toFixed(2)} K
                </p>`;
                calculationHtml += `<p class="calculation-step">
                    LMTD = ${LMTD.toFixed(2)} K
                </p>`;


                // Calculate total heat transfer rate (Q)
                let Q_total_si = U_value_si * A_o_ref * LMTD;
                calculationHtml += `<p><strong>7. Calculate Total Heat Transfer Rate (Q):</strong></p>`;
                calculationHtml += `<p class="formula">
                    \\( Q = U_o \\times A_o \\times LMTD \\)
                </p>`;
                calculationHtml += `<p class="calculation-step">
                    \\( Q \\) = ${U_value_si.toFixed(2)} \\times ${A_o_ref.toFixed(2)} \\times ${LMTD.toFixed(2)} = ${Q_total_si.toFixed(2)} W
                </p>`;

                // Convert Q and U back to original unit system for display
                let displayQ, displayU, displayLMTD;

                if (unitSystem === 'imperial') {
                    displayQ = Q_total_si * 3.41214; // Watts to BTU/h
                    displayU = U_value_si / 5.67826; // W/m^2 °C to BTU/h ft^2 °F
                    displayLMTD = LMTD * 9/5; // K to °F (temp diff)
                } else {
                    displayQ = Q_total_si;
                    displayU = U_value_si;
                    displayLMTD = LMTD; // K or °C (temp diff)
                }

                calculationDetailsDiv.innerHTML = calculationHtml;
                if (window.MathJax) {
                    window.MathJax.typesetPromise([calculationDetailsDiv]);
                }

                // Populate results table
                resultTableBody.innerHTML = '';
                function addResultRow(parameterHtml, valueHtml) {
                    const row = resultTableBody.insertRow();
                    const paramCell = row.insertCell();
                    const valueCell = row.insertCell();
                    paramCell.innerHTML = parameterHtml;
                    valueCell.innerHTML = valueHtml;
                }

                addResultRow("Unit System", unitSystem === 'imperial' ? 'Imperial' : 'Metric');
                addResultRow("Jacket Type", jacketTypeSelect.value.charAt(0).toUpperCase() + jacketTypeSelect.value.slice(1).replace('-', ' '));
                addResultRow("Flow Arrangement", flowArrangement.charAt(0).toUpperCase() + flowArrangement.slice(1).replace('-', ' '));
                addResultRow("Vessel Inner Diameter", `${D_vessel_i} ${unitSystem === 'imperial' ? 'ft' : 'm'}`);
                addResultRow("Vessel Wall Thickness", `${t_wall} ${unitSystem === 'imperial' ? 'ft' : 'm'}`);
                addResultRow("Jacket Inner Diameter (Vessel Outer)", `${D_vessel_o_si.toFixed(4)} m (${(D_vessel_o_si / (unitSystem === 'imperial' ? 0.3048 : 1)).toFixed(4)} ${unitSystem === 'imperial' ? 'ft' : 'm'})`);
                addResultRow("Jacket Outer Diameter", `${D_jacket_o} ${unitSystem === 'imperial' ? 'ft' : 'm'}`);
                addResultRow("Vessel Straight Side Length", `${L_vessel} ${unitSystem === 'imperial' ? 'ft' : 'm'}`);
                addResultRow("Process Fluid Inlet Temperature", `${T_process_in} ${unitSystem === 'imperial' ? '°F' : '°C'}`);
                addResultRow("Process Fluid Outlet Temperature", `${T_process_out} ${unitSystem === 'imperial' ? '°F' : '°C'}`);
                addResultRow("Jacket Fluid Inlet Temperature", `${T_jacket_in} ${unitSystem === 'imperial' ? '°F' : '°C'}`);
                addResultRow("Jacket Fluid Outlet Temperature", `${T_jacket_out} ${unitSystem === 'imperial' ? '°F' : '°C'}`);
                addResultRow("Process Side Convection Coeff (h<sub>process</sub>)", `${h_process} ${unitSystem === 'imperial' ? 'BTU/h ft²°F' : 'W/m²°C'}`);
                addResultRow("Jacket Side Convection Coeff (h<sub>jacket</sub>)", `${h_jacket} ${unitSystem === 'imperial' ? 'BTU/h ft²°F' : 'W/m²°C'}`);
                addResultRow("Vessel Wall Thermal Conductivity (k<sub>wall</sub>)", `${k_wall} ${unitSystem === 'imperial' ? 'BTU/h ft°F' : 'W/mK'}`);
                addResultRow("Process Side Fouling Factor (R<sub>f,process</sub>)", `${R_f_process} ${unitSystem === 'imperial' ? 'h ft²°F/BTU' : 'm²°C/W'}`);
                addResultRow("Jacket Side Fouling Factor (R<sub>f,jacket</sub>)", `${R_f_jacket} ${unitSystem === 'imperial' ? 'h ft²°F/BTU' : 'm²°C/W'}`);
                
                addResultRow("Reference Heat Transfer Area (A<sub>o</sub>)", `<strong>${(unitSystem === 'imperial' ? A_o_ref / Math.pow(0.3048, 2) : A_o_ref).toFixed(2)} ${unitSystem === 'imperial' ? 'ft²' : 'm²'}</strong>`);
                addResultRow(`Log Mean Temperature Difference (LMTD)`, `<strong>${displayLMTD.toFixed(2)} ${unitSystem === 'imperial' ? '°F' : '°C'}</strong>`);
                addResultRow(`Overall Heat Transfer Coefficient (U<sub>o</sub>)`, `<strong>${displayU.toFixed(2)} ${U_display_unit}</strong>`);
                addResultRow(`Total Heat Transfer Rate (Q)`, `<strong>${displayQ.toFixed(2)} ${Q_display_unit}</strong>`);

                if (window.MathJax) {
                    window.MathJax.typesetPromise([resultTableBody]);
                }

                standardReference.innerHTML = "Heat transfer calculations for jacketed vessels are critical in chemical, pharmaceutical, and food processing industries. The accuracy heavily depends on realistic values for convection coefficients and fouling factors, which are often determined empirically or from detailed correlations based on fluid properties, flow patterns, and agitation. Key standards and references include: <ul><li><strong>TEMA (Tubular Exchanger Manufacturers Association) Standards</strong>: Provides comprehensive guidelines for heat exchanger design, including widely accepted values for fouling factors.</li><li><strong>ASME Boiler and Pressure Vessel Code</strong>: Governs the design, fabrication, and inspection of pressure vessels, including safety and integrity requirements for jacketed vessels.</li><li><strong>API (American Petroleum Institute) Standards</strong>: Relevant for equipment in the oil and gas industry.</li><li>Textbooks such as <strong>Kern, D. Q., 'Process Heat Transfer'</strong>, <strong>Coulson & Richardson's Chemical Engineering, Vol. 6: Chemical Engineering Design</strong>, and <strong>Perry's Chemical Engineers' Handbook</strong> are essential resources providing correlations and design methodologies.</li></ul>Always ensure compliance with applicable industry codes and regulations for actual engineering design.";

                resultContainer.style.display = 'block';
                setTimeout(() => {
                    resultContainer.classList.add('show');
                }, 10);
                resultContainer.scrollIntoView({ behavior: 'smooth' });
                displayMessage("Calculation completed successfully!", "info");
            });

            const themeSwitch = document.getElementById('theme-switch');
            if (themeSwitch) {
                if (localStorage.getItem('theme') === 'dark') {
                    document.body.classList.add('dark-mode');
                    themeSwitch.checked = true;
                }
                themeSwitch.addEventListener('change', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.body.classList.remove('dark-mode');
                        localStorage.setItem('theme', 'light');
                    }
                });
            }
        });
    </script>
</body>

</html>

